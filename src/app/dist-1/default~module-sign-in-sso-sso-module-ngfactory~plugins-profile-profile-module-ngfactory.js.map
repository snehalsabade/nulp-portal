{"version":3,"sources":["./src/app/modules/shared-feature/components/otp-popup/otp-popup.component.html","./src/app/modules/shared-feature/components/otp-popup/otp-popup.component.ts"],"names":[],"mappings":"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","file":"default~module-sign-in-sso-sso-module-ngfactory~plugins-profile-profile-module-ngfactory.js","sourcesContent":["<!--Content-->\n<div class=\"sb-mat__modal__content\">\n  <div class=\"container-wrapper\">\n    <div class=\"d-flex flex-jc-center\">\n      <img class=\"image centered\" alt={{tenantName}} height=\"45\" src=\"{{logo}}\">\n    </div>\n      <div class=\"mt-20\">\n        <p *ngIf=\"!disableResendButton\" class=\"line-height-1-3 grey text text-center mb-24\">{{otpData?.instructions}}</p>\n        <div *ngIf=\"disableResendButton\" class=\"grey text fs-1 text-center mb-30 line-height-1-3\">{{otpData?.retryMessage}}<br><span\n            (click)=\"redirectToParentComponent()\" class=\"fs-1 blue text font-weight-bold cursor-pointer\" role=\"button\" tabindex=\"0\">{{resourceService?.frmelmnts?.lbl?.clickHere}}</span>\n          {{resourceService?.frmelmnts?.lbl?.toTryAgain}}</div>\n        <div class=\"fs-1 font-weight-bold text-center mb-16\">{{resourceService?.frmelmnts?.lbl?.enterOTP}}</div>\n        <form class=\"sb-form borderd mb-16\" [formGroup]=\"otpForm\">\n          <label *ngIf=\"errorMessage\" class=\"sb-text-error d-inline-block line-height-1-3\">{{errorMessage  | interpolate: '{remainingAttempt}': remainingAttempt}}</label>\n          <label *ngIf=\"infoMessage\" class=\"text-center mb-10 d-inline-block line-height-1-3\">{{infoMessage}}</label>\n          <div class=\"sb-field\">\n            <input class=\"sb-form-control text-center\" [ngClass]=\"{'orange-border': errorMessage}\" formControlName=\"otp\" type=\"text\" name=\"otp\">\n          </div>\n        </form>\n        <div appTelemetryInteract [telemetryInteractObject]=\"telemetryInteractObject\" \n        [telemetryInteractEdata]=\"resendOtpInteractEdata\" [ngClass]=\"{'grey cursor-pointerText': !enableResendButton}\" (click)=\"resendOTP(); disableResendButton = true\" class=\"fs-1 text-center blue text mb-30 cursor-pointer\"\n          role=\"button\" tabindex=\"0\">{{resendOTPbtn}}</div>\n      </div>\n  </div>\n</div>\n<!--/Content-->\n\n<!--Actions-->\n<div class=\"sb-mat__modal__actions flex-jc-center\">\n  <button appTelemetryInteract [telemetryInteractObject]=\"telemetryInteractObject\"\n  [telemetryInteractEdata]=\"submitInteractEdata\"\n    [ngClass]=\"{'sb-btn-disabled':!enableSubmitBtn}\" \n    class=\"sb-btn sb-btn-normal sb-btn-primary\" tabindex=\"0\"\n    (click)=\"verifyOTP()\">{{resourceService?.frmelmnts?.lbl?.submitOTP}}</button>\n</div>\n<!--/Actions-->\n","import { Component, OnInit, Input, Output, EventEmitter, OnDestroy } from '@angular/core';\nimport {ResourceService, ServerResponse, UtilService, ConfigService, ToasterService} from '@sunbird/shared';\nimport { Validators, FormGroup, FormControl } from '@angular/forms';\nimport * as _ from 'lodash-es';\nimport { DeviceDetectorService } from 'ngx-device-detector';\nimport { Subscription, Subject } from 'rxjs';\nimport { TenantService, OtpService, UserService } from '@sunbird/core';\nimport { IInteractEventObject, IInteractEventEdata } from '@sunbird/telemetry';\n\n@Component({\n  selector: 'app-otp-popup',\n  templateUrl: './otp-popup.component.html',\n  styleUrls: ['./otp-popup.component.scss']\n})\nexport class OtpPopupComponent implements OnInit, OnDestroy {\n\n  @Input() otpData: any;\n  @Input() redirectToLogin: boolean;\n  @Output() redirectToParent = new EventEmitter();\n  @Output() verificationSuccess = new EventEmitter();\n  @Output() closeContactForm = new EventEmitter();\n  public unsubscribe = new Subject<void>();\n  otpForm: FormGroup;\n  enableSubmitBtn = false;\n  errorMessage: string;\n  infoMessage: string;\n  disableResendButton = false;\n  enableResendButton = false;\n  tenantDataSubscription: Subscription;\n  resendOTPbtn;\n  counter;\n  resendOtpCounter = 0;\n  maxResendTry = 4;\n  logo: string;\n  tenantName: string;\n  submitInteractEdata: IInteractEventEdata;\n  resendOtpInteractEdata: IInteractEventEdata;\n  telemetryInteractObject: IInteractEventObject;\n  remainingAttempt: 'string';\n  constructor(public resourceService: ResourceService, public tenantService: TenantService,\n              public deviceDetectorService: DeviceDetectorService, public otpService: OtpService, public userService: UserService,\n              public utilService: UtilService, public configService: ConfigService,\n              public toasterService: ToasterService) {\n  }\n\n  ngOnInit() {\n    this.tenantDataSubscription = this.tenantService.tenantData$.subscribe(\n      data => {\n        if (data && !data.err) {\n          this.logo = data.tenantData.logo;\n          this.tenantName = data.tenantData.titleName;\n        }\n      }\n    );\n\n    this.otpForm = new FormGroup({\n      otp: new FormControl('', [Validators.required])\n    });\n   this.resendOtpEnablePostTimer();\n    this.enableSubmitButton();\n    this.setInteractEventData();\n  }\n\n  resendOtpEnablePostTimer() {\n    this.counter = 20;\n    this.disableResendButton = false;\n    this.enableResendButton = false;\n    setTimeout(() => {\n      this.enableResendButton = true;\n    }, 22000);\n    const interval = setInterval(() => {\n      this.resendOTPbtn = this.resourceService.frmelmnts.lbl.resendOTP + ' (' + this.counter + ')';\n      this.counter--;\n      if (this.counter < 0) {\n        this.resendOTPbtn = this.resourceService.frmelmnts.lbl.resendOTP;\n        clearInterval(interval);\n      }\n    }, 1000);\n  }\n\n\n  verifyOTP() {\n    const wrongOTPMessage = this.otpData.type === 'phone' ? this.resourceService.frmelmnts.lbl.wrongPhoneOTP :\n    this.resourceService.frmelmnts.lbl.wrongEmailOTP;\n    this.enableSubmitBtn = false;\n    const request = {\n      'request': {\n        'key': this.otpData.value,\n        'type': this.otpData.type,\n        'otp': this.otpForm.controls.otp.value,\n        ...( this.otpData.value && this.otpData.value.match(/(([a-z]|[A-Z])+[*]{1,}([a-z]*[A-Z]*[0-9]*)*@)|([*]{1,})+/g) &&\n        { 'userId': this.userService.userid })\n      }\n    };\n    this.otpService.verifyOTP(request).subscribe(\n      (data: ServerResponse) => {\n        this.infoMessage = '';\n        this.errorMessage = '';\n        let emitData = {};\n        if (this.otpData.type === 'phone') {\n          emitData = {'phone': this.otpData.value, 'phoneVerified': true};\n        } else if (this.otpData.type === 'email') {\n          emitData = {'email': this.otpData.value, 'emailVerified': true};\n        }\n        this.verificationSuccess.emit(emitData);\n      },\n      (err) => {\n        if (_.get(err, 'error.result.remainingAttempt') === 0) {\n          if (this.redirectToLogin) {\n            this.utilService.redirectToLogin(this.resourceService.messages.emsg.m0050);\n          } else {\n            this.toasterService.error(this.resourceService.messages.emsg.m0050);\n            this.closeContactForm.emit('true');\n          }\n        } else {\n          this.otpForm.controls['otp'].setValue('');\n          this.enableSubmitBtn = true;\n          this.infoMessage = '';\n          this.remainingAttempt = _.get(err, 'error.result.remainingAttempt') || 1;\n          this.errorMessage =\n            _.get(err, 'error.params.status') === this.configService.constants.HTTP_STATUS_CODES.OTP_VERIFICATION_FAILED ?\n              _.get(this.resourceService, 'messages.imsg.m0086') : wrongOTPMessage;\n        }\n      }\n    );\n  }\n\n  resendOTP() {\n    this.disableResendButton = false;\n    this.enableResendButton = false;\n    this.resendOtpCounter = this.resendOtpCounter + 1 ;\n    if (this.resendOtpCounter >= this.maxResendTry) {\n      this.disableResendButton = false;\n      this.infoMessage = '';\n      this.errorMessage = this.resourceService.frmelmnts.lbl.OTPresendMaxretryreached;\n      return false;\n    }\n    this.otpForm.controls['otp'].setValue('');\n    const request = {\n      'request': {\n        'key': this.otpData.value,\n        'type': this.otpData.type,\n        ...( this.otpData.value && this.otpData.value.match(/(([a-z]|[A-Z])+[*]{1,}([a-z]*[A-Z]*[0-9]*)*@)|([*]{1,})+/g) &&\n        { userId: this.userService.userid, templateId: this.configService.appConfig.OTPTemplate.updateContactTemplate })\n      }\n    };\n    this.otpService.generateOTP(request).subscribe(\n      (data: ServerResponse) => {\n        this.resendOtpEnablePostTimer();\n        this.errorMessage = '';\n        this.infoMessage = this.resourceService.frmelmnts.lbl.resentOTP;\n      },\n      (err) => {\n        this.infoMessage = '';\n        this.errorMessage = this.resourceService.messages.fmsg.m0051;\n      }\n    );\n  }\n\n  enableSubmitButton() {\n    this.otpForm.valueChanges.subscribe(val => {\n      this.enableSubmitBtn = (this.otpForm.status === 'VALID');\n    });\n  }\n\n  redirectToParentComponent() {\n    this.redirectToParent.emit('true');\n  }\n\n  ngOnDestroy() {\n    if (this.tenantDataSubscription) {\n      this.tenantDataSubscription.unsubscribe();\n    }\n    this.unsubscribe.next();\n    this.unsubscribe.complete();\n  }\n\n  setInteractEventData() {\n    this.submitInteractEdata = {\n      id: 'submit-otp',\n      type: 'click',\n      pageid: 'profile-read'\n    };\n\n    this.resendOtpInteractEdata = {\n      id: 'resend-otp',\n      type: 'click',\n      pageid: 'profile-read'\n    };\n\n    this.telemetryInteractObject = {\n      id: this.userService.userid,\n      type: 'User',\n      ver: '1.0'\n    };\n  }\n}\n"],"sourceRoot":"webpack:///"}