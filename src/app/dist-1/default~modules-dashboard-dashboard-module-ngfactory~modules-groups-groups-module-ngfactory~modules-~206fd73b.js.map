{"version":3,"sources":["./src/app/modules/shared/components/no-result/no-result.component.html","./src/app/modules/discussion/components/access-discussion/access-discussion.component.ts","./src/app/modules/discussion/components/access-discussion/access-discussion.component.html"],"names":[],"mappings":"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","file":"default~modules-dashboard-dashboard-module-ngfactory~modules-groups-groups-module-ngfactory~modules-~206fd73b.js","sourcesContent":["<div class=\"ui grid\">\n    <div class=\"one wide column\"></div>\n    <div class=\"ten wide column\">\n        <div class=\"ui two column centered grid no-result-container\">\n            <div class=\"d-flex flex-dc flex-jc-center flex-ai-center column\">\n                <img alt=\"{{messageText}}\" src=\"{{'assets/images/erroricon.png' | cdnprefixurl}}\">\n                <div class=\"mt-16 no-result-text\">{{messageText}}</div>\n                <!-- <div ng-if=\"messageText\" class=\"no-result-search-text\">{{message}}</div> -->\n                <ng-content></ng-content>\n            </div>\n        </div>\n    </div>\n    <div class=\"one wide column\"></div>\n</div>","import { IFetchForumId } from './../../../groups/interfaces/group';\nimport { Component, Input, OnInit, Output, EventEmitter } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { ToasterService, ResourceService, NavigationHelperService } from '../../../shared/services';\nimport { DiscussionTelemetryService } from '../../../shared/services/discussion-telemetry/discussion-telemetry.service';\nimport * as _ from 'lodash-es';\nimport { UserService } from '../../../core/services';\nimport { CsLibInitializerService } from '../../../../service/CsLibInitializer/cs-lib-initializer.service';\nimport { CsModule } from '@project-sunbird/client-services';\n\n@Component({\n  selector: 'app-access-discussion',\n  templateUrl: './access-discussion.component.html',\n  styleUrls: ['./access-discussion.component.scss']\n})\n\nexport class AccessDiscussionComponent implements OnInit {\n  // TODO : Publishing as a independent npm module by taking the below properties as input\n  // icon, name, context data, output event (click)\n  @Input() fetchForumIdReq: IFetchForumId;\n  @Input() forumIds: Array<number>;\n  @Output() routerData = new EventEmitter();\n  showLoader = false;\n  private discussionCsService: any;\n\n  constructor(\n    private resourceService: ResourceService,\n    private router: Router,\n    private toasterService: ToasterService,\n    private discussionTelemetryService: DiscussionTelemetryService,\n    private navigationHelperService: NavigationHelperService,\n    private userService: UserService,\n    private csLibInitializerService: CsLibInitializerService\n  ) {\n    if (!CsModule.instance.isInitialised) {\n      this.csLibInitializerService.initializeCs();\n    }\n    this.discussionCsService = CsModule.instance.discussionService;\n  }\n\n  /**\n   * @description - It will first check for the forum IDs coming as an input param or not,\n   *                If it is not coming then it will make an api call to get the forum IDs\n   */\n  ngOnInit() {\n    if (!this.forumIds) {\n    this.fetchForumIds();\n    }\n  }\n  /**\n   * @description - fetch all the forumIds attached to a course/group/batch\n   * @param - req as  {identifier: \"\" , type: \"\"}\n   */\n  fetchForumIds() {\n    this.discussionCsService.getForumIds(this.fetchForumIdReq).subscribe(forumDetails => {\n      this.forumIds = _.map(_.get(forumDetails, 'result'), 'cid');\n    }, error => {\n      this.toasterService.error(this.resourceService.messages.emsg.m0005);\n    });\n  }\n\n  /**\n   * @description - register/create the user in nodebb while navigating to discussionForum\n   */\n  navigateToDiscussionForum() {\n    this.showLoader = true;\n    const createUserReq = {\n      username: _.get(this.userService.userProfile, 'userName'),\n      identifier: _.get(this.userService.userProfile, 'userId'),\n    };\n    this.discussionTelemetryService.contextCdata = [\n      {\n        id: this.fetchForumIdReq.identifier.toString(),\n        type: this.fetchForumIdReq.type\n      }\n    ];\n    const event = {\n      context: {\n        cdata: this.discussionTelemetryService.contextCdata,\n        object: {}\n      },\n      edata: {\n        pageid: 'group-details',\n        type: 'CLICK',\n        id: 'forum-click'\n      },\n      eid: 'INTERACT'\n    };\n    this.discussionTelemetryService.logTelemetryEvent(event);\n    this.navigationHelperService.setNavigationUrl({ url: this.router.url });\n    this.discussionCsService.createUser(createUserReq).subscribe((response) => {\n      const routerData = {\n        userId: _.get(response, 'result.userId.uid'),\n        forumIds: this.forumIds\n      };\n      console.log(\"routerData===\",routerData)\n      this.routerData.emit(routerData);\n    }, (error) => {\n      this.showLoader = false;\n      this.toasterService.error(this.resourceService.messages.emsg.m0005);\n    });\n  }\n}\n","<button *ngIf=\"forumIds && forumIds.length > 0\" tabindex=\"0\" (click)=\"navigateToDiscussionForum()\"\n  class=\"sb-btn sb-btn-normal sb-btn-link sb-btn-link-primary sb-left-icon-btn ml-8 sb-btn-icon-fix\" title=\"Forum\">\n  <img src=\"assets/images/forum.svg\" width=\"20px\" class=\"mr-8\"\n    alt=\"{{resourceService?.frmelmnts?.lbl?.discussionForum}}\">\n  {{resourceService?.frmelmnts?.lbl?.discussionForum}}\n</button>\n"],"sourceRoot":"webpack:///"}