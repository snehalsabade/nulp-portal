(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["default~modules-dashboard-dashboard-module-ngfactory~modules-learn-course-consumption-module-ngfactory"],{

/***/ "+7xu":
/*!***************************************************************************************!*\
  !*** ./src/app/modules/dashboard/services/dashboard-utils/dashboard-utils.service.ts ***!
  \***************************************************************************************/
/*! exports provided: DashboardUtilsService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DashboardUtilsService", function() { return DashboardUtilsService; });
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! moment */ "VDUF");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var moment_duration_format__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! moment-duration-format */ "RiPy");
/* harmony import */ var moment_duration_format__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(moment_duration_format__WEBPACK_IMPORTED_MODULE_1__);


var DashboardUtilsService = (function () {
    function DashboardUtilsService() {
    }
    DashboardUtilsService.prototype.secondToMinConversion = function (numericData) {
        numericData.value = +numericData.value;
        var momentFormat = moment__WEBPACK_IMPORTED_MODULE_0__["duration"](numericData.value, 'seconds');
        if (numericData.value < 60) {
            numericData.value = momentFormat.format('s [Second]');
        }
        else if (numericData.value >= 60 && numericData.value <= 3600) {
            numericData.value = momentFormat.format('m [minute]');
        }
        else if (numericData.value >= 3600) {
            numericData.value = momentFormat.format('h [Hour]');
        }
        else {
            return numericData;
        }
        return numericData;
    };
    return DashboardUtilsService;
}());



/***/ }),

/***/ "+F6K":
/*!*************************************************************************!*\
  !*** ./src/app/modules/dashboard/services/download/download.service.ts ***!
  \*************************************************************************/
/*! exports provided: DownloadService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DownloadService", function() { return DownloadService; });
/* harmony import */ var _sunbird_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @sunbird/core */ "q/PB");
/* harmony import */ var _sunbird_shared__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @sunbird/shared */ "btWG");
/* harmony import */ var _dashboard_utils_dashboard_utils_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./../dashboard-utils/dashboard-utils.service */ "+7xu");



var DownloadService = (function () {
    function DownloadService(learner, dashboardUtil, config) {
        this.datasetType = {};
        this.learner = learner;
        this.dashboardUtil = dashboardUtil;
        this.config = config;
        this.datasetType = {
            'ORG_CREATION': config.urlConFig.URLS.DASHBOARD.ORG_CREATION,
            'ORG_CONSUMPTION': config.urlConFig.URLS.DASHBOARD.ORG_CONSUMPTION
        };
    }
    DownloadService.prototype.getReport = function (param) {
        var requestBody = {
            url: this.datasetType[param.dataset] + '/' + param.data.identifier + '/export',
            param: {
                period: param.data.timePeriod,
                format: 'csv'
            }
        };
        return this.learner.get(requestBody);
    };
    return DownloadService;
}());



/***/ }),

/***/ "/031":
/*!***************************************************************************!*\
  !*** ./src/app/modules/dashboard/components/reports/reports.component.ts ***!
  \***************************************************************************/
/*! exports provided: ReportsComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ReportsComponent", function() { return ReportsComponent; });
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/router */ "iInd");
/* harmony import */ var chart_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! chart.js */ "MO+k");
/* harmony import */ var chart_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(chart_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _services_addusser_addusser_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../services/addusser/addusser.service */ "9r3v");



var ReportsComponent = (function () {
    function ReportsComponent(_httpService, router) {
        this._httpService = _httpService;
        this.router = router;
        this.rootName = [];
        this.rootValue = [];
        this.allReportChanelName = [];
        this.userData = new Array();
        this.getAllOrgChartData = new Array();
        this.showUserData = new Array();
        this.results = new Array();
        this.results1 = new Array();
        this.colourList = new Array();
        this.mapChildrenIntoArray = new Array();
        this.abcd = new Array();
        this.aa = new Array();
        this.TeamA = new Array();
        this.TeamB = new Array();
        this.TeamN = new Array();
        this.TeamA1 = new Array();
        this.TeamB1 = new Array();
        this.TeamN1 = new Array();
        this.showUserDataOrg = new Array();
        this.Linechart3 = null;
        this.groupedUserData = new Array();
        this.organizationData = [];
        this.orgName = [];
        this.OrgLength = [];
        this.subOrgActiveData = new Array();
        this.subOrgInActiveData = new Array();
        this.subRootNameArry = new Array();
        this.subOrgLabel = null;
        this.labelRootOrgId = new Array();
        this.rootOrgNameUser = null;
        this.showSubOrgActInActGraph = false;
        this.TeamOrgRootNaN1 = new Array();
    }
    ReportsComponent.prototype.ngOnInit = function () {
        this.ChartTest();
        this.getOrgData(null, null, null, null);
        this.getAllOrgData();
    };
    ReportsComponent.prototype.getAllOrgData = function () {
        var _this = this;
        var tempArray;
        tempArray = {
            "request": {
                "filters": {},
                "limit": 1000,
                "offset": 0
            }
        };
        this._httpService.getSuborgData(tempArray).subscribe(function (res) {
            res.result.response.content.forEach(function (element) {
                _this.getAllOrgChartData.push({ "orgName": element.orgName, "identifier": element.identifier });
            });
        }, function (err) {
        });
    };
    ReportsComponent.prototype.getOrgData = function (orgLabel, orgId, subOrgLabel, channel) {
        var _this = this;
        var tempArray;
        if (subOrgLabel != null) {
            tempArray = {
                'request': {
                    'query': '',
                    'filters': {},
                    "limit": 10000,
                }
            };
        }
        else {
            tempArray = {
                'request': {
                    'query': '',
                    'filters': {
                        "channel": channel
                    },
                    "limit": 10000,
                }
            };
        }
        this.showUserDataOrg = [];
        this.organizationData = [];
        this.subOrg = [];
        this.organizationData = [];
        this._httpService.userSearch(tempArray).subscribe(function (res) {
            _this.userData = res.result.response.content;
            _this.showUserDataOrg = [];
            res.result.response.content.forEach(function (element) {
                if (element.status == 1) {
                    _this.status = 'Active';
                }
                else if (element.status == 0) {
                    _this.status = 'Inactive';
                }
                _this.userOrgLength = element.organisations.length;
                _this.getAllOrgChartData.forEach(function (element1) {
                    if (element1.identifier == orgId) {
                        _this.rootOrgNameUser = element1.orgName;
                    }
                    if (element.organisations.length > 1) {
                        if ((element1.identifier == element.organisations[1].organisationId) && (element.rootOrgId != element.organisations[1].organisationId)) {
                            _this.orgNameUser = element1.orgName;
                            _this.orgTypeUser = 'Sub Organization';
                        }
                        else if (element.rootOrgId == element.organisations[1].organisationId) {
                            _this.orgNameUser = element.organisations[0].orgName;
                            _this.orgTypeUser = 'Sub Organization';
                        }
                    }
                });
                if (element.organisations.length == 1) {
                    _this.orgNameUser = element.organisations[0].orgName;
                    _this.orgTypeUser = 'Root  Organization';
                }
                _this.showUserDataOrg.push({ "orgType": _this.orgTypeUser, "userId": element.id, "uStatus": element.status, "createdDate": element.createdDate, "firstName": element.firstName, "lastName": element.lastName, "email": element.email, "phone": element.phone, "orgLength": element.organisations.length, "orgName": _this.orgNameUser, "status": _this.status, "userOrglengths": _this.userOrgLength });
            });
            _this.groupedUserData = _this.showUserDataOrg.reduce(function (rv, x) {
                (rv[x['orgName']] = rv[x['orgName']] || []).push(x);
                return rv;
            }, {});
            if (subOrgLabel != null) {
                var subOrgVal = void 0;
                subOrgVal = subOrgLabel;
                _this.subOrgDatActiveInactive = _this.groupedUserData[subOrgVal];
                _this.subRootName = subOrgVal;
                _this.subRootNameArry = [];
                _this.subRootNameArry.push(_this.subRootName);
                var activeRecord_1 = 0;
                var inActiveRecord_1 = 0;
                _this.subOrgActiveData = [];
                _this.subOrgInActiveData = [];
                _this.subOrgDatActiveInactive.forEach(function (element) {
                    if (element.uStatus == 1) {
                        activeRecord_1++;
                    }
                    else if (element.uStatus == 0) {
                        inActiveRecord_1++;
                    }
                });
                _this.subOrgActiveData.push(activeRecord_1);
                _this.subOrgInActiveData.push(inActiveRecord_1);
                var Team_A = { label: "Active", data: _this.subOrgActiveData, backgroundColor: "green", borderWidth: 1 };
                var Team_B = { label: "In Active", data: _this.subOrgInActiveData, backgroundColor: "red", borderWidth: 1 };
                var data = {
                    labels: _this.subRootNameArry,
                    datasets: [Team_A, Team_B]
                };
                var options = {
                    title: { display: true, text: "Root/Subroot wise Active And Inactive Users", fontSize: 18, fontColor: "#111" },
                    legend: { display: true },
                    scales: { yAxes: [{ ticks: { min: 0 }, scaleLabel: { display: true, labelString: 'User Count' } }],
                        xAxes: [{ ticks: { min: 0 }, scaleLabel: { display: true, labelString: 'Organization' } }],
                        gridLines: { color: 'blue' },
                        angleLines: { color: 'blue' }
                    }
                };
                _this.Linechart4 = new chart_js__WEBPACK_IMPORTED_MODULE_1__["Chart"]('canvas4', { type: 'bar', data: data, options: options });
            }
            var subOrgList;
            subOrgList = {
                "request": {
                    "filters": {
                        isTenant: false,
                        channel: channel
                    },
                    "limit": 10000,
                    "offset": 0
                }
            };
            _this._httpService.getSuborgData(subOrgList).subscribe(function (res) {
                _this.orgName = [];
                _this.OrgLength = [];
                _this.organizationData = [];
                if (subOrgLabel == null && _this.rootOrgNameUser != null) {
                    if (res.result.response.content.length > 0 || res.result.response.content.length == 0) {
                        _this.subOrg = res.result.response.content;
                        _this.subOrg.push({ "orgName": _this.rootOrgNameUser });
                        _this.orgName = [];
                        _this.OrgLength = [];
                        _this.subOrg.forEach(function (element) {
                            var orgNameVal;
                            orgNameVal = element.orgName;
                            if (_this.groupedUserData[orgNameVal] != undefined) {
                                _this.organizationData.push({ "orgNameVal": orgNameVal, "length": _this.groupedUserData[orgNameVal].length });
                            }
                            else if (_this.groupedUserData[orgNameVal] == undefined) {
                                _this.organizationData.push({ "orgNameVal": orgNameVal, "length": 0 });
                            }
                        });
                        _this.orgName = [];
                        _this.OrgLength = [];
                        _this.organizationData.forEach(function (element) {
                            _this.orgName.push(element.orgNameVal);
                            _this.OrgLength.push(element.length);
                            _this.colourList.push(_this.getRandomColorHex());
                        });
                    }
                    if (_this.Linechart3) {
                        _this.Linechart3.destroy();
                    }
                    _this.Linechart3 = new chart_js__WEBPACK_IMPORTED_MODULE_1__["Chart"]('canvas3', {
                        type: 'bar',
                        data: {
                            labels: _this.orgName,
                            datasets: [{ label: "Count", data: _this.OrgLength, borderColor: '#000', borderWidth: 0, backgroundColor: _this.colourList, }]
                        },
                        options: {
                            title: { display: true, text: "Root/Subroot Organization wise Users", fontSize: 18, fontColor: "#111" },
                            legend: { display: true },
                            scales: {
                                xAxes: [{ scaleLabel: { display: true, labelString: 'Organization' } }],
                                yAxes: [{ scaleLabel: { display: true, labelString: 'User Count' } }],
                            },
                        }
                    });
                }
            }, function (err) {
            });
        });
    };
    ReportsComponent.prototype.ChartTest = function () {
        var _this = this;
        var tempArray;
        tempArray = {
            'request': {
                'query': '',
                'filters': {},
                limit: 10000
            }
        };
        this.showUserData = [];
        this._httpService.userSearch(tempArray).subscribe(function (res) {
            _this.userData = res.result.response.content;
            res.result.response.content.forEach(function (element) {
                if (element.status == 1) {
                    _this.status = 'Active';
                }
                else if (element.status == 0) {
                    _this.status = 'Inactive';
                }
                _this.userOrgLength = element.organisations.length;
                _this.getAllOrgChartData.forEach(function (element1) {
                    if (_this.userOrgLength > 1) {
                        if ((element1.identifier == element.organisations[0].organisationId) && (element.rootOrgId != element.organisations[0].organisationId)) {
                            _this.orgNameUser = element1.orgName;
                        }
                    }
                });
                if (_this.userOrgLength == 1) {
                    _this.orgNameUser = element.organisations[0].orgName;
                }
                _this.showUserData.push({ "userId": element.id, "uStatus": element.status, "createdDate": element.createdDate, "firstName": element.firstName, "lastName": element.lastName, "email": element.email, "phone": element.phone, "orgLength": element.organisations.length, "orgName": _this.orgNameUser, "status": _this.status, "userOrglengths": _this.userOrgLength, "channel": element.channel, "rootOrgId": element.rootOrgId, "rootOrgName": element.rootOrgName });
            });
            _this.results = _this.showUserData.reduce(function (r, a) {
                r[a.channel] = r[a.channel] || [];
                r[a.channel].push(a);
                return r;
            }, Object.create(null));
            var arr = Object.entries(_this.results);
            arr.forEach(function (x) {
                _this.allReportChanelName.push(x[0]);
                _this.rootName.push(x[1][0].rootOrgName);
                _this.aa = x[1];
                _this.rootValue.push(_this.aa.length);
                _this.labelRootOrgId.push(x[1][0].rootOrgId);
                _this.colourList.push(_this.getRandomColorHex());
            });
            _this.Linechart = new chart_js__WEBPACK_IMPORTED_MODULE_1__["Chart"]('canvas', {
                type: 'bar',
                data: {
                    labels: _this.rootName,
                    datasets: [{ label: "Count", minBarLength: 7.5, data: _this.rootValue, borderColor: _this.labelRootOrgId, borderWidth: _this.allReportChanelName, backgroundColor: _this.colourList, }]
                },
                options: {
                    title: { display: true, text: "Aggregated Organization wise Users", fontSize: 18, fontColor: "#111" },
                    legend: { display: true },
                    scales: {
                        xAxes: [{ scaleLabel: { display: true, labelString: 'Organization' } }],
                        yAxes: [{ scaleLabel: { display: true, labelString: 'User Count' } }],
                    },
                }
            });
            _this.mapChildrenIntoArray = [];
            arr.forEach(function (y) {
                _this.TeamN1 = '';
                _this.TeamA1 = [];
                _this.TeamB1 = [];
                _this.TeamN1 = y[0] ? y[0] : '';
                _this.TeamOrgRootNaN1 = y[1][0].rootOrgName ? y[1][0].rootOrgName : '';
                _this.aa = y[1];
                for (var i = 0; i < _this.aa.length; i++) {
                    if (_this.aa[i].uStatus == 0) {
                        _this.TeamB1.push(_this.aa[i]);
                    }
                    else if (_this.aa[i].uStatus == 1) {
                        _this.TeamA1.push(_this.aa[i]);
                    }
                }
                _this.mapChildrenIntoArray.push({ 0: _this.TeamN1, 1: _this.TeamOrgRootNaN1, 2: _this.TeamA1, 3: _this.TeamB1 });
            });
            _this.mapChildrenIntoArray.forEach(function (z) {
                _this.TeamN.push(z[1]);
                _this.teamaLength = z[2];
                _this.TeamA.push(_this.teamaLength.length);
                _this.teambLength = z[3];
                _this.TeamB.push(_this.teambLength.length);
            });
            var Team_A = { label: "Active", data: _this.TeamA, backgroundColor: "green", borderWidth: 1, minBarLength: 7.5 };
            var Team_B = { label: "In Active", data: _this.TeamB, backgroundColor: "red", borderWidth: 1, minBarLength: 7.5 };
            var data = {
                labels: _this.TeamN,
                datasets: [Team_A, Team_B]
            };
            var options = {
                title: { display: true, text: "Aggregated Organization wise Active and Inactive Users", fontSize: 18, fontColor: "#111" },
                legend: { display: true },
                scales: { yAxes: [{ ticks: { min: 0 }, scaleLabel: { display: true, labelString: 'User Count' } }],
                    xAxes: [{ ticks: { min: 0 }, scaleLabel: { display: true, labelString: 'Organization' } }],
                    gridLines: { color: 'blue' },
                    angleLines: { color: 'blue' }
                }
            };
            _this.Linechart1 = new chart_js__WEBPACK_IMPORTED_MODULE_1__["Chart"]('canvas1', { type: 'bar', data: data, options: options });
        });
    };
    ReportsComponent.prototype.getRandomColorHex = function () {
        var color = ["#0000FF"];
        return "blue";
    };
    ReportsComponent.prototype.Multi_Bar1 = function () {
    };
    ReportsComponent.prototype.showData = function (evt) {
        var data = this.Linechart.getElementsAtEvent(evt);
        var activePoint = this.Linechart.getElementAtEvent(evt);
        if (activePoint.length > 0) {
            var clickedDatasetIndex = activePoint[0]._datasetIndex;
            var clickedElementindex = activePoint[0]._index;
            if (activePoint[0].$previousStyle) {
                var filter_data = activePoint[0].$previousStyle.borderColor;
                var filter_chanel = activePoint[0].$previousStyle.borderWidth;
            }
            else {
                var filter_data = activePoint[0]._model.borderColor;
                var filter_chanel = activePoint[0]._model.borderWidth;
            }
            var label = this.Linechart.data.labels[clickedElementindex];
            var value = this.Linechart.data.datasets[clickedDatasetIndex].data[clickedElementindex];
            this.getOrgData(label, filter_data, null, filter_chanel);
            this.showSubOrgActInActGraph = false;
        }
        else {
            this.getOrgData(null, null, null, null);
            this.showSubOrgActInActGraph = false;
        }
    };
    ReportsComponent.prototype.userReportLink = function () {
        this.router.navigate(["dashBoard/reportsdatewise"]);
    };
    ReportsComponent.prototype.dateWiseLineChart = function () {
        this.router.navigate(["dashBoard/organization-report"]);
    };
    ReportsComponent.prototype.showData3 = function (str) {
        var data = this.Linechart3.getElementsAtEvent(str);
        var subOrgLabel;
        if (JSON.stringify(data[0]._model.label)) {
            subOrgLabel = String(JSON.stringify(data[0]._model.label));
            subOrgLabel = subOrgLabel.replace(/^"(.*)"$/, '$1');
            this.showSubOrgActInActGraph = true;
        }
        else {
            subOrgLabel = "";
            this.showSubOrgActInActGraph = true;
        }
        this.getOrgData(null, null, subOrgLabel, null);
    };
    return ReportsComponent;
}());



/***/ }),

/***/ "/sDM":
/*!*****************************************************************************************!*\
  !*** ./src/app/modules/dashboard/components/report-summary/report-summary.component.ts ***!
  \*****************************************************************************************/
/*! exports provided: ReportSummaryComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ReportSummaryComponent", function() { return ReportSummaryComponent; });
/* harmony import */ var _sunbird_shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @sunbird/shared */ "btWG");
/* harmony import */ var _services__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../services */ "gfN8");


var ReportSummaryComponent = (function () {
    function ReportSummaryComponent(reportService, resourceService) {
        this.reportService = reportService;
        this.resourceService = resourceService;
    }
    ReportSummaryComponent.prototype.ngOnInit = function () {
    };
    return ReportSummaryComponent;
}());



/***/ }),

/***/ "2L7u":
/*!*****************************************************************************************************************************!*\
  !*** ./src/app/modules/dashboard/components/course-progress-exhaust/course-progress-exhaust.component.scss.shim.ngstyle.js ***!
  \*****************************************************************************************************************************/
/*! exports provided: styles */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "styles", function() { return styles; });
var styles = [".w-300[_ngcontent-%COMP%] {\n  width: 18.75rem;\n}\n\n.download-file-container[_ngcontent-%COMP%] {\n  background-color: var(--gray-100);\n  height: 3rem;\n}\n\na.download-file[_ngcontent-%COMP%] {\n  text-decoration: underline;\n}\n\n.course-participants-label[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n}\n\n.course-completed[_ngcontent-%COMP%]:last-child {\n  flex: unset;\n}\n\n.download-report.sb-btn.sb-btn-link[_ngcontent-%COMP%]:disabled {\n  background-color: transparent;\n  border: none;\n  color: var(--gray-200);\n}\n\n.info-outline-img[_ngcontent-%COMP%] {\n  background-image: url(/assets/images/info-outline.png);\n  background-size: cover;\n  background-repeat: no-repeat;\n  background-position: center;\n  display: inline-block;\n  width: 0.875rem;\n  height: 0.875rem;\n}\n\n.sb-btn-link[_ngcontent-%COMP%] {\n  font-size: 0.875rem;\n}\n\n  .ui.selection.dropdown {\n  line-height: 1em;\n}\n\n  .ui.search.dropdown.course-dashboard-select > .text {\n  margin: 0.375rem 1rem 0.375rem 0.375rem;\n}\n\n.table-headerDashboard[_ngcontent-%COMP%] {\n  color: var(--primary-color);\n  font-weight: bold;\n}\n\n.CloseButtonFont[_ngcontent-%COMP%] {\n  font-size: 1.5rem !important;\n}\n\n.summary-text[_ngcontent-%COMP%] {\n  font-style: italic;\n  color: var(--gray-200);\n  word-break: break-word;\n}\n\n.progress-content[_ngcontent-%COMP%] {\n  margin-top: 2.25rem;\n}\n\n@media (max-width: 767px) {\n  .progress-content[_ngcontent-%COMP%] {\n    margin-top: 0px;\n  }\n}\n\n.progress-content[_ngcontent-%COMP%]   .progress-report-content[_ngcontent-%COMP%] {\n  height: 4rem;\n  align-items: center;\n}\n\n@media (max-width: 767px) {\n  .progress-content[_ngcontent-%COMP%]   .progress-report-content[_ngcontent-%COMP%] {\n    flex-direction: column;\n    height: auto;\n  }\n}\n\n.progress-content[_ngcontent-%COMP%]   .progress-report-content[_ngcontent-%COMP%]   .report-buttons[_ngcontent-%COMP%] {\n  align-items: flex-end;\n  height: 100%;\n}\n\n@media (max-width: 767px) {\n  .progress-content[_ngcontent-%COMP%]   .progress-report-content[_ngcontent-%COMP%]   .report-buttons[_ngcontent-%COMP%] {\n    flex-direction: column;\n    margin-top: 0.5rem;\n  }\n}\n\n.progress-content[_ngcontent-%COMP%]   .progress-report-content[_ngcontent-%COMP%]   .report-buttons__divider[_ngcontent-%COMP%] {\n  width: 0.0625rem;\n  border-left: 0.0625rem solid #cccccc;\n  height: 2rem;\n  margin: 0 1rem;\n}\n\n@media (max-width: 767px) {\n  .progress-content[_ngcontent-%COMP%]   .progress-report-content[_ngcontent-%COMP%]   .report-buttons__divider[_ngcontent-%COMP%] {\n    display: none;\n  }\n}\n\n.progress-content[_ngcontent-%COMP%]   .current-batch-list[_ngcontent-%COMP%] {\n  overflow: auto;\n}\n\n.update-text[_ngcontent-%COMP%] {\n  font-style: italic;\n  justify-content: flex-end;\n  color: var(--gray-200);\n}\n\n[_nghost-%COMP%]     .ui.grid.scrollable {\n  margin-top: 24px;\n  width: 100%;\n  overflow-y: auto;\n  white-space: nowrap;\n  margin-left: 0rem;\n  margin-right: 0rem;\n}\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbW9kdWxlcy9kYXNoYm9hcmQvY29tcG9uZW50cy9jb3Vyc2UtcHJvZ3Jlc3MtZXhoYXVzdC9jb3Vyc2UtcHJvZ3Jlc3MtZXhoYXVzdC5jb21wb25lbnQuc2NzcyIsInNyYy9hc3NldHMvc3R5bGVzL21peGlucy9fbWVkaWEtcXVlcmllcy5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBO0VBQ0UsZUFBQTtBQURGOztBQUlBO0VBQ0UsaUNBQUE7RUFDQSxZQUFBO0FBREY7O0FBS0U7RUFDRSwwQkFBQTtBQUZKOztBQU1BO0VBQ0UsYUFBQTtFQUNBLHVCQUFBO0VBQ0EsbUJBQUE7RUFDQSxXQUFBO0FBSEY7O0FBTUE7RUFDRSxXQUFBO0FBSEY7O0FBTUE7RUFDRSw2QkFBQTtFQUNBLFlBQUE7RUFDQSxzQkFBQTtBQUhGOztBQU1BO0VBQ0Usc0RBQUE7RUFDQSxzQkFBQTtFQUNBLDRCQUFBO0VBQ0EsMkJBQUE7RUFDQSxxQkFBQTtFQUNBLGVBQUE7RUFDQSxnQkFBQTtBQUhGOztBQU1BO0VBQ0UsbUJBQUE7QUFIRjs7QUFPRTtFQUNFLGdCQUFBO0FBSko7O0FBT0U7RUFDRSx1Q0FBQTtBQUxKOztBQVVBO0VBQ0UsMkJBQUE7RUFDQSxpQkFBQTtBQVBGOztBQVVBO0VBQ0UsNEJBQUE7QUFQRjs7QUFVQTtFQUNFLGtCQUFBO0VBQ0Esc0JBQUE7RUFBd0Isc0JBQUE7QUFOMUI7O0FBU0E7RUFDRSxtQkFBQTtBQU5GOztBQ1hJO0VEZ0JKO0lBSUksZUFBQTtFQUxGO0FBQ0Y7O0FBT0U7RUFDRSxZQUFBO0VBQ0EsbUJBQUE7QUFMSjs7QUNwQkk7RUR1QkY7SUFLSSxzQkFBQTtJQUNBLFlBQUE7RUFKSjtBQUNGOztBQU1JO0VBQ0UscUJBQUE7RUFDQSxZQUFBO0FBSk47O0FDOUJJO0VEZ0NBO0lBS0ksc0JBQUE7SUFDQSxrQkFBQTtFQUhOO0FBQ0Y7O0FBS007RUFDRSxnQkFBQTtFQUNBLG9DQUFBO0VBQ0EsWUFBQTtFQUNBLGNBQUE7QUFIUjs7QUMxQ0k7RUR5Q0U7SUFNSSxhQUFBO0VBRFI7QUFDRjs7QUFNRTtFQUNFLGNBQUE7QUFKSjs7QUFTQTtFQUNFLGtCQUFBO0VBQ0EseUJBQUE7RUFDQSxzQkFBQTtBQU5GOztBQVVFO0VBQ0UsZ0JBQUE7RUFDQSxXQUFBO0VBQ0EsZ0JBQUE7RUFDQSxtQkFBQTtFQUNBLGlCQUFBO0VBQ0Esa0JBQUE7QUFQSiIsImZpbGUiOiJzcmMvYXBwL21vZHVsZXMvZGFzaGJvYXJkL2NvbXBvbmVudHMvY291cnNlLXByb2dyZXNzLWV4aGF1c3QvY291cnNlLXByb2dyZXNzLWV4aGF1c3QuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJAaW1wb3J0IFwibWl4aW5zL21peGluc1wiO1xuXG4udy0zMDAge1xuICB3aWR0aDogY2FsY3VsYXRlUmVtKDMwMHB4KTtcbn1cblxuLmRvd25sb2FkLWZpbGUtY29udGFpbmVyIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tZ3JheS0xMDApO1xuICBoZWlnaHQ6IGNhbGN1bGF0ZVJlbSg0OHB4KTtcbn1cblxuYSB7XG4gICYuZG93bmxvYWQtZmlsZSB7XG4gICAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7XG4gIH1cbn1cblxuLmNvdXJzZS1wYXJ0aWNpcGFudHMtbGFiZWwge1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgd2lkdGg6IDEwMCU7XG59XG5cbi5jb3Vyc2UtY29tcGxldGVkOmxhc3QtY2hpbGQge1xuICBmbGV4OiB1bnNldDtcbn1cblxuLmRvd25sb2FkLXJlcG9ydC5zYi1idG4uc2ItYnRuLWxpbms6ZGlzYWJsZWQge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtcbiAgYm9yZGVyOiBub25lO1xuICBjb2xvcjogdmFyKC0tZ3JheS0yMDApO1xufVxuXG4uaW5mby1vdXRsaW5lLWltZyB7XG4gIGJhY2tncm91bmQtaW1hZ2U6IHVybCgvYXNzZXRzL2ltYWdlcy9pbmZvLW91dGxpbmUucG5nKTtcbiAgYmFja2dyb3VuZC1zaXplOiBjb3ZlcjtcbiAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDtcbiAgYmFja2dyb3VuZC1wb3NpdGlvbjogY2VudGVyO1xuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gIHdpZHRoOiBjYWxjdWxhdGVSZW0oMTRweCk7XG4gIGhlaWdodDogY2FsY3VsYXRlUmVtKDE0cHgpO1xufVxuXG4uc2ItYnRuLWxpbmsge1xuICBmb250LXNpemU6IGNhbGN1bGF0ZVJlbSgxNHB4KTtcbn1cblxuOjpuZy1kZWVwIHtcbiAgLnVpLnNlbGVjdGlvbi5kcm9wZG93biB7XG4gICAgbGluZS1oZWlnaHQ6IDFlbTtcbiAgfVxuXG4gIC51aS5zZWFyY2guZHJvcGRvd24uY291cnNlLWRhc2hib2FyZC1zZWxlY3Q+LnRleHQge1xuICAgIG1hcmdpbjogY2FsY3VsYXRlUmVtKDZweCkgY2FsY3VsYXRlUmVtKDE2cHgpIGNhbGN1bGF0ZVJlbSg2cHgpIGNhbGN1bGF0ZVJlbSg2cHgpO1xuICB9XG5cbn1cblxuLnRhYmxlLWhlYWRlckRhc2hib2FyZCB7XG4gIGNvbG9yOiB2YXIoLS1wcmltYXJ5LWNvbG9yKTtcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XG59XG5cbi5DbG9zZUJ1dHRvbkZvbnQge1xuICBmb250LXNpemU6IDEuNXJlbSAhaW1wb3J0YW50O1xufVxuXG4uc3VtbWFyeS10ZXh0IHtcbiAgZm9udC1zdHlsZTogaXRhbGljO1xuICBjb2xvcjp2YXIoLS1ncmF5LTIwMCk7ICB3b3JkLWJyZWFrOiBicmVhay13b3JkO1xufSBcblxuLnByb2dyZXNzLWNvbnRlbnQge1xuICBtYXJnaW4tdG9wOiBjYWxjdWxhdGVSZW0oMzZweCk7XG5cbiAgQGluY2x1ZGUgcmVzcG9uZC1iZWxvdyhzbSkge1xuICAgIG1hcmdpbi10b3A6IDBweDtcbiAgfVxuXG4gIC5wcm9ncmVzcy1yZXBvcnQtY29udGVudCB7XG4gICAgaGVpZ2h0OiBjYWxjdWxhdGVSZW0oNjRweCk7XG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcblxuICAgIEBpbmNsdWRlIHJlc3BvbmQtYmVsb3coc20pIHtcbiAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICBoZWlnaHQ6IGF1dG87XG4gICAgfVxuXG4gICAgLnJlcG9ydC1idXR0b25zIHtcbiAgICAgIGFsaWduLWl0ZW1zOiBmbGV4LWVuZDtcbiAgICAgIGhlaWdodDogMTAwJTtcblxuICAgICAgQGluY2x1ZGUgcmVzcG9uZC1iZWxvdyhzbSkge1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICBtYXJnaW4tdG9wOiBjYWxjdWxhdGVSZW0oOHB4KTtcbiAgICAgIH1cblxuICAgICAgJl9fZGl2aWRlciB7XG4gICAgICAgIHdpZHRoOiBjYWxjdWxhdGVSZW0oMXB4KTtcbiAgICAgICAgYm9yZGVyLWxlZnQ6IGNhbGN1bGF0ZVJlbSgxcHgpIHNvbGlkICNjY2NjY2M7XG4gICAgICAgIGhlaWdodDogY2FsY3VsYXRlUmVtKDMycHgpO1xuICAgICAgICBtYXJnaW46IDAgY2FsY3VsYXRlUmVtKDE2cHgpO1xuICAgICAgICBAaW5jbHVkZSByZXNwb25kLWJlbG93KHNtKSB7XG4gICAgICAgICAgZGlzcGxheTogbm9uZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC5jdXJyZW50LWJhdGNoLWxpc3Qge1xuICAgIG92ZXJmbG93OiBhdXRvO1xuICB9XG5cbn1cbiBcbi51cGRhdGUtdGV4dCB7XG4gIGZvbnQtc3R5bGU6IGl0YWxpYztcbiAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDtcbiAgY29sb3I6dmFyKC0tZ3JheS0yMDApO1xufVxuXG46aG9zdCA6Om5nLWRlZXAge1xuICAudWkuZ3JpZC5zY3JvbGxhYmxlIHtcbiAgICBtYXJnaW4tdG9wOiAyNHB4O1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIG92ZXJmbG93LXk6IGF1dG87XG4gICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICBtYXJnaW4tbGVmdDogMHJlbTtcbiAgICBtYXJnaW4tcmlnaHQ6IDByZW07XG4gIH1cbn0iLCIvL1xuLy8gIE1FRElBIFFVRVJJRVNcbi8v4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCTXG5cbi8vIEEgbWFwIG9mIGJyZWFrcG9pbnRzLlxuJGJyZWFrcG9pbnRzOiAoXG4gIHhzOiA1NzZweCxcbiAgc206IDc2OHB4LFxuICBtZDogOTkycHgsXG4gIGxnOiAxMjgwcHgsXG4gIHhsOiAxNDQwcHgsXG4gIHh4bDogMTYwMHB4LFxuICB4eHhsOiAxOTAwcHhcbik7XG5cblxuLy9cbi8vICBSRVNQT05EIEFCT1ZFXG4vL+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk1xuXG4vLyBAaW5jbHVkZSByZXNwb25kLWFib3ZlKHNtKSB7fVxuQG1peGluIHJlc3BvbmQtYWJvdmUoJGJyZWFrcG9pbnQpIHtcblxuICAvLyBJZiB0aGUgYnJlYWtwb2ludCBleGlzdHMgaW4gdGhlIG1hcC5cbiAgQGlmIG1hcC1oYXMta2V5KCRicmVha3BvaW50cywgJGJyZWFrcG9pbnQpIHtcblxuICAgIC8vIEdldCB0aGUgYnJlYWtwb2ludCB2YWx1ZS5cbiAgICAkYnJlYWtwb2ludC12YWx1ZTogbWFwLWdldCgkYnJlYWtwb2ludHMsICRicmVha3BvaW50KTtcblxuICAgIC8vIFdyaXRlIHRoZSBtZWRpYSBxdWVyeS5cbiAgICBAbWVkaWEgKG1pbi13aWR0aDogJGJyZWFrcG9pbnQtdmFsdWUpIHtcbiAgICAgIEBjb250ZW50O1xuICAgIH1cbiAgXG4gIC8vIElmIHRoZSBicmVha3BvaW50IGRvZXNuJ3QgZXhpc3QgaW4gdGhlIG1hcC5cbiAgfSBAZWxzZSB7XG5cbiAgICAvLyBMb2cgYSB3YXJuaW5nLlxuICAgIEB3YXJuICdJbnZhbGlkIGJyZWFrcG9pbnQ6ICN7JGJyZWFrcG9pbnR9Lic7XG4gIH1cbn1cblxuXG4vL1xuLy8gIFJFU1BPTkQgQkVMT1dcbi8v4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCT4oCTXG5cbi8vIEBpbmNsdWRlIHJlc3BvbmQtYmVsb3coc20pIHt9XG5AbWl4aW4gcmVzcG9uZC1iZWxvdygkYnJlYWtwb2ludCkge1xuXG4gIC8vIElmIHRoZSBicmVha3BvaW50IGV4aXN0cyBpbiB0aGUgbWFwLlxuICBAaWYgbWFwLWhhcy1rZXkoJGJyZWFrcG9pbnRzLCAkYnJlYWtwb2ludCkge1xuXG4gICAgLy8gR2V0IHRoZSBicmVha3BvaW50IHZhbHVlLlxuICAgICRicmVha3BvaW50LXZhbHVlOiBtYXAtZ2V0KCRicmVha3BvaW50cywgJGJyZWFrcG9pbnQpO1xuXG4gICAgLy8gV3JpdGUgdGhlIG1lZGlhIHF1ZXJ5LlxuICAgIEBtZWRpYSAobWF4LXdpZHRoOiAoJGJyZWFrcG9pbnQtdmFsdWUgLSAxKSkge1xuICAgICAgQGNvbnRlbnQ7XG4gICAgfVxuICBcbiAgLy8gSWYgdGhlIGJyZWFrcG9pbnQgZG9lc24ndCBleGlzdCBpbiB0aGUgbWFwLlxuICB9IEBlbHNlIHtcblxuICAgIC8vIExvZyBhIHdhcm5pbmcuXG4gICAgQHdhcm4gJ0ludmFsaWQgYnJlYWtwb2ludDogI3skYnJlYWtwb2ludH0uJztcbiAgfVxufVxuXG5cbi8vXG4vLyAgUkVTUE9ORCBCRVRXRUVOXG4vL+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk+KAk1xuXG4vLyBAaW5jbHVkZSByZXNwb25kLWJldHdlZW4oc20sIG1kKSB7fVxuQG1peGluIHJlc3BvbmQtYmV0d2VlbigkbG93ZXIsICR1cHBlcikge1xuXG4gIC8vIElmIGJvdGggdGhlIGxvd2VyIGFuZCB1cHBlciBicmVha3BvaW50cyBleGlzdCBpbiB0aGUgbWFwLlxuICBAaWYgbWFwLWhhcy1rZXkoJGJyZWFrcG9pbnRzLCAkbG93ZXIpIGFuZCBtYXAtaGFzLWtleSgkYnJlYWtwb2ludHMsICR1cHBlcikge1xuXG4gICAgLy8gR2V0IHRoZSBsb3dlciBhbmQgdXBwZXIgYnJlYWtwb2ludHMuXG4gICAgJGxvd2VyLWJyZWFrcG9pbnQ6IG1hcC1nZXQoJGJyZWFrcG9pbnRzLCAkbG93ZXIpO1xuICAgICR1cHBlci1icmVha3BvaW50OiBtYXAtZ2V0KCRicmVha3BvaW50cywgJHVwcGVyKTtcblxuICAgIC8vIFdyaXRlIHRoZSBtZWRpYSBxdWVyeS5cbiAgICBAbWVkaWEgKG1pbi13aWR0aDogJGxvd2VyLWJyZWFrcG9pbnQpIGFuZCAobWF4LXdpZHRoOiAoJHVwcGVyLWJyZWFrcG9pbnQgLSAxKSkge1xuICAgICAgQGNvbnRlbnQ7XG4gICAgfVxuICBcbiAgLy8gSWYgb25lIG9yIGJvdGggb2YgdGhlIGJyZWFrcG9pbnRzIGRvbid0IGV4aXN0LlxuICB9IEBlbHNlIHtcblxuICAgIC8vIElmIGxvd2VyIGJyZWFrcG9pbnQgaXMgaW52YWxpZC5cbiAgICBAaWYgKG1hcC1oYXMta2V5KCRicmVha3BvaW50cywgJGxvd2VyKSA9PSBmYWxzZSkge1xuXG4gICAgICAvLyBMb2cgYSB3YXJuaW5nLlxuICAgICAgQHdhcm4gJ1lvdXIgbG93ZXIgYnJlYWtwb2ludCB3YXMgaW52YWxpZDogI3skbG93ZXJ9Lic7XG4gICAgfVxuXG4gICAgLy8gSWYgdXBwZXIgYnJlYWtwb2ludCBpcyBpbnZhbGlkLlxuICAgIEBpZiAobWFwLWhhcy1rZXkoJGJyZWFrcG9pbnRzLCAkdXBwZXIpID09IGZhbHNlKSB7XG5cbiAgICAgIC8vIExvZyBhIHdhcm5pbmcuXG4gICAgICBAd2FybiAnWW91ciB1cHBlciBicmVha3BvaW50IHdhcyBpbnZhbGlkOiAjeyR1cHBlcn0uJztcbiAgICB9XG4gIH1cbn0iXX0= */"];



/***/ }),

/***/ "3FOv":
/*!***********************************************************************************!*\
  !*** ./src/app/modules/dashboard/components/user-report/user-report.component.ts ***!
  \***********************************************************************************/
/*! exports provided: UserReportComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UserReportComponent", function() { return UserReportComponent; });
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/common */ "SVse");
/* harmony import */ var chart_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! chart.js */ "MO+k");
/* harmony import */ var chart_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(chart_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _services_addusser_addusser_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../services/addusser/addusser.service */ "9r3v");



var UserReportComponent = (function () {
    function UserReportComponent(datePipe, _httpService) {
        this.datePipe = datePipe;
        this._httpService = _httpService;
        this.currentDate = new Date();
        this.fromDate = null;
        this.toDate = null;
        this.showUserDataOrg = new Array();
        this.userData = new Array();
        this.getAllOrgChartData = new Array();
        this.myStartDateOrg = [];
        this.myEndDateOrg = [];
        this.showLineChartUserDataOrg = new Array();
        this.groupedUserDataOrg = new Array();
        this.rootOrgNameUser = null;
        this.organizationData = [];
        this.orgName = [];
        this.OrgLength = [];
        this.Linechart3 = null;
        this.colourList = new Array();
        this.myStartDate = [];
        this.myEndDate = [];
        this.aa = new Array();
        this.labelChartRootOrgId = new Array();
        this.dateChartresults = new Array();
        this.chartrootValue = [];
        this.chartrootName = [];
        this.allChanelName = [];
        this.pushLineChartUserData = new Array();
        this.showLineChartUserData = new Array();
        this.sucesErrorPopup = false;
        this.orgListData = new Array();
    }
    UserReportComponent.prototype.ngOnInit = function () {
        this.noResultMessage = {
            'messageText': "No Records found"
        };
        this.getAllOrgData();
        this.initializeColumns();
    };
    UserReportComponent.prototype.initializeColumns = function () {
        this.colsUser = [
            { field: 'rootOrgName', header: 'Organization', width: '150px' },
            { field: 'firstName', header: ' First Name', width: '150px' },
            { field: 'lastName', header: 'Last Name', width: '150px' },
            { field: 'email', header: 'Email', width: '150px' },
            { field: 'phone', header: 'Mobile', width: '150px' },
            { field: 'status', header: 'Status', width: '150px' }
        ];
    };
    UserReportComponent.prototype.getAllOrgData = function () {
        var _this = this;
        var tempArray;
        tempArray = {
            "request": {
                "filters": {},
                "limit": 1000,
                "offset": 0
            }
        };
        this._httpService.getSuborgData(tempArray).subscribe(function (res) {
            res.result.response.content.forEach(function (element) {
                _this.getAllOrgChartData.push({ "orgName": element.orgName, "identifier": element.identifier });
            });
        }, function (err) {
            console.log(err);
        });
    };
    UserReportComponent.prototype.getAllSubOrgData = function (orgId) {
        var _this = this;
        var subOrgList;
        var tempArray;
        subOrgList = {
            "request": {
                "filters": {
                    "rootOrgId": orgId,
                    isRootOrg: false
                },
                "limit": 100,
                "offset": 0
            }
        };
        this._httpService.getSuborgData(subOrgList).subscribe(function (res) {
            _this.subOrg = res.result.response.content;
            _this.getAllOrgChartData.forEach(function (element1) {
                if (element1.identifier == orgId) {
                    _this.rootOrgNameUser = element1.orgName;
                }
            });
            _this.subOrg.push({ "orgName": _this.rootOrgNameUser });
        }, function (err) {
            console.log(err);
        });
    };
    UserReportComponent.prototype.getAllData = function (orgId, channel) {
        var _this = this;
        this.orgName = [];
        this.OrgLength = [];
        this.subOrg = [];
        this.organizationData = [];
        this.groupedUserDataOrg = [];
        this.showLineChartUserData = [];
        var tempArray;
        var subOrgList;
        subOrgList = {
            "request": {
                "filters": {
                    isTenant: false,
                    channel: channel
                },
                "limit": 2000,
                "offset": 0
            }
        };
        this._httpService.getSuborgData(subOrgList).subscribe(function (res) {
            _this.subOrg = res.result.response.content;
            _this.getAllOrgChartData.forEach(function (element1) {
                if (element1.identifier == orgId) {
                    _this.rootOrgNameUser = element1.orgName;
                }
            });
        }, function (err) {
            console.log(err);
        });
        tempArray = {
            'request': {
                'query': '',
                'filters': {
                    "channel": channel
                },
                limit: 10000
            }
        };
        this.showUserDataOrg = [];
        this.groupedUserDataOrg = [];
        this._httpService.userSearch(tempArray).subscribe(function (res) {
            _this.userData = res.result.response.content;
            _this.showUserDataOrg = [];
            _this.orgListData = [];
            res.result.response.content.forEach(function (element) {
                if (element.status == 1) {
                    _this.status = 'Active';
                }
                else if (element.status == 0) {
                    _this.status = 'Inactive';
                }
                _this.userOrgLength = element.organisations.length;
                _this.getAllOrgChartData.forEach(function (element1) {
                    if (element1.identifier == orgId) {
                        _this.rootOrgNameUser = element1.orgName;
                    }
                    if (element.organisations.length > 1) {
                        if ((element1.identifier == element.organisations[1].organisationId) && (element.rootOrgId != element.organisations[1].organisationId)) {
                            _this.orgNameUser = element1.orgName;
                        }
                        else if (element.rootOrgId == element.organisations[1].organisationId) {
                            _this.orgNameUser = element.organisations[0].orgName;
                        }
                    }
                });
                if (element.organisations.length == 1) {
                    _this.orgNameUser = element.organisations[0].orgName;
                }
                _this.showUserDataOrg.push({ "userId": element.id, "createdDate": element.createdDate, "uStatus": element.status, "firstName": element.firstName, "lastName": element.lastName, "email": element.email, "phone": element.phone, "orgLength": element.organisations.length, "orgName": _this.orgNameUser, "status": _this.status, "userOrglengths": _this.userOrgLength, "rootOrgName": _this.orgNameUser });
            });
            var startDate = _this.datePipe.transform(_this.fromDate, 'yyyy-MM-dd');
            var endDate = _this.datePipe.transform(_this.toDate, 'yyyy-MM-dd');
            _this.myStartDateOrg = startDate.split("-");
            _this.newStartDateOrg = new Date(_this.myStartDateOrg[0], _this.myStartDateOrg[1] - 1, _this.myStartDateOrg[2]);
            _this.newTimeStampStartDateOrg = _this.newStartDateOrg.getTime();
            _this.myEndDateOrg = endDate.split("-");
            _this.newEndDateOrg = new Date(_this.myEndDateOrg[0], _this.myEndDateOrg[1] - 1, _this.myEndDateOrg[2]);
            _this.newTimeStampEndDateOrg = _this.newEndDateOrg.getTime();
            _this.showLineChartUserDataOrg = [];
            _this.showLineChartUserData = [];
            _this.showUserDataOrg.forEach(function (xy) {
                var myDate = xy.createdDate.split(" ");
                var myNewDate = myDate[0].split("-");
                var newDate = new Date(myNewDate[0], myNewDate[1] - 1, myNewDate[2]);
                var newTimeStampDate = newDate.getTime();
                if (newTimeStampDate >= _this.newTimeStampStartDateOrg && newTimeStampDate <= _this.newTimeStampEndDateOrg) {
                    _this.showLineChartUserDataOrg.push(xy);
                    _this.showLineChartUserData.push(xy);
                }
            });
            _this.orgList = _this.showLineChartUserData
                .map(function (item) { return item.orgName; })
                .filter(function (value, index, self) { return self.indexOf(value) === index; });
            _this.orgListArry = _this.orgList.filter(function (f) { return f !== undefined && f !== null; });
            _this.orgListArry.forEach(function (element) {
                _this.orgListData.push({ "label": element, "value": element });
            });
            _this.groupedUserDataOrg = _this.showLineChartUserDataOrg.reduce(function (rv, x) {
                (rv[x['orgName']] = rv[x['orgName']] || []).push(x);
                return rv;
            }, {});
            _this.orgName = [];
            _this.OrgLength = [];
            _this.organizationData = [];
            if (_this.subOrg.length > 0 || _this.subOrg.length == 0) {
                _this.orgName = [];
                _this.OrgLength = [];
                _this.organizationData = [];
                _this.subOrg.forEach(function (element) {
                    var orgNameVal;
                    orgNameVal = element.orgName;
                    if (_this.groupedUserDataOrg[orgNameVal] != undefined) {
                        _this.organizationData.push({ "orgNameVal": orgNameVal, "length": _this.groupedUserDataOrg[orgNameVal].length });
                    }
                    else if (_this.groupedUserDataOrg[orgNameVal] == undefined) {
                        _this.organizationData.push({ "orgNameVal": orgNameVal, "length": 0 });
                    }
                });
                _this.orgName = [];
                _this.OrgLength = [];
                _this.organizationData.forEach(function (element) {
                    _this.orgName.push(element.orgNameVal);
                    _this.OrgLength.push(element.length);
                    _this.colourList.push(_this.getRandomColorHex());
                });
            }
            if (_this.Linechart3) {
                _this.Linechart3.destroy();
            }
            var data1 = {
                labels: _this.orgName,
                datasets: [{ label: "Count", data: _this.OrgLength, backgroundColor: "#0000FF", }]
            };
            var options = {
                title: { display: true, text: "User Onboarded in Sub Organization", fontSize: 18, fontColor: "#111" },
                legend: { display: true },
                scales: {
                    yAxes: [{ ticks: { min: 0 }, scaleLabel: { display: true, labelString: 'User Count' } }],
                    xAxes: [{ ticks: { min: 0 }, scaleLabel: { display: true, labelString: 'Organization' } }],
                    gridLines: { color: 'red' },
                    angleLines: { color: 'blue' }
                }
            };
            _this.Linechart3 = new chart_js__WEBPACK_IMPORTED_MODULE_1__["Chart"]('canvas13', { type: 'bar', data: data1, options: options });
        }, function (err) {
            console.log(err);
        });
    };
    UserReportComponent.prototype.getRandomColorHex = function () {
        var color = ["red", "green", "blue", "purple", "magenta", "aqua", "salmon", "darkgray", "pink", "coral"];
        return color[Math.floor(Math.random() * 16) % color.length - 1];
    };
    UserReportComponent.prototype.closeSucesErrorPopup = function () {
        this.sucesErrorPopup = false;
    };
    UserReportComponent.prototype.dateWiseLineChart = function () {
        var _this = this;
        if (this.fromDate == null || this.fromDate == undefined) {
            this.popupMsg = "Please Enter From Date";
            this.sucesErrorPopup = true;
        }
        else if (this.toDate == null || this.toDate == undefined) {
            this.popupMsg = "Please Enter  To Date";
            this.sucesErrorPopup = true;
        }
        var tempArray;
        tempArray = {
            'request': {
                'query': '',
                'filters': {},
                limit: 10000
            }
        };
        this.pushLineChartUserData = [];
        this._httpService.userSearch(tempArray).subscribe(function (res) {
            _this.userData = res.result.response.content;
            _this.orgListData = [];
            res.result.response.content.forEach(function (element) {
                if (element.status == 1) {
                    _this.status = 'Active';
                }
                else if (element.status == 0) {
                    _this.status = 'Inactive';
                }
                _this.userOrgLength = element.organisations.length;
                _this.getAllOrgChartData.forEach(function (element1) {
                    if (_this.userOrgLength > 1) {
                        if ((element1.identifier == element.organisations[0].organisationId) && (element.rootOrgId != element.organisations[0].organisationId)) {
                            _this.orgNameUser = element1.orgName;
                        }
                    }
                });
                if (_this.userOrgLength == 1) {
                    _this.orgNameUser = element.organisations[0].orgName;
                }
                _this.pushLineChartUserData.push({ "userId": element.id, "uStatus": element.status, "createdDate": element.createdDate, "firstName": element.firstName, "lastName": element.lastName, "email": element.email, "phone": element.phone, "orgLength": element.organisations.length, "orgName": _this.orgNameUser, "status": _this.status, "userOrglengths": _this.userOrgLength, "channel": element.channel, "rootOrgId": element.rootOrgId, "rootOrgName": element.rootOrgName });
            });
            var startDate = _this.datePipe.transform(_this.fromDate, 'yyyy-MM-dd');
            var endDate = _this.datePipe.transform(_this.toDate, 'yyyy-MM-dd');
            _this.myStartDate = startDate.split("-");
            _this.newStartDate = new Date(_this.myStartDate[0], _this.myStartDate[1] - 1, _this.myStartDate[2]);
            _this.newTimeStampStartDate = _this.newStartDate.getTime();
            _this.myEndDate = endDate.split("-");
            _this.newEndDate = new Date(_this.myEndDate[0], _this.myEndDate[1] - 1, _this.myEndDate[2]);
            _this.newTimeStampEndDate = _this.newEndDate.getTime();
            _this.showLineChartUserData = [];
            _this.pushLineChartUserData.forEach(function (xy) {
                var myDate = myDate = xy.createdDate.split(" ");
                var myNewDate = myDate[0].split("-");
                var newDate = new Date(myNewDate[0], myNewDate[1] - 1, myNewDate[2]);
                var newTimeStampDate = newDate.getTime();
                if (newTimeStampDate >= _this.newTimeStampStartDate && newTimeStampDate <= _this.newTimeStampEndDate) {
                    _this.showLineChartUserData.push(xy);
                }
            });
            _this.orgList = _this.showLineChartUserData
                .map(function (item) { return item.rootOrgName; })
                .filter(function (value, index, self) { return self.indexOf(value) === index; });
            _this.orgListArry = _this.orgList.filter(function (f) { return f !== undefined && f !== null; });
            _this.orgListArry.forEach(function (element) {
                _this.orgListData.push({ "label": element, "value": element });
            });
            _this.chartrootName = [];
            _this.aa = [];
            _this.chartrootValue = [];
            _this.labelChartRootOrgId = [];
            _this.dateChartresults = [];
            _this.dateChartresults = _this.showLineChartUserData.reduce(function (r, b) {
                r[b.channel] = r[b.channel] || [];
                r[b.channel].push(b);
                return r;
            }, Object.create(null));
            var arr1 = Object.entries(_this.dateChartresults);
            arr1.forEach(function (chartvalue) {
                _this.allChanelName.push(chartvalue[0]);
                _this.chartrootName.push(chartvalue[1][0].rootOrgName);
                _this.aa = chartvalue[1];
                _this.chartrootValue.push(_this.aa.length);
                _this.labelChartRootOrgId.push(chartvalue[1][0].rootOrgId);
            });
            var data1 = {
                labels: _this.chartrootName,
                datasets: [{ label: "Count", data: _this.chartrootValue, borderColor: _this.labelChartRootOrgId, borderWidth: _this.allChanelName, backgroundColor: "#0000FF", }]
            };
            var options = {
                title: { display: true, text: "User Onboarded in Root Organization", fontSize: 18, fontColor: "#111" },
                legend: { display: true },
                scales: {
                    yAxes: [{ ticks: { min: 0 }, scaleLabel: { display: true, labelString: 'User Count' } }],
                    xAxes: [{ ticks: { min: 0 }, scaleLabel: { display: true, labelString: 'Organization' } }],
                    gridLines: { color: 'red' },
                    angleLines: { color: 'blue' }
                }
            };
            if (_this.Linechart12) {
                _this.Linechart12.destroy();
            }
            _this.Linechart12 = new chart_js__WEBPACK_IMPORTED_MODULE_1__["Chart"]('canvas12', { type: 'bar', data: data1, options: options });
        });
    };
    UserReportComponent.prototype.showData = function (evt) {
        var data = this.Linechart12.getElementsAtEvent(evt);
        var activePoint = this.Linechart12.getElementAtEvent(evt);
        if (activePoint.length > 0) {
            var clickedDatasetIndex = activePoint[0]._datasetIndex;
            var clickedElementindex = activePoint[0]._index;
            var filter_data = activePoint[0]._model.borderColor;
            var filter_channel = activePoint[0]._model.borderWidth;
            var label = this.Linechart12.data.labels[clickedElementindex];
            var value = this.Linechart12.data.datasets[clickedDatasetIndex].data[clickedElementindex];
            this.getAllData(filter_data, filter_channel);
        }
    };
    UserReportComponent.prototype.showData3 = function (evt) {
        var data = this.Linechart3.getElementsAtEvent(evt);
        var activePoint = this.Linechart3.getElementAtEvent(evt);
        if (activePoint.length > 0) {
            var clickedDatasetIndex = activePoint[0]._datasetIndex;
            var clickedElementindex = activePoint[0]._index;
            var filter_data = activePoint[0]._options.borderColor;
            var filter_channel = activePoint[0]._options.borderWidth;
            var label = this.Linechart3.data.labels[clickedElementindex];
            var value = this.Linechart3.data.datasets[clickedDatasetIndex].data[clickedElementindex];
        }
    };
    return UserReportComponent;
}());



/***/ }),

/***/ "8nkE":
/*!*****************************************************************!*\
  !*** ./src/app/modules/dashboard/config/nameToCodeMapping.json ***!
  \*****************************************************************/
/*! exports provided: 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 134, 135, 136, 137, 138, 139, 140, 141, 142, 143, 144, 145, 146, 147, 148, 149, 150, 151, 152, 153, 154, 155, 156, 157, 158, 159, 160, 161, 162, 163, 164, 165, 166, 167, 168, 169, 170, 171, 172, 173, 174, 175, 176, 177, 178, 179, 180, 181, 182, 183, 184, 185, 186, 187, 188, 189, 190, 191, 192, 193, 194, 195, 196, 197, 198, 199, 200, 201, 202, 203, 204, 205, 206, 207, 208, 209, 210, 211, 212, 213, 214, 215, 216, 217, 218, 219, 220, 221, 222, 223, 224, 225, 226, 227, 228, 229, 230, 231, 232, 233, 234, 235, 236, 237, 238, 239, 240, 241, 242, 243, 244, 245, 246, 247, 248, 249, 250, 251, 252, 253, 254, 255, 256, 257, 258, 259, 260, 261, 262, 263, 264, 265, 266, 267, 268, 269, 270, 271, 272, 273, 274, 275, 276, 277, 278, 279, 280, 281, 282, 283, 284, 285, 286, 287, 288, 289, 290, 291, 292, 293, 294, 295, 296, 297, 298, 299, 300, 301, 302, 303, 304, 305, 306, 307, 308, 309, 310, 311, 312, 313, 314, 315, 316, 317, 318, 319, 320, 321, 322, 323, 324, 325, 326, 327, 328, 329, 330, 331, 332, 333, 334, 335, 336, 337, 338, 339, 340, 341, 342, 343, 344, 345, 346, 347, 348, 349, 350, 351, 352, 353, 354, 355, 356, 357, 358, 359, 360, 361, 362, 363, 364, 365, 366, 367, 368, 369, 370, 371, 372, 373, 374, 375, 376, 377, 378, 379, 380, 381, 382, 383, 384, 385, 386, 387, 388, 389, 390, 391, 392, 393, 394, 395, 396, 397, 398, 399, 400, 401, 402, 403, 404, 405, 406, 407, 408, 409, 410, 411, 412, 413, 414, 415, 416, 417, 418, 419, 420, 421, 422, 423, 424, 425, 426, 427, 428, 429, 430, 431, 432, 433, 434, 435, 436, 437, 438, 439, 440, 441, 442, 443, 444, 445, 446, 447, 448, 449, 450, 451, 452, 453, 454, 455, 456, 457, 458, 459, 460, 461, 462, 463, 464, 465, 466, 467, 468, 469, 470, 471, 472, 473, 474, 475, 476, 477, 478, 479, 480, 481, 482, 483, 484, 485, 486, 487, 488, 489, 490, 491, 492, 493, 494, 495, 496, 497, 498, 499, 500, 501, 502, 503, 504, 505, 506, 507, 508, 509, 510, 511, 512, 513, 514, 515, 516, 517, 518, 519, 520, 521, 522, 523, 524, 525, 526, 527, 528, 529, 530, 531, 532, 533, 534, 535, 536, 537, 538, 539, 540, 541, 542, 543, 544, 545, 546, 547, 548, 549, 550, 551, 552, 553, 554, 555, 556, 557, 558, 559, 560, 561, 562, 563, 564, 565, 566, 567, 568, 569, 570, 571, 572, 573, 574, 575, 576, 577, 578, 579, 580, 581, 582, 583, 584, 585, 586, 587, 588, 589, 590, 591, 592, 593, 594, 595, 596, 597, 598, 599, 600, 601, 602, 603, 604, 605, 606, 607, 608, 609, 610, 611, 612, 613, 614, 615, 616, 617, 618, 619, 620, 621, 622, 623, 624, 625, 626, 627, 628, 629, 630, 631, 632, 633, 634, 635, 636, 637, 638, 639, 640, 641, 642, 643, 644, 645, 646, 647, 648, 649, 650, 651, 652, 653, 654, 655, 656, 657, 658, 659, 660, 661, 662, 663, 664, 665, 666, 667, 668, 669, 670, 671, 672, 673, 674, 675, 676, 677, 678, 679, 680, 681, 682, 683, 684, 685, 686, 687, 688, 689, 690, 691, 692, 693, 694, 695, 696, 697, 698, 699, 700, 701, 702, 703, 704, 705, 706, 707, 708, 709, 710, 711, 712, 713, 714, 715, 716, 717, 718, 719, 720, 721, 722, 723, 724, 725, 726, 727, 728, 729, 730, 731, 732, 733, 734, 735, 736, 737, 738, 739, 740, 741, 742, 743, 744, 745, 746, 747, 748, 749, 750, 751, 752, 753, 754, 755, 756, 757, 758, 759, 760, 761, 762, 763, 764, 765, 766, 767, 768, default */
/***/ (function(module) {

module.exports = JSON.parse("[{\"name\":\"India\",\"code\":\"\",\"type\":\"country\",\"geoJSONFilename\":\"india.json\"},{\"name\":\"Jammu And Kashmir\",\"code\":\"01\",\"type\":\"state\",\"geoJSONFilename\":\"jammukashmir_district.json\"},{\"name\":\"Kupwara\",\"code\":\"0101\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Baramula\",\"code\":\"0102\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Srinagar\",\"code\":\"0103\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Badgam\",\"code\":\"0104\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Pulwama\",\"code\":\"0105\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Anantnag\",\"code\":\"0106\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Doda\",\"code\":\"0109\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Udhampur\",\"code\":\"0110\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Punch\",\"code\":\"0111\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Rajauri\",\"code\":\"0112\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Jammu\",\"code\":\"0113\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Kathua\",\"code\":\"0114\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Shopian\",\"code\":\"0115\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Bandipora\",\"code\":\"0116\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Kishtwar\",\"code\":\"0117\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Ramban\",\"code\":\"0118\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Ganderbal\",\"code\":\"0119\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Kulgam\",\"code\":\"0120\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Reasi\",\"code\":\"0121\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Samba\",\"code\":\"0122\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Himachal Pradesh\",\"code\":\"02\",\"type\":\"state\",\"geoJSONFilename\":\"himachalpradesh_district.json\"},{\"name\":\"Chamba\",\"code\":\"0201\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Kangra\",\"code\":\"0202\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Lahul & Spiti\",\"code\":\"0203\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Kullu\",\"code\":\"0204\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Mandi\",\"code\":\"0205\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Hamirpur (H.P.)\",\"code\":\"0206\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Una\",\"code\":\"0207\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Bilaspur (H.P.)\",\"code\":\"0208\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Solan\",\"code\":\"0209\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Sirmaur\",\"code\":\"0210\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Shimla\",\"code\":\"0211\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Kinnaur\",\"code\":\"0212\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Punjab\",\"code\":\"03\",\"type\":\"state\",\"geoJSONFilename\":\"punjab_district.json\"},{\"name\":\"Gurdaspur\",\"code\":\"0301\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Amritsar\",\"code\":\"0302\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Kapurthala\",\"code\":\"0303\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Jalandhar\",\"code\":\"0304\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Hoshiarpur\",\"code\":\"0305\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Shaheed Bhagat Singh Nagar\",\"code\":\"0306\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Rupnagar\",\"code\":\"0307\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Fatehgarh Sahib\",\"code\":\"0308\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Ludhiana\",\"code\":\"0309\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Moga\",\"code\":\"0310\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Ferozepur\",\"code\":\"0311\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Sri Muktsar Sahib\",\"code\":\"0312\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Faridkot\",\"code\":\"0313\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Bathinda\",\"code\":\"0314\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Mansa\",\"code\":\"0315\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Sangrur\",\"code\":\"0316\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Patiala\",\"code\":\"0317\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Sahibzada Ajit Singh Nagar\",\"code\":\"0318\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Tarn Taran\",\"code\":\"0319\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Barnala\",\"code\":\"0320\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Fazilka\",\"code\":\"0321\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Pathankot\",\"code\":\"0322\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Chandigarh\",\"code\":\"04\",\"type\":\"state\",\"geoJSONFilename\":\"chandigarh_district.json\"},{\"name\":\"Chandigarh\",\"code\":\"0401\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Uttarakhand\",\"code\":\"05\",\"type\":\"state\",\"geoJSONFilename\":\"uttarakhand_district.json\"},{\"name\":\"Uttarkashi\",\"code\":\"0501\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Chamoli\",\"code\":\"0502\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Rudraprayag\",\"code\":\"0503\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Tehri Garhwal\",\"code\":\"0504\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Dehradun\",\"code\":\"0505\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Garhwal\",\"code\":\"0506\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Pithoragarh\",\"code\":\"0507\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Bageshwar\",\"code\":\"0508\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Almora\",\"code\":\"0509\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Champawat\",\"code\":\"0510\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Nainital\",\"code\":\"0511\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Udham Singh Nagar\",\"code\":\"0512\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Hardwar\",\"code\":\"0513\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Haryana\",\"code\":\"06\",\"type\":\"state\",\"geoJSONFilename\":\"haryana_district.json\"},{\"name\":\"Panchkula\",\"code\":\"0601\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Ambala\",\"code\":\"0602\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Yamunanagar\",\"code\":\"0603\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Kurukshetra\",\"code\":\"0604\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Kaithal\",\"code\":\"0605\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Karnal\",\"code\":\"0606\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Panipat\",\"code\":\"0607\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Sonipat\",\"code\":\"0608\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Jind\",\"code\":\"0609\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Fatehabad\",\"code\":\"0610\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Sirsa\",\"code\":\"0611\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Hisar\",\"code\":\"0612\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Bhiwani\",\"code\":\"0613\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Rohtak\",\"code\":\"0614\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Jhajjar\",\"code\":\"0615\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Mahendragarh\",\"code\":\"0616\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Rewari\",\"code\":\"0617\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Gurugram\",\"code\":\"0618\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Mewat\",\"code\":\"0619\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Faridabad\",\"code\":\"0620\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Palwal\",\"code\":\"0621\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Charkhi Dadri\",\"code\":\"0622\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Delhi\",\"code\":\"07\",\"type\":\"state\",\"geoJSONFilename\":\"delhi_district.json\"},{\"name\":\"North West Delhi\",\"code\":\"0701\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"North Delhi\",\"code\":\"0702\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"North East Delhi\",\"code\":\"0703\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"East Delhi\",\"code\":\"0704\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"New Delhi\",\"code\":\"0705\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Central Delhi\",\"code\":\"0706\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"West Delhi\",\"code\":\"0707\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"South West Delhi\",\"code\":\"0708\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"South Delhi\",\"code\":\"0709\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"South East Delhi\",\"code\":\"0710\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Shahdara\",\"code\":\"0711\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Rajasthan\",\"code\":\"08\",\"type\":\"state\",\"geoJSONFilename\":\"rajasthan_district.json\"},{\"name\":\"Ganganagar\",\"code\":\"0801\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Hanumangarh\",\"code\":\"0802\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Bikaner\",\"code\":\"0803\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Churu\",\"code\":\"0804\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Jhunjhunu\",\"code\":\"0805\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Alwar\",\"code\":\"0806\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Bharatpur\",\"code\":\"0807\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Dhaulpur\",\"code\":\"0808\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Karauli\",\"code\":\"0809\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Sawai Madhopur\",\"code\":\"0810\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Dausa\",\"code\":\"0811\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Jaipur\",\"code\":\"0812\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Sikar\",\"code\":\"0813\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Nagaur\",\"code\":\"0814\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Jodhpur\",\"code\":\"0815\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Jaisalmer\",\"code\":\"0816\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Barmer\",\"code\":\"0817\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Jalor\",\"code\":\"0818\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Sirohi\",\"code\":\"0819\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Pali\",\"code\":\"0820\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Ajmer\",\"code\":\"0821\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Tonk\",\"code\":\"0822\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Bundi\",\"code\":\"0823\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Bhilwara\",\"code\":\"0824\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Rajsamand\",\"code\":\"0825\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Udaipur\",\"code\":\"0826\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Dungarpur\",\"code\":\"0827\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Banswara\",\"code\":\"0828\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Chittaurgarh\",\"code\":\"0829\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Kota\",\"code\":\"0830\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Baran\",\"code\":\"0831\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Jhalawar\",\"code\":\"0832\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Pratapgarh\",\"code\":\"0833\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Uttar Pradesh\",\"code\":\"09\",\"type\":\"state\",\"geoJSONFilename\":\"uttarpradesh_district.json\"},{\"name\":\"Saharanpur\",\"code\":\"09132\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Muzaffarnagar\",\"code\":\"09133\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Bijnor\",\"code\":\"09134\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Moradabad\",\"code\":\"09135\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Rampur\",\"code\":\"09136\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Amroha\",\"code\":\"09137\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Meerut\",\"code\":\"09138\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Baghpat\",\"code\":\"09139\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Ghaziabad\",\"code\":\"09140\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Gautam Budh Nagar\",\"code\":\"09141\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Bulandshahar\",\"code\":\"09142\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Aligarh\",\"code\":\"09143\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Hathras\",\"code\":\"09144\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Mathura\",\"code\":\"09145\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Agra\",\"code\":\"09146\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Firozabad\",\"code\":\"09147\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Mainpuri\",\"code\":\"09148\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Badaun\",\"code\":\"09149\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Bareilly\",\"code\":\"09150\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Pilibhit\",\"code\":\"09151\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Shahjahanpur\",\"code\":\"09152\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Lakhimpur Kheri\",\"code\":\"09153\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Sitapur\",\"code\":\"09154\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Hardoi\",\"code\":\"09155\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Unnao\",\"code\":\"09156\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Lucknow\",\"code\":\"09157\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Raebareli\",\"code\":\"09158\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Farrukhabad\",\"code\":\"09159\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Kannauj\",\"code\":\"09160\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Etawah\",\"code\":\"09161\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Auraiya\",\"code\":\"09162\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Kanpur Dehat\",\"code\":\"09163\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Kanpur Nagar\",\"code\":\"09164\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Jalaun\",\"code\":\"09165\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Jhansi\",\"code\":\"09166\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Lalitpur\",\"code\":\"09167\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Hamirpur\",\"code\":\"09168\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Mahoba\",\"code\":\"09169\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Banda\",\"code\":\"09170\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Chitrakoot\",\"code\":\"09171\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Fatehpur\",\"code\":\"09172\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Pratapgarh\",\"code\":\"09173\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Kaushambi\",\"code\":\"09174\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Prayagraj(Allahabad)\",\"code\":\"09175\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Barabanki\",\"code\":\"09176\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Ayodhya(Faizabad)\",\"code\":\"09177\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Ambedkar Nagar\",\"code\":\"09178\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Sultanpur\",\"code\":\"09179\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Behraich\",\"code\":\"09180\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Shravasti\",\"code\":\"09181\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Balrampur\",\"code\":\"09182\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Gonda\",\"code\":\"09183\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Sidharthnagar\",\"code\":\"09184\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Basti\",\"code\":\"09185\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Sant Kabir Nagar\",\"code\":\"09186\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Maharajganj\",\"code\":\"09187\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Gorakhpur\",\"code\":\"09188\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Kushinagar\",\"code\":\"09189\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Deoria\",\"code\":\"09190\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Azamgarh\",\"code\":\"09191\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Mau\",\"code\":\"09192\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Ballia\",\"code\":\"09193\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Jaunpur\",\"code\":\"09194\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Ghazipur\",\"code\":\"09195\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Chandauli\",\"code\":\"09196\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Varanasi\",\"code\":\"09197\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Sant Ravidas Nagar\",\"code\":\"09198\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Mirzapur\",\"code\":\"09199\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Sonbhadra\",\"code\":\"09200\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Etah\",\"code\":\"09201\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Kasganj\",\"code\":\"09202\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Amethi\",\"code\":\"09203\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Hapur\",\"code\":\"09204\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Sambhal\",\"code\":\"09205\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Shamli\",\"code\":\"09206\",\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Bihar\",\"code\":10,\"type\":\"state\",\"geoJSONFilename\":\"bihar_district.json\"},{\"name\":\"Pashchim Champaran\",\"code\":1001,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Purba Champaran\",\"code\":1002,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Sheohar\",\"code\":1003,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Sitamarhi\",\"code\":1004,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Madhubani\",\"code\":1005,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Supaul\",\"code\":1006,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Araria\",\"code\":1007,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Kishanganj\",\"code\":1008,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Purnia\",\"code\":1009,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Katihar\",\"code\":1010,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Madhepura\",\"code\":1011,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Saharsa\",\"code\":1012,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Darbhanga\",\"code\":1013,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Muzaffarpur\",\"code\":1014,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Gopalganj\",\"code\":1015,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Siwan\",\"code\":1016,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Saran\",\"code\":1017,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Vaishali\",\"code\":1018,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Samastipur\",\"code\":1019,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Begusarai\",\"code\":1020,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Khagaria\",\"code\":1021,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Bhagalpur\",\"code\":1022,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Banka\",\"code\":1023,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Munger\",\"code\":1024,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Lakhisarai\",\"code\":1025,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Sheikhpura\",\"code\":1026,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Nalanda\",\"code\":1027,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Patna\",\"code\":1028,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Bhojpur\",\"code\":1029,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Buxar\",\"code\":1030,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Kaimur (Bhabua)\",\"code\":1031,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Rohtas\",\"code\":1032,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Jehanabad\",\"code\":1033,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Aurangabad (Bihar)\",\"code\":1034,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Gaya\",\"code\":1035,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Nawada\",\"code\":1036,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Jamui\",\"code\":1037,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Arwal\",\"code\":1038,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Sikkim\",\"code\":11,\"type\":\"state\",\"geoJSONFilename\":\"sikkim_district.json\"},{\"name\":\"North Sikkim\",\"code\":1101,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"West Sikkim\",\"code\":1102,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"South Sikkim\",\"code\":1103,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"East Sikkim\",\"code\":1104,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Arunachal Pradesh\",\"code\":12,\"type\":\"state\",\"geoJSONFilename\":\"arunachalpradesh_districts.json\"},{\"name\":\"Tawang\",\"code\":1201,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"West Kameng\",\"code\":1202,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"East Kameng\",\"code\":1203,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Papum Pare\",\"code\":1204,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Lower Subansiri\",\"code\":1205,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Upper Subansiri\",\"code\":1206,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"West Siang\",\"code\":1207,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"East Siang\",\"code\":1208,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Upper Siang\",\"code\":1209,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Dibang Valley\",\"code\":1210,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Lohit\",\"code\":1211,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Changlang\",\"code\":1212,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Tirap\",\"code\":1213,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Kurung Kumey\",\"code\":1214,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Lower Dibang Valley\",\"code\":1215,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Anjaw\",\"code\":1216,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Longding\",\"code\":1217,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Namsai\",\"code\":1218,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Kra Dadi\",\"code\":1219,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Siang\",\"code\":1220,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Kamle\",\"code\":1221,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Lepa Rada\",\"code\":1222,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Lower Siang\",\"code\":1223,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Pakke Kessang\",\"code\":1224,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Shi Yomi\",\"code\":1225,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Nagaland\",\"code\":13,\"type\":\"state\",\"geoJSONFilename\":\"nagaland_district.json\"},{\"name\":\"Mon\",\"code\":1301,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Tuensang\",\"code\":1302,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Mokokchung\",\"code\":1303,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Zunheboto\",\"code\":1304,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Wokha\",\"code\":1305,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Dimapur\",\"code\":1306,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Kohima\",\"code\":1307,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Phek\",\"code\":1308,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Longleng\",\"code\":1309,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Kiphire\",\"code\":1310,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Peren\",\"code\":1311,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Manipur\",\"code\":14,\"type\":\"state\",\"geoJSONFilename\":\"manipur_district.json\"},{\"name\":\"Senapati\",\"code\":1401,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Tamenglong\",\"code\":1402,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Churachandpur\",\"code\":1403,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Bishnupur\",\"code\":1404,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Thoubal\",\"code\":1405,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Imphal West\",\"code\":1406,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Imphal East\",\"code\":1407,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Ukhrul\",\"code\":1408,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Chandel\",\"code\":1409,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Jiribam\",\"code\":1410,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Kakching\",\"code\":1411,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Kamjong\",\"code\":1412,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Kangpokpi\",\"code\":1413,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Noney\",\"code\":1414,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Pherzawl\",\"code\":1415,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Tengnoupal\",\"code\":1416,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Mizoram\",\"code\":15,\"type\":\"state\",\"geoJSONFilename\":\"mizoram_district.json\"},{\"name\":\"Mamit\",\"code\":1501,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Kolasib\",\"code\":1502,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Aizawl\",\"code\":1503,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Champhai\",\"code\":1504,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Serchhip\",\"code\":1505,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Lunglei\",\"code\":1506,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Lawngtlai\",\"code\":1507,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Saiha\",\"code\":1508,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Tripura\",\"code\":16,\"type\":\"state\",\"geoJSONFilename\":\"tripura_district.json\"},{\"name\":\"West Tripura\",\"code\":1601,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"South Tripura\",\"code\":1602,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Dhalai\",\"code\":1603,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"North Tripura\",\"code\":1604,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Sepahijala\",\"code\":1605,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Khowai\",\"code\":1606,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Gomati\",\"code\":1607,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Unakoti\",\"code\":1608,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Meghalaya\",\"code\":17,\"type\":\"state\",\"geoJSONFilename\":\"meghalaya_district.json\"},{\"name\":\"West Garo Hills\",\"code\":1701,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"East Garo Hills\",\"code\":1702,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"South Garo Hills\",\"code\":1703,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"West Khasi Hills\",\"code\":1704,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Ri Bhoi\",\"code\":1705,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"East Khasi Hills\",\"code\":1706,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"West Jaintia Hills\",\"code\":1707,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"North Garo Hills\",\"code\":1708,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"East Jaintia Hills\",\"code\":1709,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"South West Khasi Hills\",\"code\":1710,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"South West Garo Hills\",\"code\":1711,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Assam\",\"code\":18,\"type\":\"state\",\"geoJSONFilename\":\"assam_district.json\"},{\"name\":\"Kokrajhar\",\"code\":1801,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Dhubri\",\"code\":1802,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Goalpara\",\"code\":1803,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Bongaigaon\",\"code\":1804,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Barpeta\",\"code\":1805,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Kamrup Rural\",\"code\":1806,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Nalbari\",\"code\":1807,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Darrang\",\"code\":1808,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Morigaon\",\"code\":1809,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Nagaon\",\"code\":1810,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Sonitpur\",\"code\":1811,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Lakhimpur\",\"code\":1812,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Dhemaji\",\"code\":1813,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Tinsukia\",\"code\":1814,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Dibrugarh\",\"code\":1815,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Sivasagar\",\"code\":1816,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Jorhat\",\"code\":1817,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Golaghat\",\"code\":1818,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Karbi Anglong\",\"code\":1819,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Dima Hasao\",\"code\":1820,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Cachar\",\"code\":1821,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Karimganj\",\"code\":1822,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Hailakandi\",\"code\":1823,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Baksa\",\"code\":1824,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Chirang\",\"code\":1825,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Udalguri\",\"code\":1826,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Kamrup Metropolitan\",\"code\":1827,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Biswanath\",\"code\":1828,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Charaideo\",\"code\":1829,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Hojai\",\"code\":1830,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Majuli\",\"code\":1831,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"South Salmara-Mankachar\",\"code\":1832,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"West Karbi Anglong\",\"code\":1833,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"West Bengal\",\"code\":19,\"type\":\"state\",\"geoJSONFilename\":\"westbengal_district.json\"},{\"name\":\"Darjiling\",\"code\":1901,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Jalpaiguri\",\"code\":1902,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Koch Bihar\",\"code\":1903,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Uttar Dinajpur\",\"code\":1904,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Dakshin Dinajpur\",\"code\":1905,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Maldah\",\"code\":1906,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Murshidabad\",\"code\":1907,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Birbhum\",\"code\":1908,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Nadia\",\"code\":1910,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"North Twenty Four Pargana\",\"code\":1911,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Hugli\",\"code\":1912,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Bankura\",\"code\":1913,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Puruliya\",\"code\":1914,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Haora\",\"code\":1916,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Kolkata\",\"code\":1917,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"South  Twenty Four Pargan\",\"code\":1918,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Purba Medinipur\",\"code\":1919,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Paschim Medinipur\",\"code\":1920,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Alipurduar\",\"code\":1922,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Jhargram\",\"code\":1923,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Kalimpong\",\"code\":1924,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Paschim Burdwan (West Bardhaman)\",\"code\":1925,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Purba Burdwan (East Bardhaman)\",\"code\":1926,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Jharkhand\",\"code\":20,\"type\":\"state\",\"geoJSONFilename\":\"jharkhand_district.json\"},{\"name\":\"Garhwa\",\"code\":2001,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Palamu\",\"code\":2002,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Chatra\",\"code\":2003,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Hazaribagh\",\"code\":2004,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Koderma\",\"code\":2005,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Giridih\",\"code\":2006,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Deoghar\",\"code\":2007,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Godda\",\"code\":2008,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Sahibganj\",\"code\":2009,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Pakur\",\"code\":2010,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Dumka\",\"code\":2011,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Dhanbad\",\"code\":2012,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Bokaro\",\"code\":2013,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Ranchi\",\"code\":2014,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Lohardaga\",\"code\":2015,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Gumla\",\"code\":2016,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Pashchimi Singhbhum\",\"code\":2017,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Purbi Singhbhum\",\"code\":2018,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Jamtara\",\"code\":2019,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Saraikela-Kharsawan\",\"code\":2020,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Simdega\",\"code\":2021,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Latehar\",\"code\":2022,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Khunti\",\"code\":2023,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Ramgarh\",\"code\":2024,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Odisha\",\"code\":21,\"type\":\"state\",\"geoJSONFilename\":\"odisha_district.json\"},{\"name\":\"Baragarh\",\"code\":2101,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Jharsuguda\",\"code\":2102,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Sambalpur\",\"code\":2103,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Deogarh\",\"code\":2104,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Sundergarh\",\"code\":2105,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Keonjhar\",\"code\":2106,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Mayurbhanj\",\"code\":2107,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Balasore\",\"code\":2108,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Bhadrak\",\"code\":2109,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Kendrapara\",\"code\":2110,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Jagatsinghpur\",\"code\":2111,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Cuttack\",\"code\":2112,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Jajpur\",\"code\":2113,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Dhenkanal\",\"code\":2114,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Angul\",\"code\":2115,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Nayagarh\",\"code\":2116,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Khurdha\",\"code\":2117,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Puri\",\"code\":2118,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Ganjam\",\"code\":2119,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Gajapati\",\"code\":2120,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Kandhamal\",\"code\":2121,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Boudh\",\"code\":2122,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Sonepur\",\"code\":2123,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Bolangir\",\"code\":2124,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Nuapada\",\"code\":2125,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Kalahandi\",\"code\":2126,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Rayagada\",\"code\":2127,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Nabarangpur\",\"code\":2128,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Koraput\",\"code\":2129,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Malkangiri\",\"code\":2130,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Chhattisgarh\",\"code\":22,\"type\":\"state\",\"geoJSONFilename\":\"chhattisgarh_district.json\"},{\"name\":\"Koriya\",\"code\":2201,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Surguja\",\"code\":2202,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Jashpur\",\"code\":2203,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Raigarh\",\"code\":2204,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Korba\",\"code\":2205,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Janjgir-Champa\",\"code\":2206,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Bilaspur\",\"code\":2207,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Kawardha\",\"code\":2208,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Rajnandgaon\",\"code\":2209,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Durg\",\"code\":2210,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Raipur\",\"code\":2211,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Mahasamund\",\"code\":2212,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Dhamtari\",\"code\":2213,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Kanker\",\"code\":2214,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Bastar\",\"code\":2215,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Dantewada\",\"code\":2216,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Kondagaon\",\"code\":2217,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Narayanpur\",\"code\":2218,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Mungeli\",\"code\":2219,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Bijapur\",\"code\":2220,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Sukma\",\"code\":2221,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Balod\",\"code\":2222,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Bemetara\",\"code\":2223,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Balodabazar\",\"code\":2224,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Gariaband\",\"code\":2225,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Balrampur\",\"code\":2226,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Surajpur\",\"code\":2227,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Gaurela-Pendra-Marvahi\",\"code\":2228,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Madhya Pradesh\",\"code\":23,\"type\":\"state\",\"geoJSONFilename\":\"madhyapradesh_district.json\"},{\"name\":\"Sheopur\",\"code\":2301,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Morena\",\"code\":2302,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Bhind\",\"code\":2303,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Gwalior\",\"code\":2304,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Datia\",\"code\":2305,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Shivpuri\",\"code\":2306,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Guna\",\"code\":2307,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Tikamgarh\",\"code\":2308,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Chhatarpur\",\"code\":2309,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Panna\",\"code\":2310,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Sagar\",\"code\":2311,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Damoh\",\"code\":2312,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Satna\",\"code\":2313,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Rewa\",\"code\":2314,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Umaria\",\"code\":2315,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Shahdol\",\"code\":2316,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Sidhi\",\"code\":2317,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Neemuch\",\"code\":2318,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Mandsaur\",\"code\":2319,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Ratlam\",\"code\":2320,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Ujjain\",\"code\":2321,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Shajapur\",\"code\":2322,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Dewas\",\"code\":2323,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Jhabua\",\"code\":2324,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Dhar\",\"code\":2325,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Indore\",\"code\":2326,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Khargone\",\"code\":2327,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Barwani\",\"code\":2328,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Khandwa\",\"code\":2329,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Rajgarh\",\"code\":2330,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Vidisha\",\"code\":2331,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Bhopal\",\"code\":2332,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Sehore\",\"code\":2333,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Raisen\",\"code\":2334,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Betul\",\"code\":2335,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Harda\",\"code\":2336,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Hoshangabad\",\"code\":2337,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Katni\",\"code\":2338,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Jabalpur\",\"code\":2339,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Narsinghpur\",\"code\":2340,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Dindori\",\"code\":2341,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Mandla\",\"code\":2342,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Chhindwara\",\"code\":2343,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Seoni\",\"code\":2344,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Balaghat\",\"code\":2345,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Ashoknagar\",\"code\":2346,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Anuppur\",\"code\":2347,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Burhanpur\",\"code\":2348,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Alirajpur\",\"code\":2349,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Singrauli\",\"code\":2350,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Agar Malwa\",\"code\":2351,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Niwari\",\"code\":2352,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Gujarat\",\"code\":24,\"type\":\"state\",\"geoJSONFilename\":\"gujarat_district.json\"},{\"name\":\"Kachchh\",\"code\":2401,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Banaskantha\",\"code\":2402,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Patan\",\"code\":2403,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Mahesana\",\"code\":2404,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Sabar Kantha\",\"code\":2405,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Gandhinagar\",\"code\":2406,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Ahmedabad\",\"code\":2407,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Surendranagar\",\"code\":2408,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Rajkot\",\"code\":2409,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Jamnagar\",\"code\":2410,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Porbandar\",\"code\":2411,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Junagadh\",\"code\":2412,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Amreli\",\"code\":2413,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Bhavnagar\",\"code\":2414,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Anand\",\"code\":2415,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Kheda\",\"code\":2416,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Panch Mahals\",\"code\":2417,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Dahod\",\"code\":2418,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Vadodara\",\"code\":2419,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Narmada\",\"code\":2420,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Bharuch\",\"code\":2421,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Surat\",\"code\":2422,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"The Dangs\",\"code\":2423,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Navsari\",\"code\":2424,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Valsad\",\"code\":2425,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Tapi\",\"code\":2426,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Aravalli\",\"code\":2427,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Botad\",\"code\":2428,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Devbhoomi Dwarka\",\"code\":2429,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Gir Somnath\",\"code\":2430,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Mahisagar\",\"code\":2431,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Chhotaudepur\",\"code\":2432,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Morbi\",\"code\":2433,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Daman & Diu\",\"code\":25,\"type\":\"state\",\"geoJSONFilename\":\"damandiu_district.json\"},{\"name\":\"Diu\",\"code\":2501,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Daman\",\"code\":2502,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Dadra & Nagar Haveli\",\"code\":26,\"type\":\"state\",\"geoJSONFilename\":\"dadranagarhaveli_district.json\"},{\"name\":\"Dadra And Nagar Haveli(Ut)\",\"code\":2601,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Maharashtra\",\"code\":27,\"type\":\"state\",\"geoJSONFilename\":\"maharashtra_district.json\"},{\"name\":\"Nandurbar\",\"code\":2701,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Dhule\",\"code\":2702,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Jalgaon\",\"code\":2703,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Buldana\",\"code\":2704,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Akola\",\"code\":2705,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Washim\",\"code\":2706,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Amravati\",\"code\":2707,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Wardha\",\"code\":2708,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Nagpur\",\"code\":2709,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Bhandara\",\"code\":2710,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Gondia\",\"code\":2711,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Gadchiroli\",\"code\":2712,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Chandrapur\",\"code\":2713,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Yavatmal\",\"code\":2714,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Nanded\",\"code\":2715,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Hingoli\",\"code\":2716,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Parbhani\",\"code\":2717,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Jalna\",\"code\":2718,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Aurangabad\",\"code\":2719,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Nashik\",\"code\":2720,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Thane\",\"code\":2721,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Mumbai (Suburban)\",\"code\":2722,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Mumbai\",\"code\":2723,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Raigad\",\"code\":2724,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Pune\",\"code\":2725,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Ahmednagar\",\"code\":2726,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Beed\",\"code\":2727,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Latur\",\"code\":2728,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Osmanabad\",\"code\":2729,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Solapur\",\"code\":2730,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Satara\",\"code\":2731,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Ratnagiri\",\"code\":2732,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Sindhudurg\",\"code\":2733,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Kolhapur\",\"code\":2734,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Sangli\",\"code\":2735,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Palghar\",\"code\":2736,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Andhra Pradesh\",\"code\":28,\"type\":\"state\",\"geoJSONFilename\":\"andhrapradesh_district.json\"},{\"name\":\"Srikakulam\",\"code\":2811,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Vizianagaram\",\"code\":2812,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Visakhapatnam\",\"code\":2813,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"East Godavari\",\"code\":2814,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"West Godavari\",\"code\":2815,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Krishna\",\"code\":2816,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Guntur\",\"code\":2817,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Prakasam\",\"code\":2818,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Nellore\",\"code\":2819,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Kadapa\",\"code\":2820,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Kurnool\",\"code\":2821,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Anantapur\",\"code\":2822,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Chittoor\",\"code\":2823,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Karnataka\",\"code\":29,\"type\":\"state\",\"geoJSONFilename\":\"karnataka_district.json\"},{\"name\":\"Belagavi\",\"code\":2901,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Bagalkot\",\"code\":2902,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Vijayapura\",\"code\":2903,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Kalaburgi\",\"code\":2904,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Bidar\",\"code\":2905,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Raichur\",\"code\":2906,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Koppal\",\"code\":2907,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Gadag\",\"code\":2908,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Dharwad\",\"code\":2909,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Uttara Kannada\",\"code\":2910,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Haveri\",\"code\":2911,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Ballari\",\"code\":2912,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Chitradurga\",\"code\":2913,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Davanagere\",\"code\":2914,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Shivamogga\",\"code\":2915,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Udupi\",\"code\":2916,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Chikkamagaluru\",\"code\":2917,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Tumakuru\",\"code\":2918,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Kolar\",\"code\":2919,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Bengaluru Urban\",\"code\":2920,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Bengaluru Rural\",\"code\":2921,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Mandya\",\"code\":2922,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Hassan\",\"code\":2923,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Dakshina Kannada\",\"code\":2924,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Kodagu\",\"code\":2925,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Mysuru\",\"code\":2926,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Chamarajanagara\",\"code\":2927,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Chikkaballapura\",\"code\":2929,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Ramanagara\",\"code\":2932,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Yadgir\",\"code\":2933,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Goa\",\"code\":30,\"type\":\"state\",\"geoJSONFilename\":\"goa_district.json\"},{\"name\":\"North Goa\",\"code\":3001,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"South Goa\",\"code\":3002,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Lakshadweep\",\"code\":31,\"type\":\"state\",\"geoJSONFilename\":\"lakshadweep_district.json\"},{\"name\":\"Lakshadweep\",\"code\":3101,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Kerala\",\"code\":32,\"type\":\"state\",\"geoJSONFilename\":\"kerala_district.json\"},{\"name\":\"Thiruvananthapuram\",\"code\":3201,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Kollam\",\"code\":3202,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Pathanamthitta\",\"code\":3203,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Alappuzha\",\"code\":3204,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Kottayam\",\"code\":3205,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Idukki\",\"code\":3206,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Ernakulam\",\"code\":3207,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Thrissur\",\"code\":3208,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Palakkad\",\"code\":3209,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Malappuram\",\"code\":3210,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Kozhikode\",\"code\":3211,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Wayanad\",\"code\":3212,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Kannur\",\"code\":3213,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Kasaragod\",\"code\":3214,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Tamil Nadu\",\"code\":33,\"type\":\"state\",\"geoJSONFilename\":\"tamilnadu_district.json\"},{\"name\":\"Kanchipuram\",\"code\":3301,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Tiruvallur\",\"code\":3302,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Cuddalore\",\"code\":3303,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Villupuram\",\"code\":3304,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Vellore\",\"code\":3305,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Tiruvannamalai\",\"code\":3306,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Salem\",\"code\":3307,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Namakkal\",\"code\":3308,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Dharmapuri\",\"code\":3309,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Erode\",\"code\":3310,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Coimbatore\",\"code\":3311,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Nilgiris\",\"code\":3312,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Thanjavur\",\"code\":3313,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Nagapattinam\",\"code\":3314,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Tiruvarur\",\"code\":3315,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Tiruchirappalli\",\"code\":3316,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Karur\",\"code\":3317,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Perambalur\",\"code\":3318,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Pudukkottai\",\"code\":3319,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Madurai\",\"code\":3320,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Theni\",\"code\":3321,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Dindigul\",\"code\":3322,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Ramanathapuram\",\"code\":3323,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Virudhunagar\",\"code\":3324,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Sivagangai\",\"code\":3325,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Tirunelveli\",\"code\":3326,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Thoothukkudi\",\"code\":3327,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Kanniyakumari\",\"code\":3328,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Chennai\",\"code\":3329,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Krishnagiri\",\"code\":3330,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Ariyalur\",\"code\":3331,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Tiruppur\",\"code\":3332,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Chengalpattu\",\"code\":3333,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Tirupattur\",\"code\":3334,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Ranipet\",\"code\":3335,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Mayiladuthurai\",\"code\":3336,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Tenkasi\",\"code\":3337,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Puducherry\",\"code\":34,\"type\":\"state\",\"geoJSONFilename\":\"puducherry_district.json\"},{\"name\":\"Yanam\",\"code\":3401,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Pondicherry\",\"code\":3402,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Mahe\",\"code\":3403,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Karaikal\",\"code\":3404,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Andaman & Nicobar Islands\",\"code\":35,\"type\":\"state\",\"geoJSONFilename\":\"andamannicobarislands_district.json\"},{\"name\":\"Andamans\",\"code\":3501,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Nicobars\",\"code\":3502,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Middle And North Andamans\",\"code\":3503,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Telangana\",\"code\":36,\"type\":\"state\",\"geoJSONFilename\":\"telangana_district.json\"},{\"name\":\"Adilabad\",\"code\":3601,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Komaram Bheem\",\"code\":3602,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Mancherial\",\"code\":3603,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Nirmal\",\"code\":3604,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Nizamabad\",\"code\":3605,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Jagtial\",\"code\":3606,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Peddapalli\",\"code\":3607,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Jayashankar\",\"code\":3608,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Bhadradri\",\"code\":3609,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Mahabubabad\",\"code\":3610,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Warangal Rural\",\"code\":3611,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Warangal Urban\",\"code\":3612,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Karimnagar\",\"code\":3613,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Rajanna\",\"code\":3614,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Kamareddy\",\"code\":3615,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Sangareddy\",\"code\":3616,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Medak\",\"code\":3617,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Siddipet\",\"code\":3618,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Jangaon\",\"code\":3619,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Yadadri\",\"code\":3620,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Medchal-Malkajgiri\",\"code\":3621,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Hyderbad\",\"code\":3622,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Rangareddy\",\"code\":3623,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Vikarabad\",\"code\":3624,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Mahabubnagar\",\"code\":3625,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Jogulamba\",\"code\":3626,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Wanaparthy\",\"code\":3627,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Nagarkurnool\",\"code\":3628,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Nalgonda\",\"code\":3629,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Suryapet\",\"code\":3630,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Khammam\",\"code\":3631,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Mulugu\",\"code\":3632,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Narayanpet\",\"code\":3633,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Ladakh\",\"code\":38,\"type\":\"state\",\"geoJSONFilename\":\"ladakh_district.json\"},{\"name\":\"Leh\",\"code\":3801,\"type\":\"district\",\"geoJSONFilename\":\"\"},{\"name\":\"Kargil\",\"code\":3802,\"type\":\"district\",\"geoJSONFilename\":\"\"}]");

/***/ }),

/***/ "9YJs":
/*!*****************************************************************************************************!*\
  !*** ./src/app/modules/dashboard/components/course-category-wise/course-category-wise.component.ts ***!
  \*****************************************************************************************************/
/*! exports provided: CourseCategoryWiseComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CourseCategoryWiseComponent", function() { return CourseCategoryWiseComponent; });
/* harmony import */ var chart_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! chart.js */ "MO+k");
/* harmony import */ var chart_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(chart_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _sunbird_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @sunbird/core */ "q/PB");
/* harmony import */ var _services_report_report_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../services/report/report.service */ "t7hn");
/* harmony import */ var _sunbird_shared__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @sunbird/shared */ "btWG");
/* harmony import */ var lodash_es__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! lodash-es */ "T89o");
/* harmony import */ var _services_addusser_addusser_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../services/addusser/addusser.service */ "9r3v");






var CourseCategoryWiseComponent = (function () {
    function CourseCategoryWiseComponent(_httpService, reportService, searchService, toasterService, resourceService) {
        this._httpService = _httpService;
        this.reportService = reportService;
        this.searchService = searchService;
        this.toasterService = toasterService;
        this.resourceService = resourceService;
        this.organizationTab = true;
        this.userTab = true;
        this.cityList = [];
        this.userList = [];
        this.noResult = true;
        this.popupTitle = "Course wise Graphical Reports";
        this.selectedItems = [];
        this.addUserPopup = false;
        this.i = 0;
        this.strList = "";
        this.colsUser = [];
        this.Graph_Data_List = [];
        this.Table_Data_List = [];
        this.B1_Root_list = [];
        this.B2_Root_list = [];
        this.strTxt = '';
        this.tooltip = '';
    }
    CourseCategoryWiseComponent.prototype.ngOnInit = function () {
        this.getCourseList();
        this.colsUser = [
            { field: 'SNo', header: 'SNo', width: '50px' },
            { field: 'organisation', header: 'Organisation', width: '150px' },
            { field: 'Category', header: 'Category', width: '150px' },
            { field: 'subject', header: 'Sub Category', width: '150px' },
            { field: 'name', header: 'Topic', width: '150px' },
            { field: 'creator', header: 'Creator', width: '150px' },
        ];
    };
    CourseCategoryWiseComponent.prototype.getCourseList = function () {
        var _this = this;
        var data = {
            "request": {
                "query": "",
                "filters": { "status": ["Live"],
                    "framework": ["nulp"],
                    "contentType": ["Course"] },
                "limit": "1000",
                "sort_by": { "lastUpdatedOn": "desc" },
                "fields": ["identifier", "creator", "organisation", "copyright",
                    "name", "contentType", "createdFor", "channel",
                    "board", "medium", "gradeLevel", "subject",
                    "lastUpdatedOn", "status", "createdBy",
                    "framework", "createdOn", "lastPublishedOn"]
            }
        };
        this.reportService.getContentCreationStaticsReport(data).subscribe(function (response) {
            if (lodash_es__WEBPACK_IMPORTED_MODULE_4__["get"](response, 'responseCode') === 'OK') {
                if (response.result.count > 0) {
                    var tableData = [];
                    var tempObj = lodash_es__WEBPACK_IMPORTED_MODULE_4__["cloneDeep"](response.result.content);
                    tableData = tempObj;
                    var self = _this;
                    var ChnlIds = [];
                    var UserIds = [];
                    ChnlIds = lodash_es__WEBPACK_IMPORTED_MODULE_4__["uniq"](lodash_es__WEBPACK_IMPORTED_MODULE_4__["map"](tempObj, 'channel'));
                    UserIds = lodash_es__WEBPACK_IMPORTED_MODULE_4__["uniq"](lodash_es__WEBPACK_IMPORTED_MODULE_4__["map"](tempObj, 'createdBy'));
                    var reqParam = { filters: { id: UserIds } };
                    _this.searchService.getUserList(reqParam).subscribe(function (response) {
                        _this.userList = [];
                        var userObj = lodash_es__WEBPACK_IMPORTED_MODULE_4__["cloneDeep"](response.result.response.content);
                        _this.userList = userObj;
                        var reqPayload = { "request": { "filters": { "id": ChnlIds }, "limit": 1000, "offset": 0 } };
                        _this.reportService.getOrganizationName(reqPayload).subscribe(function (response) {
                            response.result.response.content.forEach(function (c) {
                                _this.cityList.push({ "id": c.id, "orgName": c.orgName, "identifier": c.identifier });
                            });
                            _this.InitializeGraph(tableData);
                        });
                    });
                }
                else {
                    _this.noResultMessage = { 'messageText': 'messages.stmsg.m0131' };
                    _this.noResult = true;
                }
            }
            else {
                _this.toasterService.error(_this.resourceService.messages.emsg.m0007);
            }
        }, function (err) {
            _this.toasterService.error(_this.resourceService.messages.emsg.m0007);
        });
    };
    CourseCategoryWiseComponent.prototype.InitializeGraph = function (C_List) {
        var _this = this;
        if (this.cityList.length > 0) {
        }
        this.userList.forEach(function (element) {
            _this.cityList.forEach(function (element1) {
                if (element.organisations.length > 1) {
                    if ((element1.identifier == element.organisations[1].organisationId) &&
                        (element.rootOrgId != element.organisations[1].organisationId)) {
                        element.orgNameUser_new = element1.orgName;
                        element.orgTypeUser_new = 'Sub Organization';
                    }
                    else if (element.rootOrgId == element.organisations[1].organisationId) {
                        element.orgNameUser_new = element.organisations[0].orgName;
                        element.orgTypeUser_new = 'Sub Organization';
                    }
                    else {
                        element.orgNameUser_new = element.organisations[0].orgName;
                        element.orgTypeUser_new = 'Sub Organization';
                    }
                }
                else if (element.organisations.length == 1) {
                    element.orgNameUser_new = element.organisations[0].orgName;
                    element.orgTypeUser_new = 'Root  Organization';
                }
            });
        });
        var groupedUserData = this.userList.reduce(function (rv, x) {
            (rv[x['orgNameUser_new']] = rv[x['orgNameUser_new']] || []).push(x);
            return rv;
        }, {});
        this.Graph_Data_List = [];
        C_List.forEach(function (x) {
            var CityTraced = _this.cityList.find(function (el) { return el.id === x.channel; });
            var UserTraced = _this.userList.find(function (el) { return el.id === x.createdBy; });
            _this.Graph_Data_List.push({
                "identifier": x.identifier,
                "copyright": x.copyright,
                "createdFor": x.createdFor,
                "creator": x.creator,
                "subject": x.subject,
                "channel": x.channel,
                "organisation": x.organisation,
                "RootOrgName_new_user": CityTraced["orgName"],
                "rootOrgName_new_city": UserTraced["rootOrgName"],
                "orgNameUser_new": UserTraced["orgNameUser_new"],
                "orgTypeUser_new": UserTraced["orgTypeUser_new"],
                "lastNameUser_new": UserTraced["lastName"],
                "createdBy": x.createdBy,
                "medium": x.medium,
                "name": x.name,
                "createdOn": x.createdOn,
                "objectType": x.objectType,
                "gradeLevel": x.gradeLevel,
                "framework": x.framework,
                "contentType": x.contentType,
                "Category": x.board,
                "lastPublishedOn": x.lastPublishedOn,
                "lastUpdatedOn": x.lastUpdatedOn,
                "status": x.status
            });
        });
        this.Graph_Data_List.sort(function (a, b) {
            if (a.createdBy < b.createdBy)
                return -1;
            if (a.createdBy > b.createdBy)
                return 1;
            return 0;
        });
        this.GeneratingCategorylChart(this.Graph_Data_List);
    };
    CourseCategoryWiseComponent.prototype.GeneratingCategorylChart = function (ResultCT) {
        var _this = this;
        var B1_Name = [];
        var B1_Value = [];
        var B1_Filter = [];
        var B1_Colour = [];
        this.B1_Root_list = this.groupByKey(ResultCT, "Category");
        Object.keys(this.B1_Root_list).forEach(function (x) {
            B1_Name.push(x);
            B1_Value.push(_this.B1_Root_list[x].length);
            var xx = _this.B1_Root_list[x];
            B1_Filter.push(xx[0].Category);
            B1_Colour.push(_this.getRandomColorHex());
        });
        this.B1_Chart(B1_Name, B1_Value, B1_Filter, B1_Colour);
    };
    CourseCategoryWiseComponent.prototype.B1_Chart = function (B1_Name, B1_Value, B1_Filter, B1_Colour) {
        if (this.B1_Piechart) {
            this.B1_Piechart.destroy();
        }
        this.B1_Piechart = new chart_js__WEBPACK_IMPORTED_MODULE_0__["Chart"]('B1_Canvas2', {
            type: 'bar',
            data: {
                labels: B1_Name,
                datasets: [{
                        data: B1_Value,
                        borderColor: B1_Filter,
                        borderSkipped: B1_Filter,
                        backgroundColor: B1_Colour,
                        borderWidth: 1,
                        fill: true
                    }
                ]
            },
            options: {
                tooltips: { mode: 'index' },
                title: { display: true, text: "Category wise Course Dashboard", fontSize: 18, fontColor: "#111", },
                legend: { display: false, labels: { fontColor: "green", } },
                scales: {
                    xAxes: [{ scaleLabel: { display: true, labelString: 'Course Category' } }],
                    yAxes: [{ scaleLabel: { display: true, labelString: 'Course Count' } }],
                },
            }
        });
    };
    CourseCategoryWiseComponent.prototype.B1_Chart_showData = function (evt) {
        this.resetGraph('B1');
        var activePoint = this.B1_Piechart.getElementAtEvent(evt);
        if (activePoint.length > 0) {
            var clickedDatasetIndex = activePoint[0]._datasetIndex;
            var clickedElementindex = activePoint[0]._index;
            var filter_data = activePoint[0]._model.borderSkipped;
            this.strTxt = JSON.stringify(activePoint[0]._model);
            var label = this.B1_Piechart.data.labels[clickedElementindex];
            var value = this.B1_Piechart.data.datasets[clickedDatasetIndex].data[clickedElementindex];
            this.B2_Root_list = this.groupBy(this.B1_Root_list[filter_data], function (item) {
                return [item.orgTypeUser_new, item.orgNameUser_new];
            });
            this.popupTitle = this.B1_Root_list[filter_data].length + " Course(s) Created in '" + filter_data + "' Category.";
            this.tooltip = filter_data;
            this.loadGridView(this.B1_Root_list[filter_data]);
            this.GeneratingOrg_TypeChart(this.B2_Root_list);
        }
    };
    CourseCategoryWiseComponent.prototype.GeneratingOrg_TypeChart = function (ResultCO) {
        var _this = this;
        var B2_Name = [];
        var B2_Value = [];
        var B2_Filter = [];
        var B2_Colour = [];
        Object.keys(ResultCO).forEach(function (x) {
            var Obj = ResultCO[x];
            B2_Name.push(Obj[0].orgNameUser_new);
            B2_Value.push(ResultCO[x].length);
            B2_Filter.push(x);
            B2_Colour.push(_this.getRandomColorHex());
        });
        this.B2_Chart(B2_Name, B2_Value, B2_Filter, B2_Colour);
    };
    CourseCategoryWiseComponent.prototype.B2_Chart = function (B2_Name, B2_Value, B2_Filter, B2_Colour) {
        if (this.B2_Piechart) {
            this.B2_Piechart.destroy();
        }
        this.B2_Piechart = new chart_js__WEBPACK_IMPORTED_MODULE_0__["Chart"]('B2_Canvas2', {
            type: 'bar',
            data: {
                labels: B2_Name,
                datasets: [{
                        data: B2_Value,
                        borderColor: B2_Filter,
                        borderSkipped: B2_Filter,
                        backgroundColor: B2_Colour,
                        borderWidth: 1,
                        fill: true
                    }
                ]
            },
            options: {
                tooltips: { mode: 'index' },
                title: { display: true, text: "Orgnization wise Course Created", fontSize: 18, fontColor: "#111", },
                legend: { display: false, labels: { fontColor: "green", } },
                scales: {
                    xAxes: [{ scaleLabel: { display: true, labelString: 'Organization' } }],
                    yAxes: [{ scaleLabel: { display: true, labelString: 'Course Count' } }],
                },
            }
        });
    };
    CourseCategoryWiseComponent.prototype.B2_Chart_showData = function (evt) {
        this.resetGraph('B2');
        var activePoint = this.B2_Piechart.getElementAtEvent(evt);
        if (activePoint.length > 0) {
            var clickedDatasetIndex = activePoint[0]._datasetIndex;
            var clickedElementindex = activePoint[0]._index;
            var filter_data = activePoint[0]._model.borderSkipped;
            var label = this.B2_Piechart.data.labels[clickedElementindex];
            var value = this.B2_Piechart.data.datasets[clickedDatasetIndex].data[clickedElementindex];
            this.popupTitle = this.B2_Root_list[filter_data].length + " Course(s) of '" + this.tooltip + "' Category are Created.";
            this.loadGridView(this.B2_Root_list[filter_data]);
        }
    };
    CourseCategoryWiseComponent.prototype.resetGraph = function (ngClick) {
        if (ngClick == "B1") {
            this.Table_Data_List = [];
            this.B2_Root_list = [];
        }
        else if (ngClick == "B2") {
            this.Table_Data_List = [];
        }
    };
    CourseCategoryWiseComponent.prototype.loadGridView = function (tableData) {
        var SNo = 0;
        tableData.forEach(function (y) {
            SNo++;
            y.SNo = SNo;
        });
        this.Table_Data_List = tableData;
    };
    CourseCategoryWiseComponent.prototype.getRandomColorHex = function () {
        var color = ["red", "green", "blue", "purple", "magenta", "aqua", "salmon", "darkgray", "pink", "coral"];
        this.i++;
        return "blue";
    };
    CourseCategoryWiseComponent.prototype.groupBy = function (array, f) {
        var groups = {};
        array.forEach(function (o) {
            var group = JSON.stringify(f(o));
            groups[group] = groups[group] || [];
            groups[group].push(o);
        });
        return Object.keys(groups).map(function (group) {
            return groups[group];
        });
    };
    CourseCategoryWiseComponent.prototype.groupByKey = function (list, key) {
        return list.reduce(function (rv, x) {
            (rv[x[key]] = rv[x[key]] || []).push(x);
            return rv;
        }, {});
    };
    ;
    return CourseCategoryWiseComponent;
}());



/***/ }),

/***/ "9r3v":
/*!*************************************************************************!*\
  !*** ./src/app/modules/dashboard/services/addusser/addusser.service.ts ***!
  \*************************************************************************/
/*! exports provided: AddusserService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AddusserService", function() { return AddusserService; });
/* harmony import */ var _sunbird_shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @sunbird/shared */ "btWG");
/* harmony import */ var _sunbird_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @sunbird/core */ "q/PB");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ "8Y7J");
/* harmony import */ var _core_services_learner_learner_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../core/services/learner/learner.service */ "lysQ");
/* harmony import */ var _shared_services_config_config_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../shared/services/config/config.service */ "j0Qm");





var AddusserService = (function () {
    function AddusserService(learnerService, configService) {
        this.learnerService = learnerService;
        this.configService = configService;
    }
    AddusserService.prototype.createUserDetailSave = function (data) {
        console.log(data);
        var options = {
            url: this.configService.urlConFig.URLS.USER.SIGNUP,
            data: data,
        };
        return this.learnerService.post(options);
    };
    AddusserService.prototype.userSearch = function (data) {
        var options = {
            url: this.configService.urlConFig.URLS.ADMIN.USER_SEARCH,
            data: data,
        };
        return this.learnerService.post(options);
    };
    AddusserService.prototype.orgSearch = function (data) {
        var options = {
            url: this.configService.urlConFig.URLS.ADMIN.ORG_SEARCH_OLD,
            data: data,
        };
        return this.learnerService.post(options);
    };
    AddusserService.prototype.getOrgDetail = function (data) {
        var options = {
            url: this.configService.urlConFig.URLS.ADMIN.ORG_SEARCH_OLD,
            data: data,
        };
        return this.learnerService.post(options);
    };
    AddusserService.prototype.userBlock = function (data) {
        var options = {
            url: this.configService.urlConFig.URLS.ADMIN.DELETE_USER,
            data: data,
        };
        return this.learnerService.post(options);
    };
    AddusserService.prototype.userUnBlock = function (data) {
        var options = {
            url: this.configService.urlConFig.URLS.ADMIN.UNDELETE_USER,
            data: data,
        };
        return this.learnerService.post(options);
    };
    AddusserService.prototype.addroleSubRootOrganization = function (data) {
        var options = {
            url: this.configService.urlConFig.URLS.ADMIN.UPDATE_USER_ORG_ROLES,
            data: data,
        };
        return this.learnerService.post(options);
    };
    AddusserService.prototype.addroleRootOrganization = function (data) {
        var options = {
            url: this.configService.urlConFig.URLS.ADMIN.UPDATE_USER_ORG_ROLES,
            data: data,
        };
        return this.learnerService.post(options);
    };
    AddusserService.prototype.getEditUserById = function (data) {
        var option = {
            url: this.configService.urlConFig.URLS.USER.GET_PROFILE + data,
        };
        return this.learnerService.get(option);
    };
    AddusserService.prototype.updateUserData = function (data) {
        var options = {
            url: this.configService.urlConFig.URLS.USER.UPDATE_USER_PROFILE,
            data: data,
        };
        return this.learnerService.patch(options);
    };
    AddusserService.prototype.removeOrg = function (data) {
        var options = {
            url: this.configService.urlConFig.URLS.ORGANIZATION.MEMBERREMOVE,
            data: data,
        };
        return this.learnerService.post(options);
    };
    AddusserService.prototype.getorgData = function (data) {
        var options = {
            url: this.configService.urlConFig.URLS.ORGANIZATION.READ,
            data: data,
        };
        return this.learnerService.post(options);
    };
    AddusserService.prototype.getSuborgData = function (data) {
        var options = {
            url: this.configService.urlConFig.URLS.ADMIN.ORG_SEARCH_OLD,
            data: data,
        };
        return this.learnerService.post(options);
    };
    AddusserService.prototype.updateOrgDetail = function (data) {
        console.log(data);
        var options = {
            url: this.configService.urlConFig.URLS.ORGANIZATION.UPDATE,
            data: data,
        };
        return this.learnerService.patch(options);
    };
    AddusserService.prototype.updateOrgStatusDetail = function (data) {
        console.log(data);
        var options = {
            url: this.configService.urlConFig.URLS.ORGANIZATION.STATUSUPDATE,
            data: data,
        };
        return this.learnerService.patch(options);
    };
    AddusserService.prototype.createOrgDetailSave = function (data) {
        console.log(data);
        var options = {
            url: this.configService.urlConFig.URLS.ADMIN.ORG_CREATE,
            data: data,
        };
        return this.learnerService.post(options);
    };
    AddusserService.prototype.createRootOrgDetailSave = function (data) {
        console.log(data);
        var options = {
            url: this.configService.urlConFig.URLS.ADMIN.ORG_CREATE,
            data: data,
        };
        return this.learnerService.post(options);
    };
    AddusserService.prototype.createForm = function (data) {
        console.log(data);
        var options = {
            url: this.configService.urlConFig.URLS.ORGANIZATION.FORMCREATEORG,
            data: data,
        };
        return this.learnerService.post(options);
    };
    AddusserService.prototype.bulkUserUpload = function (data) {
        var options = {
            url: this.configService.urlConFig.URLS.ADMIN.BULK.USERS_UPLOAD,
            data: data,
        };
        return this.learnerService.post(options);
    };
    AddusserService.prototype.updatePatch = function (data, orgId) {
        console.log(data);
        var options = {
            url: this.configService.urlConFig.URLS.ORGANIZATION.UPDATEPATCH +
                "/" +
                orgId,
            data: data,
        };
        return this.learnerService.patch(options);
    };
    AddusserService.prototype.createPreference = function (data) {
        var options = {
            url: this.configService.urlConFig.URLS.ORGANIZATION.PREFERENCES_CREATE,
            data: data,
        };
        return this.learnerService.post(options);
    };
    AddusserService.ɵprov = _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵdefineInjectable"]({ factory: function AddusserService_Factory() { return new AddusserService(_angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵinject"](_core_services_learner_learner_service__WEBPACK_IMPORTED_MODULE_3__["LearnerService"]), _angular_core__WEBPACK_IMPORTED_MODULE_2__["ɵɵinject"](_shared_services_config_config_service__WEBPACK_IMPORTED_MODULE_4__["ConfigService"])); }, token: AddusserService, providedIn: "root" });
    return AddusserService;
}());



/***/ }),

/***/ "A6gx":
/*!***************************************************************************************!*\
  !*** ./src/app/modules/dashboard/services/course-progress/course-progress.service.ts ***!
  \***************************************************************************************/
/*! exports provided: CourseProgressService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CourseProgressService", function() { return CourseProgressService; });
/* harmony import */ var _sunbird_shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @sunbird/shared */ "btWG");
/* harmony import */ var _sunbird_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @sunbird/core */ "q/PB");
/* harmony import */ var lodash_es__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash-es */ "T89o");
/* harmony import */ var _usage_usage_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../usage/usage.service */ "WKNp");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs/operators */ "kU1M");
/* harmony import */ var _sunbird_telemetry__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @sunbird/telemetry */ "RnNo");
/* harmony import */ var _core_services_data_data_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./../../../core/services/data/data.service */ "LjG8");
/* harmony import */ var _core_services_public_data_public_data_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./../../../core/services/public-data/public-data.service */ "BZPo");
/* harmony import */ var _angular_common_http__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/common/http */ "IheW");









var CourseProgressService = (function () {
    function CourseProgressService(learnerService, config, usageService, telemetryService, dataService, http, publicDataService) {
        this.learnerService = learnerService;
        this.usageService = usageService;
        this.telemetryService = telemetryService;
        this.dataService = dataService;
        this.http = http;
        this.publicDataService = publicDataService;
        this.config = config;
    }
    CourseProgressService.prototype.getBatches = function (requestParam) {
        var option = {
            url: this.config.urlConFig.URLS.BATCH.GET_BATCHS,
            data: {
                'request': {
                    'filters': {
                        'courseId': requestParam.courseId,
                        'status': requestParam.status,
                        'mentors': requestParam.mentors
                    },
                    'sort_by': { 'createdDate': 'desc' }
                }
            }
        };
        return this.learnerService.post(option);
    };
    CourseProgressService.prototype.getDashboardData = function (requestParam) {
        var option = {
            url: this.config.urlConFig.URLS.DASHBOARD.COURSE_PROGRESS_V2 + '/' + requestParam.batchIdentifier,
            param: {
                limit: requestParam.limit,
                offset: requestParam.offset,
            }
        };
        if (lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](requestParam, 'sortBy')) {
            option.param['sortBy'] = requestParam.sortBy;
            option.param['sortOrder'] = requestParam.sortOrder;
        }
        if (lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](requestParam, 'username')) {
            option.param['userName'] = requestParam.username;
        }
        return this.learnerService.get(option);
    };
    CourseProgressService.prototype.getCourseProgressExhaustData = function (requestParam) {
        var option;
        if (requestParam.batchId !== undefined) {
            option = {
                url: this.config.urlConFig.URLS.BATCH.COURSE_PROGRESS_EXHAUST + '/' + requestParam.courseId,
                param: {
                    batchid: requestParam.batchId,
                    limit: requestParam.limit,
                    offset: requestParam.offset,
                }
            };
        }
        else {
            option = {
                url: this.config.urlConFig.URLS.BATCH.COURSE_PROGRESS_EXHAUST + '/' + requestParam.courseId,
                param: {
                    limit: requestParam.limit,
                    offset: requestParam.offset,
                }
            };
        }
        if (lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](requestParam, 'query')) {
            option.param['query'] = requestParam.query;
        }
        console.log("API option -", option);
        return this.learnerService.get(option);
    };
    CourseProgressService.prototype.getExportData = function (requestParam) {
        var option;
        if (requestParam.batchId !== undefined) {
            option = {
                url: this.config.urlConFig.URLS.BATCH.COURSE_PROGRESS_EXHAUST_CSV + '/' + requestParam.courseId,
                param: {
                    batchid: requestParam.batchId,
                }
            };
        }
        else {
            option = {
                url: this.config.urlConFig.URLS.BATCH.COURSE_PROGRESS_EXHAUST_CSV + '/' + requestParam.courseId,
            };
        }
        if (lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](requestParam, 'query')) {
            option.param['query'] = requestParam.query;
        }
        return this.learnerService.get(option);
    };
    CourseProgressService.prototype.getCourseData = function (requestParam) {
        var option = {
            url: this.config.urlConFig.URLS.COURSE.HIERARCHY + '/' + requestParam
        };
        return this.learnerService.get(option);
    };
    CourseProgressService.prototype.downloadDashboardData = function (requestParam) {
        var option = {
            url: this.config.urlConFig.URLS.DASHBOARD.COURSE_PROGRESS + '/' + requestParam.batchIdentifier + '/export',
        };
        return this.learnerService.get(option);
    };
    CourseProgressService.prototype.parseDasboardResponse = function (data) {
        var tableData = [];
        lodash_es__WEBPACK_IMPORTED_MODULE_2__["forEach"](data.series, function (seriesData, key) {
            if (key === 'course.progress.course_progress_per_user.count') {
                lodash_es__WEBPACK_IMPORTED_MODULE_2__["forEach"](seriesData, function (bucketData, bucketKey) {
                    if (bucketKey === 'buckets') {
                        tableData = bucketData;
                    }
                });
            }
        });
        return tableData;
    };
    CourseProgressService.prototype.getReportsMetaData = function (requestParam) {
        var _this = this;
        var url = "" + this.config.urlConFig['URLS'].COURSE.GET_REPORTS_METADATA;
        return this.usageService.getData(url, requestParam).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["map"])(function (response) {
            if (requestParam.telemetryData) {
                for (var _i = 0, _a = Object.keys(response.result); _i < _a.length; _i++) {
                    var reportName = _a[_i];
                    var event_1 = {
                        context: {
                            env: requestParam.telemetryData.snapshot.data.telemetry.env
                        },
                        edata: {
                            type: requestParam.telemetryData.snapshot.data.telemetry.type,
                            level: lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](response, "result." + reportName + ".statusCode") !== 200 ? 'ERROR' : 'SUCCESS',
                            message: lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](response, "result." + reportName + ".lastModified") ? reportName + " is available" : reportName + " is not available",
                            pageid: requestParam.telemetryData.snapshot.data.telemetry.pageid
                        }
                    };
                    _this.telemetryService.log(event_1);
                }
            }
            return response;
        }));
    };
    return CourseProgressService;
}());



/***/ }),

/***/ "AYsr":
/*!***********************************************************************************************!*\
  !*** ./src/app/modules/dashboard/components/dashboard-sidebar/dashboard-sidebar.component.ts ***!
  \***********************************************************************************************/
/*! exports provided: DashboardSidebarComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DashboardSidebarComponent", function() { return DashboardSidebarComponent; });
/* harmony import */ var _sunbird_learn__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @sunbird/learn */ "zoKS");
/* harmony import */ var _sunbird_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @sunbird/core */ "q/PB");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "iInd");
/* harmony import */ var _sunbird_shared__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @sunbird/shared */ "btWG");
/* harmony import */ var lodash_es__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! lodash-es */ "T89o");





var DashboardSidebarComponent = (function () {
    function DashboardSidebarComponent(resourceService, router, activatedRoute, permissionService, courseConsumptionService) {
        this.resourceService = resourceService;
        this.router = router;
        this.activatedRoute = activatedRoute;
        this.permissionService = permissionService;
        this.courseConsumptionService = courseConsumptionService;
        this.courseHierarchy = this.courseConsumptionService.courseHierarchy;
    }
    DashboardSidebarComponent.prototype.ngOnInit = function () {
        this.setTelemetryData();
    };
    DashboardSidebarComponent.prototype.setTelemetryData = function () {
        this.courseStatsEdata = {
            id: 'course-dashboard',
            type: 'click',
            pageid: lodash_es__WEBPACK_IMPORTED_MODULE_4__["get"](this.activatedRoute.snapshot, 'data.telemetry.pageid'),
        };
        this.courseBatchesEdata = {
            id: 'course-batches',
            type: 'click',
            pageid: lodash_es__WEBPACK_IMPORTED_MODULE_4__["get"](this.activatedRoute.snapshot, 'data.telemetry.pageid'),
        };
        this.courseCertificatesEdata = {
            id: 'course-reissue-cert',
            type: 'click',
            pageid: lodash_es__WEBPACK_IMPORTED_MODULE_4__["get"](this.activatedRoute.snapshot, 'data.telemetry.pageid'),
        };
        this.courseProgressExhaustEdata = {
            id: 'course-progress-exhaust',
            type: 'click',
            pageid: lodash_es__WEBPACK_IMPORTED_MODULE_4__["get"](this.activatedRoute.snapshot, 'data.telemetry.pageid'),
        };
        this.telemetryInteractObject = {
            id: lodash_es__WEBPACK_IMPORTED_MODULE_4__["get"](this.activatedRoute.snapshot, 'params.courseId'),
            type: lodash_es__WEBPACK_IMPORTED_MODULE_4__["get"](this.activatedRoute.snapshot, 'data.telemetry.object.type'),
            ver: lodash_es__WEBPACK_IMPORTED_MODULE_4__["get"](this.activatedRoute.snapshot, 'data.telemetry.object.ver'),
        };
    };
    return DashboardSidebarComponent;
}());



/***/ }),

/***/ "B/52":
/*!***************************************************************************************!*\
  !*** ./src/app/modules/dashboard/components/all-dashboard/all-dashboard.component.ts ***!
  \***************************************************************************************/
/*! exports provided: AllReportsComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AllReportsComponent", function() { return AllReportsComponent; });
/* harmony import */ var _sunbird_telemetry__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @sunbird/telemetry */ "RnNo");
/* harmony import */ var _services__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../../services */ "gfN8");
/* harmony import */ var lodash_es__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash-es */ "T89o");
/* harmony import */ var _angular_platform_browser__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/platform-browser */ "cUpR");
/* harmony import */ var _sunbird_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @sunbird/core */ "q/PB");
/* harmony import */ var _sunbird_shared__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @sunbird/shared */ "btWG");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/router */ "iInd");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! moment */ "VDUF");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! rxjs */ "qCKp");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! rxjs/operators */ "kU1M");
/* harmony import */ var sb_svg2pdf__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! sb-svg2pdf */ "7C15");
/* harmony import */ var _sunbird_profile__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @sunbird/profile */ "XCaa");












var AllReportsComponent = (function () {
    function AllReportsComponent(configService, layoutService, usageService, sanitizer, userService, toasterService, utilService, connectionService, resourceService, activatedRoute, certDownloadAsPdf, router, reportService, courseCService, profileService) {
        this.configService = configService;
        this.layoutService = layoutService;
        this.usageService = usageService;
        this.sanitizer = sanitizer;
        this.userService = userService;
        this.toasterService = toasterService;
        this.utilService = utilService;
        this.connectionService = connectionService;
        this.resourceService = resourceService;
        this.certDownloadAsPdf = certDownloadAsPdf;
        this.router = router;
        this.reportService = reportService;
        this.courseCService = courseCService;
        this.profileService = profileService;
        this.donutChartData = [];
        this.chartData = [];
        this.showTrainingstats = true;
        this.isTableDataLoaded = false;
        this.enrolledCourseData = [];
        this.cols = [];
        this.unsubscribe$ = new rxjs__WEBPACK_IMPORTED_MODULE_8__["Subject"]();
        this.isConnected = true;
        this.activatedRoute = activatedRoute;
    }
    AllReportsComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.isDesktopApp = this.utilService.isDesktopApp;
        this.setTelemetryImpression();
        this.adminDashboard = this.configService.rolesConfig.headerDropdownRoles.adminDashboard;
        this.urlPathValue = '';
        this.urlPathValue = sessionStorage.getItem("urlPath");
        this.getEnrolledCourses();
        this.initLayout();
        this.noRecorsFoundMessage = {
            'messageText': "No Records found"
        };
        if (this.isDesktopApp) {
            this.connectionService.monitor()
                .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_9__["takeUntil"])(this.unsubscribe$)).subscribe(function (isConnected) {
                _this.isConnected = isConnected;
            });
        }
    };
    AllReportsComponent.prototype.initLayout = function () {
        var _this = this;
        this.layoutConfiguration = this.layoutService.initlayoutConfig();
        this.layoutService.switchableLayout().pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_9__["takeUntil"])(this.unsubscribe$)).subscribe(function (layoutConfig) {
            if (layoutConfig != null) {
                _this.layoutConfiguration = layoutConfig.layout;
            }
        });
    };
    AllReportsComponent.prototype.getEnrolledCourses = function () {
        var _this = this;
        this.reportService.getEnrolledCourses().subscribe(function (response) {
            _this.enrolledCourseData = [];
            if (lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](response, 'responseCode') === 'OK') {
                if (response.result.courses.length > 0) {
                    _this.enrolledCourseData = response.result.courses;
                    var self = _this;
                    lodash_es__WEBPACK_IMPORTED_MODULE_2__["map"](_this.enrolledCourseData, function (obj) {
                        obj.batchName = obj.batch.name;
                        obj.courseName = obj.courseName;
                        obj.enrollmentType = obj.batch.enrollmentType;
                        if (obj.batch.startDate)
                            obj.startDate = moment__WEBPACK_IMPORTED_MODULE_7__(obj.batch.startDate).format('DD-MMM-YYYY');
                        if (obj.batch.endDate)
                            obj.endDate = moment__WEBPACK_IMPORTED_MODULE_7__(obj.batch.endDate).format('DD-MMM-YYYY');
                        if (obj.enrolledDate)
                            obj.enrollmentDate = moment__WEBPACK_IMPORTED_MODULE_7__(obj.enrolledDate).format('DD-MMM-YYYY');
                        obj.statusName = (obj.progress === 0) ? 'Not-Started' : ((obj.progress === obj.leafNodesCount || obj.progress > obj.leafNodesCount) ? 'Completed' : 'In-Progress');
                        obj.statusName = (obj.statusName != 'Completed' && (new Date(obj.batch.endDate) < new Date())) ? 'Expired' : obj.statusName;
                        if (obj.statusName === 'Completed') {
                            obj.completedOn = moment__WEBPACK_IMPORTED_MODULE_7__(obj.completedOn).format('DD-MMM-YYYY');
                        }
                        else if (obj.statusName === 'Expired') {
                            obj.completedOn = 'Incomplete';
                        }
                        else if (obj.statusName === 'In-Progress') {
                            obj.completedOn = 'Ongoing';
                        }
                        obj.downloadUrl = self.azureUrl + obj.courseName + '-' + self.userService.userid + '-' + obj.courseId + '.pdf';
                    });
                    _this.initializeColumns();
                    _this.initializeDonutChart();
                }
                _this.showTrainingstats = true;
                if (lodash_es__WEBPACK_IMPORTED_MODULE_2__["isEmpty"](_this.enrolledCourseData)) {
                    _this.showTrainingstats = false;
                }
            }
            else {
                _this.toasterService.error(_this.resourceService.messages.emsg.m0005);
            }
        }, function (err) {
            _this.noResultMessage = {
                'messageText': 'messages.stmsg.m0131'
            };
        });
    };
    AllReportsComponent.prototype.initializeColumns = function () {
        this.cols = [
            { field: 'batchName', header: 'Batch Name' },
            { field: 'courseName', header: 'Course Name' },
            { field: 'enrollmentType', header: 'Enrollment Type' },
            { field: 'startDate', header: 'Batch Start Date' },
            { field: 'enrollmentDate', header: 'Enrollment Date' },
            { field: 'endDate', header: 'Batch End Date' },
            { field: 'completedOn', header: 'Completion Date' },
            { field: 'statusName', header: 'Status' },
            { field: 'certificate', header: 'Certificate', width: '75px' }
        ];
    };
    AllReportsComponent.prototype.downloadCert = function (course) {
        var _this = this;
        if (this.isDesktopApp && !this.isConnected) {
            this.toasterService.error(this.resourceService.messages.desktop.emsg.cannotAccessCertificate);
            return;
        }
        if (lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](course, 'issuedCertificates.length')) {
            this.toasterService.success(lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](this.resourceService, 'messages.smsg.certificateGettingDownloaded'));
            var certificateInfo_1 = course.issuedCertificates[0];
            var courseName_1 = course.courseName || lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](course, 'issuedCertificates[0].name') || 'certificate';
            if (lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](certificateInfo_1, 'identifier')) {
                this.courseCService.getSignedCourseCertificate(lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](certificateInfo_1, 'identifier'))
                    .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_9__["takeUntil"])(this.unsubscribe$))
                    .subscribe(function (resp) {
                    if (lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](resp, 'printUri')) {
                        _this.certDownloadAsPdf.download(resp.printUri, null, courseName_1);
                    }
                    else if (lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](course, 'certificates.length')) {
                        _this.downloadPdfCertificate(course.certificates[0]);
                    }
                    else {
                        _this.toasterService.error(_this.resourceService.messages.emsg.m0076);
                    }
                }, function (error) {
                    _this.downloadPdfCertificate(certificateInfo_1);
                });
            }
            else {
                this.downloadPdfCertificate(certificateInfo_1);
            }
        }
        else if (lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](course, 'certificates.length')) {
            this.toasterService.success(lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](this.resourceService, 'messages.smsg.certificateGettingDownloaded'));
            this.downloadPdfCertificate(course.certificates[0]);
        }
        else {
            this.toasterService.error(this.resourceService.messages.emsg.m0076);
        }
    };
    AllReportsComponent.prototype.downloadPdfCertificate = function (value) {
        var _this = this;
        if (lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](value, 'url')) {
            var request = {
                request: {
                    pdfUrl: lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](value, 'url')
                }
            };
            this.profileService.downloadCertificates(request).subscribe(function (apiResponse) {
                var signedPdfUrl = lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](apiResponse, 'result.signedUrl');
                if (signedPdfUrl) {
                    window.open(signedPdfUrl, '_blank');
                }
                else {
                    _this.toasterService.error(_this.resourceService.messages.emsg.m0076);
                }
            }, function (err) {
                _this.toasterService.error(_this.resourceService.messages.emsg.m0076);
            });
        }
        else {
            this.toasterService.error(this.resourceService.messages.emsg.m0076);
        }
    };
    AllReportsComponent.prototype.downloadCertificate = function (url) {
        window.open(url, '_blank');
    };
    AllReportsComponent.prototype.initializeDonutChart = function () {
        var labelArray = [];
        var datasets = [];
        var self = this;
        lodash_es__WEBPACK_IMPORTED_MODULE_2__["map"](lodash_es__WEBPACK_IMPORTED_MODULE_2__["uniqBy"](this.enrolledCourseData, 'statusName'), function (obj) {
            labelArray.push(' ' + lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](obj, 'statusName'));
            datasets.push(lodash_es__WEBPACK_IMPORTED_MODULE_2__["filter"](self.enrolledCourseData, { statusName: lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](obj, 'statusName') }).length);
        });
        this.donutChartData = {
            labels: labelArray,
            datasets: [
                {
                    data: datasets,
                    backgroundColor: ["#42a5f5", "#26a69a", "#8bc34a", "#43a047"],
                    hoverBackgroundColor: ["#42a5f5", "#26a69a", "#8bc34a", "#43a047"]
                }
            ]
        };
    };
    AllReportsComponent.prototype.setTelemetryInteractObject = function (val) {
        return {
            id: val,
            type: 'view',
            ver: '1.0'
        };
    };
    AllReportsComponent.prototype.setTelemetryImpression = function () {
        this.telemetryInteractEdata = {
            id: 'report-view',
            type: 'click',
            pageid: this.activatedRoute.snapshot.data.telemetry.pageid
        };
        this.telemetryInteractDownloadEdata = {
            id: 'report-download',
            type: 'click',
            pageid: this.activatedRoute.snapshot.data.telemetry.pageid
        };
        this.telemetryImpression = {
            context: {
                env: this.activatedRoute.snapshot.data.telemetry.env
            },
            object: {
                id: this.userService.userid,
                type: 'user',
                ver: '1.0'
            },
            edata: {
                type: this.activatedRoute.snapshot.data.telemetry.type,
                pageid: this.activatedRoute.snapshot.data.telemetry.pageid,
                uri: this.router.url
            }
        };
    };
    AllReportsComponent.prototype.ngOnDestroy = function () {
        this.unsubscribe$.next();
        this.unsubscribe$.complete();
    };
    return AllReportsComponent;
}());



/***/ }),

/***/ "Bt5J":
/*!*************************************************************************!*\
  !*** ./src/app/modules/dashboard/components/report/report.component.ts ***!
  \*************************************************************************/
/*! exports provided: ReportComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ReportComponent", function() { return ReportComponent; });
/* harmony import */ var _sunbird_telemetry__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @sunbird/telemetry */ "RnNo");
/* harmony import */ var _sunbird_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @sunbird/core */ "q/PB");
/* harmony import */ var _sunbird_shared__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @sunbird/shared */ "btWG");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/router */ "iInd");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/core */ "8Y7J");
/* harmony import */ var _services__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../services */ "gfN8");
/* harmony import */ var lodash_es__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! lodash-es */ "T89o");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! rxjs */ "qCKp");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! rxjs/operators */ "kU1M");
/* harmony import */ var _data_chart_data_chart_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../data-chart/data-chart.component */ "tPYi");
/* harmony import */ var html2canvas__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! html2canvas */ "wOnQ");
/* harmony import */ var html2canvas__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(html2canvas__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var jspdf__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! jspdf */ "5RHE");
/* harmony import */ var jspdf__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(jspdf__WEBPACK_IMPORTED_MODULE_11__);
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
var __spreadArrays = (undefined && undefined.__spreadArrays) || function () {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};












var ReportType;
(function (ReportType) {
    ReportType[ReportType["report"] = 0] = "report";
    ReportType[ReportType["dataset"] = 1] = "dataset";
})(ReportType || (ReportType = {}));
var ReportComponent = (function () {
    function ReportComponent(reportService, activatedRoute, resourceService, toasterService, navigationhelperService, router, telemetryService, layoutService, cdr, userService, tncService) {
        var _this = this;
        this.reportService = reportService;
        this.activatedRoute = activatedRoute;
        this.resourceService = resourceService;
        this.toasterService = toasterService;
        this.navigationhelperService = navigationhelperService;
        this.router = router;
        this.telemetryService = telemetryService;
        this.layoutService = layoutService;
        this.cdr = cdr;
        this.userService = userService;
        this.tncService = tncService;
        this.showSummaryModal = false;
        this.isUserReportAdmin = false;
        this.reportExportInProgress = false;
        this.exportOptions = ['Pdf', 'Img'];
        this.addSummaryBtnClickStream$ = new rxjs__WEBPACK_IMPORTED_MODULE_7__["Subject"]();
        this.publishBtnStream$ = new rxjs__WEBPACK_IMPORTED_MODULE_7__["Subject"]();
        this.retireBtnStream$ = new rxjs__WEBPACK_IMPORTED_MODULE_7__["Subject"]();
        this.markdownUpdated$ = new rxjs__WEBPACK_IMPORTED_MODULE_7__["Subject"]();
        this.showComponent = true;
        this.showConfirmationModal = false;
        this.materializedReport = false;
        this.type = ReportType.report;
        this.showChart = true;
        this.filterType = 'report-filter';
        this.showExportsOption = true;
        this.showTncPopup = false;
        this.getTelemetryInteractEdata = function (_a) {
            var _b = _a.id, id = _b === void 0 ? 'report-chart' : _b, _c = _a.type, type = _c === void 0 ? 'click' : _c, _d = _a.pageid, pageid = _d === void 0 ? _this.activatedRoute.snapshot.data.telemetry.pageid : _d, _e = _a.subtype, subtype = _e === void 0 ? null : _e;
            return (__assign({ id: id, type: type, pageid: pageid }, subtype && { subtype: subtype }));
        };
        this.getCDataObj = function (_a) {
            var id = _a.id, type = _a.type;
            return ({ id: id, type: type });
        };
        this.getTelemetryImpressionObj = function (_a) {
            var type = _a.type, _b = _a.subtype, subtype = _b === void 0 ? null : _b;
            return ({
                context: {
                    env: _this.activatedRoute.snapshot.data.telemetry.env
                },
                object: {
                    id: _this.activatedRoute.snapshot.params.reportId,
                    type: 'Report',
                    ver: '1.0'
                },
                edata: __assign({ type: type || _this.activatedRoute.snapshot.data.telemetry.type, pageid: _this.activatedRoute.snapshot.data.telemetry.pageid, uri: _this.router.url, duration: _this.navigationhelperService.getPageLoadTime() }, (subtype && { subtype: subtype }))
            });
        };
    }
    Object.defineProperty(ReportComponent.prototype, "setMaterializedReportStatus", {
        set: function (val) {
            this.materializedReport = (val === 'true');
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ReportComponent.prototype, "setParametersHash", {
        set: function (report) {
            var hash = this.activatedRoute.snapshot.params.hash;
            this.hash = hash;
            if (this.reportService.isReportParameterized(report) && !this.reportService.isUserSuperAdmin()) {
                this.hash = lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](report, 'hashed_val') || this.reportService.getParametersHash(this.report);
            }
        },
        enumerable: false,
        configurable: true
    });
    ReportComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.initLayout();
        this.userService.userData$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_8__["first"])()).subscribe(function (user) { return __awaiter(_this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                if (user && user.userProfile) {
                    this.userProfile = user.userProfile;
                    this.getReportViewerTncPolicy();
                }
                return [2];
            });
        }); });
        this.report$ = Object(rxjs__WEBPACK_IMPORTED_MODULE_7__["combineLatest"])(this.activatedRoute.params, this.activatedRoute.queryParams).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_8__["switchMap"])(function (params) {
            var _a = _this.activatedRoute.snapshot.params, reportId = _a.reportId, hash = _a.hash;
            _this.setMaterializedReportStatus = _this.activatedRoute.snapshot.queryParams.materialize;
            return _this.reportService.isAuthenticated(lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](_this.activatedRoute, 'snapshot.data.roles')).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_8__["mergeMap"])(function (isAuthenticated) {
                _this.noResult = false;
                _this.hideElements = false;
                return isAuthenticated ? _this.renderReport(reportId, hash) : Object(rxjs__WEBPACK_IMPORTED_MODULE_7__["throwError"])({ messageText: 'messages.stmsg.m0144' });
            }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_8__["catchError"])(function (err) {
                console.error('Error while rendering report', err);
                _this.noResultMessage = {
                    'messageText': lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](err, 'messageText') || 'messages.stmsg.m0131'
                };
                _this.noResult = true;
                return Object(rxjs__WEBPACK_IMPORTED_MODULE_7__["of"])({});
            }));
        }));
        this.mergeClickEventStreams();
    };
    ReportComponent.prototype.fetchConfig = function (reportId, hash) {
        if (this.materializedReport) {
            hash = null;
        }
        return this.reportService.fetchReportById(reportId, hash).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_8__["mergeMap"])(function (apiResponse) {
            var report = lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](apiResponse, 'reports');
            return report ? Object(rxjs__WEBPACK_IMPORTED_MODULE_7__["of"])(lodash_es__WEBPACK_IMPORTED_MODULE_6__["head"](report)) : Object(rxjs__WEBPACK_IMPORTED_MODULE_7__["throwError"])('No report found');
        }));
    };
    ReportComponent.prototype.renderReport = function (reportId, hash) {
        var _this = this;
        return this.fetchConfig(reportId, hash)
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_8__["switchMap"])(function (report) {
            var isUserReportAdmin = _this.isUserReportAdmin = _this.reportService.isUserReportAdmin();
            if (!isUserReportAdmin && lodash_es__WEBPACK_IMPORTED_MODULE_6__["toLower"](lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](report, 'status')) !== 'live') {
                return Object(rxjs__WEBPACK_IMPORTED_MODULE_7__["throwError"])({ messageText: 'messages.stmsg.m0144' });
            }
            else {
                _this.report = report;
                _this.type = lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](report, 'report_type') === 'report' ? ReportType.report : ReportType.dataset;
                if (_this.reportService.isReportParameterized(report) && lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](report, 'children.length') &&
                    !_this.reportService.isUserSuperAdmin()) {
                    return Object(rxjs__WEBPACK_IMPORTED_MODULE_7__["throwError"])({ messageText: 'messages.emsg.mutliParametersFound' });
                }
                _this.setParametersHash = _this.report;
                _this.getParametersValueForDropDown$ = _this.getParametersValueForDropDown(report);
                if (_this.materializedReport) {
                    _this.report.status = 'draft';
                }
                var reportConfig_1 = _this.reportConfig = lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](report, 'reportconfig');
                _this.setDownloadUrl(lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](reportConfig_1, 'downloadUrl'));
                var dataSource = lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](reportConfig_1, 'dataSource') || [];
                var updatedDataSource_1 = lodash_es__WEBPACK_IMPORTED_MODULE_6__["isArray"](dataSource) ? dataSource : [{ id: 'default', path: dataSource }];
                updatedDataSource_1 = _this.reportService.getUpdatedParameterizedPath(updatedDataSource_1, _this.hash);
                var charts_1 = lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](reportConfig_1, 'charts'), tables_1 = lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](reportConfig_1, 'table'), files_1 = lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](reportConfig_1, 'files');
                return Object(rxjs__WEBPACK_IMPORTED_MODULE_7__["forkJoin"])(_this.reportService.downloadMultipleDataSources(updatedDataSource_1), _this.getLatestSummary(reportId)).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_8__["retry"])(1), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_8__["map"])(function (apiResponse) {
                    var data = apiResponse[0], reportSummary = apiResponse[1];
                    var result = Object.assign({});
                    var chart = (charts_1 && _this.reportService.prepareChartData(charts_1, data, updatedDataSource_1, lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](reportConfig_1, 'reportLevelDataSourceId'))) || [];
                    result['charts'] = chart;
                    result['tables'] = (tables_1 && _this.reportService.prepareTableData(tables_1, data, lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](reportConfig_1, 'downloadUrl'), _this.hash)) || [];
                    result['reportMetaData'] = reportConfig_1;
                    result['reportSummary'] = reportSummary;
                    result['files'] = _this.reportService.getParameterizedFiles(files_1 || [], _this.hash);
                    result['lastUpdatedOn'] = _this.reportService.getFormattedDate(_this.reportService.getLatestLastModifiedOnDate(data));
                    _this.chartsReportData = JSON.parse(JSON.stringify(result));
                    _this.reportData = JSON.parse(JSON.stringify(result));
                    return result;
                }));
            }
        }));
    };
    ReportComponent.prototype.downloadCSV = function (downloadUrl) {
        var _this = this;
        this.reportService.downloadReport(downloadUrl || this.downloadUrl).subscribe(function (result) {
            window.open(result, '_blank');
        }, function (err) {
            _this.toasterService.error(_this.resourceService.messages.emsg.m0076);
        });
    };
    ReportComponent.prototype.setDownloadUrl = function (url) {
        this.downloadUrl = this.reportService.resolveParameterizedPath(url, this.hash ?
            this.reportService.getParameterFromHash(this.hash) : null);
    };
    ReportComponent.prototype.setTelemetryInteractObject = function (val) {
        return {
            id: val || this.activatedRoute.snapshot.params.reportId,
            type: 'Report',
            ver: '1.0'
        };
    };
    ReportComponent.prototype.setTelemetryInteractEdata = function (val) {
        return {
            id: val,
            type: 'click',
            pageid: this.activatedRoute.snapshot.data.telemetry.pageid
        };
    };
    ReportComponent.prototype.downloadReport = function (reportType) {
        var _this = this;
        this.reportExportInProgress = true;
        this.toggleHtmlVisibilty(true);
        setTimeout(function () {
            switch (lodash_es__WEBPACK_IMPORTED_MODULE_6__["toLower"](reportType)) {
                case 'img': {
                    _this.downloadReportAsImage();
                    break;
                }
                case 'pdf': {
                    _this.downloadReportAsPdf();
                    break;
                }
            }
            var telemetryObj = _this.getTelemetryImpressionObj({ type: 'export-request', subtype: lodash_es__WEBPACK_IMPORTED_MODULE_6__["toLower"](reportType) });
            _this.telemetryService.impression(telemetryObj);
        }, 1500);
    };
    ReportComponent.prototype.convertHTMLToCanvas = function (element, options) {
        return html2canvas__WEBPACK_IMPORTED_MODULE_10___default()(element, options);
    };
    ReportComponent.prototype.downloadReportAsPdf = function () {
        var _this = this;
        this.convertHTMLToCanvas(this.reportElement.nativeElement, {
            scrollX: 0,
            scrollY: -window.scrollY,
            scale: 2
        }).then(function (canvas) {
            var imageURL = canvas.toDataURL('image/jpeg');
            var pdf = new jspdf__WEBPACK_IMPORTED_MODULE_11__('p', 'px', 'a4');
            var pageWidth = pdf.internal.pageSize.getWidth();
            var imageHeight = (canvas.height * pageWidth) / canvas.width;
            pdf.internal.pageSize.setHeight(imageHeight);
            pdf.addImage(imageURL, 'JPEG', 10, 8, pageWidth - 28, imageHeight - 24);
            pdf.save('report.pdf');
            _this.toggleHtmlVisibilty(false);
            _this.reportExportInProgress = false;
        }).catch(function (err) {
            _this.toggleHtmlVisibilty(false);
            _this.reportExportInProgress = false;
        });
    };
    ReportComponent.prototype.downloadReportAsImage = function () {
        var _this = this;
        this.convertHTMLToCanvas(this.reportElement.nativeElement, {
            scrollX: 0,
            scrollY: -window.scrollY,
            scale: 2
        }).then(function (canvas) {
            var imageURL = canvas.toDataURL('image/jpeg');
            var anchorElement = document.createElement('a');
            anchorElement.href = imageURL.replace('image/jpeg', 'image/octet-stream');
            anchorElement.download = 'report.jpg';
            anchorElement.click();
            _this.toggleHtmlVisibilty(false);
            _this.reportExportInProgress = false;
        }).catch(function (err) {
            _this.toggleHtmlVisibilty(false);
            _this.reportExportInProgress = false;
        });
    };
    ReportComponent.prototype.toggleHtmlVisibilty = function (flag) {
        this.hideElements = flag;
    };
    ReportComponent.prototype.openAddSummaryModal = function (_a) {
        var type = _a.type, title = _a.title, _b = _a.index, index = _b === void 0 ? null : _b, _c = _a.chartId, chartId = _c === void 0 ? null : _c, _d = _a.summary, summary = _d === void 0 ? null : _d;
        this.showSummaryModal = true;
        this.inputForSummaryModal = { title: title, type: type, index: index, chartId: chartId, summary: summary };
    };
    ReportComponent.prototype.openReportSummaryModal = function () {
        this.openAddSummaryModal(__assign({ title: (this.currentReportSummary != '' ? 'Update ' : 'Add ') + lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](this.resourceService, 'frmelmnts.lbl.reportSummary'), type: 'report' }, (this._reportSummary && { summary: this._reportSummary })));
    };
    ReportComponent.prototype.getLatestSummary = function (reportId) {
        var _this = this;
        var hash = this.hash;
        return this.reportService.getLatestSummary({ reportId: reportId, hash: hash }).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_8__["map"])(function (reportSummary) {
            _this._reportSummary = '';
            var summaries = _this.currentReportSummary = lodash_es__WEBPACK_IMPORTED_MODULE_6__["map"](reportSummary, function (summaryObj) {
                var summary = lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](summaryObj, 'summary');
                _this._reportSummary = summary;
                return {
                    label: (_this.currentReportSummary != '' ? 'Update ' : 'Add ') + lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](_this.resourceService, 'frmelmnts.lbl.reportSummary'),
                    text: [summary],
                    createdOn: lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](summaryObj, 'createdon')
                };
            });
            return summaries;
        }));
    };
    ReportComponent.prototype.closeSummaryModal = function () {
        this.showSummaryModal = false;
    };
    ReportComponent.prototype.onAddSummary = function (event) {
        this.addSummaryBtnClickStream$.next(event);
    };
    ReportComponent.prototype.openConfirmationModal = function (eventType) {
        var _a = lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](this.resourceService, 'messages.imsg'), confirmReportPublish = _a.confirmReportPublish, confirmRetirePublish = _a.confirmRetirePublish;
        this.confirmationPopupInput = {
            title: 'Confirm',
            body: eventType === 'publish' ? confirmReportPublish : confirmRetirePublish,
            event: eventType
        };
        this.showConfirmationModal = true;
    };
    ReportComponent.prototype.closeConfirmationModal = function () {
        this.showConfirmationModal = false;
    };
    ReportComponent.prototype.handleConfirmationEvent = function (event) {
        this.closeConfirmationModal();
        if (event) {
            switch (this.confirmationPopupInput.event) {
                case 'publish': {
                    this.onPublish(event);
                    break;
                }
                case 'retire': {
                    this.onRetire(event);
                    break;
                }
            }
        }
    };
    ReportComponent.prototype.onPublish = function (event) {
        this.publishBtnStream$.next(event);
    };
    ReportComponent.prototype.onRetire = function (event) {
        this.retireBtnStream$.next(event);
    };
    ReportComponent.prototype.mergeClickEventStreams = function () {
        var _this = this;
        Object(rxjs__WEBPACK_IMPORTED_MODULE_7__["merge"])(this.handleAddSummaryStreams(), this.handlePublishBtnStream(), this.handleRetireBtnStream(), this.handleUpdatedMarkdown())
            .subscribe(function (res) {
            _this.refreshComponent();
        }, function (err) {
            console.log({ err: err });
            _this.toasterService.error(_this.resourceService.messages.emsg.m0005);
        });
    };
    ReportComponent.prototype.handleAddSummaryStreams = function () {
        var _this = this;
        return this.addSummaryBtnClickStream$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_8__["mergeMap"])(function (event) {
            var reportId = _this.activatedRoute.snapshot.params.reportId;
            event['hash'] = _this.hash;
            _this.closeSummaryModal();
            var cdata = __spreadArrays((event['chartId'] ? [_this.getCDataObj({ id: event['chartId'], type: 'Chart' })] : []));
            _this.logTelemetry({ type: 'select-submit', cdata: cdata, subtype: lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](event, 'type') });
            return _this.reportService.addReportSummary({
                reportId: reportId,
                summaryDetails: event
            });
        }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_8__["tap"])(function (res) {
            _this.toasterService.info(_this.resourceService.messages.imsg.reportSummaryAdded);
        }));
    };
    ReportComponent.prototype.refreshComponent = function () {
        var _this = this;
        this.showComponent = false;
        setTimeout(function () {
            _this.showComponent = true;
        });
    };
    ReportComponent.prototype.handlePublishBtnStream = function () {
        var _this = this;
        return this.publishBtnStream$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_8__["switchMap"])(function (event) {
            var reportId = _this.activatedRoute.snapshot.params.reportId;
            var hash = _this.hash;
            return _this.reportService.publishReport(reportId, hash);
        }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_8__["tap"])(function (res) {
            _this.toasterService.info(_this.resourceService.messages.imsg.reportPublished);
            _this.report.status = 'live';
            if (_this.materializedReport) {
                _this.materializedReport = false;
                _this.router.navigate(['.'], { relativeTo: _this.activatedRoute, queryParams: {} });
            }
        }));
    };
    ReportComponent.prototype.handleRetireBtnStream = function () {
        var _this = this;
        return this.retireBtnStream$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_8__["switchMap"])(function (event) {
            var reportId = _this.activatedRoute.snapshot.params.reportId;
            var hash = _this.hash;
            return _this.reportService.retireReport(reportId, hash);
        }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_8__["tap"])(function (res) {
            _this.toasterService.info(_this.resourceService.messages.imsg.reportRetired);
            _this.report.status = 'retired';
            if (_this.materializedReport) {
                _this.materializedReport = false;
                _this.router.navigate(['.'], { relativeTo: _this.activatedRoute, queryParams: {} });
            }
        }));
    };
    ReportComponent.prototype.gotoListPage = function () {
        this.router.navigate(['/dashBoard/reports']);
    };
    ReportComponent.prototype.getParametersValueForDropDown = function (report) {
        var _this = this;
        var reportId = this.activatedRoute.snapshot.params.reportId;
        return this.reportService.fetchReportById(reportId).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_8__["pluck"])('reports'), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_8__["switchMap"])(function (reports) {
            if (_this.reportService.isUserSuperAdmin()) {
                return _this.reportService.getMaterializedChildRows(reports).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_8__["map"])(function (response) {
                    var reportObj = response[0];
                    return lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](reportObj, 'children');
                }));
            }
            else {
                return Object(rxjs__WEBPACK_IMPORTED_MODULE_7__["of"])(lodash_es__WEBPACK_IMPORTED_MODULE_6__["map"](lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](reports[0], 'children') || [], function (child) { return (__assign(__assign({}, child), { label: _this.reportService.getParameterFromHash(child.hashed_val) })); }));
            }
        }));
    };
    ReportComponent.prototype.handleParameterChange = function (val) {
        var _this = this;
        var reportId = this.activatedRoute.snapshot.params.reportId;
        var hashed_val = val.hashed_val, _a = val.materialize, materialize = _a === void 0 ? false : _a;
        this.router.navigate(['/dashBoard/reports', reportId, hashed_val], { queryParams: __assign({}, materialize && { materialize: materialize }) }).then(function () {
            _this.refreshComponent();
        });
    };
    ReportComponent.prototype.logTelemetry = function (_a) {
        var type = _a.type, _b = _a.cdata, cdata = _b === void 0 ? [] : _b, _c = _a.subtype, subtype = _c === void 0 ? null : _c;
        var interactData = {
            context: {
                env: lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](this.activatedRoute.snapshot.data.telemetry, 'env') || 'reports',
                cdata: __spreadArrays(cdata, [{ id: lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](this.reportService.getParameterValues('$slug'), 'value'), type: 'State' }])
            },
            edata: __assign({}, this.getTelemetryInteractEdata({ type: type, subtype: subtype })),
            object: __assign(__assign({}, this.setTelemetryInteractObject()), { rollup: {} })
        };
        this.telemetryService.interact(interactData);
    };
    ReportComponent.prototype.handleUpdatedMarkdown = function () {
        var _this = this;
        return this.markdownUpdated$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_8__["switchMap"])(function (event) {
            var _a;
            var updatedReportConfig = __assign(__assign({}, _this.reportConfig), { dataset: __assign(__assign({}, _this.reportConfig['dataset']), (_a = {}, _a[event.type] = btoa(event.data), _a)) });
            var reportId = _this.activatedRoute.snapshot.params.reportId;
            return _this.reportService.updateReport(reportId, {
                reportconfig: updatedReportConfig
            });
        }));
    };
    ReportComponent.prototype.initLayout = function () {
        var _this = this;
        this.layoutConfiguration = this.layoutService.initlayoutConfig();
        this.layoutService.switchableLayout()
            .subscribe(function (layoutConfig) {
            if (layoutConfig != null) {
                _this.layoutConfiguration = layoutConfig.layout;
            }
        });
    };
    ReportComponent.prototype.getAllChartData = function () {
        var chartData = [];
        if (this.reportData.charts) {
            this.reportData.charts.map(function (chartInfo) {
                chartData.push({ id: chartInfo.chartConfig.id, data: chartInfo.chartData });
            });
        }
        return chartData;
    };
    ReportComponent.prototype.getChartData = function (chart) {
        var chartInfo = this.chartsReportData.charts.find(function (data) {
            if (data['chartConfig']['id'] == chart['chartConfig']['id']) {
                return true;
            }
        });
        return chartInfo;
    };
    ReportComponent.prototype.filterChanged = function (data) {
        if (this.chartsReportData && this.chartsReportData.charts) {
            this.chartsReportData.charts.map(function (element) {
                data.chartData.forEach(function (chart) {
                    if (chart['id'] === element['chartConfig']['id']) {
                        element.chartData = chart.data;
                    }
                });
                return element;
            });
        }
        this.globalFilterChange = {
            chartData: data.chartData,
            filters: data.filters
        };
        this.cdr.detectChanges();
    };
    ReportComponent.prototype.resetFilter = function () {
        this.resetFilters = { data: this.getAllChartData(), reset: true };
    };
    ReportComponent.prototype.selectedTabChange = function (event) {
        var _a = lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](event, 'tab.textLabel'), type = _a.type, downloadURL = _a.downloadURL;
        this.showExportsOption = ['chart', 'download'].includes(type);
        downloadURL && this.setDownloadUrl(downloadURL);
    };
    ReportComponent.prototype.getReportViewerTncPolicy = function () {
        var _this = this;
        this.tncService.getReportViewerTnc().subscribe(function (data) {
            var reportViewerTncData = JSON.parse(lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](data, 'result.response.value'));
            if (lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](reportViewerTncData, 'latestVersion')) {
                _this.reportViewerTncVersion = lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](reportViewerTncData, 'latestVersion');
                _this.reportViewerTncUrl = lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](reportViewerTncData, lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](reportViewerTncData, 'latestVersion')), 'url');
                _this.showReportViewerTncForFirstUser();
            }
        });
    };
    ReportComponent.prototype.showReportViewerTncForFirstUser = function () {
        var reportViewerTncObj = lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](this.userProfile, 'allTncAccepted.reportViewerTnc');
        if (!reportViewerTncObj) {
            this.showTncPopup = true;
        }
    };
    return ReportComponent;
}());



/***/ }),

/***/ "DGHK":
/*!*********************************************************************************************!*\
  !*** ./src/app/modules/dashboard/services/course-consumption/course-consumption.service.ts ***!
  \*********************************************************************************************/
/*! exports provided: CourseConsumptionService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CourseConsumptionService", function() { return CourseConsumptionService; });
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! rxjs */ "qCKp");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! rxjs/operators */ "kU1M");
/* harmony import */ var _sunbird_shared__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @sunbird/shared */ "btWG");
/* harmony import */ var _sunbird_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @sunbird/core */ "q/PB");
/* harmony import */ var _dashboard_utils_dashboard_utils_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./../dashboard-utils/dashboard-utils.service */ "+7xu");
/* harmony import */ var lodash_es__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! lodash-es */ "T89o");






var CourseConsumptionService = (function () {
    function CourseConsumptionService(learnerService, dashboardUtil, config) {
        this.learnerService = learnerService;
        this.dashboardUtil = dashboardUtil;
        this.config = config;
    }
    CourseConsumptionService.prototype.getDashboardData = function (param) {
        var _this = this;
        var paramOptions = {
            url: this.config.urlConFig.URLS.DASHBOARD.COURSE_CONSUMPTION + '/' + param.data.identifier,
            param: {
                period: param.data.timePeriod
            }
        };
        return this.learnerService.get(paramOptions).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_1__["map"])(function (data) {
            return _this.parseApiResponse(data);
        }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_1__["catchError"])(function (err) {
            return Object(rxjs__WEBPACK_IMPORTED_MODULE_0__["throwError"])(err);
        }));
    };
    CourseConsumptionService.prototype.parseApiResponse = function (data) {
        var _this = this;
        this.blockData = [];
        lodash_es__WEBPACK_IMPORTED_MODULE_5__["forEach"](data.result.snapshot, function (numericData, key) {
            switch (key) {
                case 'course.consumption.time_spent.count':
                case 'course.consumption.time_spent_completion_count':
                    _this.blockData.push(_this.dashboardUtil.secondToMinConversion(numericData));
                    break;
                default:
                    _this.blockData.push(numericData);
            }
        });
        return {
            bucketData: data.result.series,
            numericData: this.blockData,
            series: ''
        };
    };
    return CourseConsumptionService;
}());



/***/ }),

/***/ "IV8a":
/*!*******************************************************************************************!*\
  !*** ./src/app/modules/dashboard/components/course-progress/course-progress.component.ts ***!
  \*******************************************************************************************/
/*! exports provided: CourseProgressComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CourseProgressComponent", function() { return CourseProgressComponent; });
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! rxjs */ "qCKp");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! rxjs/operators */ "kU1M");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/router */ "iInd");
/* harmony import */ var lodash_es__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lodash-es */ "T89o");
/* harmony import */ var _sunbird_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @sunbird/core */ "q/PB");
/* harmony import */ var _sunbird_shared__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @sunbird/shared */ "btWG");
/* harmony import */ var _services__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./../../services */ "gfN8");
/* harmony import */ var _sunbird_telemetry__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @sunbird/telemetry */ "RnNo");
/* harmony import */ var _shared_services_on_demand_report_on_demand_report_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./../../../shared/services/on-demand-report/on-demand-report.service */ "4DyJ");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __spreadArrays = (undefined && undefined.__spreadArrays) || function () {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};









var CourseProgressComponent = (function () {
    function CourseProgressComponent(user, route, activatedRoute, resourceService, toasterService, telemetryService, courseProgressService, paginationService, config, onDemandReportService, formService, navigationhelperService, usageService) {
        this.telemetryService = telemetryService;
        this.onDemandReportService = onDemandReportService;
        this.formService = formService;
        this.navigationhelperService = navigationhelperService;
        this.usageService = usageService;
        this.modelChanged = new rxjs__WEBPACK_IMPORTED_MODULE_0__["Subject"]();
        this.unsubscribe = new rxjs__WEBPACK_IMPORTED_MODULE_0__["Subject"]();
        this.showLoader = true;
        this.showNoBatch = false;
        this.showDownloadModal = false;
        this.reverse = true;
        this.showWarningDiv = false;
        this.showDownloadLink = true;
        this.pageNumber = 1;
        this.isDownloadReport = false;
        this.stateWiseReportData = [];
        this.message = 'There is no data available';
        this.columns = [
            { name: 'State', isSortable: true, prop: 'state', placeholder: 'Filter state' },
            { name: 'District', isSortable: true, prop: 'district', placeholder: 'Filter district' },
            { name: 'No. of Enrolment', isSortable: false, prop: 'noOfEnrollments', placeholder: 'Filter enrollment' }
        ];
        this.reportTypes = [];
        this.selectedTab = 2;
        this.user = user;
        this.route = route;
        this.activatedRoute = activatedRoute;
        this.resourceService = resourceService;
        this.toasterService = toasterService;
        this.courseProgressService = courseProgressService;
        this.paginationService = paginationService;
        this.config = config;
        this.route.onSameUrlNavigation = 'ignore';
        this.pageLimit = this.config.appConfig.DASHBOARD.PAGE_LIMIT;
    }
    CourseProgressComponent.prototype.populateBatchData = function () {
        var _this = this;
        this.showLoader = true;
        var searchParamsCreator = {
            courseId: this.courseId,
            status: ['0', '1', '2'],
            createdBy: this.userId
        };
        var searchParamsMentor = {
            courseId: this.courseId,
            status: ['0', '1', '2'],
            mentors: [this.userId]
        };
        Object(rxjs__WEBPACK_IMPORTED_MODULE_0__["combineLatest"])(this.courseProgressService.getBatches(searchParamsCreator), this.courseProgressService.getBatches(searchParamsMentor)).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_1__["takeUntil"])(this.unsubscribe))
            .subscribe(function (results) {
            _this.batchlist = lodash_es__WEBPACK_IMPORTED_MODULE_3__["union"](results[0].result.response.content, results[1].result.response.content);
            _this.showLoader = false;
            var isBatchExist = lodash_es__WEBPACK_IMPORTED_MODULE_3__["find"](_this.batchlist, function (batch) { return batch.id === _this.queryParams.batchIdentifier; });
            if (_this.batchlist.length === 0) {
                _this.showNoBatch = true;
            }
            else if (isBatchExist) {
                _this.selectedOption = _this.queryParams.batchIdentifier;
                _this.currentBatch = isBatchExist;
                _this.populateCourseDashboardData(isBatchExist);
            }
            else if (_this.batchlist.length === 1 && isBatchExist === undefined) {
                _this.queryParams.batchIdentifier = _this.batchlist[0].id;
                _this.selectedOption = _this.batchlist[0].id;
                _this.currentBatch = _this.batchlist[0];
                _this.generateDataForDF(_this.currentBatch);
                _this.setBatchId(_this.currentBatch);
                _this.populateCourseDashboardData(_this.batchlist[0]);
            }
            else {
                _this.showWarningDiv = true;
            }
            _this.paramSubcription.unsubscribe();
        }, function (err) {
            _this.toasterService.error(_this.resourceService.messages.emsg.m0005);
            _this.showLoader = false;
            _this.showNoBatch = true;
        });
    };
    CourseProgressComponent.prototype.summaryReport = function (tabNumber) {
        this.setInteractEventDataForTabs('summary-report');
        this.selectedTab = tabNumber;
        this.getSummaryReports();
    };
    CourseProgressComponent.prototype.setBatchId = function (batch) {
        this.fetchForumIdReq = null;
        this.showWarningDiv = false;
        this.queryParams.batchIdentifier = batch.id;
        this.queryParams.pageNumber = this.pageNumber;
        this.searchText = '';
        this.currentBatch = batch;
        this.batchId = batch.id;
        this.setCounts(this.currentBatch);
        this.populateCourseDashboardData(batch);
        if (this.selectedTab === 1) {
            this.summaryReport(1);
        }
        else {
            this.loadOndemandReports(2);
        }
    };
    CourseProgressComponent.prototype.navigate = function () {
        this.route.navigate([], { queryParams: this.queryParams });
    };
    CourseProgressComponent.prototype.redirect = function () {
        this.route.navigate(['/learn/course', this.courseId]);
    };
    CourseProgressComponent.prototype.setTimePeriod = function (timePeriod) {
        this.queryParams.timePeriod = timePeriod;
        this.populateCourseDashboardData();
    };
    CourseProgressComponent.prototype.setInteractEventDataForTabs = function (id) {
        var telemetryObj = {
            context: {
                env: 'reports',
                cdata: [
                    { id: lodash_es__WEBPACK_IMPORTED_MODULE_3__["get"](this.currentBatch, 'courseId'), type: 'Course' },
                    { id: lodash_es__WEBPACK_IMPORTED_MODULE_3__["get"](this.currentBatch, 'batchId'), type: 'Batch' }
                ]
            },
            edata: {
                id: id,
                type: 'click',
                pageid: id
            }
        };
        this.telemetryService.interact(telemetryObj);
    };
    CourseProgressComponent.prototype.getSummaryReports = function () {
        var _this = this;
        var request = {
            'request': {
                'filters': {
                    'collectionId': this.currentBatch.collectionId || this.currentBatch.courseId,
                    'batchId': this.currentBatch.batchId
                },
                'groupBy': ['dist', 'state'],
                'granularity': 'ALL'
            }
        };
        this.onDemandReportService.getSummeryReports(request).subscribe(function (reports) {
            if (reports && reports.result && !lodash_es__WEBPACK_IMPORTED_MODULE_3__["isEmpty"](reports.result)) {
                var result = lodash_es__WEBPACK_IMPORTED_MODULE_3__["get"](reports, 'result');
                var groupData = lodash_es__WEBPACK_IMPORTED_MODULE_3__["get"](result, 'groupBy');
                _this.stateWiseReportData = lodash_es__WEBPACK_IMPORTED_MODULE_3__["map"](groupData, function (x) {
                    return {
                        state: x.state,
                        district: x.district,
                        noOfEnrollments: _this.getFieldValue(x.values, 'enrolment')
                    };
                });
                _this.stateWiseReportData = __spreadArrays(_this.stateWiseReportData);
                var metrics = lodash_es__WEBPACK_IMPORTED_MODULE_3__["get"](result, 'metrics');
                _this.currentBatch.participantCount = _this.getFieldValue(metrics, 'enrolment');
                _this.currentBatch.completedCount = _this.getFieldValue(metrics, 'complete');
                _this.currentBatch.lastUpdatedOn = lodash_es__WEBPACK_IMPORTED_MODULE_3__["get"](result, 'lastUpdatedOn') || '';
            }
            _this.generateDataForDF(_this.currentBatch);
        }, function (error) {
            _this.stateWiseReportData = [
                {
                    state: 'Andhra Pradesh',
                    district: 'Chittoor',
                    noOfEnrollments: 20
                },
                {
                    state: 'Andhra Pradesh',
                    district: 'Vishakapatanam',
                    noOfEnrollments: 50
                },
                {
                    state: 'Andhra Pradesh',
                    district: 'Guntur',
                    noOfEnrollments: 70
                },
                {
                    state: 'Andhra Pradesh',
                    district: 'Kadapa',
                    noOfEnrollments: 65
                },
                {
                    state: 'Andhra Pradesh',
                    district: 'Nellore',
                    noOfEnrollments: 100
                },
                {
                    state: 'Telengana',
                    district: 'Hydrabad',
                    noOfEnrollments: 45
                }
            ];
            _this.toasterService.error(lodash_es__WEBPACK_IMPORTED_MODULE_3__["get"](_this.resourceService, 'messages.fmsg.m0004'));
            _this.generateDataForDF(_this.currentBatch);
        });
    };
    CourseProgressComponent.prototype.populateCourseDashboardData = function (batch) {
        var _this = this;
        return;
        if (!batch && this.currentBatch) {
            batch = this.currentBatch;
        }
        this.showWarningDiv = false;
        this.navigate();
        this.showLoader = true;
        var option = {
            batchIdentifier: this.queryParams.batchIdentifier,
            limit: this.pageLimit,
            offset: (this.pageNumber - 1) * (this.pageLimit),
        };
        if (this.order) {
            option.sortBy = this.order;
            option.sortOrder = this.reverse ? 'desc' : 'asc';
        }
        if (this.searchText) {
            option.username = this.searchText;
        }
        this.courseProgressService.getDashboardData(option).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_1__["takeUntil"])(this.unsubscribe))
            .subscribe(function (apiResponse) {
            if (!apiResponse.result.count && lodash_es__WEBPACK_IMPORTED_MODULE_3__["get"](apiResponse, 'result.data.length')) {
                apiResponse.result.count = lodash_es__WEBPACK_IMPORTED_MODULE_3__["get"](apiResponse, 'result.data.length');
            }
            else {
                apiResponse.result.count = 0;
            }
            _this.showLoader = false;
            _this.dashboarData = apiResponse.result;
            _this.showDownloadLink = apiResponse.result.showDownloadLink ? apiResponse.result.showDownloadLink : false;
            _this.dashboarData.count = lodash_es__WEBPACK_IMPORTED_MODULE_3__["get"](batch, 'participantCount') || lodash_es__WEBPACK_IMPORTED_MODULE_3__["get"](apiResponse, 'result.data.length');
            _this.totalCount = lodash_es__WEBPACK_IMPORTED_MODULE_3__["get"](batch, 'participantCount') || lodash_es__WEBPACK_IMPORTED_MODULE_3__["get"](apiResponse, 'result.data.length');
            if (_this.totalCount >= 10000) {
                _this.pager = _this.paginationService.getPager(10000, _this.pageNumber, _this.config.appConfig.DASHBOARD.PAGE_LIMIT);
            }
            else {
                _this.pager = _this.paginationService.getPager(apiResponse.result.count, _this.pageNumber, _this.config.appConfig.DASHBOARD.PAGE_LIMIT);
            }
        }, function (err) {
            _this.toasterService.error(err.error.params.errmsg);
            _this.showLoader = false;
        });
    };
    CourseProgressComponent.prototype.setOrder = function (value) {
        this.order = value;
        this.reverse = !this.reverse;
        this.setInteractEventData();
        if (this.currentBatch) {
            this.populateCourseDashboardData(this.currentBatch);
        }
    };
    CourseProgressComponent.prototype.downloadCourseReport = function (reportType) {
        var _this = this;
        var batchId = this.queryParams.batchIdentifier;
        var url = "/courseReports/" + reportType + "/report-" + batchId + ".csv";
        return this.usageService.getData(url)
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_1__["tap"])(function (response) {
            if (lodash_es__WEBPACK_IMPORTED_MODULE_3__["get"](response, 'responseCode') === 'OK') {
                var signedUrl = lodash_es__WEBPACK_IMPORTED_MODULE_3__["get"](response, 'result.signedUrl');
                if (signedUrl) {
                    window.open(signedUrl, '_blank');
                }
            }
            else {
                _this.toasterService.error(_this.resourceService.messages.stmsg.m0141);
            }
        }));
    };
    CourseProgressComponent.prototype.downloadAssessmentReport = function () {
        var _this = this;
        var option = {
            batchIdentifier: this.queryParams.batchIdentifier,
        };
        return this.courseProgressService.downloadDashboardData(option).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_1__["tap"])(function (apiResponse) {
            var downloadUrl;
            downloadUrl = lodash_es__WEBPACK_IMPORTED_MODULE_3__["get"](apiResponse, 'result.reports.assessmentReportUrl');
            if (downloadUrl) {
                window.open(downloadUrl, '_blank');
            }
            else {
                _this.toasterService.error(_this.resourceService.messages.stmsg.m0141);
            }
        }));
    };
    CourseProgressComponent.prototype.setFilterDescription = function () {
        var filterDesc = {
            '7d': this.resourceService.messages.imsg.m0022,
            '14d': this.resourceService.messages.imsg.m0023,
            '5w': this.resourceService.messages.imsg.m0024,
            'fromBegining': this.resourceService.messages.imsg.m0025
        };
        this.filterText = filterDesc[this.queryParams.timePeriod];
    };
    CourseProgressComponent.prototype.downloadReport = function (downloadAssessmentReport) {
        var _this = this;
        Object(rxjs__WEBPACK_IMPORTED_MODULE_0__["of"])(downloadAssessmentReport)
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_1__["switchMap"])(function (flag) { return flag ? _this.downloadCourseReport('assessment-reports') :
            _this.downloadCourseReport('course-progress-reports'); }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_1__["takeUntil"])(this.unsubscribe))
            .subscribe(function (res) { }, function (err) {
            _this.toasterService.error(_this.resourceService.messages.emsg.m0076);
        });
    };
    CourseProgressComponent.prototype.navigateToPage = function (page) {
        if (page < 1 || page > this.pager.totalPages) {
            return;
        }
        this.pageNumber = page;
        this.queryParams.pageNumber = this.pageNumber;
        this.navigate();
        if (this.currentBatch) {
            this.populateCourseDashboardData(this.currentBatch);
        }
    };
    CourseProgressComponent.prototype.keyup = function (event) {
        this.modelChanged.next(lodash_es__WEBPACK_IMPORTED_MODULE_3__["trim"](event));
    };
    CourseProgressComponent.prototype.searchBatch = function () {
        var _this = this;
        this.modelChanged.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_1__["debounceTime"])(1000), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_1__["distinctUntilChanged"])(), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_1__["switchMap"])(function (search) { return Object(rxjs__WEBPACK_IMPORTED_MODULE_0__["of"])(search); })).
            subscribe(function (query) {
            _this.populateCourseDashboardData();
        });
    };
    CourseProgressComponent.prototype.getFieldValue = function (array, field) {
        if (lodash_es__WEBPACK_IMPORTED_MODULE_3__["find"](array, { 'type': field })) {
            return lodash_es__WEBPACK_IMPORTED_MODULE_3__["find"](array, { 'type': field }).count;
        }
        else {
            return;
        }
    };
    CourseProgressComponent.prototype.ngOnInit = function () {
        var _this = this;
        var apiData = {
            userConsent: 'No',
            audience: 'Teacher'
        };
        this.fileName = 'State wise report';
        this.isDownloadReport = true;
        this.userDataSubscription = this.user.userData$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_1__["first"])()).subscribe(function (userdata) {
            if (userdata && !userdata.err) {
                _this.userId = userdata.userProfile.userId;
                _this.userRoles = lodash_es__WEBPACK_IMPORTED_MODULE_3__["get"](userdata, 'userProfile.userRoles');
                _this.paramSubcription = Object(rxjs__WEBPACK_IMPORTED_MODULE_0__["combineLatest"])(_this.activatedRoute.parent.params, _this.activatedRoute.params, _this.activatedRoute.queryParams, function (parentParams, params, queryParams) {
                    return {
                        params: parentParams || params,
                        queryParams: queryParams
                    };
                })
                    .subscribe(function (bothParams) {
                    _this.courseId = bothParams.params.courseId;
                    _this.batchId = bothParams.params.batchId;
                    _this.queryParams = __assign({}, bothParams.queryParams);
                    _this.interactObject = { id: _this.courseId, type: 'Course', ver: '1.0' };
                    _this.populateBatchData();
                });
            }
        });
        this.searchBatch();
        this.setInteractEventData();
    };
    CourseProgressComponent.prototype.loadOndemandReports = function (tabNumber) {
        var _this = this;
        this.getSummaryReports();
        setTimeout(function () {
            if (_this.onDemandReports) {
                _this.setInteractEventDataForTabs('on-demand-reports');
                _this.selectedTab = tabNumber;
                if (lodash_es__WEBPACK_IMPORTED_MODULE_3__["isEmpty"](_this.reportTypes)) {
                    _this.getFormData();
                }
                _this.onDemandReports.loadReports(_this.currentBatch);
            }
        }, 500);
    };
    CourseProgressComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        setTimeout(function () {
            _this.telemetryImpression = {
                context: {
                    env: _this.activatedRoute.snapshot.data.telemetry.env,
                    cdata: [{ id: _this.activatedRoute.snapshot.params.courseId, type: 'Course' }]
                },
                edata: {
                    uri: '/learn/course/' + _this.courseId + '/dashboard&batchIdentifier=' + _this.activatedRoute.snapshot.params.batchId,
                    type: _this.activatedRoute.snapshot.data.telemetry.type,
                    pageid: _this.activatedRoute.snapshot.data.telemetry.pageid,
                    duration: _this.navigationhelperService.getPageLoadTime()
                },
                object: {
                    id: _this.courseId,
                    type: _this.activatedRoute.snapshot.data.telemetry.object.type,
                    ver: _this.activatedRoute.snapshot.data.telemetry.object.ver
                }
            };
        });
    };
    CourseProgressComponent.prototype.setCounts = function (currentBatch) {
        this.currentBatch['completedCount'] = lodash_es__WEBPACK_IMPORTED_MODULE_3__["get"](currentBatch, 'completedCount') ? lodash_es__WEBPACK_IMPORTED_MODULE_3__["get"](currentBatch, 'completedCount') : 0;
        this.currentBatch['participantCount'] = lodash_es__WEBPACK_IMPORTED_MODULE_3__["get"](currentBatch, 'participantCount') ? lodash_es__WEBPACK_IMPORTED_MODULE_3__["get"](currentBatch, 'participantCount') : 0;
    };
    CourseProgressComponent.prototype.setInteractEventData = function () {
        if (lodash_es__WEBPACK_IMPORTED_MODULE_3__["get"](this.queryParams, 'batchIdentifier')) {
            this.telemetryCdata = [{ 'type': 'batch', 'id': this.queryParams.batchIdentifier }];
        }
        else {
            this.telemetryCdata = [{ 'type': 'course', 'id': this.courseId }];
        }
    };
    CourseProgressComponent.prototype.ngOnDestroy = function () {
        if (this.userDataSubscription) {
            this.userDataSubscription.unsubscribe();
        }
        this.unsubscribe.next();
        this.unsubscribe.complete();
    };
    CourseProgressComponent.prototype.getFormData = function () {
        var _this = this;
        var isCourseCreator = lodash_es__WEBPACK_IMPORTED_MODULE_3__["includes"](this.userRoles, 'CONTENT_CREATOR');
        var formReadInputParams = {
            formType: 'batch',
            formAction: 'list',
            contentType: 'report_types'
        };
        this.formService.getFormConfig(formReadInputParams).subscribe(function (formResponsedata) {
            if (formResponsedata) {
                var options = formResponsedata;
                if (isCourseCreator) {
                    _this.reportTypes = options;
                }
                else {
                    _this.reportTypes = lodash_es__WEBPACK_IMPORTED_MODULE_3__["filter"](options, function (report) { return report.title !== 'User profile exhaust'; });
                }
            }
        }, function (error) {
            _this.toasterService.error(lodash_es__WEBPACK_IMPORTED_MODULE_3__["get"](_this.resourceService, 'messages.fmsg.m0004'));
        });
    };
    CourseProgressComponent.prototype.generateDataForDF = function (batchId) {
        this.fetchForumIdReq = null;
        if (batchId) {
            this.fetchForumIdReq = {
                type: 'batch',
                identifier: [batchId.id]
            };
        }
    };
    CourseProgressComponent.prototype.assignForumData = function (routerData) {
        this.route.navigate(['/discussion-forum'], {
            queryParams: {
                categories: JSON.stringify({ result: routerData.forumIds }),
                userId: routerData.userId
            }
        });
    };
    CourseProgressComponent.prototype.selectedTabChange = function (event) {
        var index = lodash_es__WEBPACK_IMPORTED_MODULE_3__["get"](event, 'tab.textLabel').index;
        if (index == 2) {
            this.loadOndemandReports(2);
        }
    };
    return CourseProgressComponent;
}());



/***/ }),

/***/ "Lxfu":
/*!*****************************************************************************************************!*\
  !*** ./src/app/modules/dashboard/components/re-issue-certificate/re-issue-certificate.component.ts ***!
  \*****************************************************************************************************/
/*! exports provided: ReIssueCertificateComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ReIssueCertificateComponent", function() { return ReIssueCertificateComponent; });
/* harmony import */ var _sunbird_telemetry__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @sunbird/telemetry */ "RnNo");
/* harmony import */ var _sunbird_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @sunbird/core */ "q/PB");
/* harmony import */ var _sunbird_shared__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @sunbird/shared */ "btWG");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs */ "qCKp");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/router */ "iInd");
/* harmony import */ var lodash_es__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! lodash-es */ "T89o");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs/operators */ "kU1M");







var ReIssueCertificateComponent = (function () {
    function ReIssueCertificateComponent(resourceService, certService, activatedRoute, toasterService, navigationhelperService, router, telemetryService, userService) {
        this.resourceService = resourceService;
        this.certService = certService;
        this.activatedRoute = activatedRoute;
        this.toasterService = toasterService;
        this.navigationhelperService = navigationhelperService;
        this.router = router;
        this.telemetryService = telemetryService;
        this.userService = userService;
        this.showModal = false;
        this.unsubscribe$ = new rxjs__WEBPACK_IMPORTED_MODULE_3__["Subject"]();
    }
    ReIssueCertificateComponent.prototype.onPopState = function (event) {
        if (this.showModal) {
            this.showModal = false;
        }
    };
    ReIssueCertificateComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.channelName = lodash_es__WEBPACK_IMPORTED_MODULE_5__["upperCase"](this.resourceService.instance);
        this.activatedRoute.parent.params.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["takeUntil"])(this.unsubscribe$)).subscribe(function (params) {
            _this.courseId = lodash_es__WEBPACK_IMPORTED_MODULE_5__["get"](params, 'courseId');
            _this.setImpressionEvent();
        });
    };
    ReIssueCertificateComponent.prototype.searchCertificates = function () {
        var _this = this;
        var value = !lodash_es__WEBPACK_IMPORTED_MODULE_5__["isEmpty"](this.userData) ? this.userData['courses'].batches = [] : [];
        this.button.nativeElement.disabled = true;
        this.button.nativeElement.classList.add('sb-btn-disabled');
        this.button.nativeElement.classList.remove('sb-btn-outline-primary');
        this.certService.getUserCertList(this.userName.trim(), this.courseId, this.userService.userid)
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["takeUntil"])(this.unsubscribe$)).subscribe(function (data) {
            _this.modifyCss();
            if (!_this.isErrorOccurred(lodash_es__WEBPACK_IMPORTED_MODULE_5__["get"](data, 'result.response'))) {
                _this.userData = lodash_es__WEBPACK_IMPORTED_MODULE_5__["get"](data, 'result.response');
                _this.criteriaMet = _this.certService.checkCriteria(lodash_es__WEBPACK_IMPORTED_MODULE_5__["get"](_this.userData, 'courses.batches'));
            }
        }, function (err) {
            _this.modifyCss();
            _this.showErrorMsg(_this.resourceService.messages.dashboard.emsg.m001);
            value = !lodash_es__WEBPACK_IMPORTED_MODULE_5__["isEmpty"](_this.userData) ? _this.userData['courses'].batches = [] : [];
        });
    };
    ReIssueCertificateComponent.prototype.isErrorOccurred = function (response) {
        var errMsg = lodash_es__WEBPACK_IMPORTED_MODULE_5__["isEmpty"](response) ? (this.resourceService.messages.emsg.m004).replace('{instance}', this.channelName) :
            (lodash_es__WEBPACK_IMPORTED_MODULE_5__["isEmpty"](lodash_es__WEBPACK_IMPORTED_MODULE_5__["get"](response, 'courses.batches')) ? this.resourceService.messages.dashboard.emsg.m002 : '');
        if (!lodash_es__WEBPACK_IMPORTED_MODULE_5__["isEmpty"](errMsg)) {
            this.showErrorMsg(errMsg);
            return true;
        }
        return false;
    };
    ReIssueCertificateComponent.prototype.modifyCss = function () {
        this.button.nativeElement.disabled = false;
        this.button.nativeElement.classList.remove('sb-btn-disabled');
        this.button.nativeElement.classList.add('sb-btn-outline-primary');
    };
    ReIssueCertificateComponent.prototype.showErrorMsg = function (msg) {
        this.toasterService.error(msg);
    };
    ReIssueCertificateComponent.prototype.reIssueCert = function (batch) {
        var _this = this;
        var request = {
            request: {
                courseId: this.courseId,
                batchId: lodash_es__WEBPACK_IMPORTED_MODULE_5__["get"](batch, 'batchId'),
                userIds: [lodash_es__WEBPACK_IMPORTED_MODULE_5__["get"](this.userData, 'userId')],
                createdBy: lodash_es__WEBPACK_IMPORTED_MODULE_5__["get"](batch, 'createdBy')
            }
        };
        this.certService.reIssueCertificate(request).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["takeUntil"])(this.unsubscribe$)).subscribe(function (data) {
            _this.toggleModal(false);
            _this.toasterService.success(_this.resourceService.messages.dashboard.smsg.m001);
        }, function (err) {
            _this.toggleModal(false);
            _this.toasterService.error(_this.resourceService.messages.dashboard.emsg.m003);
        });
    };
    ReIssueCertificateComponent.prototype.toggleModal = function (visibility, batch) {
        if (visibility === void 0) { visibility = false; }
        this.showModal = visibility;
        this.userBatch = !lodash_es__WEBPACK_IMPORTED_MODULE_5__["isEmpty"](batch) ? batch : this.userBatch;
    };
    ReIssueCertificateComponent.prototype.setImpressionEvent = function () {
        this.telemetryImpression = {
            context: {
                env: lodash_es__WEBPACK_IMPORTED_MODULE_5__["get"](this.activatedRoute.snapshot, 'data.telemetry.env')
            },
            edata: {
                type: lodash_es__WEBPACK_IMPORTED_MODULE_5__["get"](this.activatedRoute.snapshot, 'data.telemetry.type'),
                pageid: lodash_es__WEBPACK_IMPORTED_MODULE_5__["get"](this.activatedRoute.snapshot, 'data.telemetry.pageid'),
                uri: this.router.url,
                duration: this.navigationhelperService.getPageLoadTime()
            },
            object: this.setObject()
        };
    };
    ReIssueCertificateComponent.prototype.addTelemetry = function (id, extra) {
        var interactData = {
            context: {
                env: lodash_es__WEBPACK_IMPORTED_MODULE_5__["get"](this.activatedRoute, 'snapshot.data.telemetry.env'),
                cdata: []
            },
            edata: {
                id: id,
                type: 'click',
                pageid: lodash_es__WEBPACK_IMPORTED_MODULE_5__["get"](this.activatedRoute, 'snapshot.data.telemetry.pageid')
            },
            object: this.setObject()
        };
        if (extra) {
            interactData.edata['extra'] = extra;
            lodash_es__WEBPACK_IMPORTED_MODULE_5__["map"](extra, (function (value, key) { return interactData.context.cdata.push({ id: value, type: key }); }));
        }
        this.telemetryService.interact(interactData);
    };
    ReIssueCertificateComponent.prototype.setObject = function () {
        return {
            id: this.courseId,
            type: lodash_es__WEBPACK_IMPORTED_MODULE_5__["get"](this.userData, 'courses.contentType') || lodash_es__WEBPACK_IMPORTED_MODULE_5__["get"](this.activatedRoute.snapshot, 'data.telemetry.object.type'),
            ver: lodash_es__WEBPACK_IMPORTED_MODULE_5__["get"](this.userData, 'courses.pkgVersion') ? lodash_es__WEBPACK_IMPORTED_MODULE_5__["get"](this.userData, 'courses.pkgVersion') ? "" + lodash_es__WEBPACK_IMPORTED_MODULE_5__["get"](this.userData, 'courses.pkgVersion') : '1.0' : '1.0',
        };
    };
    ReIssueCertificateComponent.prototype.toLowerCase = function (msg) {
        if (msg) {
            return msg[0].toUpperCase() + msg.substring(1).toLowerCase();
        }
        return '';
    };
    ReIssueCertificateComponent.prototype.resetValues = function () {
        this.userName = this.userName ? this.userName.trim() : this.userName;
        var value = !lodash_es__WEBPACK_IMPORTED_MODULE_5__["isEmpty"](this.userData) ? this.userData['courses'].batches = [] : [];
    };
    ReIssueCertificateComponent.prototype.enableReIssueCert = function (batch) {
        return ((!lodash_es__WEBPACK_IMPORTED_MODULE_5__["isEmpty"](lodash_es__WEBPACK_IMPORTED_MODULE_5__["get"](batch, 'certificates')) || !lodash_es__WEBPACK_IMPORTED_MODULE_5__["isEmpty"](lodash_es__WEBPACK_IMPORTED_MODULE_5__["get"](batch, 'issuedCertificates'))) || lodash_es__WEBPACK_IMPORTED_MODULE_5__["get"](batch, 'status') === 2);
    };
    ReIssueCertificateComponent.prototype.ngOnDestroy = function () {
        this.unsubscribe$.next();
        this.unsubscribe$.complete();
    };
    return ReIssueCertificateComponent;
}());



/***/ }),

/***/ "M0G/":
/*!***************************************************************************************!*\
  !*** ./src/app/modules/dashboard/components/course-report/course-report.component.ts ***!
  \***************************************************************************************/
/*! exports provided: CourseReportComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CourseReportComponent", function() { return CourseReportComponent; });
/* harmony import */ var chart_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! chart.js */ "MO+k");
/* harmony import */ var chart_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(chart_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _sunbird_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @sunbird/core */ "q/PB");
/* harmony import */ var _services_report_report_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../services/report/report.service */ "t7hn");
/* harmony import */ var _sunbird_shared__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @sunbird/shared */ "btWG");
/* harmony import */ var lodash_es__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! lodash-es */ "T89o");
/* harmony import */ var _services_addusser_addusser_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../services/addusser/addusser.service */ "9r3v");






var CourseReportComponent = (function () {
    function CourseReportComponent(_httpService, reportService, searchService, toasterService, resourceService) {
        this._httpService = _httpService;
        this.reportService = reportService;
        this.searchService = searchService;
        this.toasterService = toasterService;
        this.resourceService = resourceService;
        this.organizationTab = true;
        this.userTab = true;
        this.cityList = [];
        this.userList = [];
        this.noResult = true;
        this.popupTitle = "Course wise Graphical Reports";
        this.selectedItems = [];
        this.addUserPopup = false;
        this.i = 0;
        this.Graph_Data_List = [];
        this.Table_Data_List = [];
        this.G1_Group_list = [];
        this.G2_Group_list = [];
        this.G3_Group_list = [];
        this.G4_Group_list = [];
        this.strList = "";
        this.colsUser = [];
    }
    CourseReportComponent.prototype.ngOnInit = function () {
        this.getCourseList();
        this.colsUser = [
            { field: 'SNo', header: 'SNo', width: '50px' },
            { field: 'creator', header: 'Creator', width: '150px' },
            { field: 'subject', header: 'Subject', width: '150px' },
            { field: 'organisation', header: 'Organisation', width: '150px' },
            { field: 'Category', header: 'Category', width: '150px' },
            { field: 'name', header: 'Name', width: '150px' },
            { field: 'contentType', header: 'ContentType', width: '150px' },
            { field: 'copyright', header: 'Copyright', width: '150px' },
        ];
    };
    CourseReportComponent.prototype.getCourseList = function () {
        var _this = this;
        var data = {
            "request": {
                "query": "",
                "filters": { "status": ["Live"],
                    "framework": ["nulp"],
                    "contentType": ["Course"] },
                "limit": "1000",
                "sort_by": { "lastUpdatedOn": "desc" },
                "fields": ["identifier", "creator", "organisation", "copyright",
                    "name", "contentType", "createdFor", "channel",
                    "board", "medium", "gradeLevel", "subject",
                    "lastUpdatedOn", "status", "createdBy",
                    "framework", "createdOn", "lastPublishedOn"]
            }
        };
        this.reportService.getContentCreationStaticsReport(data).subscribe(function (response) {
            if (lodash_es__WEBPACK_IMPORTED_MODULE_4__["get"](response, 'responseCode') === 'OK') {
                if (response.result.count > 0) {
                    var tableData = [];
                    var tempObj = lodash_es__WEBPACK_IMPORTED_MODULE_4__["cloneDeep"](response.result.content);
                    tableData = tempObj;
                    var self = _this;
                    var ChnlIds = [];
                    var UserIds = [];
                    ChnlIds = lodash_es__WEBPACK_IMPORTED_MODULE_4__["uniq"](lodash_es__WEBPACK_IMPORTED_MODULE_4__["map"](tempObj, 'channel'));
                    UserIds = lodash_es__WEBPACK_IMPORTED_MODULE_4__["uniq"](lodash_es__WEBPACK_IMPORTED_MODULE_4__["map"](tempObj, 'createdBy'));
                    var reqParam = { filters: { id: UserIds } };
                    _this.searchService.getUserList(reqParam).subscribe(function (response) {
                        _this.userList = [];
                        var userObj = lodash_es__WEBPACK_IMPORTED_MODULE_4__["cloneDeep"](response.result.response.content);
                        _this.userList = userObj;
                        var reqPayload = { "request": { "filters": { "id": ChnlIds, "isTenant": true } } };
                        _this.reportService.getOrganizationName(reqPayload).subscribe(function (response) {
                            _this.cityList = [];
                            var cityObj = lodash_es__WEBPACK_IMPORTED_MODULE_4__["cloneDeep"](response.result.response.content);
                            _this.cityList = cityObj;
                            _this.cityList = lodash_es__WEBPACK_IMPORTED_MODULE_4__["reject"](response.result.response.content, function (obj) { return lodash_es__WEBPACK_IMPORTED_MODULE_4__["isEmpty"](obj.orgName); });
                            _this.InitializeGraph(tableData);
                        });
                    });
                }
                else {
                    _this.noResultMessage = { 'messageText': 'messages.stmsg.m0131' };
                    _this.noResult = true;
                }
            }
            else {
                _this.toasterService.error(_this.resourceService.messages.emsg.m0007);
            }
        }, function (err) {
            console.log(err);
            _this.toasterService.error(_this.resourceService.messages.emsg.m0007);
        });
    };
    CourseReportComponent.prototype.InitializeGraph = function (C_List) {
        var _this = this;
        if (this.cityList.length > 0) {
        }
        this.userList.forEach(function (element) {
            _this.cityList.forEach(function (element1) {
                if (element.organisations.length > 1) {
                    if ((element1.identifier == element.organisations[1].organisationId) &&
                        (element.rootOrgId != element.organisations[1].organisationId)) {
                        element.orgNameUser_new = element1.orgName;
                        element.orgTypeUser_new = 'Sub Organization';
                    }
                    else if (element.rootOrgId == element.organisations[1].organisationId) {
                        element.orgNameUser_new = element.organisations[0].orgName;
                        element.orgTypeUser_new = 'Sub Organization';
                    }
                    else {
                        element.orgNameUser_new = element.organisations[1].orgName;
                        element.orgTypeUser_new = 'Sub Organization';
                    }
                }
                else if (element.organisations.length == 1) {
                    element.orgNameUser_new = element.organisations[0].orgName;
                    element.orgTypeUser_new = 'Root  Organization';
                }
            });
        });
        var groupedUserData = this.userList.reduce(function (rv, x) {
            (rv[x['orgNameUser_new']] = rv[x['orgNameUser_new']] || []).push(x);
            return rv;
        }, {});
        this.Graph_Data_List = [];
        C_List.forEach(function (x) {
            var CityTraced = _this.cityList.find(function (el) { return el.id === x.channel; });
            var UserTraced = _this.userList.find(function (el) { return el.id === x.createdBy; });
            _this.Graph_Data_List.push({
                "identifier": x.identifier,
                "copyright": x.copyright,
                "createdFor": x.createdFor,
                "creator": x.creator,
                "subject": x.subject,
                "channel": x.channel,
                "organisation": x.organisation,
                "RootOrgName_new_user": CityTraced["orgName"],
                "rootOrgName_new_city": UserTraced["rootOrgName"],
                "orgNameUser_new": UserTraced["orgNameUser_new"],
                "orgTypeUser_new": UserTraced["orgTypeUser_new"],
                "lastNameUser_new": UserTraced["lastName"],
                "createdBy": x.createdBy,
                "medium": x.medium,
                "name": x.name,
                "createdOn": x.createdOn,
                "objectType": x.objectType,
                "gradeLevel": x.gradeLevel,
                "framework": x.framework,
                "contentType": x.contentType,
                "Category": x.board,
                "lastPublishedOn": x.lastPublishedOn,
                "lastUpdatedOn": x.lastUpdatedOn,
                "status": x.status
            });
        });
        this.Graph_Data_List.sort(function (a, b) {
            if (a.createdBy < b.createdBy)
                return -1;
            if (a.createdBy > b.createdBy)
                return 1;
            return 0;
        });
        this.GeneratingChannelList(this.Graph_Data_List);
    };
    CourseReportComponent.prototype.GeneratingChannelList = function (ResultCN) {
        var _this = this;
        var G1_Name = [];
        var G1_Value = [];
        var G1_Filter = [];
        var G1_Colour = [];
        this.G1_Group_list = this.groupBy1(ResultCN, "channel");
        Object.keys(this.G1_Group_list).forEach(function (x) {
            var xx = _this.G1_Group_list[x];
            G1_Name.push(xx[0].RootOrgName_new_user);
            G1_Value.push(_this.G1_Group_list[x].length);
            G1_Filter.push(xx[0].channel);
            G1_Colour.push(_this.getRandomColorHex());
        });
        this.G1_Chart(G1_Name, G1_Value, G1_Filter, G1_Colour);
    };
    CourseReportComponent.prototype.G1_Chart = function (G1_Name, G1_Value, G1_Filter, G1_Colour) {
        if (this.G1_Piechart) {
            this.G1_Piechart.destroy();
        }
        this.G1_Piechart = new chart_js__WEBPACK_IMPORTED_MODULE_0__["Chart"]('G1_Canvas1', {
            type: 'bar',
            data: {
                labels: G1_Name,
                datasets: [{
                        data: G1_Value,
                        borderSkipped: G1_Filter,
                        backgroundColor: G1_Colour,
                        fill: true
                    }
                ]
            },
            options: {
                title: { display: true, text: "Aggregated Organization wise Courses ", fontSize: 18, fontColor: "#111", },
                legend: { display: false, labels: { fontColor: "green", } },
                scales: {
                    xAxes: [{ scaleLabel: { display: true, labelString: 'Organization' } }],
                    yAxes: [{ scaleLabel: { display: true, labelString: 'Course Count' } }],
                },
            }
        });
    };
    CourseReportComponent.prototype.G1_Chart_showData = function (evt) {
        this.resetGraph('G1');
        var activePoint = this.G1_Piechart.getElementAtEvent(evt);
        if (activePoint.length > 0) {
            var filter_data = activePoint[0]._model.borderSkipped;
            this.G2_Group_list = this.groupBy1(this.G1_Group_list[filter_data], "Category");
            this.G3_Group_list = this.groupBy(this.G1_Group_list[filter_data], function (item) {
                return [item.orgTypeUser_new, item.orgNameUser_new];
            });
            this.GeneratingCategoryChart(this.G2_Group_list);
            this.GeneratingOrg_TypeChart(this.G3_Group_list);
        }
    };
    CourseReportComponent.prototype.GeneratingCategoryChart = function (ResultTT) {
        var _this = this;
        var G2_Name = [];
        var G2_Value = [];
        var G2_Filter = [];
        var G2_Colour = [];
        Object.keys(ResultTT).forEach(function (x) {
            G2_Name.push(x);
            G2_Value.push(ResultTT[x].length);
            G2_Filter.push(x);
            G2_Colour.push(_this.getRandomColorHex());
        });
        this.G2_Chart(G2_Name, G2_Value, G2_Filter, G2_Colour);
    };
    CourseReportComponent.prototype.G2_Chart = function (G2_Name, G2_Value, G2_Filter, G2_Colour) {
        if (this.G2_Piechart) {
            this.G2_Piechart.destroy();
        }
        this.G2_Piechart = new chart_js__WEBPACK_IMPORTED_MODULE_0__["Chart"]('G2_Canvas1', {
            type: 'bar',
            data: {
                labels: G2_Name,
                datasets: [{
                        data: G2_Value,
                        borderSkipped: G2_Filter,
                        backgroundColor: G2_Colour,
                        fill: true
                    }
                ]
            },
            options: {
                legend: { display: false },
                title: { display: true, text: "Category wise Courses based on Aggregated Organization", fontSize: 18, fontColor: "#111", },
                scales: {
                    xAxes: [{ scaleLabel: { display: true, labelString: 'Categories' } }],
                    yAxes: [{ scaleLabel: { display: true, labelString: 'Course Count' } }],
                },
            }
        });
    };
    CourseReportComponent.prototype.G2_Chart_showData = function (evt) {
        this.resetGraph('G2');
        var data = this.G2_Piechart.getElementsAtEvent(evt);
        var activePoint = this.G2_Piechart.getElementAtEvent(evt);
        if (activePoint.length > 0) {
            var clickedDatasetIndex = activePoint[0]._datasetIndex;
            var clickedElementindex = activePoint[0]._index;
            var filter_data = activePoint[0]._model.borderSkipped;
            var label = this.G2_Piechart.data.labels[clickedElementindex];
            var value = this.G2_Piechart.data.datasets[clickedDatasetIndex].data[clickedElementindex];
            this.loadGridView(this.G2_Group_list[filter_data]);
            this.popupTitle = "List of Courses Created under '" + filter_data + "' Category ";
        }
    };
    CourseReportComponent.prototype.GeneratingOrg_TypeChart = function (ResultCC) {
        var _this = this;
        var G3_Name = [];
        var G3_Value = [];
        var G3_Filter = [];
        var G3_Colour = [];
        Object.keys(ResultCC).forEach(function (x) {
            var Obj = ResultCC[x];
            G3_Name.push(Obj[0].orgNameUser_new);
            G3_Value.push(ResultCC[x].length);
            G3_Filter.push(x);
            G3_Colour.push(_this.getRandomColorHex());
        });
        this.G3_Chart(G3_Name, G3_Value, G3_Filter, G3_Colour);
    };
    CourseReportComponent.prototype.G3_Chart = function (G3_Name, G3_Value, G3_Filter, G3_Colour) {
        if (this.G3_Piechart) {
            this.G3_Piechart.destroy();
        }
        this.G3_Piechart = new chart_js__WEBPACK_IMPORTED_MODULE_0__["Chart"]('G3_Canvas1', {
            type: 'bar',
            data: {
                labels: G3_Name,
                datasets: [{
                        data: G3_Value,
                        borderSkipped: G3_Filter,
                        backgroundColor: G3_Colour,
                        fill: true
                    }
                ]
            },
            options: {
                legend: { display: false },
                title: { display: true, text: "Root/Subroot Organization wise Courses", fontSize: 18, fontColor: "#111", },
                scales: {
                    xAxes: [{ scaleLabel: { display: true, labelString: 'Organization' } }],
                    yAxes: [{ scaleLabel: { display: true, labelString: 'Course Count' } }],
                },
            }
        });
    };
    CourseReportComponent.prototype.G3_Chart_showData = function (evt) {
        this.resetGraph('G3');
        var activePoint = this.G3_Piechart.getElementAtEvent(evt);
        if (activePoint.length > 0) {
            var clickedDatasetIndex = activePoint[0]._datasetIndex;
            var clickedElementindex = activePoint[0]._index;
            var filter_data = activePoint[0]._model.borderSkipped;
            var label = this.G3_Piechart.data.labels[clickedElementindex];
            var value = this.G3_Piechart.data.datasets[clickedDatasetIndex].data[clickedElementindex];
            this.G4_Group_list = this.groupBy1(this.G3_Group_list[filter_data], "Category");
            this.CourseChart(this.G4_Group_list);
        }
    };
    CourseReportComponent.prototype.CourseChart = function (ResultTT) {
        var _this = this;
        var G4_Name = [];
        var G4_Value = [];
        var G4_Filter = [];
        var G4_Colour = [];
        Object.keys(ResultTT).forEach(function (x) {
            G4_Name.push(x);
            G4_Value.push(ResultTT[x].length);
            G4_Filter.push(x);
            G4_Colour.push(_this.getRandomColorHex());
        });
        this.G4_Chart(G4_Name, G4_Value, G4_Filter, G4_Colour);
    };
    CourseReportComponent.prototype.G4_Chart = function (G4_Name, G4_Value, G4_Filter, G4_Colour) {
        if (this.G4_Piechart) {
            this.G4_Piechart.destroy();
        }
        this.G4_Piechart = new chart_js__WEBPACK_IMPORTED_MODULE_0__["Chart"]('G4_Canvas1', {
            type: 'bar',
            data: {
                labels: G4_Name,
                datasets: [{
                        data: G4_Value,
                        borderSkipped: G4_Filter,
                        backgroundColor: G4_Colour,
                        fill: true
                    }
                ]
            },
            options: {
                legend: { display: false },
                title: { display: true, text: "Category wise Courses based on Root/Subroot Organization", fontSize: 18, fontColor: "#111", },
                scales: {
                    xAxes: [{ scaleLabel: { display: true, labelString: 'Sub Categories' } }],
                    yAxes: [{ scaleLabel: { display: true, labelString: 'Course Content' } }],
                },
            }
        });
    };
    CourseReportComponent.prototype.G4_Chart_showData = function (evt) {
        var activePoint = this.G4_Piechart.getElementAtEvent(evt);
        if (activePoint.length > 0) {
            var clickedDatasetIndex = activePoint[0]._datasetIndex;
            var clickedElementindex = activePoint[0]._index;
            var filter_data = activePoint[0]._model.borderSkipped;
            var label = this.G4_Piechart.data.labels[clickedElementindex];
            var value = this.G4_Piechart.data.datasets[clickedDatasetIndex].data[clickedElementindex];
            this.loadGridView(this.G4_Group_list[filter_data]);
            this.popupTitle = "List of Courses Created under '" + filter_data + "' Category ";
        }
    };
    CourseReportComponent.prototype.resetGraph = function (ngClick) {
        if (ngClick == "G1") {
            this.Table_Data_List = [];
        }
        else if (ngClick == "G2") {
            this.Table_Data_List = [];
        }
        else if (ngClick == "G3") {
            this.Table_Data_List = [];
        }
    };
    CourseReportComponent.prototype.loadGridView = function (tableData) {
        var SNo = 0;
        tableData.forEach(function (y) {
            SNo++;
            y.SNo = SNo;
        });
        this.Table_Data_List = tableData;
    };
    CourseReportComponent.prototype.getRandomColorHex = function () {
        var color = ["red", "green", "blue", "purple", "magenta", "aqua", "salmon", "darkgray", "pink", "coral"];
        this.i++;
        return "blue";
    };
    CourseReportComponent.prototype.groupBy = function (array, f) {
        var groups = {};
        array.forEach(function (o) {
            var group = JSON.stringify(f(o));
            groups[group] = groups[group] || [];
            groups[group].push(o);
        });
        return Object.keys(groups).map(function (group) {
            return groups[group];
        });
    };
    CourseReportComponent.prototype.groupBy1 = function (list, key) {
        return list.reduce(function (rv, x) {
            (rv[x[key]] = rv[x[key]] || []).push(x);
            return rv;
        }, {});
    };
    ;
    return CourseReportComponent;
}());



/***/ }),

/***/ "M2Y2":
/*!*************************************************************************!*\
  !*** ./src/app/modules/dashboard/services/renderer/renderer.service.ts ***!
  \*************************************************************************/
/*! exports provided: RendererService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RendererService", function() { return RendererService; });
/* harmony import */ var _chartjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./../chartjs */ "qcPd");

var RendererService = (function () {
    function RendererService(lineChartService) {
        this.lineChartService = lineChartService;
    }
    RendererService.prototype.visualizer = function (data, chartType) {
        switch (chartType) {
            case 'line':
                return this.lineChartService.parseLineChart(data);
        }
    };
    return RendererService;
}());



/***/ }),

/***/ "Mz0P":
/*!*********************************************************************************************************************!*\
  !*** ./src/app/modules/dashboard/components/course-progress-exhaust/course-progress-exhaust.component.ngfactory.js ***!
  \*********************************************************************************************************************/
/*! exports provided: RenderType_CourseProgressExhaustComponent, View_CourseProgressExhaustComponent_0, View_CourseProgressExhaustComponent_Host_0, CourseProgressExhaustComponentNgFactory */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RenderType_CourseProgressExhaustComponent", function() { return RenderType_CourseProgressExhaustComponent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "View_CourseProgressExhaustComponent_0", function() { return View_CourseProgressExhaustComponent_0; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "View_CourseProgressExhaustComponent_Host_0", function() { return View_CourseProgressExhaustComponent_Host_0; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CourseProgressExhaustComponentNgFactory", function() { return CourseProgressExhaustComponentNgFactory; });
/* harmony import */ var _course_progress_exhaust_component_scss_shim_ngstyle__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./course-progress-exhaust.component.scss.shim.ngstyle */ "2L7u");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "8Y7J");
/* harmony import */ var _node_modules_ng2_semantic_ui_v9_ng2_semantic_ui_v9_ngfactory__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../../node_modules/ng2-semantic-ui-v9/ng2-semantic-ui-v9.ngfactory */ "8rnI");
/* harmony import */ var ng2_semantic_ui_v9__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ng2-semantic-ui-v9 */ "0LfT");
/* harmony import */ var _telemetry_directives_telemetry_interact_telemetry_interact_directive__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../telemetry/directives/telemetry-interact/telemetry-interact.directive */ "JEXW");
/* harmony import */ var _telemetry_services_telemetry_telemetry_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../telemetry/services/telemetry/telemetry.service */ "FgxX");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @angular/router */ "iInd");
/* harmony import */ var _discussion_components_access_discussion_access_discussion_component_ngfactory__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../discussion/components/access-discussion/access-discussion.component.ngfactory */ "oL/1");
/* harmony import */ var _discussion_components_access_discussion_access_discussion_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../discussion/components/access-discussion/access-discussion.component */ "X5Lf");
/* harmony import */ var _shared_services_resource_resource_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../shared/services/resource/resource.service */ "vLro");
/* harmony import */ var _shared_services_toaster_toaster_service__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../shared/services/toaster/toaster.service */ "feA6");
/* harmony import */ var _shared_services_discussion_telemetry_discussion_telemetry_service__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../shared/services/discussion-telemetry/discussion-telemetry.service */ "013R");
/* harmony import */ var _shared_services_navigation_helper_navigation_helper_service__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../shared/services/navigation-helper/navigation-helper.service */ "7E7R");
/* harmony import */ var _core_services_user_user_service__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../core/services/user/user.service */ "chB/");
/* harmony import */ var _service_CsLibInitializer_cs_lib_initializer_service__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../../service/CsLibInitializer/cs-lib-initializer.service */ "R9cb");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @angular/common */ "SVse");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @angular/forms */ "s7LF");
/* harmony import */ var _shared_components_app_loader_app_loader_component_ngfactory__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../shared/components/app-loader/app-loader.component.ngfactory */ "meMm");
/* harmony import */ var _shared_components_app_loader_app_loader_component__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../shared/components/app-loader/app-loader.component */ "ASwK");
/* harmony import */ var _shared_services_layoutconfig_layout_service__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../../shared/services/layoutconfig/layout.service */ "8mYS");
/* harmony import */ var _shared_services_config_config_service__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../../shared/services/config/config.service */ "j0Qm");
/* harmony import */ var _shared_pipes_interpolate_interpolate_pipe__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../../shared/pipes/interpolate/interpolate.pipe */ "0T8x");
/* harmony import */ var _shared_pipes_sb_data_table_pipe_sb_data_table_pipe__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../../shared/pipes/sb-data-table-pipe/sb-data-table.pipe */ "aypN");
/* harmony import */ var _shared_pipes_date_format_date_format_pipe__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../../../shared/pipes/date-format/date-format.pipe */ "movY");
/* harmony import */ var _angular_cdk_bidi__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! @angular/cdk/bidi */ "9gLZ");
/* harmony import */ var _course_progress_exhaust_component__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./course-progress-exhaust.component */ "OBlA");
/* harmony import */ var _services_course_progress_course_progress_service__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../../services/course-progress/course-progress.service */ "A6gx");
/* harmony import */ var _shared_services_pagination_pagination_service__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ../../../shared/services/pagination/pagination.service */ "X/Ol");
/* harmony import */ var _shared_services_on_demand_report_on_demand_report_service__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ../../../shared/services/on-demand-report/on-demand-report.service */ "4DyJ");
/* harmony import */ var _core_services_form_form_service__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ../../../core/services/form/form.service */ "9dCP");
/* harmony import */ var _services_usage_usage_service__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ../../services/usage/usage.service */ "WKNp");
/* harmony import */ var _services_course_progress_export_csv_service__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ../../services/course-progress/export-csv.service */ "VN7U");
































var styles_CourseProgressExhaustComponent = [_course_progress_exhaust_component_scss_shim_ngstyle__WEBPACK_IMPORTED_MODULE_0__["styles"]];
var RenderType_CourseProgressExhaustComponent = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵcrt"]({ encapsulation: 0, styles: styles_CourseProgressExhaustComponent, data: {} });

function View_CourseProgressExhaustComponent_2(_l) { return _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵvid"](0, [(_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](0, 0, null, null, 6, "sui-select-option", [["appTelemetryInteract", ""], ["tabindex", "0"]], [[2, "item", null], [2, "active", null]], [[null, "click"]], function (_v, en, $event) { var ad = true; var _co = _v.component; if (("click" === en)) {
        var pd_0 = (_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵnov"](_v, 1).onClick($event) !== false);
        ad = (pd_0 && ad);
    } if (("click" === en)) {
        var pd_1 = (_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵnov"](_v, 3).onClick($event) !== false);
        ad = (pd_1 && ad);
    } if (("click" === en)) {
        var pd_2 = (_co.setBatchId(_v.context.$implicit) !== false);
        ad = (pd_2 && ad);
    } return ad; }, _node_modules_ng2_semantic_ui_v9_ng2_semantic_ui_v9_ngfactory__WEBPACK_IMPORTED_MODULE_2__["View_ɵcu_0"], _node_modules_ng2_semantic_ui_v9_ng2_semantic_ui_v9_ngfactory__WEBPACK_IMPORTED_MODULE_2__["RenderType_ɵcu"])), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵdid"](1, 49152, [[1, 4]], 1, ng2_semantic_ui_v9__WEBPACK_IMPORTED_MODULE_3__["ɵcu"], [_angular_core__WEBPACK_IMPORTED_MODULE_1__["Renderer2"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["ElementRef"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["ChangeDetectorRef"]], { value: [0, "value"] }, null), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵqud"](603979776, 3, { childDropdownMenu: 0 }), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵdid"](3, 16384, null, 0, _telemetry_directives_telemetry_interact_telemetry_interact_directive__WEBPACK_IMPORTED_MODULE_4__["TelemetryInteractDirective"], [_telemetry_services_telemetry_telemetry_service__WEBPACK_IMPORTED_MODULE_5__["TelemetryService"], _angular_router__WEBPACK_IMPORTED_MODULE_6__["ActivatedRoute"], _angular_router__WEBPACK_IMPORTED_MODULE_6__["Router"]], { telemetryInteractObject: [0, "telemetryInteractObject"], telemetryInteractEdata: [1, "telemetryInteractEdata"], telemetryInteractCdata: [2, "telemetryInteractCdata"] }, null), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵpod"](4, { id: 0, type: 1, pageid: 2 }), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵpod"](5, { "type": 0, "id": 1 }), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵpad"](6, 1)], function (_ck, _v) { var _co = _v.component; var currVal_2 = _v.context.$implicit; _ck(_v, 1, 0, currVal_2); var currVal_3 = _co.interactObject; var currVal_4 = _ck(_v, 4, 0, "batchSelection", "click", "course-progress-dashboard"); var currVal_5 = _ck(_v, 6, 0, _ck(_v, 5, 0, "batch", _v.context.$implicit.id)); _ck(_v, 3, 0, currVal_3, currVal_4, currVal_5); }, function (_ck, _v) { var currVal_0 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵnov"](_v, 1).hasClasses; var currVal_1 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵnov"](_v, 1).isActive; _ck(_v, 0, 0, currVal_0, currVal_1); }); }
function View_CourseProgressExhaustComponent_3(_l) { return _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵvid"](0, [(_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](0, 0, null, null, 1, "app-access-discussion", [], null, [[null, "routerData"]], function (_v, en, $event) { var ad = true; var _co = _v.component; if (("routerData" === en)) {
        var pd_0 = (_co.assignForumData($event) !== false);
        ad = (pd_0 && ad);
    } return ad; }, _discussion_components_access_discussion_access_discussion_component_ngfactory__WEBPACK_IMPORTED_MODULE_7__["View_AccessDiscussionComponent_0"], _discussion_components_access_discussion_access_discussion_component_ngfactory__WEBPACK_IMPORTED_MODULE_7__["RenderType_AccessDiscussionComponent"])), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵdid"](1, 114688, null, 0, _discussion_components_access_discussion_access_discussion_component__WEBPACK_IMPORTED_MODULE_8__["AccessDiscussionComponent"], [_shared_services_resource_resource_service__WEBPACK_IMPORTED_MODULE_9__["ResourceService"], _angular_router__WEBPACK_IMPORTED_MODULE_6__["Router"], _shared_services_toaster_toaster_service__WEBPACK_IMPORTED_MODULE_10__["ToasterService"], _shared_services_discussion_telemetry_discussion_telemetry_service__WEBPACK_IMPORTED_MODULE_11__["DiscussionTelemetryService"], _shared_services_navigation_helper_navigation_helper_service__WEBPACK_IMPORTED_MODULE_12__["NavigationHelperService"], _core_services_user_user_service__WEBPACK_IMPORTED_MODULE_13__["UserService"], _service_CsLibInitializer_cs_lib_initializer_service__WEBPACK_IMPORTED_MODULE_14__["CsLibInitializerService"]], { fetchForumIdReq: [0, "fetchForumIdReq"] }, { routerData: "routerData" })], function (_ck, _v) { var _co = _v.component; var currVal_0 = _co.fetchForumIdReq; _ck(_v, 1, 0, currVal_0); }, null); }
function View_CourseProgressExhaustComponent_4(_l) { return _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵvid"](0, [(_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](0, 0, null, null, 3, "p", [["class", "d-flex flex-ai-flex-end mr-24 fsmall mt-8 mb-0 update-text"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵted"](1, null, [" ", ""])), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵppd"](2, 2), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵppd"](3, 3)], null, function (_ck, _v) { var _co = _v.component; var currVal_0 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵunv"](_v, 1, 0, _ck(_v, 3, 0, _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵnov"](_v.parent.parent, 0), ((_co.resourceService == null) ? null : ((_co.resourceService.frmelmnts == null) ? null : ((_co.resourceService.frmelmnts.lbl == null) ? null : _co.resourceService.frmelmnts.lbl.batchReportUpdateNote))), "{date}", _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵunv"](_v, 1, 0, _ck(_v, 2, 0, _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵnov"](_v.parent.parent, 1), ((_co.currentBatch == null) ? null : _co.currentBatch.lastUpdatedOn), "dateTime")))); _ck(_v, 1, 0, currVal_0); }); }
function View_CourseProgressExhaustComponent_6(_l) { return _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵvid"](0, [(_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](0, 0, null, null, 1, "span", [], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵted"](1, null, [" ", " "]))], null, function (_ck, _v) { var _co = _v.component; var currVal_0 = ((_co.resourceService == null) ? null : ((_co.resourceService.frmelmnts == null) ? null : ((_co.resourceService.frmelmnts.lbl == null) ? null : _co.resourceService.frmelmnts.lbl.batchstartdate))); _ck(_v, 1, 0, currVal_0); }); }
function View_CourseProgressExhaustComponent_7(_l) { return _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵvid"](0, [(_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](0, 0, null, null, 2, "span", [["class", "d-flex flex-dc course-participants course-participants-label"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](1, 0, null, null, 1, "span", [], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵted"](2, null, ["", ""]))], null, function (_ck, _v) { var _co = _v.component; var currVal_0 = ((_co.resourceService == null) ? null : ((_co.resourceService.frmelmnts == null) ? null : ((_co.resourceService.frmelmnts.lbl == null) ? null : _co.resourceService.frmelmnts.lbl.totalEnrolments))); _ck(_v, 2, 0, currVal_0); }); }
function View_CourseProgressExhaustComponent_8(_l) { return _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵvid"](0, [(_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](0, 0, null, null, 2, "span", [["class", "font-weight-bold"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵted"](1, null, ["", ""])), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵppd"](2, 2)], null, function (_ck, _v) { var _co = _v.component; var currVal_0 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵunv"](_v, 1, 0, _ck(_v, 2, 0, _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵnov"](_v.parent.parent.parent, 2), _co.currentBatch.endDate, "DD/MM/YYYY")); _ck(_v, 1, 0, currVal_0); }); }
function View_CourseProgressExhaustComponent_9(_l) { return _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵvid"](0, [(_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](0, 0, null, null, 1, "span", [], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵted"](-1, null, ["-"]))], null, null); }
function View_CourseProgressExhaustComponent_10(_l) { return _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵvid"](0, [(_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](0, 0, null, null, 2, "span", [["class", "course-participants course-participants-label"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](1, 0, null, null, 1, "span", [["class", "font-weight-bold"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵted"](2, null, ["", ""]))], null, function (_ck, _v) { var _co = _v.component; var currVal_0 = _co.totalCount; _ck(_v, 2, 0, currVal_0); }); }
function View_CourseProgressExhaustComponent_5(_l) { return _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵvid"](0, [(_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](0, 0, null, null, 21, "div", [["class", "d-flex flex-dc my-16 sb-course-progress-status"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](1, 0, null, null, 8, "div", [["class", "sb-course-progress-status-label"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](2, 0, null, null, 2, "span", [["class", "course-start-dt course-participants-label"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵand"](16777216, null, null, 1, null, View_CourseProgressExhaustComponent_6)), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵdid"](4, 16384, null, 0, _angular_common__WEBPACK_IMPORTED_MODULE_15__["NgIf"], [_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewContainerRef"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["TemplateRef"]], { ngIf: [0, "ngIf"] }, null), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](5, 0, null, null, 2, "span", [["class", "course-end-dt course-participants-label"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](6, 0, null, null, 1, "span", [], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵted"](7, null, ["", " "])), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵand"](16777216, null, null, 1, null, View_CourseProgressExhaustComponent_7)), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵdid"](9, 16384, null, 0, _angular_common__WEBPACK_IMPORTED_MODULE_15__["NgIf"], [_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewContainerRef"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["TemplateRef"]], { ngIf: [0, "ngIf"] }, null), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](10, 0, null, null, 11, "div", [["class", "sb-bg-color-white sb-course-progress-status-result"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](11, 0, null, null, 3, "span", [["class", "course-start-dt course-participants-label"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](12, 0, null, null, 2, "span", [["class", "font-weight-bold"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵted"](13, null, [" ", ""])), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵppd"](14, 2), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](15, 0, null, null, 4, "span", [["class", "course-end-dt course-participants-label"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵand"](16777216, null, null, 1, null, View_CourseProgressExhaustComponent_8)), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵdid"](17, 16384, null, 0, _angular_common__WEBPACK_IMPORTED_MODULE_15__["NgIf"], [_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewContainerRef"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["TemplateRef"]], { ngIf: [0, "ngIf"] }, null), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵand"](16777216, null, null, 1, null, View_CourseProgressExhaustComponent_9)), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵdid"](19, 16384, null, 0, _angular_common__WEBPACK_IMPORTED_MODULE_15__["NgIf"], [_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewContainerRef"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["TemplateRef"]], { ngIf: [0, "ngIf"] }, null), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵand"](16777216, null, null, 1, null, View_CourseProgressExhaustComponent_10)), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵdid"](21, 16384, null, 0, _angular_common__WEBPACK_IMPORTED_MODULE_15__["NgIf"], [_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewContainerRef"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["TemplateRef"]], { ngIf: [0, "ngIf"] }, null)], function (_ck, _v) { var _co = _v.component; var currVal_0 = _co.currentBatch.startDate; _ck(_v, 4, 0, currVal_0); var currVal_2 = (_co.currentBatch.participantCount !== null); _ck(_v, 9, 0, currVal_2); var currVal_4 = _co.currentBatch.endDate; _ck(_v, 17, 0, currVal_4); var currVal_5 = !_co.currentBatch.endDate; _ck(_v, 19, 0, currVal_5); var currVal_6 = (_co.totalCount !== null); _ck(_v, 21, 0, currVal_6); }, function (_ck, _v) { var _co = _v.component; var currVal_1 = ((_co.resourceService == null) ? null : ((_co.resourceService.frmelmnts == null) ? null : ((_co.resourceService.frmelmnts.lbl == null) ? null : _co.resourceService.frmelmnts.lbl.batchenddate))); _ck(_v, 7, 0, currVal_1); var currVal_3 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵunv"](_v, 13, 0, _ck(_v, 14, 0, _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵnov"](_v.parent.parent, 2), _co.currentBatch.startDate, "DD/MM/YYYY")); _ck(_v, 13, 0, currVal_3); }); }
function View_CourseProgressExhaustComponent_11(_l) { return _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵvid"](0, [(_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](0, 0, null, null, 5, "div", [["class", "d-flex flex-jc-center"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](1, 0, null, null, 4, "div", [["class", "d-flex flex-dc flex-ai-center pb-24"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](2, 0, null, null, 1, "div", [], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](3, 0, null, null, 0, "img", [["alt", "batch"], ["height", "229px"], ["src", "assets/images/batch.png"], ["width", "329px"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](4, 0, null, null, 1, "p", [["class", "img-text"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵted"](-1, null, ["Select batch to view details"]))], null, null); }
function View_CourseProgressExhaustComponent_1(_l) { return _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵvid"](0, [(_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](0, 0, null, null, 30, "div", [["id", "dashoardFiltersHolder"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](1, 0, null, null, 17, "div", [["class", "d-flex  progress-report-content"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](2, 0, null, null, 14, "div", [["class", "d-flex w-300 flex-dc"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](3, 0, null, null, 1, "label", [["class", "fnormal font-weight-normal pl-4 text-left"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵted"](4, null, ["", ""])), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](5, 0, null, null, 11, "label", [["class", "w-100"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](6, 0, null, null, 10, "sui-select", [["class", "selection course-dashboard-select"], ["labelField", "name"], ["placeholder", "Select batch to see dashboard"], ["valueField", "id"]], [[2, "ui", null], [2, "dropdown", null], [2, "active", null], [2, "visible", null], [2, "search", null], [2, "loading", null], [1, "tabindex", 0], [2, "disabled", null], [2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null]], [[null, "ngModelChange"], [null, "click"], [null, "focusin"], [null, "focusout"], [null, "keypress"], [null, "keydown"], [null, "selectedOptionChange"], [null, "touched"]], function (_v, en, $event) { var ad = true; var _co = _v.component; if (("click" === en)) {
        var pd_0 = (_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵnov"](_v, 7).onClick($event) !== false);
        ad = (pd_0 && ad);
    } if (("focusin" === en)) {
        var pd_1 = (_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵnov"](_v, 7).onFocusIn() !== false);
        ad = (pd_1 && ad);
    } if (("focusout" === en)) {
        var pd_2 = (_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵnov"](_v, 7).onFocusOut($event) !== false);
        ad = (pd_2 && ad);
    } if (("keypress" === en)) {
        var pd_3 = (_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵnov"](_v, 7).onKeyPress($event) !== false);
        ad = (pd_3 && ad);
    } if (("keydown" === en)) {
        var pd_4 = (_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵnov"](_v, 7).onKeyDown($event) !== false);
        ad = (pd_4 && ad);
    } if (("selectedOptionChange" === en)) {
        var pd_5 = (_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵnov"](_v, 10).onChange($event) !== false);
        ad = (pd_5 && ad);
    } if (("touched" === en)) {
        var pd_6 = (_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵnov"](_v, 10).onTouched() !== false);
        ad = (pd_6 && ad);
    } if (("ngModelChange" === en)) {
        var pd_7 = ((_co.selectedOption = $event) !== false);
        ad = (pd_7 && ad);
    } return ad; }, _node_modules_ng2_semantic_ui_v9_ng2_semantic_ui_v9_ngfactory__WEBPACK_IMPORTED_MODULE_2__["View_ɵcv_0"], _node_modules_ng2_semantic_ui_v9_ng2_semantic_ui_v9_ngfactory__WEBPACK_IMPORTED_MODULE_2__["RenderType_ɵcv"])), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵdid"](7, 1228800, [["select", 4]], 2, ng2_semantic_ui_v9__WEBPACK_IMPORTED_MODULE_3__["ɵcv"], [_angular_core__WEBPACK_IMPORTED_MODULE_1__["ElementRef"], ng2_semantic_ui_v9__WEBPACK_IMPORTED_MODULE_3__["SuiLocalizationService"]], { options: [0, "options"], labelField: [1, "labelField"], valueField: [2, "valueField"], placeholder: [3, "placeholder"] }, { onTouched: "touched", selectedOptionChange: "selectedOptionChange" }), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵqud"](603979776, 1, { _renderedOptions: 1 }), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵqud"](603979776, 2, { _manualSearch: 0 }), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵdid"](10, 16384, null, 0, ng2_semantic_ui_v9__WEBPACK_IMPORTED_MODULE_3__["ɵcw"], [ng2_semantic_ui_v9__WEBPACK_IMPORTED_MODULE_3__["ɵcv"]], null, null), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵprd"](1024, null, _angular_forms__WEBPACK_IMPORTED_MODULE_16__["NG_VALUE_ACCESSOR"], function (p0_0) { return [p0_0]; }, [ng2_semantic_ui_v9__WEBPACK_IMPORTED_MODULE_3__["ɵcw"]]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵdid"](12, 671744, null, 0, _angular_forms__WEBPACK_IMPORTED_MODULE_16__["NgModel"], [[8, null], [8, null], [8, null], [6, _angular_forms__WEBPACK_IMPORTED_MODULE_16__["NG_VALUE_ACCESSOR"]]], { model: [0, "model"] }, { update: "ngModelChange" }), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵprd"](2048, null, _angular_forms__WEBPACK_IMPORTED_MODULE_16__["NgControl"], null, [_angular_forms__WEBPACK_IMPORTED_MODULE_16__["NgModel"]]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵdid"](14, 16384, null, 0, _angular_forms__WEBPACK_IMPORTED_MODULE_16__["NgControlStatus"], [[4, _angular_forms__WEBPACK_IMPORTED_MODULE_16__["NgControl"]]], null, null), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵand"](16777216, null, 0, 1, null, View_CourseProgressExhaustComponent_2)), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵdid"](16, 278528, null, 0, _angular_common__WEBPACK_IMPORTED_MODULE_15__["NgForOf"], [_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewContainerRef"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["TemplateRef"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["IterableDiffers"]], { ngForOf: [0, "ngForOf"] }, null), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵand"](16777216, null, null, 1, null, View_CourseProgressExhaustComponent_3)), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵdid"](18, 16384, null, 0, _angular_common__WEBPACK_IMPORTED_MODULE_15__["NgIf"], [_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewContainerRef"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["TemplateRef"]], { ngIf: [0, "ngIf"] }, null), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](19, 0, null, null, 4, "div", [["class", "d-flex"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](20, 0, null, null, 1, "label", [["class", "fnormal mt-24 font-weight-normal pl-4 text-left"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵted"](21, null, ["", " : "])), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](22, 0, null, null, 1, "label", [["class", "fnormal mt-24 font-weight-bold pl-4 text-left"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵted"](23, null, ["", " "])), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](24, 0, null, null, 4, "div", [["class", "d-flex flex-dc current-batch-list"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵand"](16777216, null, null, 1, null, View_CourseProgressExhaustComponent_4)), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵdid"](26, 16384, null, 0, _angular_common__WEBPACK_IMPORTED_MODULE_15__["NgIf"], [_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewContainerRef"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["TemplateRef"]], { ngIf: [0, "ngIf"] }, null), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵand"](16777216, null, null, 1, null, View_CourseProgressExhaustComponent_5)), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵdid"](28, 16384, null, 0, _angular_common__WEBPACK_IMPORTED_MODULE_15__["NgIf"], [_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewContainerRef"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["TemplateRef"]], { ngIf: [0, "ngIf"] }, null), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵand"](16777216, null, null, 1, null, View_CourseProgressExhaustComponent_11)), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵdid"](30, 16384, null, 0, _angular_common__WEBPACK_IMPORTED_MODULE_15__["NgIf"], [_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewContainerRef"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["TemplateRef"]], { ngIf: [0, "ngIf"] }, null)], function (_ck, _v) { var _co = _v.component; var currVal_16 = _co.batchlist; var currVal_17 = "name"; var currVal_18 = "id"; var currVal_19 = "Select batch to see dashboard"; _ck(_v, 7, 0, currVal_16, currVal_17, currVal_18, currVal_19); var currVal_20 = _co.selectedOption; _ck(_v, 12, 0, currVal_20); var currVal_21 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵnov"](_v, 7).filteredOptions; _ck(_v, 16, 0, currVal_21); var currVal_22 = _co.fetchForumIdReq; _ck(_v, 18, 0, currVal_22); var currVal_25 = ((_co.currentBatch == null) ? null : _co.currentBatch.lastUpdatedOn); _ck(_v, 26, 0, currVal_25); var currVal_26 = _co.currentBatch; _ck(_v, 28, 0, currVal_26); var currVal_27 = (((_co.batchlist && (_co.batchlist.length > 1)) && _co.showWarningDiv) && !_co.showLoader); _ck(_v, 30, 0, currVal_27); }, function (_ck, _v) { var _co = _v.component; var currVal_0 = ((_co.resourceService == null) ? null : ((_co.resourceService.frmelmnts == null) ? null : ((_co.resourceService.frmelmnts.lbl == null) ? null : _co.resourceService.frmelmnts.lbl.selectBatch))); _ck(_v, 4, 0, currVal_0); var currVal_1 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵnov"](_v, 7).hasClasses; var currVal_2 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵnov"](_v, 7).hasClasses; var currVal_3 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵnov"](_v, 7).isActive; var currVal_4 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵnov"](_v, 7).isVisible; var currVal_5 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵnov"](_v, 7).hasSearchClass; var currVal_6 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵnov"](_v, 7).isSearching; var currVal_7 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵnov"](_v, 7).tabindex; var currVal_8 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵnov"](_v, 7).isDisabled; var currVal_9 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵnov"](_v, 14).ngClassUntouched; var currVal_10 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵnov"](_v, 14).ngClassTouched; var currVal_11 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵnov"](_v, 14).ngClassPristine; var currVal_12 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵnov"](_v, 14).ngClassDirty; var currVal_13 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵnov"](_v, 14).ngClassValid; var currVal_14 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵnov"](_v, 14).ngClassInvalid; var currVal_15 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵnov"](_v, 14).ngClassPending; _ck(_v, 6, 1, [currVal_1, currVal_2, currVal_3, currVal_4, currVal_5, currVal_6, currVal_7, currVal_8, currVal_9, currVal_10, currVal_11, currVal_12, currVal_13, currVal_14, currVal_15]); var currVal_23 = ((_co.resourceService == null) ? null : ((_co.resourceService.frmelmnts == null) ? null : ((_co.resourceService.frmelmnts.lbl == null) ? null : _co.resourceService.frmelmnts.lbl.courseProgressExhaustCourseName))); _ck(_v, 21, 0, currVal_23); var currVal_24 = _co.courseName; _ck(_v, 23, 0, currVal_24); }); }
function View_CourseProgressExhaustComponent_12(_l) { return _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵvid"](0, [(_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](0, 0, null, null, 4, "div", [["class", "sb-toaster sb-toast-info sb-mw-100 sb-toast-sm-padding"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](1, 0, null, null, 3, "div", [["class", "sb-toast-body"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](2, 0, null, null, 2, "div", [["class", "sb-toast-texts"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](3, 0, null, null, 1, "div", [["class", "sb-toast-message"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵted"](4, null, ["", ""]))], null, function (_ck, _v) { var _co = _v.component; var currVal_0 = ((_co.resourceService == null) ? null : ((_co.resourceService.frmelmnts == null) ? null : ((_co.resourceService.frmelmnts.instn == null) ? null : _co.resourceService.frmelmnts.instn.t0085))); _ck(_v, 4, 0, currVal_0); }); }
function View_CourseProgressExhaustComponent_13(_l) { return _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵvid"](0, [(_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](0, 0, null, null, 2, "div", [["class", "tweleve wide column"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](1, 0, null, null, 1, "app-loader", [], null, null, null, _shared_components_app_loader_app_loader_component_ngfactory__WEBPACK_IMPORTED_MODULE_17__["View_AppLoaderComponent_0"], _shared_components_app_loader_app_loader_component_ngfactory__WEBPACK_IMPORTED_MODULE_17__["RenderType_AppLoaderComponent"])), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵdid"](2, 114688, null, 0, _shared_components_app_loader_app_loader_component__WEBPACK_IMPORTED_MODULE_18__["AppLoaderComponent"], [_shared_services_resource_resource_service__WEBPACK_IMPORTED_MODULE_9__["ResourceService"], _shared_services_layoutconfig_layout_service__WEBPACK_IMPORTED_MODULE_19__["LayoutService"], _shared_services_config_config_service__WEBPACK_IMPORTED_MODULE_20__["ConfigService"]], null, null)], function (_ck, _v) { _ck(_v, 2, 0); }, null); }
function View_CourseProgressExhaustComponent_14(_l) { return _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵvid"](0, [(_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](0, 0, null, null, 7, "div", [["class", "ui grid"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](1, 0, null, null, 6, "div", [["class", "twelve wide column"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](2, 0, null, null, 5, "div", [["class", "ui info message"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](3, 0, null, null, 1, "div", [["class", "header"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵted"](4, null, ["", ""])), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](5, 0, null, null, 2, "ul", [["class", "list"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](6, 0, null, null, 1, "li", [], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵted"](7, null, ["", ""]))], null, function (_ck, _v) { var _co = _v.component; var currVal_0 = ((_co.resourceService == null) ? null : ((_co.resourceService.frmelmnts == null) ? null : ((_co.resourceService.frmelmnts.instn == null) ? null : _co.resourceService.frmelmnts.instn.t0061))); _ck(_v, 4, 0, currVal_0); var currVal_1 = ((_co.resourceService == null) ? null : ((_co.resourceService.frmelmnts == null) ? null : ((_co.resourceService.frmelmnts.instn == null) ? null : _co.resourceService.frmelmnts.instn.t0062))); _ck(_v, 7, 0, currVal_1); }); }
function View_CourseProgressExhaustComponent_15(_l) { return _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵvid"](0, [(_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](0, 0, null, null, 1, "th", [["class", "UpReviewTableHeader"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵted"](1, null, ["", ""]))], null, function (_ck, _v) { var _co = _v.component; var currVal_0 = ((_co.resourceService == null) ? null : ((_co.resourceService.frmelmnts == null) ? null : ((_co.resourceService.frmelmnts.lbl == null) ? null : _co.resourceService.frmelmnts.lbl.courseProgressExhaustBatchId))); _ck(_v, 1, 0, currVal_0); }); }
function View_CourseProgressExhaustComponent_16(_l) { return _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵvid"](0, [(_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](0, 0, null, null, 1, "th", [["class", "UpReviewTableHeader"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵted"](1, null, ["", ""]))], null, function (_ck, _v) { var _co = _v.component; var currVal_0 = ((_co.resourceService == null) ? null : ((_co.resourceService.frmelmnts == null) ? null : ((_co.resourceService.frmelmnts.lbl == null) ? null : _co.resourceService.frmelmnts.lbl.courseProgressExhaustBatchName))); _ck(_v, 1, 0, currVal_0); }); }
function View_CourseProgressExhaustComponent_17(_l) { return _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵvid"](0, [(_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](0, 0, null, null, 1, "th", [["class", "UpReviewTableHeader"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵted"](1, null, ["", ""]))], null, function (_ck, _v) { var _co = _v.component; var currVal_0 = ((_co.resourceService == null) ? null : ((_co.resourceService.frmelmnts == null) ? null : ((_co.resourceService.frmelmnts.lbl == null) ? null : _co.resourceService.frmelmnts.lbl.courseProgressExhaustBatchStartDate))); _ck(_v, 1, 0, currVal_0); }); }
function View_CourseProgressExhaustComponent_18(_l) { return _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵvid"](0, [(_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](0, 0, null, null, 1, "th", [["class", "UpReviewTableHeader"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵted"](1, null, ["", ""]))], null, function (_ck, _v) { var _co = _v.component; var currVal_0 = ((_co.resourceService == null) ? null : ((_co.resourceService.frmelmnts == null) ? null : ((_co.resourceService.frmelmnts.lbl == null) ? null : _co.resourceService.frmelmnts.lbl.courseProgressExhaustBatchEndDate))); _ck(_v, 1, 0, currVal_0); }); }
function View_CourseProgressExhaustComponent_21(_l) { return _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵvid"](0, [(_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](0, 0, null, null, 1, "td", [["class", "content"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵted"](1, null, ["", ""]))], null, function (_ck, _v) { var currVal_0 = ((_v.parent.context.$implicit == null) ? null : _v.parent.context.$implicit.batchid); _ck(_v, 1, 0, currVal_0); }); }
function View_CourseProgressExhaustComponent_22(_l) { return _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵvid"](0, [(_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](0, 0, null, null, 1, "td", [["class", "content"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵted"](1, null, ["", ""]))], null, function (_ck, _v) { var currVal_0 = ((_v.parent.context.$implicit == null) ? null : _v.parent.context.$implicit.batchname); _ck(_v, 1, 0, currVal_0); }); }
function View_CourseProgressExhaustComponent_23(_l) { return _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵvid"](0, [(_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](0, 0, null, null, 1, "td", [["class", "content"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵted"](1, null, ["", ""]))], null, function (_ck, _v) { var currVal_0 = ((_v.parent.context.$implicit == null) ? null : _v.parent.context.$implicit.start_date); _ck(_v, 1, 0, currVal_0); }); }
function View_CourseProgressExhaustComponent_24(_l) { return _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵvid"](0, [(_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](0, 0, null, null, 1, "td", [["class", "content"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵted"](1, null, ["", ""]))], null, function (_ck, _v) { var currVal_0 = ((_v.parent.context.$implicit == null) ? null : _v.parent.context.$implicit.end_date); _ck(_v, 1, 0, currVal_0); }); }
function View_CourseProgressExhaustComponent_25(_l) { return _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵvid"](0, [(_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](0, 0, null, null, 1, "td", [["class", "content"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵted"](-1, null, ["Yes"]))], null, null); }
function View_CourseProgressExhaustComponent_26(_l) { return _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵvid"](0, [(_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](0, 0, null, null, 1, "td", [["class", "content"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵted"](-1, null, ["No"]))], null, null); }
function View_CourseProgressExhaustComponent_20(_l) { return _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵvid"](0, [(_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](0, 0, null, null, 28, "tr", [["class", "UpForReviewListHover cursor-pointer"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](1, 0, null, null, 1, "td", [["class", "content"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵted"](2, null, ["", ""])), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](3, 0, null, null, 1, "td", [["class", "content"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵted"](4, null, ["", ""])), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](5, 0, null, null, 1, "td", [["class", "content"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵted"](6, null, ["", ""])), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵand"](16777216, null, null, 1, null, View_CourseProgressExhaustComponent_21)), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵdid"](8, 16384, null, 0, _angular_common__WEBPACK_IMPORTED_MODULE_15__["NgIf"], [_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewContainerRef"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["TemplateRef"]], { ngIf: [0, "ngIf"] }, null), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵand"](16777216, null, null, 1, null, View_CourseProgressExhaustComponent_22)), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵdid"](10, 16384, null, 0, _angular_common__WEBPACK_IMPORTED_MODULE_15__["NgIf"], [_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewContainerRef"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["TemplateRef"]], { ngIf: [0, "ngIf"] }, null), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵand"](16777216, null, null, 1, null, View_CourseProgressExhaustComponent_23)), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵdid"](12, 16384, null, 0, _angular_common__WEBPACK_IMPORTED_MODULE_15__["NgIf"], [_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewContainerRef"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["TemplateRef"]], { ngIf: [0, "ngIf"] }, null), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵand"](16777216, null, null, 1, null, View_CourseProgressExhaustComponent_24)), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵdid"](14, 16384, null, 0, _angular_common__WEBPACK_IMPORTED_MODULE_15__["NgIf"], [_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewContainerRef"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["TemplateRef"]], { ngIf: [0, "ngIf"] }, null), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](15, 0, null, null, 2, "td", [["class", "content"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵted"](16, null, ["", ""])), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵppd"](17, 2), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](18, 0, null, null, 2, "td", [["class", "content"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵted"](19, null, ["", " "])), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵppd"](20, 2), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](21, 0, null, null, 1, "td", [["class", "content"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵted"](22, null, ["", ""])), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](23, 0, null, null, 1, "td", [["class", "content"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵted"](24, null, ["", ""])), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵand"](16777216, null, null, 1, null, View_CourseProgressExhaustComponent_25)), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵdid"](26, 16384, null, 0, _angular_common__WEBPACK_IMPORTED_MODULE_15__["NgIf"], [_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewContainerRef"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["TemplateRef"]], { ngIf: [0, "ngIf"] }, null), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵand"](16777216, null, null, 1, null, View_CourseProgressExhaustComponent_26)), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵdid"](28, 16384, null, 0, _angular_common__WEBPACK_IMPORTED_MODULE_15__["NgIf"], [_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewContainerRef"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["TemplateRef"]], { ngIf: [0, "ngIf"] }, null)], function (_ck, _v) { var _co = _v.component; var currVal_3 = _co.showCourseData; _ck(_v, 8, 0, currVal_3); var currVal_4 = _co.showCourseData; _ck(_v, 10, 0, currVal_4); var currVal_5 = _co.showCourseData; _ck(_v, 12, 0, currVal_5); var currVal_6 = _co.showCourseData; _ck(_v, 14, 0, currVal_6); var currVal_11 = ((_v.context.$implicit == null) ? null : _v.context.$implicit.issued_certificates); _ck(_v, 26, 0, currVal_11); var currVal_12 = !((_v.context.$implicit == null) ? null : _v.context.$implicit.issued_certificates); _ck(_v, 28, 0, currVal_12); }, function (_ck, _v) { var currVal_0 = ((_v.context.$implicit == null) ? null : _v.context.$implicit.userName); _ck(_v, 2, 0, currVal_0); var currVal_1 = ((_v.context.$implicit == null) ? null : _v.context.$implicit.maskedEmail); _ck(_v, 4, 0, currVal_1); var currVal_2 = ((_v.context.$implicit == null) ? null : _v.context.$implicit.maskedPhone); _ck(_v, 6, 0, currVal_2); var currVal_7 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵunv"](_v, 16, 0, _ck(_v, 17, 0, _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵnov"](_v.parent.parent, 3), ((_v.context.$implicit == null) ? null : _v.context.$implicit.enrolled_date), "dd/MM/yyyy")); _ck(_v, 16, 0, currVal_7); var currVal_8 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵunv"](_v, 19, 0, _ck(_v, 20, 0, _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵnov"](_v.parent.parent, 2), ((_v.context.$implicit == null) ? null : _v.context.$implicit.completedon), "DD/MM/YYYY")); _ck(_v, 19, 0, currVal_8); var currVal_9 = ((_v.context.$implicit == null) ? null : _v.context.$implicit.progress); _ck(_v, 22, 0, currVal_9); var currVal_10 = ((_v.context.$implicit == null) ? null : _v.context.$implicit.completionpercentage); _ck(_v, 24, 0, currVal_10); }); }
function View_CourseProgressExhaustComponent_19(_l) { return _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵvid"](0, [(_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](0, 0, null, null, 2, "tbody", [], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵand"](16777216, null, null, 1, null, View_CourseProgressExhaustComponent_20)), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵdid"](2, 278528, null, 0, _angular_common__WEBPACK_IMPORTED_MODULE_15__["NgForOf"], [_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewContainerRef"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["TemplateRef"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["IterableDiffers"]], { ngForOf: [0, "ngForOf"] }, null)], function (_ck, _v) { var _co = _v.component; var currVal_0 = _co.courseProgressExhaustData; _ck(_v, 2, 0, currVal_0); }, null); }
function View_CourseProgressExhaustComponent_29(_l) { return _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵvid"](0, [(_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](0, 0, null, null, 5, "a", [["class", "item"], ["tabindex", "0"]], null, [[null, "click"]], function (_v, en, $event) { var ad = true; var _co = _v.component; if (("click" === en)) {
        var pd_0 = (_co.navigateToPage(_v.context.$implicit) !== false);
        ad = (pd_0 && ad);
    } return ad; }, null, null)), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵdid"](1, 278528, null, 0, _angular_common__WEBPACK_IMPORTED_MODULE_15__["NgClass"], [_angular_core__WEBPACK_IMPORTED_MODULE_1__["IterableDiffers"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["KeyValueDiffers"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["ElementRef"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["Renderer2"]], { klass: [0, "klass"], ngClass: [1, "ngClass"] }, null), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵpod"](2, { active: 0 }), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵdid"](3, 16384, null, 1, ng2_semantic_ui_v9__WEBPACK_IMPORTED_MODULE_3__["ɵbi"], [_angular_core__WEBPACK_IMPORTED_MODULE_1__["Renderer2"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["ElementRef"]], null, null), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵqud"](603979776, 6, { childDropdownMenu: 0 }), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵted"](5, null, ["", ""]))], function (_ck, _v) { var _co = _v.component; var currVal_0 = "item"; var currVal_1 = _ck(_v, 2, 0, (_co.pager.currentPage === _v.context.$implicit)); _ck(_v, 1, 0, currVal_0, currVal_1); }, function (_ck, _v) { var currVal_2 = _v.context.$implicit; _ck(_v, 5, 0, currVal_2); }); }
function View_CourseProgressExhaustComponent_28(_l) { return _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵvid"](0, [(_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](0, 0, null, null, 26, "div", [["class", "ui pagination menu mt-10 right-floated p-0 "]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](1, 0, null, null, 5, "a", [["class", "item "], ["tabindex", "0"]], null, [[null, "click"]], function (_v, en, $event) { var ad = true; var _co = _v.component; if (("click" === en)) {
        var pd_0 = (_co.navigateToPage(1) !== false);
        ad = (pd_0 && ad);
    } return ad; }, null, null)), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵdid"](2, 278528, null, 0, _angular_common__WEBPACK_IMPORTED_MODULE_15__["NgClass"], [_angular_core__WEBPACK_IMPORTED_MODULE_1__["IterableDiffers"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["KeyValueDiffers"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["ElementRef"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["Renderer2"]], { klass: [0, "klass"], ngClass: [1, "ngClass"] }, null), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵpod"](3, { disabled: 0 }), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵdid"](4, 16384, null, 1, ng2_semantic_ui_v9__WEBPACK_IMPORTED_MODULE_3__["ɵbi"], [_angular_core__WEBPACK_IMPORTED_MODULE_1__["Renderer2"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["ElementRef"]], null, null), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵqud"](603979776, 4, { childDropdownMenu: 0 }), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵted"](-1, null, ["First"])), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](7, 0, null, null, 5, "a", [["class", "item "], ["tabindex", "0"]], null, [[null, "click"]], function (_v, en, $event) { var ad = true; var _co = _v.component; if (("click" === en)) {
        var pd_0 = (_co.navigateToPage((_co.pager.currentPage - 1)) !== false);
        ad = (pd_0 && ad);
    } return ad; }, null, null)), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵdid"](8, 278528, null, 0, _angular_common__WEBPACK_IMPORTED_MODULE_15__["NgClass"], [_angular_core__WEBPACK_IMPORTED_MODULE_1__["IterableDiffers"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["KeyValueDiffers"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["ElementRef"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["Renderer2"]], { klass: [0, "klass"], ngClass: [1, "ngClass"] }, null), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵpod"](9, { disabled: 0 }), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵdid"](10, 16384, null, 1, ng2_semantic_ui_v9__WEBPACK_IMPORTED_MODULE_3__["ɵbi"], [_angular_core__WEBPACK_IMPORTED_MODULE_1__["Renderer2"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["ElementRef"]], null, null), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵqud"](603979776, 5, { childDropdownMenu: 0 }), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵted"](-1, null, ["Previous"])), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵand"](16777216, null, null, 1, null, View_CourseProgressExhaustComponent_29)), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵdid"](14, 278528, null, 0, _angular_common__WEBPACK_IMPORTED_MODULE_15__["NgForOf"], [_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewContainerRef"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["TemplateRef"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["IterableDiffers"]], { ngForOf: [0, "ngForOf"] }, null), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](15, 0, null, null, 5, "a", [["class", "item"], ["tabindex", "0"]], null, [[null, "click"]], function (_v, en, $event) { var ad = true; var _co = _v.component; if (("click" === en)) {
        var pd_0 = (_co.navigateToPage((_co.pager.currentPage + 1)) !== false);
        ad = (pd_0 && ad);
    } return ad; }, null, null)), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵdid"](16, 278528, null, 0, _angular_common__WEBPACK_IMPORTED_MODULE_15__["NgClass"], [_angular_core__WEBPACK_IMPORTED_MODULE_1__["IterableDiffers"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["KeyValueDiffers"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["ElementRef"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["Renderer2"]], { klass: [0, "klass"], ngClass: [1, "ngClass"] }, null), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵpod"](17, { disabled: 0 }), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵdid"](18, 16384, null, 1, ng2_semantic_ui_v9__WEBPACK_IMPORTED_MODULE_3__["ɵbi"], [_angular_core__WEBPACK_IMPORTED_MODULE_1__["Renderer2"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["ElementRef"]], null, null), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵqud"](603979776, 7, { childDropdownMenu: 0 }), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵted"](-1, null, ["Next"])), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](21, 0, null, null, 5, "a", [["class", "item "], ["tabindex", "0"]], null, [[null, "click"]], function (_v, en, $event) { var ad = true; var _co = _v.component; if (("click" === en)) {
        var pd_0 = (_co.navigateToPage(_co.pager.totalPages) !== false);
        ad = (pd_0 && ad);
    } return ad; }, null, null)), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵdid"](22, 278528, null, 0, _angular_common__WEBPACK_IMPORTED_MODULE_15__["NgClass"], [_angular_core__WEBPACK_IMPORTED_MODULE_1__["IterableDiffers"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["KeyValueDiffers"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["ElementRef"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["Renderer2"]], { klass: [0, "klass"], ngClass: [1, "ngClass"] }, null), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵpod"](23, { disabled: 0 }), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵdid"](24, 16384, null, 1, ng2_semantic_ui_v9__WEBPACK_IMPORTED_MODULE_3__["ɵbi"], [_angular_core__WEBPACK_IMPORTED_MODULE_1__["Renderer2"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["ElementRef"]], null, null), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵqud"](603979776, 8, { childDropdownMenu: 0 }), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵted"](-1, null, ["Last"]))], function (_ck, _v) { var _co = _v.component; var currVal_0 = "item "; var currVal_1 = _ck(_v, 3, 0, (_co.pager.currentPage === 1)); _ck(_v, 2, 0, currVal_0, currVal_1); var currVal_2 = "item "; var currVal_3 = _ck(_v, 9, 0, (_co.pager.currentPage === 1)); _ck(_v, 8, 0, currVal_2, currVal_3); var currVal_4 = _co.pager.pages; _ck(_v, 14, 0, currVal_4); var currVal_5 = "item"; var currVal_6 = _ck(_v, 17, 0, (_co.pager.currentPage === _co.pager.totalPages)); _ck(_v, 16, 0, currVal_5, currVal_6); var currVal_7 = "item "; var currVal_8 = _ck(_v, 23, 0, (_co.pager.currentPage === _co.pager.totalPages)); _ck(_v, 22, 0, currVal_7, currVal_8); }, null); }
function View_CourseProgressExhaustComponent_27(_l) { return _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵvid"](0, [(_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](0, 0, null, null, 2, "div", [["class", "pb-10"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵand"](16777216, null, null, 1, null, View_CourseProgressExhaustComponent_28)), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵdid"](2, 16384, null, 0, _angular_common__WEBPACK_IMPORTED_MODULE_15__["NgIf"], [_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewContainerRef"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["TemplateRef"]], { ngIf: [0, "ngIf"] }, null)], function (_ck, _v) { var _co = _v.component; var currVal_0 = _co.pager.pages.length; _ck(_v, 2, 0, currVal_0); }, null); }
function View_CourseProgressExhaustComponent_0(_l) { return _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵvid"](0, [_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵpid"](0, _shared_pipes_interpolate_interpolate_pipe__WEBPACK_IMPORTED_MODULE_21__["InterpolatePipe"], []), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵpid"](0, _shared_pipes_sb_data_table_pipe_sb_data_table_pipe__WEBPACK_IMPORTED_MODULE_22__["SbDataTablePipe"], []), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵpid"](0, _shared_pipes_date_format_date_format_pipe__WEBPACK_IMPORTED_MODULE_23__["DateFormatPipe"], []), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵpid"](0, _angular_common__WEBPACK_IMPORTED_MODULE_15__["DatePipe"], [_angular_core__WEBPACK_IMPORTED_MODULE_1__["LOCALE_ID"]]), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](4, 0, null, null, 64, "div", [["class", "sb-bg-color-white p-16"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](5, 0, null, null, 8, "div", [], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵand"](16777216, null, null, 1, null, View_CourseProgressExhaustComponent_1)), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵdid"](7, 16384, null, 0, _angular_common__WEBPACK_IMPORTED_MODULE_15__["NgIf"], [_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewContainerRef"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["TemplateRef"]], { ngIf: [0, "ngIf"] }, null), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵand"](16777216, null, null, 1, null, View_CourseProgressExhaustComponent_12)), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵdid"](9, 16384, null, 0, _angular_common__WEBPACK_IMPORTED_MODULE_15__["NgIf"], [_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewContainerRef"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["TemplateRef"]], { ngIf: [0, "ngIf"] }, null), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵand"](16777216, null, null, 1, null, View_CourseProgressExhaustComponent_13)), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵdid"](11, 16384, null, 0, _angular_common__WEBPACK_IMPORTED_MODULE_15__["NgIf"], [_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewContainerRef"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["TemplateRef"]], { ngIf: [0, "ngIf"] }, null), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵand"](16777216, null, null, 1, null, View_CourseProgressExhaustComponent_14)), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵdid"](13, 16384, null, 0, _angular_common__WEBPACK_IMPORTED_MODULE_15__["NgIf"], [_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewContainerRef"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["TemplateRef"]], { ngIf: [0, "ngIf"] }, null), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](14, 0, null, null, 19, "div", [["class", "ui grid mt-16"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](15, 0, null, null, 12, "div", [["class", "six wide column pt-0 pl-0"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](16, 0, null, null, 11, "div", [["class", "ui fluid icon input left action"], ["id", "search-input-container"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](17, 0, null, null, 10, "div", [["class", "searchfilterinput ui search"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](18, 0, null, null, 9, "div", [["class", "searchicon ui icon input pl-16"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](19, 0, null, null, 7, "input", [["autocomplete", "off"], ["class", "upForReviewSearchBox"], ["dir", "auto"], ["name", "filter_search"], ["spellcheck", "false"], ["title", "Search"], ["type", "text"]], [[8, "placeholder", 0], [2, "ng-untouched", null], [2, "ng-touched", null], [2, "ng-pristine", null], [2, "ng-dirty", null], [2, "ng-valid", null], [2, "ng-invalid", null], [2, "ng-pending", null], [1, "dir", 0]], [[null, "ngModelChange"], [null, "keyup"], [null, "input"], [null, "blur"], [null, "compositionstart"], [null, "compositionend"]], function (_v, en, $event) { var ad = true; var _co = _v.component; if (("input" === en)) {
        var pd_0 = (_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵnov"](_v, 21)._handleInput($event.target.value) !== false);
        ad = (pd_0 && ad);
    } if (("blur" === en)) {
        var pd_1 = (_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵnov"](_v, 21).onTouched() !== false);
        ad = (pd_1 && ad);
    } if (("compositionstart" === en)) {
        var pd_2 = (_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵnov"](_v, 21)._compositionStart() !== false);
        ad = (pd_2 && ad);
    } if (("compositionend" === en)) {
        var pd_3 = (_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵnov"](_v, 21)._compositionEnd($event.target.value) !== false);
        ad = (pd_3 && ad);
    } if (("ngModelChange" === en)) {
        var pd_4 = ((_co.searchText = $event) !== false);
        ad = (pd_4 && ad);
    } if (("keyup" === en)) {
        var pd_5 = (_co.keyup(_co.searchText) !== false);
        ad = (pd_5 && ad);
    } return ad; }, null, null)), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵprd"](6144, null, _angular_cdk_bidi__WEBPACK_IMPORTED_MODULE_24__["Directionality"], null, [_angular_cdk_bidi__WEBPACK_IMPORTED_MODULE_24__["Dir"]]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵdid"](21, 16384, null, 0, _angular_forms__WEBPACK_IMPORTED_MODULE_16__["DefaultValueAccessor"], [_angular_core__WEBPACK_IMPORTED_MODULE_1__["Renderer2"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["ElementRef"], [2, _angular_forms__WEBPACK_IMPORTED_MODULE_16__["COMPOSITION_BUFFER_MODE"]]], null, null), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵprd"](1024, null, _angular_forms__WEBPACK_IMPORTED_MODULE_16__["NG_VALUE_ACCESSOR"], function (p0_0) { return [p0_0]; }, [_angular_forms__WEBPACK_IMPORTED_MODULE_16__["DefaultValueAccessor"]]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵdid"](23, 671744, null, 0, _angular_forms__WEBPACK_IMPORTED_MODULE_16__["NgModel"], [[8, null], [8, null], [8, null], [6, _angular_forms__WEBPACK_IMPORTED_MODULE_16__["NG_VALUE_ACCESSOR"]]], { name: [0, "name"], model: [1, "model"] }, { update: "ngModelChange" }), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵprd"](2048, null, _angular_forms__WEBPACK_IMPORTED_MODULE_16__["NgControl"], null, [_angular_forms__WEBPACK_IMPORTED_MODULE_16__["NgModel"]]), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵdid"](25, 16384, null, 0, _angular_forms__WEBPACK_IMPORTED_MODULE_16__["NgControlStatus"], [[4, _angular_forms__WEBPACK_IMPORTED_MODULE_16__["NgControl"]]], null, null), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵdid"](26, 1196032, null, 0, _angular_cdk_bidi__WEBPACK_IMPORTED_MODULE_24__["Dir"], [], { dir: [0, "dir"] }, null), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](27, 0, null, null, 0, "i", [["class", "circular search link icon"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](28, 0, null, null, 5, "div", [["class", "six wide column pt-0 pl-0"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](29, 0, null, null, 4, "div", [["class", "ui-helper-clearfix export-btns"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](30, 0, null, null, 3, "button", [["class", "ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-left"], ["icon", "fa fa-file"], ["iconPos", "left"], ["label", "Export"], ["pbutton", ""], ["style", "float:right"], ["type", "button"]], null, [[null, "click"]], function (_v, en, $event) { var ad = true; var _co = _v.component; if (("click" === en)) {
        var pd_0 = (_co.exportToCsv(_co.currentBatch) !== false);
        ad = (pd_0 && ad);
    } return ad; }, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](31, 0, null, null, 0, "span", [["aria-hidden", "true"], ["class", "ui-button-icon-left ui-clickable fa fa-file"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](32, 0, null, null, 1, "span", [["class", "ui-button-text ui-clickable"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵted"](-1, null, ["Export"])), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](34, 0, null, null, 29, "div", [["class", "ui grid scrollable"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](35, 0, null, null, 28, "table", [["class", "ui upForReviewTable table"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](36, 0, null, null, 25, "thead", [], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](37, 0, null, null, 24, "tr", [], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](38, 0, null, null, 1, "th", [["class", "UpReviewTableHeader"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵted"](39, null, ["", ""])), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](40, 0, null, null, 1, "th", [["class", "UpReviewTableHeader"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵted"](41, null, ["", ""])), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](42, 0, null, null, 1, "th", [["class", "UpReviewTableHeader"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵted"](43, null, ["", ""])), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵand"](16777216, null, null, 1, null, View_CourseProgressExhaustComponent_15)), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵdid"](45, 16384, null, 0, _angular_common__WEBPACK_IMPORTED_MODULE_15__["NgIf"], [_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewContainerRef"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["TemplateRef"]], { ngIf: [0, "ngIf"] }, null), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵand"](16777216, null, null, 1, null, View_CourseProgressExhaustComponent_16)), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵdid"](47, 16384, null, 0, _angular_common__WEBPACK_IMPORTED_MODULE_15__["NgIf"], [_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewContainerRef"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["TemplateRef"]], { ngIf: [0, "ngIf"] }, null), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵand"](16777216, null, null, 1, null, View_CourseProgressExhaustComponent_17)), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵdid"](49, 16384, null, 0, _angular_common__WEBPACK_IMPORTED_MODULE_15__["NgIf"], [_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewContainerRef"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["TemplateRef"]], { ngIf: [0, "ngIf"] }, null), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵand"](16777216, null, null, 1, null, View_CourseProgressExhaustComponent_18)), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵdid"](51, 16384, null, 0, _angular_common__WEBPACK_IMPORTED_MODULE_15__["NgIf"], [_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewContainerRef"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["TemplateRef"]], { ngIf: [0, "ngIf"] }, null), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](52, 0, null, null, 1, "th", [["class", "UpReviewTableHeader"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵted"](53, null, ["", ""])), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](54, 0, null, null, 1, "th", [["class", "UpReviewTableHeader"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵted"](55, null, ["", ""])), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](56, 0, null, null, 1, "th", [["class", "UpReviewTableHeader"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵted"](57, null, ["", ""])), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](58, 0, null, null, 1, "th", [["class", "UpReviewTableHeader"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵted"](59, null, ["", ""])), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](60, 0, null, null, 1, "th", [["class", "UpReviewTableHeader"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵted"](61, null, ["", ""])), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵand"](16777216, null, null, 1, null, View_CourseProgressExhaustComponent_19)), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵdid"](63, 16384, null, 0, _angular_common__WEBPACK_IMPORTED_MODULE_15__["NgIf"], [_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewContainerRef"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["TemplateRef"]], { ngIf: [0, "ngIf"] }, null), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](64, 0, null, null, 4, "div", [["class", "ui grid"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](65, 0, null, null, 0, "div", [["class", "two wide column"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](66, 0, null, null, 2, "div", [["class", "ten wide column"]], null, null, null, null, null)), (_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵand"](16777216, null, null, 1, null, View_CourseProgressExhaustComponent_27)), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵdid"](68, 16384, null, 0, _angular_common__WEBPACK_IMPORTED_MODULE_15__["NgIf"], [_angular_core__WEBPACK_IMPORTED_MODULE_1__["ViewContainerRef"], _angular_core__WEBPACK_IMPORTED_MODULE_1__["TemplateRef"]], { ngIf: [0, "ngIf"] }, null)], function (_ck, _v) { var _co = _v.component; var currVal_0 = (_co.batchlist && (_co.batchlist.length > 0)); _ck(_v, 7, 0, currVal_0); var currVal_1 = (_co.currentBatch && (_co.currentBatch.count > 10000)); _ck(_v, 9, 0, currVal_1); var currVal_2 = _co.showLoader; _ck(_v, 11, 0, currVal_2); var currVal_3 = _co.showNoBatch; _ck(_v, 13, 0, currVal_3); var currVal_13 = "filter_search"; var currVal_14 = _co.searchText; _ck(_v, 23, 0, currVal_13, currVal_14); var currVal_15 = "auto"; _ck(_v, 26, 0, currVal_15); var currVal_19 = _co.showCourseData; _ck(_v, 45, 0, currVal_19); var currVal_20 = _co.showCourseData; _ck(_v, 47, 0, currVal_20); var currVal_21 = _co.showCourseData; _ck(_v, 49, 0, currVal_21); var currVal_22 = _co.showCourseData; _ck(_v, 51, 0, currVal_22); var currVal_28 = _co.courseProgressExhaustData; _ck(_v, 63, 0, currVal_28); var currVal_29 = ((((_co.courseProgressExhaustData && (_co.totalCount > _co.config.appConfig.DASHBOARD.PAGE_LIMIT)) && !_co.showLoader) && !_co.showError) && !_co.noResult); _ck(_v, 68, 0, currVal_29); }, function (_ck, _v) { var _co = _v.component; var currVal_4 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵinlineInterpolate"](1, "", ((_co.resourceService == null) ? null : ((_co.resourceService.frmelmnts == null) ? null : ((_co.resourceService.frmelmnts.prmpt == null) ? null : _co.resourceService.frmelmnts.prmpt.courseProgressExhaustSearch))), ""); var currVal_5 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵnov"](_v, 25).ngClassUntouched; var currVal_6 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵnov"](_v, 25).ngClassTouched; var currVal_7 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵnov"](_v, 25).ngClassPristine; var currVal_8 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵnov"](_v, 25).ngClassDirty; var currVal_9 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵnov"](_v, 25).ngClassValid; var currVal_10 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵnov"](_v, 25).ngClassInvalid; var currVal_11 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵnov"](_v, 25).ngClassPending; var currVal_12 = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵnov"](_v, 26)._rawDir; _ck(_v, 19, 0, currVal_4, currVal_5, currVal_6, currVal_7, currVal_8, currVal_9, currVal_10, currVal_11, currVal_12); var currVal_16 = ((_co.resourceService == null) ? null : ((_co.resourceService.frmelmnts == null) ? null : ((_co.resourceService.frmelmnts.lbl == null) ? null : _co.resourceService.frmelmnts.lbl.courseProgressExhaustUserName))); _ck(_v, 39, 0, currVal_16); var currVal_17 = ((_co.resourceService == null) ? null : ((_co.resourceService.frmelmnts == null) ? null : ((_co.resourceService.frmelmnts.lbl == null) ? null : _co.resourceService.frmelmnts.lbl.courseProgressExhaustEmail))); _ck(_v, 41, 0, currVal_17); var currVal_18 = ((_co.resourceService == null) ? null : ((_co.resourceService.frmelmnts == null) ? null : ((_co.resourceService.frmelmnts.lbl == null) ? null : _co.resourceService.frmelmnts.lbl.courseProgressExhaustPhoneNo))); _ck(_v, 43, 0, currVal_18); var currVal_23 = ((_co.resourceService == null) ? null : ((_co.resourceService.frmelmnts == null) ? null : ((_co.resourceService.frmelmnts.lbl == null) ? null : _co.resourceService.frmelmnts.lbl.courseProgressExhaustEnrollDate))); _ck(_v, 53, 0, currVal_23); var currVal_24 = ((_co.resourceService == null) ? null : ((_co.resourceService.frmelmnts == null) ? null : ((_co.resourceService.frmelmnts.lbl == null) ? null : _co.resourceService.frmelmnts.lbl.courseProgressExhaustCompletedOn))); _ck(_v, 55, 0, currVal_24); var currVal_25 = ((_co.resourceService == null) ? null : ((_co.resourceService.frmelmnts == null) ? null : ((_co.resourceService.frmelmnts.lbl == null) ? null : _co.resourceService.frmelmnts.lbl.courseProgressExhaustProgress))); _ck(_v, 57, 0, currVal_25); var currVal_26 = ((_co.resourceService == null) ? null : ((_co.resourceService.frmelmnts == null) ? null : ((_co.resourceService.frmelmnts.lbl == null) ? null : _co.resourceService.frmelmnts.lbl.courseProgressExhaustCompletedPercentage))); _ck(_v, 59, 0, currVal_26); var currVal_27 = ((_co.resourceService == null) ? null : ((_co.resourceService.frmelmnts == null) ? null : ((_co.resourceService.frmelmnts.lbl == null) ? null : _co.resourceService.frmelmnts.lbl.courseProgressExhaustIssuedCertificate))); _ck(_v, 61, 0, currVal_27); }); }
function View_CourseProgressExhaustComponent_Host_0(_l) { return _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵvid"](0, [(_l()(), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵeld"](0, 0, null, null, 1, "app-course-progress-exhaust", [], null, null, null, View_CourseProgressExhaustComponent_0, RenderType_CourseProgressExhaustComponent)), _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵdid"](1, 245760, null, 0, _course_progress_exhaust_component__WEBPACK_IMPORTED_MODULE_25__["CourseProgressExhaustComponent"], [_core_services_user_user_service__WEBPACK_IMPORTED_MODULE_13__["UserService"], _angular_router__WEBPACK_IMPORTED_MODULE_6__["Router"], _angular_router__WEBPACK_IMPORTED_MODULE_6__["ActivatedRoute"], _shared_services_resource_resource_service__WEBPACK_IMPORTED_MODULE_9__["ResourceService"], _shared_services_toaster_toaster_service__WEBPACK_IMPORTED_MODULE_10__["ToasterService"], _telemetry_services_telemetry_telemetry_service__WEBPACK_IMPORTED_MODULE_5__["TelemetryService"], _services_course_progress_course_progress_service__WEBPACK_IMPORTED_MODULE_26__["CourseProgressService"], _shared_services_pagination_pagination_service__WEBPACK_IMPORTED_MODULE_27__["PaginationService"], _shared_services_config_config_service__WEBPACK_IMPORTED_MODULE_20__["ConfigService"], _shared_services_on_demand_report_on_demand_report_service__WEBPACK_IMPORTED_MODULE_28__["OnDemandReportService"], _core_services_form_form_service__WEBPACK_IMPORTED_MODULE_29__["FormService"], _shared_services_navigation_helper_navigation_helper_service__WEBPACK_IMPORTED_MODULE_12__["NavigationHelperService"], _services_usage_usage_service__WEBPACK_IMPORTED_MODULE_30__["UsageService"], _services_course_progress_export_csv_service__WEBPACK_IMPORTED_MODULE_31__["ExportCsvService"]], null, null)], function (_ck, _v) { _ck(_v, 1, 0); }, null); }
var CourseProgressExhaustComponentNgFactory = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵccf"]("app-course-progress-exhaust", _course_progress_exhaust_component__WEBPACK_IMPORTED_MODULE_25__["CourseProgressExhaustComponent"], View_CourseProgressExhaustComponent_Host_0, {}, {}, []);



/***/ }),

/***/ "NSNA":
/*!*********************************************************************************************!*\
  !*** ./src/app/modules/dashboard/components/list-all-reports/list-all-reports.component.ts ***!
  \*********************************************************************************************/
/*! exports provided: ListAllReportsComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ListAllReportsComponent", function() { return ListAllReportsComponent; });
/* harmony import */ var _sunbird_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @sunbird/core */ "q/PB");
/* harmony import */ var _sunbird_telemetry__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @sunbird/telemetry */ "RnNo");
/* harmony import */ var _sunbird_shared__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @sunbird/shared */ "btWG");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/core */ "8Y7J");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs/operators */ "kU1M");
/* harmony import */ var lodash_es__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! lodash-es */ "T89o");
/* harmony import */ var _services__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../services */ "gfN8");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! rxjs */ "qCKp");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/router */ "iInd");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! moment */ "VDUF");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! jquery */ "EVdn");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var datatables_net__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! datatables.net */ "FlOX");
/* harmony import */ var datatables_net__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(datatables_net__WEBPACK_IMPORTED_MODULE_11__);
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
var __spreadArrays = (undefined && undefined.__spreadArrays) || function () {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};












var ListAllReportsComponent = (function () {
    function ListAllReportsComponent(resourceService, reportService, activatedRoute, router, userService, navigationhelperService, telemetryService, layoutService, tncService) {
        var _this = this;
        this.resourceService = resourceService;
        this.reportService = reportService;
        this.activatedRoute = activatedRoute;
        this.router = router;
        this.userService = userService;
        this.navigationhelperService = navigationhelperService;
        this.telemetryService = telemetryService;
        this.layoutService = layoutService;
        this.tncService = tncService;
        this.showTncPopup = false;
        this.filterReportsBasedOnRoles = function (reports) {
            if (_this.reportService.isUserSuperAdmin()) {
                return _this.reportService.getMaterializedChildRows(reports);
            }
            else if (_this.reportService.isUserReportAdmin()) {
                return Object(rxjs__WEBPACK_IMPORTED_MODULE_7__["of"])(reports);
            }
            else {
                return Object(rxjs__WEBPACK_IMPORTED_MODULE_7__["of"])(_this.reportService.getFlattenedReports(reports));
            }
        };
        this.getDefaultTableOptions = function () { return ({
            paging: true,
            lengthChange: true,
            searching: true,
            ordering: true,
            info: true,
            autoWidth: true,
        }); };
        this.getTelemetryImpression = function (_a) {
            var type = _a.type, _b = _a.cdata, cdata = _b === void 0 ? [] : _b;
            return ({
                context: {
                    env: _this.activatedRoute.snapshot.data.telemetry.env,
                    cdata: cdata
                },
                object: {
                    id: _this.userService.userid,
                    type: 'user',
                    ver: '1.0'
                },
                edata: {
                    type: type,
                    pageid: _this.activatedRoute.snapshot.data.telemetry.pageid,
                    uri: _this.router.url,
                    duration: _this.navigationhelperService.getPageLoadTime()
                }
            });
        };
        this.setTelemetryInteractObject = function (_a) {
            var id = _a.id, _b = _a.type, type = _b === void 0 ? 'Report' : _b, _c = _a.ver, ver = _c === void 0 ? '1.0' : _c;
            return ({ id: id, type: type, ver: ver });
        };
    }
    Object.defineProperty(ListAllReportsComponent.prototype, "inputTag", {
        set: function (element) {
            if (!element) {
                return;
            }
            var reports = this.reports[0];
            this.prepareTable(element.nativeElement, reports);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(ListAllReportsComponent.prototype, "datasetTable", {
        set: function (element) {
            if (!element) {
                return;
            }
            var _a = this.reports, datasets = _a[1];
            if (this.reportService.isUserReportAdmin() && !this.reportService.isUserSuperAdmin()) {
                datasets = datasets.filter(function (dataset) { return dataset.status === 'live'; });
            }
            this.prepareTable(element.nativeElement, datasets);
        },
        enumerable: false,
        configurable: true
    });
    ListAllReportsComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.initLayout();
        this.userService.userData$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["first"])()).subscribe(function (user) { return __awaiter(_this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                if (user && user.userProfile) {
                    this.userProfile = user.userProfile;
                    this.getReportViewerTncPolicy();
                }
                return [2];
            });
        }); });
        this.reportsList$ = this.reportService.isAuthenticated(lodash_es__WEBPACK_IMPORTED_MODULE_5__["get"](this.activatedRoute, 'snapshot.data.roles')).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["mergeMap"])(function (isAuthenticated) {
            _this._isUserReportAdmin = _this.reportService.isUserReportAdmin();
            return isAuthenticated ? _this.getReportsList(_this._isUserReportAdmin) : Object(rxjs__WEBPACK_IMPORTED_MODULE_7__["throwError"])({ messageText: 'messages.stmsg.m0144' });
        }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(function (err) {
            _this.noResultFoundError = lodash_es__WEBPACK_IMPORTED_MODULE_5__["get"](err, 'messageText') || 'messages.stmsg.m0006';
            return Object(rxjs__WEBPACK_IMPORTED_MODULE_7__["of"])({
                table: {},
                count: 0,
                reportsArr: [],
                datasetsArr: []
            });
        }));
    };
    ListAllReportsComponent.prototype.getReportsList = function (isUserReportAdmin) {
        var _this = this;
        var filters = {};
        return this.reportService.listAllReports(filters).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["mergeMap"])(function (res) { return _this.filterReportsBasedOnRoles(res.reports); }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["map"])(function (reports) {
            var _a = _this.reports = lodash_es__WEBPACK_IMPORTED_MODULE_5__["partition"](reports, function (report) { return lodash_es__WEBPACK_IMPORTED_MODULE_5__["toLower"](lodash_es__WEBPACK_IMPORTED_MODULE_5__["get"](report, 'report_type')) === 'report'; }), reportsArr = _a[0], datasetsArr = _a[1];
            var count = lodash_es__WEBPACK_IMPORTED_MODULE_5__["get"](reports, 'length');
            return { count: count, reportsArr: reportsArr, datasetsArr: datasetsArr };
        }));
    };
    ListAllReportsComponent.prototype.rowClickEventHandler = function (reportId, hash, materialize) {
        this.router.navigate(__spreadArrays(['/dashBoard/reports', reportId], (hash ? [hash] : [])), { queryParams: __assign({}, (this.reportService.isUserReportAdmin() && { materialize: materialize })) }).catch(function (err) {
            console.log({ err: err });
        });
    };
    ListAllReportsComponent.prototype.renderStatus = function (data, type, row) {
        var _a;
        if (row.isParameterized && row.children && this.reportService.isUserReportAdmin()) {
            if (lodash_es__WEBPACK_IMPORTED_MODULE_5__["every"](row.children, function (child) { return lodash_es__WEBPACK_IMPORTED_MODULE_5__["toLower"](child.status) === 'live'; })) {
                data = 'live';
            }
            else {
                if (lodash_es__WEBPACK_IMPORTED_MODULE_5__["some"](row.children, function (child) { return lodash_es__WEBPACK_IMPORTED_MODULE_5__["toLower"](child.status) === 'live'; })) {
                    data = 'partially live';
                }
                else {
                    data = 'draft';
                }
            }
        }
        var icon = (_a = {
                live: { color: 'success-0', icon: 'check' },
                draft: { color: 'warning-0', icon: 'edit' },
                retired: { color: 'primary-100', icon: 'close' }
            },
            _a['partially live'] = { color: 'secondary-0', icon: 'check' },
            _a);
        var status = lodash_es__WEBPACK_IMPORTED_MODULE_5__["startCase"](lodash_es__WEBPACK_IMPORTED_MODULE_5__["toLower"](data));
        var spanElement = "<span class=\"sb-label sb-label-table sb-label-" + icon[lodash_es__WEBPACK_IMPORTED_MODULE_5__["toLower"](data)].color + "\">\n    " + (data === 'live' ? "<span class=\"sb-live\"></span>" : '') + " " + status + "</span>";
        return spanElement;
    };
    ListAllReportsComponent.prototype.renderTags = function (data) {
        if (Array.isArray(data)) {
            var elements = lodash_es__WEBPACK_IMPORTED_MODULE_5__["join"](lodash_es__WEBPACK_IMPORTED_MODULE_5__["map"](data, function (tag) { return "<span class=\"sb-label-name sb-label-table sb-label-primary-100 mr-5 px-8 py-4\">" + lodash_es__WEBPACK_IMPORTED_MODULE_5__["startCase"](lodash_es__WEBPACK_IMPORTED_MODULE_5__["toLower"](tag)) + "</span>"; }), ' ');
            return "<div class=\"sb-filter-label\"><div class=\"d-inline-flex m-0\">" + elements + "</div></div>";
        }
        return lodash_es__WEBPACK_IMPORTED_MODULE_5__["startCase"](lodash_es__WEBPACK_IMPORTED_MODULE_5__["toLower"](data));
    };
    ListAllReportsComponent.prototype.indexColumn = function (table) {
        table.on('order.dt search.dt', function () {
            table.column(0, { search: 'applied', order: 'applied' }).nodes().each(function (cell, i) {
                cell.innerHTML = i + 1;
            });
        }).draw();
    };
    ListAllReportsComponent.prototype.prepareTable = function (el, data) {
        var _this = this;
        if (data === void 0) { data = []; }
        var masterTable = jquery__WEBPACK_IMPORTED_MODULE_10__(el).DataTable(__assign(__assign({}, this.getDefaultTableOptions()), { order: [[1, 'desc']], data: data, columns: __spreadArrays([
                {
                    title: 'Serial No.',
                    searchable: false,
                    orderable: false,
                    data: null
                },
                { title: 'Created On', data: 'createdon', visible: false }
            ], (this.reportService.isUserReportAdmin() ? [{
                    class: 'details-control',
                    title: '',
                    orderable: false,
                    data: null,
                    render: function (value, type, row) {
                        var isParameterized = lodash_es__WEBPACK_IMPORTED_MODULE_5__["get"](row, 'isParameterized') || false;
                        var count = 0;
                        if (isParameterized && row.children) {
                            count = lodash_es__WEBPACK_IMPORTED_MODULE_5__["filter"](row.children, function (child) { return lodash_es__WEBPACK_IMPORTED_MODULE_5__["toLower"](child.status) === 'live'; }).length;
                        }
                        return "<button class=\"sb-btn sb-btn-link sb-btn-link-primary sb-btn-normal sb-btn-square\" aria-label=\"file-icon\">\n            <i class=\"icon " + (isParameterized && row.children ? 'copy outline' : 'file outline') + "\n            alternate\"></i><span>" + (isParameterized && row.children ? count + "/" + row.children.length + " Live" : '') + "</span></button>";
                    },
                    defaultContent: ''
                }] : []), [
                { title: 'Report Id', data: 'reportid', visible: false },
                {
                    title: 'Title', data: 'title',
                    render: function (value, type, row) {
                        var title = row.title, description = row.description;
                        return "<div class=\"sb-media\"><div class=\"sb-media-body\"><h6 class=\"p-0\">\n                  " + title + "</h6> <p class=\"media-description sb__ellipsis\"> " + description + "</p></div></div>";
                    }
                },
                {
                    title: 'Last Published Date', data: 'updatedon',
                    render: function (value) {
                        var date = moment__WEBPACK_IMPORTED_MODULE_9__(value);
                        if (date.isValid()) {
                            return "<td> " + moment__WEBPACK_IMPORTED_MODULE_9__(value).format('YYYY/MM/DD') + " </td>";
                        }
                        return lodash_es__WEBPACK_IMPORTED_MODULE_5__["startCase"](lodash_es__WEBPACK_IMPORTED_MODULE_5__["toLower"](value));
                    }
                },
                {
                    title: 'Tags',
                    data: 'tags',
                    render: this.renderTags
                }, {
                    title: 'Update Frequency',
                    data: 'updatefrequency',
                    render: this.renderTags
                }
            ], (this._isUserReportAdmin ? [{
                    title: 'Status',
                    data: 'status',
                    render: this.renderStatus.bind(this)
                }] : [])) }));
        this.indexColumn(masterTable);
        jquery__WEBPACK_IMPORTED_MODULE_10__(el).on('click', 'tbody tr td:not(.details-control)', function (event) {
            var rowData = masterTable && masterTable.row(event.currentTarget).data();
            if (lodash_es__WEBPACK_IMPORTED_MODULE_5__["get"](rowData, 'isParameterized') && lodash_es__WEBPACK_IMPORTED_MODULE_5__["has"](rowData, 'children') && rowData.children.length > 0) {
                return false;
            }
            var reportid = rowData.reportid, hashed_val = rowData.hashed_val, materialize = rowData.materialize;
            _this.logTelemetry({ type: 'select-report', id: "" + reportid });
            _this.rowClickEventHandler(reportid, hashed_val, materialize || false);
        });
        var getChildTable = function (table_id) { return "<table id=\"" + table_id + "\" class=\"w-80 b-1\"></table>"; };
        jquery__WEBPACK_IMPORTED_MODULE_10__(el).on('click', 'td.details-control', function (event) {
            var tr = jquery__WEBPACK_IMPORTED_MODULE_10__(event.currentTarget).closest('tr');
            var row = masterTable.row(tr);
            var rowData = lodash_es__WEBPACK_IMPORTED_MODULE_5__["get"](row, 'data')();
            if (row.child.isShown()) {
                row.child.hide();
            }
            else {
                if (!rowData.isParameterized) {
                    return false;
                }
                if (!lodash_es__WEBPACK_IMPORTED_MODULE_5__["has"](rowData, 'children')) {
                    return false;
                }
                var id = rowData.reportid;
                _this.logTelemetry({
                    type: 'select-parameterized',
                    id: "" + id,
                    cdata: [{ id: "" + lodash_es__WEBPACK_IMPORTED_MODULE_5__["get"](rowData, 'children.length'), type: 'CountReports' },
                        { id: "" + _this.getReportsCount({ reports: rowData.children, status: 'live' }), type: 'Live' },
                        { id: "" + _this.getReportsCount({ reports: rowData.children, status: 'draft' }), type: 'Draft' }]
                });
                row.child(getChildTable(id)).show();
                var childTable_1 = jquery__WEBPACK_IMPORTED_MODULE_10__("#" + id).DataTable(__assign(__assign({}, _this.getDefaultTableOptions()), { lengthChange: false, info: false, data: rowData.children, columns: [
                        {
                            title: 'Serial No.',
                            searchable: false,
                            orderable: false,
                            data: null
                        },
                        {
                            title: 'Parameter',
                            data: 'hashed_val',
                            className: 'text-center',
                            render: function (value) {
                                var parameters = lodash_es__WEBPACK_IMPORTED_MODULE_5__["split"](atob(value), '__');
                                return parameters;
                            }
                        },
                        {
                            title: 'Status',
                            data: 'status',
                            render: _this.renderStatus.bind(_this),
                            className: 'text-center'
                        }
                    ] }));
                _this.indexColumn(childTable_1);
                jquery__WEBPACK_IMPORTED_MODULE_10__("#" + id).on('click', 'td', function (e) {
                    var _a = childTable_1.row(e.currentTarget).data(), reportid = _a.reportid, hashed_val = _a.hashed_val, materialize = _a.materialize;
                    _this.logTelemetry({ type: 'select-report', id: "" + reportid, cdata: [{ id: "" + _this.reportService.getParameterFromHash(hashed_val), type: 'ParameterName' }] });
                    _this.rowClickEventHandler(reportid, hashed_val, materialize || false);
                });
            }
        });
    };
    ListAllReportsComponent.prototype.setTelemetryInteractEdata = function (_a) {
        var type = _a.type, _b = _a.id, id = _b === void 0 ? 'reports-list' : _b;
        return {
            id: id,
            type: type,
            pageid: this.activatedRoute.snapshot.data.telemetry.pageid
        };
    };
    ListAllReportsComponent.prototype.logTelemetry = function (_a) {
        var type = _a.type, _b = _a.cdata, cdata = _b === void 0 ? [] : _b, id = _a.id;
        var interactData = {
            context: {
                env: lodash_es__WEBPACK_IMPORTED_MODULE_5__["get"](this.activatedRoute.snapshot.data.telemetry, 'env') || 'reports',
                cdata: cdata
            },
            edata: __assign({}, this.setTelemetryInteractEdata({ type: type })),
            object: __assign(__assign({}, this.setTelemetryInteractObject({ id: id })), { rollup: {} })
        };
        this.telemetryService.interact(interactData);
    };
    ListAllReportsComponent.prototype.getReportsCount = function (_a) {
        var _b = _a.reports, reports = _b === void 0 ? [] : _b, _c = _a.status, status = _c === void 0 ? 'draft' : _c;
        return lodash_es__WEBPACK_IMPORTED_MODULE_5__["size"](lodash_es__WEBPACK_IMPORTED_MODULE_5__["filter"](reports, function (report) { return lodash_es__WEBPACK_IMPORTED_MODULE_5__["get"](report, 'status') === status; }));
    };
    ListAllReportsComponent.prototype.initLayout = function () {
        var _this = this;
        this.layoutConfiguration = this.layoutService.initlayoutConfig();
        this.layoutService.switchableLayout()
            .subscribe(function (layoutConfig) {
            if (layoutConfig != null) {
                _this.layoutConfiguration = layoutConfig.layout;
            }
        });
    };
    ListAllReportsComponent.prototype.getReportViewerTncPolicy = function () {
        var _this = this;
        this.tncService.getReportViewerTnc().subscribe(function (data) {
            var reportViewerTncData = JSON.parse(lodash_es__WEBPACK_IMPORTED_MODULE_5__["get"](data, 'result.response.value'));
            if (lodash_es__WEBPACK_IMPORTED_MODULE_5__["get"](reportViewerTncData, 'latestVersion')) {
                _this.reportViewerTncVersion = lodash_es__WEBPACK_IMPORTED_MODULE_5__["get"](reportViewerTncData, 'latestVersion');
                _this.reportViewerTncUrl = lodash_es__WEBPACK_IMPORTED_MODULE_5__["get"](lodash_es__WEBPACK_IMPORTED_MODULE_5__["get"](reportViewerTncData, lodash_es__WEBPACK_IMPORTED_MODULE_5__["get"](reportViewerTncData, 'latestVersion')), 'url');
                _this.showReportViewerTncForFirstUser();
            }
        });
    };
    ListAllReportsComponent.prototype.showReportViewerTncForFirstUser = function () {
        var reportViewerTncObj = lodash_es__WEBPACK_IMPORTED_MODULE_5__["get"](this.userProfile, 'allTncAccepted.reportViewerTnc');
        if (!reportViewerTncObj) {
            this.showTncPopup = true;
        }
    };
    return ListAllReportsComponent;
}());



/***/ }),

/***/ "OBlA":
/*!***********************************************************************************************************!*\
  !*** ./src/app/modules/dashboard/components/course-progress-exhaust/course-progress-exhaust.component.ts ***!
  \***********************************************************************************************************/
/*! exports provided: CourseProgressExhaustComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CourseProgressExhaustComponent", function() { return CourseProgressExhaustComponent; });
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! rxjs */ "qCKp");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/router */ "iInd");
/* harmony import */ var _sunbird_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @sunbird/core */ "q/PB");
/* harmony import */ var _sunbird_shared__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @sunbird/shared */ "btWG");
/* harmony import */ var _sunbird_telemetry__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @sunbird/telemetry */ "RnNo");
/* harmony import */ var lodash_es__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! lodash-es */ "T89o");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs/operators */ "kU1M");
/* harmony import */ var _shared_services_on_demand_report_on_demand_report_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../shared/services/on-demand-report/on-demand-report.service */ "4DyJ");
/* harmony import */ var _services__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../services */ "gfN8");
/* harmony import */ var _services_course_progress_export_csv_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./../../services/course-progress/export-csv.service */ "VN7U");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! moment */ "VDUF");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_10__);
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};












var CourseProgressExhaustComponent = (function () {
    function CourseProgressExhaustComponent(user, route, activatedRoute, resourceService, toasterService, telemetryService, courseProgressService, paginationService, config, onDemandReportService, formService, navigationhelperService, usageService, exportCsvService) {
        this.telemetryService = telemetryService;
        this.onDemandReportService = onDemandReportService;
        this.formService = formService;
        this.navigationhelperService = navigationhelperService;
        this.usageService = usageService;
        this.exportCsvService = exportCsvService;
        this.modelChanged = new rxjs__WEBPACK_IMPORTED_MODULE_0__["Subject"]();
        this.unsubscribe = new rxjs__WEBPACK_IMPORTED_MODULE_0__["Subject"]();
        this.showLoader = true;
        this.showNoBatch = false;
        this.reverse = true;
        this.showWarningDiv = false;
        this.showDownloadLink = true;
        this.pageNumber = 1;
        this.totalCount = 0;
        this.noResult = false;
        this.showError = false;
        this.showCourseData = false;
        this.isDownloadReport = false;
        this.stateWiseReportData = [];
        this.message = 'There is no data available';
        this.columns = [];
        this.fileName = 'course-progress-exhaust-data';
        this.firstTime = false;
        this.user = user;
        this.route = route;
        this.activatedRoute = activatedRoute;
        this.resourceService = resourceService;
        this.toasterService = toasterService;
        this.courseProgressService = courseProgressService;
        this.paginationService = paginationService;
        this.config = config;
        this.route.onSameUrlNavigation = 'ignore';
        this.pageLimit = this.config.appConfig.DASHBOARD.PAGE_LIMIT;
    }
    CourseProgressExhaustComponent.prototype.populateBatchData = function () {
        var _this = this;
        this.showLoader = true;
        var searchParamsCreator = {
            courseId: this.courseId,
            status: ['0', '1', '2'],
            createdBy: this.userId
        };
        var searchParamsMentor = {
            courseId: this.courseId,
            status: ['0', '1', '2'],
            mentors: [this.userId]
        };
        Object(rxjs__WEBPACK_IMPORTED_MODULE_0__["combineLatest"])(this.courseProgressService.getBatches(searchParamsCreator), this.courseProgressService.getBatches(searchParamsMentor)).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["takeUntil"])(this.unsubscribe))
            .subscribe(function (results) {
            console.log("results Batch -", results);
            _this.batchlist = lodash_es__WEBPACK_IMPORTED_MODULE_5__["union"](results[0].result.response.content, results[1].result.response.content);
            _this.showLoader = false;
            var isBatchExist = lodash_es__WEBPACK_IMPORTED_MODULE_5__["find"](_this.batchlist, function (batch) { return batch.id === _this.queryParams.batchIdentifier; });
            if (_this.batchlist.length === 0) {
                _this.showCourseData = false;
                _this.showLoader = false;
                _this.showNoBatch = true;
            }
            else if (isBatchExist) {
                _this.showCourseData = false;
                _this.selectedOption = _this.queryParams.batchIdentifier;
                _this.currentBatch = isBatchExist;
                _this.populateCourseProgressExhaustData(isBatchExist);
            }
            else if (_this.batchlist.length === 1 && isBatchExist === undefined) {
                _this.showCourseData = false;
                _this.queryParams.batchIdentifier = _this.batchlist[0].id;
                _this.selectedOption = _this.batchlist[0].id;
                _this.currentBatch = _this.batchlist[0];
                _this.generateDataForDF(_this.currentBatch);
                _this.populateCourseProgressExhaustData(_this.currentBatch);
            }
            else if (_this.batchlist.length > 1 && isBatchExist === undefined) {
                _this.generateDataForDF(_this.currentBatch);
                _this.showCourseData = true;
                _this.currentBatch = undefined;
                _this.populateCourseProgressExhaustData(_this.currentBatch);
            }
            else {
                _this.showWarningDiv = true;
            }
        }, function (err) {
            _this.toasterService.error(_this.resourceService.messages.emsg.m0005);
            _this.showLoader = false;
            _this.showNoBatch = true;
            _this.paramSubcription.unsubscribe();
        });
    };
    CourseProgressExhaustComponent.prototype.populateCourseProgressExhaustData = function (batch) {
        var _this = this;
        var option;
        if (this.showCourseData) {
            option = {
                courseId: this.courseId,
                limit: this.pageLimit,
                offset: (this.pageNumber - 1) * (this.pageLimit),
            };
        }
        else {
            option = {
                courseId: this.courseId,
                batchId: batch.batchId,
                limit: this.pageLimit,
                offset: (this.pageNumber - 1) * (this.pageLimit),
            };
        }
        if (this.searchText) {
            option.query = this.searchText;
        }
        this.courseProgressService.getCourseProgressExhaustData(option).subscribe(function (apiResponse) {
            var _a, _b;
            console.log("Success Handler => getCourseProgressExhaustData() : ", apiResponse);
            _this.courseProgressExhaustData = (_a = apiResponse === null || apiResponse === void 0 ? void 0 : apiResponse.result) === null || _a === void 0 ? void 0 : _a.content;
            _this.totalCount = (_b = apiResponse === null || apiResponse === void 0 ? void 0 : apiResponse.result) === null || _b === void 0 ? void 0 : _b.total_items;
            _this.pager = _this.paginationService.getPager(_this.totalCount, _this.pageNumber, _this.pageLimit);
            _this.showLoader = false;
            if (_this.totalCount === 0) {
                _this.noResult = true;
            }
            _this.noResult = false;
            if (_this.firstTime) {
                _this.searchBatch();
                _this.setInteractEventData();
            }
            _this.paramSubcription.unsubscribe();
        }, function (err) {
            console.log("Error Handler => getCourseProgressExhaustData():", err);
            _this.toasterService.error(err);
            _this.showLoader = false;
            _this.paramSubcription.unsubscribe();
        });
    };
    CourseProgressExhaustComponent.prototype.setBatchId = function (batch) {
        this.fetchForumIdReq = null;
        this.showWarningDiv = false;
        this.queryParams.batchIdentifier = batch.id;
        this.searchText = '';
        this.currentBatch = batch;
        this.batchId = batch.id;
        this.setCounts(this.currentBatch);
        this.showCourseData = false;
        this.populateCourseProgressExhaustData(batch);
    };
    CourseProgressExhaustComponent.prototype.redirect = function () {
        this.route.navigate(['/learn/course', this.courseId]);
    };
    CourseProgressExhaustComponent.prototype.navigateToPage = function (page) {
        var _this = this;
        if (page < 1 || page > this.pager.totalPages) {
            return;
        }
        this.pageNumber = page;
        var isBatchExist = lodash_es__WEBPACK_IMPORTED_MODULE_5__["find"](this.batchlist, function (batch) { return batch.id === _this.queryParams.batchIdentifier; });
        this.currentBatch = isBatchExist;
        this.populateCourseProgressExhaustData(this.currentBatch);
    };
    CourseProgressExhaustComponent.prototype.keyup = function (event) {
        this.modelChanged.next(lodash_es__WEBPACK_IMPORTED_MODULE_5__["trim"](event));
        this.searchText = lodash_es__WEBPACK_IMPORTED_MODULE_5__["trim"](event);
        this.populateCourseProgressExhaustData(this.currentBatch);
    };
    CourseProgressExhaustComponent.prototype.searchBatch = function () {
        var _this = this;
        this.modelChanged.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["debounceTime"])(1000), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["distinctUntilChanged"])(), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["switchMap"])(function (search) { return Object(rxjs__WEBPACK_IMPORTED_MODULE_0__["of"])(search); })).
            subscribe(function (searchText) {
            _this.searchText = searchText;
            _this.populateCourseProgressExhaustData(_this.currentBatch);
        });
    };
    CourseProgressExhaustComponent.prototype.getFieldValue = function (array, field) {
        if (lodash_es__WEBPACK_IMPORTED_MODULE_5__["find"](array, { 'type': field })) {
            return lodash_es__WEBPACK_IMPORTED_MODULE_5__["find"](array, { 'type': field }).count;
        }
        else {
            return;
        }
    };
    CourseProgressExhaustComponent.prototype.populateCourseData = function (courseId) {
        var _this = this;
        this.courseProgressService.getCourseData(courseId).subscribe(function (apiResponse) {
            _this.courseName = apiResponse.result.content.name;
        }, function (err) {
            _this.toasterService.error(err.error.params.errmsg);
            _this.showLoader = false;
        });
    };
    CourseProgressExhaustComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.userDataSubscription = this.user.userData$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["first"])()).subscribe(function (userdata) {
            if (userdata && !userdata.err) {
                _this.userId = userdata.userProfile.userId;
                _this.userRoles = lodash_es__WEBPACK_IMPORTED_MODULE_5__["get"](userdata, 'userProfile.userRoles');
                _this.paramSubcription = Object(rxjs__WEBPACK_IMPORTED_MODULE_0__["combineLatest"])(_this.activatedRoute.parent.params, _this.activatedRoute.params, _this.activatedRoute.queryParams, function (parentParams, params, queryParams) {
                    return {
                        parentParams: parentParams,
                        params: params,
                        queryParams: queryParams
                    };
                })
                    .subscribe(function (allParams) {
                    var _a, _b, _c, _d, _e, _f, _g;
                    _this.courseId = undefined;
                    _this.batchId = undefined;
                    if ((_a = allParams === null || allParams === void 0 ? void 0 : allParams.parentParams) === null || _a === void 0 ? void 0 : _a.courseId) {
                        _this.courseId = (_b = allParams === null || allParams === void 0 ? void 0 : allParams.parentParams) === null || _b === void 0 ? void 0 : _b.courseId;
                        _this.batchId = (_c = allParams === null || allParams === void 0 ? void 0 : allParams.parentParams) === null || _c === void 0 ? void 0 : _c.batchId;
                        _this.queryParams = __assign({}, (_d = allParams === null || allParams === void 0 ? void 0 : allParams.parentParams) === null || _d === void 0 ? void 0 : _d.queryParams);
                    }
                    else if ((_e = allParams === null || allParams === void 0 ? void 0 : allParams.params) === null || _e === void 0 ? void 0 : _e.courseId) {
                        _this.courseId = (_f = allParams === null || allParams === void 0 ? void 0 : allParams.params) === null || _f === void 0 ? void 0 : _f.courseId;
                        _this.batchId = (_g = allParams === null || allParams === void 0 ? void 0 : allParams.params) === null || _g === void 0 ? void 0 : _g.batchId;
                        _this.queryParams = __assign({}, allParams.params.queryParams);
                    }
                    _this.interactObject = { id: _this.courseId, type: 'Course', ver: '1.0' };
                    _this.populateCourseData(_this.courseId);
                    _this.populateBatchData();
                });
            }
        });
    };
    CourseProgressExhaustComponent.prototype.setCounts = function (currentBatch) {
        this.currentBatch['completedCount'] = lodash_es__WEBPACK_IMPORTED_MODULE_5__["get"](currentBatch, 'completedCount') ? lodash_es__WEBPACK_IMPORTED_MODULE_5__["get"](currentBatch, 'completedCount') : 0;
        this.currentBatch['participantCount'] = lodash_es__WEBPACK_IMPORTED_MODULE_5__["get"](currentBatch, 'participantCount') ? lodash_es__WEBPACK_IMPORTED_MODULE_5__["get"](currentBatch, 'participantCount') : 0;
    };
    CourseProgressExhaustComponent.prototype.setInteractEventData = function () {
        if (lodash_es__WEBPACK_IMPORTED_MODULE_5__["get"](this.queryParams, 'batchIdentifier')) {
            this.telemetryCdata = [{ 'type': 'batch', 'id': this.queryParams.batchIdentifier }];
        }
        else {
            this.telemetryCdata = [{ 'type': 'course', 'id': this.courseId }];
        }
    };
    CourseProgressExhaustComponent.prototype.ngOnDestroy = function () {
        if (this.userDataSubscription) {
            this.userDataSubscription.unsubscribe();
        }
        this.unsubscribe.next();
        this.unsubscribe.complete();
    };
    CourseProgressExhaustComponent.prototype.generateDataForDF = function (batchId) {
        this.fetchForumIdReq = null;
        if (batchId) {
            this.fetchForumIdReq = {
                type: 'batch',
                identifier: [batchId.id]
            };
        }
    };
    CourseProgressExhaustComponent.prototype.exportToCsv = function (batch) {
        var _this = this;
        var option;
        this.columns = this.getColumns();
        if (this.showCourseData) {
            option = {
                courseId: this.courseId,
            };
            this.fileName = this.courseId;
        }
        else {
            option = {
                courseId: this.courseId,
                batchId: batch.batchId,
            };
            this.fileName = this.courseId + '_' + batch.batchId;
        }
        if (this.searchText) {
            option.query = this.searchText;
            this.fileName = this.fileName + '_' + this.searchText;
        }
        var currentDate = moment__WEBPACK_IMPORTED_MODULE_10__(new Date(), 'DD-MM-YYYY');
        this.fileName = this.fileName + '_' + currentDate;
        this.courseProgressService.getExportData(option).subscribe(function (apiResponse) {
            var _a, _b;
            console.log("Success Handler => exportToCsv() : ", apiResponse);
            _this.courseProgressExhaustData = (_a = apiResponse === null || apiResponse === void 0 ? void 0 : apiResponse.result) === null || _a === void 0 ? void 0 : _a.content;
            _this.totalCount = (_b = apiResponse === null || apiResponse === void 0 ? void 0 : apiResponse.result) === null || _b === void 0 ? void 0 : _b.total_items;
            _this.exportCsvService.downloadFile(_this.courseProgressExhaustData, _this.columns, _this.fileName);
            _this.paramSubcription.unsubscribe();
        }, function (err) {
            console.log("Error Handler => exportToCsv()  : ", err);
            _this.toasterService.error(err);
            _this.paramSubcription.unsubscribe();
        });
    };
    CourseProgressExhaustComponent.prototype.getColumns = function () {
        this.columns = [
            'userName',
            'maskedEmail',
            'maskedPhone',
            'coursename',
            'batchname',
            'start_date',
            'end_date',
            'enrolled_date',
            'completedon',
            'progress',
            'completionpercentage',
            'issued_certificates'
        ];
        return this.columns;
    };
    return CourseProgressExhaustComponent;
}());



/***/ }),

/***/ "OPDd":
/*!***************************************************************************************************!*\
  !*** ./src/app/modules/dashboard/components/organization-report/organization-report.component.ts ***!
  \***************************************************************************************************/
/*! exports provided: OrganizationReportComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OrganizationReportComponent", function() { return OrganizationReportComponent; });
/* harmony import */ var _services_addusser_addusser_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../services/addusser/addusser.service */ "9r3v");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/common */ "SVse");
/* harmony import */ var chart_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! chart.js */ "MO+k");
/* harmony import */ var chart_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(chart_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! moment */ "VDUF");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_3__);




var OrganizationReportComponent = (function () {
    function OrganizationReportComponent(datePipe, _httpService) {
        this.datePipe = datePipe;
        this._httpService = _httpService;
        this.currentDate = new Date();
        this.showOrgData = new Array();
        this.myStartDateOrg = [];
        this.myEndDateOrg = [];
        this.showLineChartUserData = new Array();
        this.sucesErrorPopup = false;
        this.orgTypeListOrgArryData = new Array();
        this.Linechart3 = null;
        this.graphError = false;
        this.filteredResult = [];
        this.first = 0;
    }
    OrganizationReportComponent.prototype.ngOnInit = function () {
        this.initializeColumnsOrg();
        this.getOrgChartDetail();
        this.noResultMessage = {
            'messageText': "No Records found"
        };
    };
    OrganizationReportComponent.prototype.initializeColumnsOrg = function () {
        this.cols = [
            { field: 'orgName', header: 'Organization', width: '170px' },
            { field: 'orgType', header: 'Organization Type', width: '170px' },
            { field: 'description', header: 'Description', width: '170px' },
            { field: 'channel', header: 'Channel', width: '170px' },
            { field: 'status', header: 'Status', width: '170px' },
        ];
    };
    OrganizationReportComponent.prototype.closeSucesErrorPopup = function () {
        this.sucesErrorPopup = false;
    };
    OrganizationReportComponent.prototype.populateData = function (data) {
        var _this = this;
        this.showOrgData = [];
        data.forEach(function (element) {
            if (element.status == 1) {
                _this.status = 'Active';
            }
            else if (element.status == 0) {
                _this.status = 'Inactive';
            }
            if (element.isRootOrg == true) {
                _this.orgType = 'Root  Organization';
            }
            else if (element.isRootOrg == false) {
                _this.orgType = 'Sub Organization';
            }
            if (element.isRootOrg) {
                _this.rootOrgName = element.orgName;
            }
            _this.showOrgData.push({ "createdDate": element.createdDate, "orgType": _this.orgType, "id": element.id, "orgName": element.orgName, "description": element.description, "channel": element.channel, "status": _this.status });
        });
        return this.showOrgData;
    };
    OrganizationReportComponent.prototype.renderGraph = function () {
        var orgNames = Object.keys(this.filteredResult);
        var orgLength = Object.values(this.filteredResult).map(function (arr) { return arr.length; });
        if (this.Linechart3) {
            this.Linechart3.destroy();
        }
        this.Linechart3 = new chart_js__WEBPACK_IMPORTED_MODULE_2__["Chart"]('canvas98', {
            type: 'bar',
            data: {
                labels: orgNames,
                datasets: [{ label: "Count", data: orgLength, borderColor: '#000', borderWidth: 0, backgroundColor: "blue", }]
            },
            options: {
                title: { display: true, text: "Organization Wise Dashboard ", fontSize: 18, fontColor: "#111" },
                legend: { display: true },
                scales: {
                    xAxes: [{ scaleLabel: { display: true, labelString: 'Month' }, ticks: { min: 0 } }],
                    yAxes: [{ scaleLabel: { display: true, labelString: 'Organization Count' }, ticks: { min: 0 } }],
                },
            }
        });
    };
    OrganizationReportComponent.prototype.getOrgChartDetail = function (submit) {
        var _this = this;
        if (submit === void 0) { submit = false; }
        if (submit) {
            if (this.fromDate == null || this.fromDate == undefined) {
                this.popupMsg = "Please Enter From Date";
                this.sucesErrorPopup = true;
            }
            else if (this.toDate == null || this.toDate == undefined) {
                this.popupMsg = "Please Enter To Date";
                this.sucesErrorPopup = true;
            }
        }
        var tempArray;
        tempArray = {
            'request': {
                'query': '',
                'filters': {}
            }
        };
        this._httpService.orgSearch(tempArray).subscribe(function (res) {
            _this.orgSearchData = res.result.response.content;
            _this.countOrgRecord = res.result.response.count;
            _this.orgTypeListOrgArryData = [];
            _this.populateData(res.result.response.content);
            if (_this.toDate != null && _this.fromDate != null) {
                var startDate = _this.datePipe.transform(_this.fromDate, 'yyyy-MM-dd');
                var endDate = _this.datePipe.transform(_this.toDate, 'yyyy-MM-dd');
                _this.myStartDateOrg = startDate === null || startDate === void 0 ? void 0 : startDate.split("-");
                _this.newStartDateOrg = new Date(_this.myStartDateOrg[0], _this.myStartDateOrg[1] - 1, _this.myStartDateOrg[2]);
                _this.newTimeStampStartDateOrg = _this.newStartDateOrg.getTime();
                _this.myEndDateOrg = endDate === null || endDate === void 0 ? void 0 : endDate.split("-");
                _this.newEndDateOrg = new Date(_this.myEndDateOrg[0], _this.myEndDateOrg[1] - 1, _this.myEndDateOrg[2]);
                _this.newTimeStampEndDateOrg = _this.newEndDateOrg.getTime();
                _this.showLineChartUserData = [];
                _this.showOrgData.forEach(function (xy) {
                    var _a, _b;
                    var myDate = (_a = xy === null || xy === void 0 ? void 0 : xy.createdDate) === null || _a === void 0 ? void 0 : _a.split(" ");
                    if (myDate) {
                        var myNewDate = (_b = myDate[0]) === null || _b === void 0 ? void 0 : _b.split("-");
                        var newDate = new Date(myNewDate[0], myNewDate[1] - 1, myNewDate[2]);
                        var newTimeStampDate = newDate.getTime();
                    }
                    if (newTimeStampDate >= _this.newTimeStampStartDateOrg && newTimeStampDate <= _this.newTimeStampEndDateOrg) {
                        _this.showLineChartUserData.push(xy);
                    }
                });
                if (_this.Linechart3) {
                    _this.filteredResult = _this.showLineChartUserData.reduce(function (r, a) {
                        r[moment__WEBPACK_IMPORTED_MODULE_3__(a.createdDate).format('YYYY-MM-DD')] = r[moment__WEBPACK_IMPORTED_MODULE_3__(a.createdDate).format('YYYY-MM-DD')] || [];
                        r[moment__WEBPACK_IMPORTED_MODULE_3__(a.createdDate).format('YYYY-MM-DD')].push(a);
                        return r;
                    }, Object.create(null));
                    _this.renderGraph();
                }
            }
            else {
                _this.showLineChartUserData = _this.showOrgData;
            }
            _this.orgTypelListOrg = _this.showOrgData.map(function (item) { return item.orgType; }).filter(function (value, index, self) { return self.indexOf(value) === index; });
            _this.orgTypeOrgArry = _this.orgTypelListOrg.filter(function (f) { return f !== undefined && f !== null; });
            _this.orgTypeOrgArry.forEach(function (element) {
                _this.orgTypeListOrgArryData.push({ "label": element, "value": element });
            });
        });
    };
    OrganizationReportComponent.prototype.showGraph = function () {
        var _this = this;
        var tempArray;
        tempArray = {
            'request': {
                'query': '',
                'filters': {}
            }
        };
        this._httpService.orgSearch(tempArray).subscribe(function (res) {
            _this.graphError = false;
            _this.populateData(res.result.response.content);
            _this.showLineChartUserData = _this.showOrgData;
            _this.filteredResult = res.result.response.content.reduce(function (r, a) {
                r[moment__WEBPACK_IMPORTED_MODULE_3__(a.createdDate).format('MMMM YYYY')] = r[moment__WEBPACK_IMPORTED_MODULE_3__(a.createdDate).format('MMMM YYYY')] || [];
                r[moment__WEBPACK_IMPORTED_MODULE_3__(a.createdDate).format('MMMM YYYY')].push(a);
                return r;
            }, Object.create(null));
            _this.renderGraph();
        }, function (err) {
            _this.graphError = true;
        });
    };
    OrganizationReportComponent.prototype.filterData = function (evt) {
        var activePoint = this.Linechart3.getElementAtEvent(evt);
        this.first = 0;
        if (activePoint.length > 0) {
            var clickedElementindex = activePoint[0]._index;
            var label = this.Linechart3.data.labels[clickedElementindex];
            this.showLineChartUserData = this.populateData(this.filteredResult[label]);
        }
    };
    return OrganizationReportComponent;
}());



/***/ }),

/***/ "PA1u":
/*!*************************************************************************************!*\
  !*** ./src/app/modules/dashboard/components/organization/organization.component.ts ***!
  \*************************************************************************************/
/*! exports provided: OrganisationComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OrganisationComponent", function() { return OrganisationComponent; });
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! rxjs/operators */ "kU1M");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/router */ "iInd");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! rxjs */ "qCKp");
/* harmony import */ var _services__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./../../services */ "gfN8");
/* harmony import */ var _sunbird_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @sunbird/core */ "q/PB");
/* harmony import */ var _sunbird_shared__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @sunbird/shared */ "btWG");
/* harmony import */ var _sunbird_telemetry__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @sunbird/telemetry */ "RnNo");
/* harmony import */ var lodash_es__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! lodash-es */ "T89o");








var OrganisationComponent = (function () {
    function OrganisationComponent(downloadService, route, activatedRoute, userService, searchService, rendererService, orgService, resourceService, toasterService, navigationhelperService) {
        var _this = this;
        this.toasterService = toasterService;
        this.navigationhelperService = navigationhelperService;
        this.unsubscribe = new rxjs__WEBPACK_IMPORTED_MODULE_2__["Subject"]();
        this.timePeriod = '7d';
        this.identifier = '';
        this.datasetType = 'creation';
        this.showGraph = 1;
        this.myOrganizations = [];
        this.lineChartLegend = true;
        this.chartType = 'line';
        this.showLoader = true;
        this.showDashboard = false;
        this.isMultipleOrgs = false;
        this.disabledClass = false;
        this.showDownloadSuccessModal = false;
        this.downloadService = downloadService;
        this.activatedRoute = activatedRoute;
        this.searchService = searchService;
        this.rendererService = rendererService;
        this.resourceService = resourceService;
        this.orgService = orgService;
        this.userService = userService;
        this.route = route;
        this.activatedRoute.params.subscribe(function (params) {
            if (params.id && params.timePeriod) {
                _this.showDashboard = false;
                _this.interactObject = { id: params.id, type: 'Organization', ver: '1.0' };
                _this.getDashboardData(params.timePeriod, params.id);
            }
        });
        this.getMyOrganisations();
    }
    OrganisationComponent.prototype.getDashboardData = function (timePeriod, identifier) {
        var _this = this;
        this.showLoader = true;
        this.isMultipleOrgs = false;
        this.timePeriod = timePeriod;
        this.identifier = identifier;
        var params = {
            data: {
                identifier: this.identifier,
                timePeriod: this.timePeriod
            },
            dataset: this.datasetType === 'creation' ? 'ORG_CREATION' : 'ORG_CONSUMPTION'
        };
        this.orgService.getDashboardData(params).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["takeUntil"])(this.unsubscribe))
            .subscribe(function (data) {
            _this.blockData = data.numericData;
            _this.graphData = _this.rendererService.visualizer(data, _this.chartType);
            _this.showDashboard = true;
            _this.setError(false);
        }, function (err) {
            _this.setError(true);
            _this.toasterService.error("Root org doesn't exist for this Organization Id and channel");
        });
    };
    OrganisationComponent.prototype.validateIdentifier = function (identifier) {
        if (identifier) {
            var selectedOrg = lodash_es__WEBPACK_IMPORTED_MODULE_7__["find"](this.myOrganizations, ['id', identifier]);
            if (selectedOrg && selectedOrg.id) {
                this.SelectedOrg = selectedOrg.orgName;
            }
            else {
                this.route.navigate(['groups']);
            }
        }
    };
    OrganisationComponent.prototype.onAfterFilterChange = function (timePeriod) {
        if (this.timePeriod === timePeriod) {
            return false;
        }
        this.route.navigate(['dashBoard/organization', this.datasetType, this.identifier, timePeriod]);
    };
    OrganisationComponent.prototype.onAfterDatasetChange = function (datasetType) {
        if (this.datasetType === datasetType) {
            return false;
        }
        this.showGraph = datasetType === 'creation' ? 1 : 0;
        this.route.navigate(['dashBoard/organization', datasetType, this.identifier, this.timePeriod]);
    };
    OrganisationComponent.prototype.graphNavigation = function (step) {
        step === 'next' ? this.showGraph++ : this.showGraph--;
    };
    OrganisationComponent.prototype.onAfterOrgChange = function (identifier, orgName) {
        if (this.identifier === identifier) {
            return false;
        }
        this.route.navigate(['dashBoard/organization', this.datasetType, identifier, this.timePeriod]);
    };
    OrganisationComponent.prototype.setError = function (flag) {
        this.showLoader = false;
    };
    OrganisationComponent.prototype.getMyOrganisations = function () {
        var _this = this;
        var data = this.searchService.searchedOrganisationList;
        if (data && data.content && data.content.length) {
            this.myOrganizations = data.content;
            if (this.myOrganizations.length === 1) {
                this.identifier = this.myOrganizations[0].id;
                this.route.navigate(['dashBoard/organization', this.datasetType, this.identifier, this.timePeriod]);
            }
            this.isMultipleOrgs = this.userService.userProfile.organisationIds.length > 1 ? true : false;
            this.showLoader = false;
            this.validateIdentifier(this.identifier);
        }
        else {
            this.userDataSubscription = this.userService.userData$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["first"])()).subscribe(function (user) {
                if (user && user.userProfile.organisationIds && user.userProfile.organisationIds.length) {
                    _this.getOrgDetails(user.userProfile.organisationIds);
                }
                else {
                }
            }, function (err) {
                _this.setError(true);
            });
        }
    };
    OrganisationComponent.prototype.downloadReport = function () {
        var _this = this;
        this.disabledClass = true;
        var option = {
            data: { identifier: this.identifier, timePeriod: this.timePeriod },
            dataset: this.datasetType === 'creation' ? 'ORG_CREATION' : 'ORG_CONSUMPTION'
        };
        this.downloadService.getReport(option).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["takeUntil"])(this.unsubscribe))
            .subscribe(function (data) {
            _this.showDownloadSuccessModal = true;
            _this.disabledClass = false;
        }, function (err) {
            _this.disabledClass = false;
        });
    };
    OrganisationComponent.prototype.getOrgDetails = function (orgIds) {
        var _this = this;
        if (orgIds && orgIds.length) {
            this.searchService.getOrganisationDetails({ orgid: orgIds }).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["takeUntil"])(this.unsubscribe))
                .subscribe(function (data) {
                if (data.result.response.content) {
                    _this.myOrganizations = data.result.response.content;
                    _this.isMultipleOrgs = orgIds.length > 1 ? true : false;
                    if (_this.myOrganizations.length === 1) {
                        _this.identifier = _this.myOrganizations[0].id;
                        _this.route.navigate(['dashBoard/organization', _this.datasetType, _this.identifier, _this.timePeriod]);
                    }
                }
                if (_this.identifier) {
                    _this.isMultipleOrgs = false;
                    _this.validateIdentifier(_this.identifier);
                }
                _this.showLoader = false;
            }, function (err) {
                _this.setError(true);
            });
        }
    };
    OrganisationComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        var params = this.activatedRoute.snapshot.params;
        setTimeout(function () {
            _this.telemetryImpression = {
                context: {
                    env: _this.activatedRoute.snapshot.data.telemetry.env
                },
                edata: {
                    uri: 'dashboard/organization/' + params.datasetType
                        + '/' + params.id + '/' + params.timePeriod,
                    type: _this.activatedRoute.snapshot.data.telemetry.type,
                    pageid: _this.activatedRoute.snapshot.data.telemetry.pageid,
                    duration: _this.navigationhelperService.getPageLoadTime()
                },
                object: {
                    id: params.id,
                    type: 'org',
                    ver: '1.0'
                }
            };
        });
    };
    OrganisationComponent.prototype.ngOnDestroy = function () {
        if (this.userDataSubscription) {
            this.userDataSubscription.unsubscribe();
        }
        this.unsubscribe.next();
        this.unsubscribe.complete();
    };
    return OrganisationComponent;
}());



/***/ }),

/***/ "Qmjz":
/*!*************************************************************************************!*\
  !*** ./src/app/modules/dashboard/services/chartjs/line-chart/line-chart.service.ts ***!
  \*************************************************************************************/
/*! exports provided: LineChartService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LineChartService", function() { return LineChartService; });
/* harmony import */ var lodash_es__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash-es */ "T89o");

var LineChartService = (function () {
    function LineChartService() {
    }
    LineChartService.prototype.parseLineChart = function (data) {
        var _this = this;
        var chartList = [];
        var groupList = {};
        var i = 0;
        lodash_es__WEBPACK_IMPORTED_MODULE_0__["forEach"](data.bucketData, function (bucketData, key) {
            var groupData = {};
            var yAxesLabel = data.name;
            var legendLabel = '';
            if (data.series === '') {
                legendLabel = bucketData.name;
                groupData['legend'] = [bucketData.name];
                if (bucketData.time_unit !== undefined) {
                    yAxesLabel = bucketData.name + ' (' + bucketData.time_unit + ')';
                }
                else {
                    yAxesLabel = bucketData.name;
                }
            }
            else {
                groupData['legend'] = data.series;
                legendLabel = data.series[i];
            }
            var chartData = _this.getLineData(bucketData);
            groupData['options'] = _this.getChartOption(yAxesLabel);
            groupData['yAxes'] = [{ data: chartData.values, label: legendLabel }];
            groupData['xAxes'] = chartData.labels;
            if (groupList[bucketData.group_id]) {
                Array.prototype.push.apply(groupList[bucketData.group_id].yAxes, groupData['yAxes']);
            }
            else {
                groupList[bucketData.group_id] = groupData;
            }
            groupData['colors'] = _this.getChartColors(groupList[bucketData.group_id].legend.length);
            i++;
        });
        lodash_es__WEBPACK_IMPORTED_MODULE_0__["forOwn"](groupList, function (group, groupId) {
            chartList.push({ yaxesData: group.yAxes, xaxesData: group.xAxes, chartOptions: group.options, chartColors: group.colors });
        });
        return chartList;
    };
    LineChartService.prototype.getLineData = function (bucketData) {
        var values = [];
        var labels = [];
        lodash_es__WEBPACK_IMPORTED_MODULE_0__["forEach"](bucketData.buckets, function (bucketValue, bucketKey) {
            values.push(bucketValue.value);
            labels.push(bucketValue.key_name);
        });
        return { labels: labels, values: values };
    };
    LineChartService.prototype.getChartOption = function (labelString) {
        return {
            legend: { display: true },
            scales: {
                xAxes: [{
                        gridLines: { display: false }
                    }],
                yAxes: [{
                        scaleLabel: { display: true, labelString: labelString },
                        ticks: { beginAtZero: true }
                    }]
            }
        };
    };
    LineChartService.prototype.getChartColors = function (legendCount) {
        var colors = ['Red', 'Blue', 'Green'];
        var colorArray = [];
        for (var i = 0; i < legendCount; i++) {
            colorArray.push({
                backgroundColor: colors[i],
                borderColor: colors[i],
                fill: false
            });
        }
        return colorArray;
    };
    return LineChartService;
}());



/***/ }),

/***/ "RiPy":
/*!***************************************************************************!*\
  !*** ./node_modules/moment-duration-format/lib/moment-duration-format.js ***!
  \***************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*! Moment Duration Format v2.2.2
 *  https://github.com/jsmreese/moment-duration-format
 *  Date: 2018-02-16
 *
 *  Duration format plugin function for the Moment.js library
 *  http://momentjs.com/
 *
 *  Copyright 2018 John Madhavan-Reese
 *  Released under the MIT license
 */
(function (root, factory) {
  if (true) {
    // AMD. Register as an anonymous module.
    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! moment */ "VDUF")], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),
				__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
				(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
  } else {}

  if (root) {
    // Globals.
    root.momentDurationFormatSetup = root.moment ? factory(root.moment) : factory;
  }
})(this, function (moment) {
  // `Number#tolocaleString` is tested on plugin initialization.
  // If the feature test passes, `toLocaleStringWorks` will be set to `true` and the
  // native function will be used to generate formatted output. If the feature
  // test fails, the fallback format function internal to this plugin will be
  // used.
  var toLocaleStringWorks = false; // `Number#toLocaleString` rounds incorrectly for select numbers in Microsoft
  // environments (Edge, IE11, Windows Phone) and possibly other environments.
  // If the rounding test fails and `toLocaleString` will be used for formatting,
  // the plugin will "pre-round" number values using the fallback number format
  // function before passing them to `toLocaleString` for final formatting.

  var toLocaleStringRoundingWorks = false; // `Intl.NumberFormat#format` is tested on plugin initialization.
  // If the feature test passes, `intlNumberFormatRoundingWorks` will be set to
  // `true` and the native function will be used to generate formatted output.
  // If the feature test fails, either `Number#tolocaleString` (if
  // `toLocaleStringWorks` is `true`), or the fallback format function internal
  //  to this plugin will be used.

  var intlNumberFormatWorks = false; // `Intl.NumberFormat#format` rounds incorrectly for select numbers in Microsoft
  // environments (Edge, IE11, Windows Phone) and possibly other environments.
  // If the rounding test fails and `Intl.NumberFormat#format` will be used for
  // formatting, the plugin will "pre-round" number values using the fallback number
  // format function before passing them to `Intl.NumberFormat#format` for final
  // formatting.

  var intlNumberFormatRoundingWorks = false; // Token type names in order of descending magnitude.

  var types = "escape years months weeks days hours minutes seconds milliseconds general".split(" ");
  var bubbles = [{
    type: "seconds",
    targets: [{
      type: "minutes",
      value: 60
    }, {
      type: "hours",
      value: 3600
    }, {
      type: "days",
      value: 86400
    }, {
      type: "weeks",
      value: 604800
    }, {
      type: "months",
      value: 2678400
    }, {
      type: "years",
      value: 31536000
    }]
  }, {
    type: "minutes",
    targets: [{
      type: "hours",
      value: 60
    }, {
      type: "days",
      value: 1440
    }, {
      type: "weeks",
      value: 10080
    }, {
      type: "months",
      value: 44640
    }, {
      type: "years",
      value: 525600
    }]
  }, {
    type: "hours",
    targets: [{
      type: "days",
      value: 24
    }, {
      type: "weeks",
      value: 168
    }, {
      type: "months",
      value: 744
    }, {
      type: "years",
      value: 8760
    }]
  }, {
    type: "days",
    targets: [{
      type: "weeks",
      value: 7
    }, {
      type: "months",
      value: 31
    }, {
      type: "years",
      value: 365
    }]
  }, {
    type: "months",
    targets: [{
      type: "years",
      value: 12
    }]
  }]; // stringIncludes

  function stringIncludes(str, search) {
    if (search.length > str.length) {
      return false;
    }

    return str.indexOf(search) !== -1;
  } // repeatZero(qty)
  // Returns "0" repeated `qty` times.
  // `qty` must be a integer >= 0.


  function repeatZero(qty) {
    var result = "";

    while (qty) {
      result += "0";
      qty -= 1;
    }

    return result;
  }

  function stringRound(digits) {
    var digitsArray = digits.split("").reverse();
    var i = 0;
    var carry = true;

    while (carry && i < digitsArray.length) {
      if (i) {
        if (digitsArray[i] === "9") {
          digitsArray[i] = "0";
        } else {
          digitsArray[i] = (parseInt(digitsArray[i], 10) + 1).toString();
          carry = false;
        }
      } else {
        if (parseInt(digitsArray[i], 10) < 5) {
          carry = false;
        }

        digitsArray[i] = "0";
      }

      i += 1;
    }

    if (carry) {
      digitsArray.push("1");
    }

    return digitsArray.reverse().join("");
  } // cachedNumberFormat
  // Returns an `Intl.NumberFormat` instance for the given locale and configuration.
  // On first use of a particular configuration, the instance is cached for fast
  // repeat access.


  function cachedNumberFormat(locale, options) {
    // Create a sorted, stringified version of `options`
    // for use as part of the cache key
    var optionsString = map(keys(options).sort(), function (key) {
      return key + ':' + options[key];
    }).join(','); // Set our cache key

    var cacheKey = locale + '+' + optionsString; // If we don't have this configuration cached, configure and cache it

    if (!cachedNumberFormat.cache[cacheKey]) {
      cachedNumberFormat.cache[cacheKey] = Intl.NumberFormat(locale, options);
    } // Return the cached version of this configuration


    return cachedNumberFormat.cache[cacheKey];
  }

  cachedNumberFormat.cache = {}; // formatNumber
  // Formats any number greater than or equal to zero using these options:
  // - userLocale
  // - useToLocaleString
  // - useGrouping
  // - grouping
  // - maximumSignificantDigits
  // - minimumIntegerDigits
  // - fractionDigits
  // - groupingSeparator
  // - decimalSeparator
  //
  // `useToLocaleString` will use `Intl.NumberFormat` or `toLocaleString` for formatting.
  // `userLocale` option is passed through to the formatting function.
  // `fractionDigits` is passed through to `maximumFractionDigits` and `minimumFractionDigits`
  // Using `maximumSignificantDigits` will override `minimumIntegerDigits` and `fractionDigits`.

  function formatNumber(number, options, userLocale) {
    var useToLocaleString = options.useToLocaleString;
    var useGrouping = options.useGrouping;
    var grouping = useGrouping && options.grouping.slice();
    var maximumSignificantDigits = options.maximumSignificantDigits;
    var minimumIntegerDigits = options.minimumIntegerDigits || 1;
    var fractionDigits = options.fractionDigits || 0;
    var groupingSeparator = options.groupingSeparator;
    var decimalSeparator = options.decimalSeparator;

    if (useToLocaleString && userLocale) {
      var localeStringOptions = {
        minimumIntegerDigits: minimumIntegerDigits,
        useGrouping: useGrouping
      };

      if (fractionDigits) {
        localeStringOptions.maximumFractionDigits = fractionDigits;
        localeStringOptions.minimumFractionDigits = fractionDigits;
      } // toLocaleString output is "0.0" instead of "0" for HTC browsers
      // when maximumSignificantDigits is set. See #96.


      if (maximumSignificantDigits && number > 0) {
        localeStringOptions.maximumSignificantDigits = maximumSignificantDigits;
      }

      if (intlNumberFormatWorks) {
        if (!intlNumberFormatRoundingWorks) {
          var roundingOptions = extend({}, options);
          roundingOptions.useGrouping = false;
          roundingOptions.decimalSeparator = ".";
          number = parseFloat(formatNumber(number, roundingOptions), 10);
        }

        return cachedNumberFormat(userLocale, localeStringOptions).format(number);
      } else {
        if (!toLocaleStringRoundingWorks) {
          var roundingOptions = extend({}, options);
          roundingOptions.useGrouping = false;
          roundingOptions.decimalSeparator = ".";
          number = parseFloat(formatNumber(number, roundingOptions), 10);
        }

        return number.toLocaleString(userLocale, localeStringOptions);
      }
    }

    var numberString; // Add 1 to digit output length for floating point errors workaround. See below.

    if (maximumSignificantDigits) {
      numberString = number.toPrecision(maximumSignificantDigits + 1);
    } else {
      numberString = number.toFixed(fractionDigits + 1);
    }

    var integerString;
    var fractionString;
    var exponentString;
    var temp = numberString.split("e");
    exponentString = temp[1] || "";
    temp = temp[0].split(".");
    fractionString = temp[1] || "";
    integerString = temp[0] || ""; // Workaround for floating point errors in `toFixed` and `toPrecision`.
    // (3.55).toFixed(1); --> "3.5"
    // (123.55 - 120).toPrecision(2); --> "3.5"
    // (123.55 - 120); --> 3.549999999999997
    // (123.55 - 120).toFixed(2); --> "3.55"
    // Round by examing the string output of the next digit.
    // *************** Implement String Rounding here ***********************
    // Check integerString + fractionString length of toPrecision before rounding.
    // Check length of fractionString from toFixed output before rounding.

    var integerLength = integerString.length;
    var fractionLength = fractionString.length;
    var digitCount = integerLength + fractionLength;
    var digits = integerString + fractionString;

    if (maximumSignificantDigits && digitCount === maximumSignificantDigits + 1 || !maximumSignificantDigits && fractionLength === fractionDigits + 1) {
      // Round digits.
      digits = stringRound(digits);

      if (digits.length === digitCount + 1) {
        integerLength = integerLength + 1;
      } // Discard final fractionDigit.


      if (fractionLength) {
        digits = digits.slice(0, -1);
      } // Separate integer and fraction.


      integerString = digits.slice(0, integerLength);
      fractionString = digits.slice(integerLength);
    } // Trim trailing zeroes from fractionString because toPrecision outputs
    // precision, not significant digits.


    if (maximumSignificantDigits) {
      fractionString = fractionString.replace(/0*$/, "");
    } // Handle exponent.


    var exponent = parseInt(exponentString, 10);

    if (exponent > 0) {
      if (fractionString.length <= exponent) {
        fractionString = fractionString + repeatZero(exponent - fractionString.length);
        integerString = integerString + fractionString;
        fractionString = "";
      } else {
        integerString = integerString + fractionString.slice(0, exponent);
        fractionString = fractionString.slice(exponent);
      }
    } else if (exponent < 0) {
      fractionString = repeatZero(Math.abs(exponent) - integerString.length) + integerString + fractionString;
      integerString = "0";
    }

    if (!maximumSignificantDigits) {
      // Trim or pad fraction when not using maximumSignificantDigits.
      fractionString = fractionString.slice(0, fractionDigits);

      if (fractionString.length < fractionDigits) {
        fractionString = fractionString + repeatZero(fractionDigits - fractionString.length);
      } // Pad integer when using minimumIntegerDigits
      // and not using maximumSignificantDigits.


      if (integerString.length < minimumIntegerDigits) {
        integerString = repeatZero(minimumIntegerDigits - integerString.length) + integerString;
      }
    }

    var formattedString = ""; // Handle grouping.

    if (useGrouping) {
      temp = integerString;
      var group;

      while (temp.length) {
        if (grouping.length) {
          group = grouping.shift();
        }

        if (formattedString) {
          formattedString = groupingSeparator + formattedString;
        }

        formattedString = temp.slice(-group) + formattedString;
        temp = temp.slice(0, -group);
      }
    } else {
      formattedString = integerString;
    } // Add decimalSeparator and fraction.


    if (fractionString) {
      formattedString = formattedString + decimalSeparator + fractionString;
    }

    return formattedString;
  } // durationLabelCompare


  function durationLabelCompare(a, b) {
    if (a.label.length > b.label.length) {
      return -1;
    }

    if (a.label.length < b.label.length) {
      return 1;
    } // a must be equal to b


    return 0;
  } // durationGetLabels


  function durationGetLabels(token, localeData) {
    var labels = [];
    each(keys(localeData), function (localeDataKey) {
      if (localeDataKey.slice(0, 15) !== "_durationLabels") {
        return;
      }

      var labelType = localeDataKey.slice(15).toLowerCase();
      each(keys(localeData[localeDataKey]), function (labelKey) {
        if (labelKey.slice(0, 1) === token) {
          labels.push({
            type: labelType,
            key: labelKey,
            label: localeData[localeDataKey][labelKey]
          });
        }
      });
    });
    return labels;
  } // durationPluralKey


  function durationPluralKey(token, integerValue, decimalValue) {
    // Singular for a value of `1`, but not for `1.0`.
    if (integerValue === 1 && decimalValue === null) {
      return token;
    }

    return token + token;
  }

  var engLocale = {
    durationLabelsStandard: {
      S: 'millisecond',
      SS: 'milliseconds',
      s: 'second',
      ss: 'seconds',
      m: 'minute',
      mm: 'minutes',
      h: 'hour',
      hh: 'hours',
      d: 'day',
      dd: 'days',
      w: 'week',
      ww: 'weeks',
      M: 'month',
      MM: 'months',
      y: 'year',
      yy: 'years'
    },
    durationLabelsShort: {
      S: 'msec',
      SS: 'msecs',
      s: 'sec',
      ss: 'secs',
      m: 'min',
      mm: 'mins',
      h: 'hr',
      hh: 'hrs',
      d: 'dy',
      dd: 'dys',
      w: 'wk',
      ww: 'wks',
      M: 'mo',
      MM: 'mos',
      y: 'yr',
      yy: 'yrs'
    },
    durationTimeTemplates: {
      HMS: 'h:mm:ss',
      HM: 'h:mm',
      MS: 'm:ss'
    },
    durationLabelTypes: [{
      type: "standard",
      string: "__"
    }, {
      type: "short",
      string: "_"
    }],
    durationPluralKey: durationPluralKey
  }; // isArray

  function isArray(array) {
    return Object.prototype.toString.call(array) === "[object Array]";
  } // isObject


  function isObject(obj) {
    return Object.prototype.toString.call(obj) === "[object Object]";
  } // findLast


  function findLast(array, callback) {
    var index = array.length;

    while (index -= 1) {
      if (callback(array[index])) {
        return array[index];
      }
    }
  } // find


  function find(array, callback) {
    var index = 0;
    var max = array && array.length || 0;
    var match;

    if (typeof callback !== "function") {
      match = callback;

      callback = function callback(item) {
        return item === match;
      };
    }

    while (index < max) {
      if (callback(array[index])) {
        return array[index];
      }

      index += 1;
    }
  } // each


  function each(array, callback) {
    var index = 0,
        max = array.length;

    if (!array || !max) {
      return;
    }

    while (index < max) {
      if (callback(array[index], index) === false) {
        return;
      }

      index += 1;
    }
  } // map


  function map(array, callback) {
    var index = 0,
        max = array.length,
        ret = [];

    if (!array || !max) {
      return ret;
    }

    while (index < max) {
      ret[index] = callback(array[index], index);
      index += 1;
    }

    return ret;
  } // pluck


  function pluck(array, prop) {
    return map(array, function (item) {
      return item[prop];
    });
  } // compact


  function compact(array) {
    var ret = [];
    each(array, function (item) {
      if (item) {
        ret.push(item);
      }
    });
    return ret;
  } // unique


  function unique(array) {
    var ret = [];
    each(array, function (_a) {
      if (!find(ret, _a)) {
        ret.push(_a);
      }
    });
    return ret;
  } // intersection


  function intersection(a, b) {
    var ret = [];
    each(a, function (_a) {
      each(b, function (_b) {
        if (_a === _b) {
          ret.push(_a);
        }
      });
    });
    return unique(ret);
  } // rest


  function rest(array, callback) {
    var ret = [];
    each(array, function (item, index) {
      if (!callback(item)) {
        ret = array.slice(index);
        return false;
      }
    });
    return ret;
  } // initial


  function initial(array, callback) {
    var reversed = array.slice().reverse();
    return rest(reversed, callback).reverse();
  } // extend


  function extend(a, b) {
    for (var key in b) {
      if (b.hasOwnProperty(key)) {
        a[key] = b[key];
      }
    }

    return a;
  } // keys


  function keys(a) {
    var ret = [];

    for (var key in a) {
      if (a.hasOwnProperty(key)) {
        ret.push(key);
      }
    }

    return ret;
  } // any


  function any(array, callback) {
    var index = 0,
        max = array.length;

    if (!array || !max) {
      return false;
    }

    while (index < max) {
      if (callback(array[index], index) === true) {
        return true;
      }

      index += 1;
    }

    return false;
  } // flatten


  function flatten(array) {
    var ret = [];
    each(array, function (child) {
      ret = ret.concat(child);
    });
    return ret;
  }

  function toLocaleStringSupportsLocales() {
    var number = 0;

    try {
      number.toLocaleString('i');
    } catch (e) {
      return e.name === 'RangeError';
    }

    return false;
  }

  function featureTestFormatterRounding(formatter) {
    return formatter(3.55, "en", {
      useGrouping: false,
      minimumIntegerDigits: 1,
      minimumFractionDigits: 1,
      maximumFractionDigits: 1
    }) === "3.6";
  }

  function featureTestFormatter(formatter) {
    var passed = true; // Test minimumIntegerDigits.

    passed = passed && formatter(1, "en", {
      minimumIntegerDigits: 1
    }) === "1";
    passed = passed && formatter(1, "en", {
      minimumIntegerDigits: 2
    }) === "01";
    passed = passed && formatter(1, "en", {
      minimumIntegerDigits: 3
    }) === "001";

    if (!passed) {
      return false;
    } // Test maximumFractionDigits and minimumFractionDigits.


    passed = passed && formatter(99.99, "en", {
      maximumFractionDigits: 0,
      minimumFractionDigits: 0
    }) === "100";
    passed = passed && formatter(99.99, "en", {
      maximumFractionDigits: 1,
      minimumFractionDigits: 1
    }) === "100.0";
    passed = passed && formatter(99.99, "en", {
      maximumFractionDigits: 2,
      minimumFractionDigits: 2
    }) === "99.99";
    passed = passed && formatter(99.99, "en", {
      maximumFractionDigits: 3,
      minimumFractionDigits: 3
    }) === "99.990";

    if (!passed) {
      return false;
    } // Test maximumSignificantDigits.


    passed = passed && formatter(99.99, "en", {
      maximumSignificantDigits: 1
    }) === "100";
    passed = passed && formatter(99.99, "en", {
      maximumSignificantDigits: 2
    }) === "100";
    passed = passed && formatter(99.99, "en", {
      maximumSignificantDigits: 3
    }) === "100";
    passed = passed && formatter(99.99, "en", {
      maximumSignificantDigits: 4
    }) === "99.99";
    passed = passed && formatter(99.99, "en", {
      maximumSignificantDigits: 5
    }) === "99.99";

    if (!passed) {
      return false;
    } // Test grouping.


    passed = passed && formatter(1000, "en", {
      useGrouping: true
    }) === "1,000";
    passed = passed && formatter(1000, "en", {
      useGrouping: false
    }) === "1000";

    if (!passed) {
      return false;
    }

    return true;
  } // durationsFormat(durations [, template] [, precision] [, settings])


  function durationsFormat() {
    var args = [].slice.call(arguments);
    var settings = {};
    var durations; // Parse arguments.

    each(args, function (arg, index) {
      if (!index) {
        if (!isArray(arg)) {
          throw "Expected array as the first argument to durationsFormat.";
        }

        durations = arg;
      }

      if (typeof arg === "string" || typeof arg === "function") {
        settings.template = arg;
        return;
      }

      if (typeof arg === "number") {
        settings.precision = arg;
        return;
      }

      if (isObject(arg)) {
        extend(settings, arg);
      }
    });

    if (!durations || !durations.length) {
      return [];
    }

    settings.returnMomentTypes = true;
    var formattedDurations = map(durations, function (dur) {
      return dur.format(settings);
    }); // Merge token types from all durations.

    var outputTypes = intersection(types, unique(pluck(flatten(formattedDurations), "type")));
    var largest = settings.largest;

    if (largest) {
      outputTypes = outputTypes.slice(0, largest);
    }

    settings.returnMomentTypes = false;
    settings.outputTypes = outputTypes;
    return map(durations, function (dur) {
      return dur.format(settings);
    });
  } // durationFormat([template] [, precision] [, settings])


  function durationFormat() {
    var args = [].slice.call(arguments);
    var settings = extend({}, this.format.defaults); // Keep a shadow copy of this moment for calculating remainders.
    // Perform all calculations on positive duration value, handle negative
    // sign at the very end.

    var asMilliseconds = this.asMilliseconds();
    var asMonths = this.asMonths(); // Treat invalid durations as having a value of 0 milliseconds.

    if (typeof this.isValid === "function" && this.isValid() === false) {
      asMilliseconds = 0;
      asMonths = 0;
    }

    var isNegative = asMilliseconds < 0; // Two shadow copies are needed because of the way moment.js handles
    // duration arithmetic for years/months and for weeks/days/hours/minutes/seconds.

    var remainder = moment.duration(Math.abs(asMilliseconds), "milliseconds");
    var remainderMonths = moment.duration(Math.abs(asMonths), "months"); // Parse arguments.

    each(args, function (arg) {
      if (typeof arg === "string" || typeof arg === "function") {
        settings.template = arg;
        return;
      }

      if (typeof arg === "number") {
        settings.precision = arg;
        return;
      }

      if (isObject(arg)) {
        extend(settings, arg);
      }
    });
    var momentTokens = {
      years: "y",
      months: "M",
      weeks: "w",
      days: "d",
      hours: "h",
      minutes: "m",
      seconds: "s",
      milliseconds: "S"
    };
    var tokenDefs = {
      escape: /\[(.+?)\]/,
      years: /\*?[Yy]+/,
      months: /\*?M+/,
      weeks: /\*?[Ww]+/,
      days: /\*?[Dd]+/,
      hours: /\*?[Hh]+/,
      minutes: /\*?m+/,
      seconds: /\*?s+/,
      milliseconds: /\*?S+/,
      general: /.+?/
    }; // Types array is available in the template function.

    settings.types = types;

    var typeMap = function typeMap(token) {
      return find(types, function (type) {
        return tokenDefs[type].test(token);
      });
    };

    var tokenizer = new RegExp(map(types, function (type) {
      return tokenDefs[type].source;
    }).join("|"), "g"); // Current duration object is available in the template function.

    settings.duration = this; // Eval template function and cache template string.

    var template = typeof settings.template === "function" ? settings.template.apply(settings) : settings.template; // outputTypes and returnMomentTypes are settings to support durationsFormat().
    // outputTypes is an array of moment token types that determines
    // the tokens returned in formatted output. This option overrides
    // trim, largest, stopTrim, etc.

    var outputTypes = settings.outputTypes; // returnMomentTypes is a boolean that sets durationFormat to return
    // the processed momentTypes instead of formatted output.

    var returnMomentTypes = settings.returnMomentTypes;
    var largest = settings.largest; // Setup stopTrim array of token types.

    var stopTrim = [];

    if (!outputTypes) {
      if (isArray(settings.stopTrim)) {
        settings.stopTrim = settings.stopTrim.join("");
      } // Parse stopTrim string to create token types array.


      if (settings.stopTrim) {
        each(settings.stopTrim.match(tokenizer), function (token) {
          var type = typeMap(token);

          if (type === "escape" || type === "general") {
            return;
          }

          stopTrim.push(type);
        });
      }
    } // Cache moment's locale data.


    var localeData = moment.localeData();

    if (!localeData) {
      localeData = {};
    } // Fall back to this plugin's `eng` extension.


    each(keys(engLocale), function (key) {
      if (typeof engLocale[key] === "function") {
        if (!localeData[key]) {
          localeData[key] = engLocale[key];
        }

        return;
      }

      if (!localeData["_" + key]) {
        localeData["_" + key] = engLocale[key];
      }
    }); // Replace Duration Time Template strings.
    // For locale `eng`: `_HMS_`, `_HM_`, and `_MS_`.

    each(keys(localeData._durationTimeTemplates), function (item) {
      template = template.replace("_" + item + "_", localeData._durationTimeTemplates[item]);
    }); // Determine user's locale.

    var userLocale = settings.userLocale || moment.locale();
    var useLeftUnits = settings.useLeftUnits;
    var usePlural = settings.usePlural;
    var precision = settings.precision;
    var forceLength = settings.forceLength;
    var useGrouping = settings.useGrouping;
    var trunc = settings.trunc; // Use significant digits only when precision is greater than 0.

    var useSignificantDigits = settings.useSignificantDigits && precision > 0;
    var significantDigits = useSignificantDigits ? settings.precision : 0;
    var significantDigitsCache = significantDigits;
    var minValue = settings.minValue;
    var isMinValue = false;
    var maxValue = settings.maxValue;
    var isMaxValue = false; // formatNumber fallback options.

    var useToLocaleString = settings.useToLocaleString;
    var groupingSeparator = settings.groupingSeparator;
    var decimalSeparator = settings.decimalSeparator;
    var grouping = settings.grouping;
    useToLocaleString = useToLocaleString && (toLocaleStringWorks || intlNumberFormatWorks); // Trim options.

    var trim = settings.trim;

    if (isArray(trim)) {
      trim = trim.join(" ");
    }

    if (trim === null && (largest || maxValue || useSignificantDigits)) {
      trim = "all";
    }

    if (trim === null || trim === true || trim === "left" || trim === "right") {
      trim = "large";
    }

    if (trim === false) {
      trim = "";
    }

    var trimIncludes = function trimIncludes(item) {
      return item.test(trim);
    };

    var rLarge = /large/;
    var rSmall = /small/;
    var rBoth = /both/;
    var rMid = /mid/;
    var rAll = /^all|[^sm]all/;
    var rFinal = /final/;
    var trimLarge = largest > 0 || any([rLarge, rBoth, rAll], trimIncludes);
    var trimSmall = any([rSmall, rBoth, rAll], trimIncludes);
    var trimMid = any([rMid, rAll], trimIncludes);
    var trimFinal = any([rFinal, rAll], trimIncludes); // Parse format string to create raw tokens array.

    var rawTokens = map(template.match(tokenizer), function (token, index) {
      var type = typeMap(token);

      if (token.slice(0, 1) === "*") {
        token = token.slice(1);

        if (type !== "escape" && type !== "general") {
          stopTrim.push(type);
        }
      }

      return {
        index: index,
        length: token.length,
        text: "",
        // Replace escaped tokens with the non-escaped token text.
        token: type === "escape" ? token.replace(tokenDefs.escape, "$1") : token,
        // Ignore type on non-moment tokens.
        type: type === "escape" || type === "general" ? null : type
      };
    }); // Associate text tokens with moment tokens.

    var currentToken = {
      index: 0,
      length: 0,
      token: "",
      text: "",
      type: null
    };
    var tokens = [];

    if (useLeftUnits) {
      rawTokens.reverse();
    }

    each(rawTokens, function (token) {
      if (token.type) {
        if (currentToken.type || currentToken.text) {
          tokens.push(currentToken);
        }

        currentToken = token;
        return;
      }

      if (useLeftUnits) {
        currentToken.text = token.token + currentToken.text;
      } else {
        currentToken.text += token.token;
      }
    });

    if (currentToken.type || currentToken.text) {
      tokens.push(currentToken);
    }

    if (useLeftUnits) {
      tokens.reverse();
    } // Find unique moment token types in the template in order of
    // descending magnitude.


    var momentTypes = intersection(types, unique(compact(pluck(tokens, "type")))); // Exit early if there are no moment token types.

    if (!momentTypes.length) {
      return pluck(tokens, "text").join("");
    } // Calculate values for each moment type in the template.
    // For processing the settings, values are associated with moment types.
    // Values will be assigned to tokens at the last step in order to
    // assume nothing about frequency or order of tokens in the template.


    momentTypes = map(momentTypes, function (momentType, index) {
      // Is this the least-magnitude moment token found?
      var isSmallest = index + 1 === momentTypes.length; // Is this the greatest-magnitude moment token found?

      var isLargest = !index; // Get the raw value in the current units.

      var rawValue;

      if (momentType === "years" || momentType === "months") {
        rawValue = remainderMonths.as(momentType);
      } else {
        rawValue = remainder.as(momentType);
      }

      var wholeValue = Math.floor(rawValue);
      var decimalValue = rawValue - wholeValue;
      var token = find(tokens, function (token) {
        return momentType === token.type;
      });

      if (isLargest && maxValue && rawValue > maxValue) {
        isMaxValue = true;
      }

      if (isSmallest && minValue && Math.abs(settings.duration.as(momentType)) < minValue) {
        isMinValue = true;
      } // Note the length of the largest-magnitude moment token:
      // if it is greater than one and forceLength is not set,
      // then default forceLength to `true`.
      //
      // Rationale is this: If the template is "h:mm:ss" and the
      // moment value is 5 minutes, the user-friendly output is
      // "5:00", not "05:00". We shouldn't pad the `minutes` token
      // even though it has length of two if the template is "h:mm:ss";
      //
      // If the minutes output should always include the leading zero
      // even when the hour is trimmed then set `{ forceLength: true }`
      // to output "05:00". If the template is "hh:mm:ss", the user
      // clearly wanted everything padded so we should output "05:00";
      //
      // If the user wants the full padded output, they can use
      // template "hh:mm:ss" and set `{ trim: false }` to output
      // "00:05:00".


      if (isLargest && forceLength === null && token.length > 1) {
        forceLength = true;
      } // Update remainder.


      remainder.subtract(wholeValue, momentType);
      remainderMonths.subtract(wholeValue, momentType);
      return {
        rawValue: rawValue,
        wholeValue: wholeValue,
        // Decimal value is only retained for the least-magnitude
        // moment type in the format template.
        decimalValue: isSmallest ? decimalValue : 0,
        isSmallest: isSmallest,
        isLargest: isLargest,
        type: momentType,
        // Tokens can appear multiple times in a template string,
        // but all instances must share the same length.
        tokenLength: token.length
      };
    });
    var truncMethod = trunc ? Math.floor : Math.round;

    var truncate = function truncate(value, places) {
      var factor = Math.pow(10, places);
      return truncMethod(value * factor) / factor;
    };

    var foundFirst = false;
    var bubbled = false;

    var formatValue = function formatValue(momentType, index) {
      var formatOptions = {
        useGrouping: useGrouping,
        groupingSeparator: groupingSeparator,
        decimalSeparator: decimalSeparator,
        grouping: grouping,
        useToLocaleString: useToLocaleString
      };

      if (useSignificantDigits) {
        if (significantDigits <= 0) {
          momentType.rawValue = 0;
          momentType.wholeValue = 0;
          momentType.decimalValue = 0;
        } else {
          formatOptions.maximumSignificantDigits = significantDigits;
          momentType.significantDigits = significantDigits;
        }
      }

      if (isMaxValue && !bubbled) {
        if (momentType.isLargest) {
          momentType.wholeValue = maxValue;
          momentType.decimalValue = 0;
        } else {
          momentType.wholeValue = 0;
          momentType.decimalValue = 0;
        }
      }

      if (isMinValue && !bubbled) {
        if (momentType.isSmallest) {
          momentType.wholeValue = minValue;
          momentType.decimalValue = 0;
        } else {
          momentType.wholeValue = 0;
          momentType.decimalValue = 0;
        }
      }

      if (momentType.isSmallest || momentType.significantDigits && momentType.significantDigits - momentType.wholeValue.toString().length <= 0) {
        // Apply precision to least significant token value.
        if (precision < 0) {
          momentType.value = truncate(momentType.wholeValue, precision);
        } else if (precision === 0) {
          momentType.value = truncMethod(momentType.wholeValue + momentType.decimalValue);
        } else {
          // precision > 0
          if (useSignificantDigits) {
            if (trunc) {
              momentType.value = truncate(momentType.rawValue, significantDigits - momentType.wholeValue.toString().length);
            } else {
              momentType.value = momentType.rawValue;
            }

            if (momentType.wholeValue) {
              significantDigits -= momentType.wholeValue.toString().length;
            }
          } else {
            formatOptions.fractionDigits = precision;

            if (trunc) {
              momentType.value = momentType.wholeValue + truncate(momentType.decimalValue, precision);
            } else {
              momentType.value = momentType.wholeValue + momentType.decimalValue;
            }
          }
        }
      } else {
        if (useSignificantDigits && momentType.wholeValue) {
          // Outer Math.round required here to handle floating point errors.
          momentType.value = Math.round(truncate(momentType.wholeValue, momentType.significantDigits - momentType.wholeValue.toString().length));
          significantDigits -= momentType.wholeValue.toString().length;
        } else {
          momentType.value = momentType.wholeValue;
        }
      }

      if (momentType.tokenLength > 1 && (forceLength || foundFirst)) {
        formatOptions.minimumIntegerDigits = momentType.tokenLength;

        if (bubbled && formatOptions.maximumSignificantDigits < momentType.tokenLength) {
          delete formatOptions.maximumSignificantDigits;
        }
      }

      if (!foundFirst && (momentType.value > 0 || trim === ""
      /* trim: false */
      || find(stopTrim, momentType.type) || find(outputTypes, momentType.type))) {
        foundFirst = true;
      }

      momentType.formattedValue = formatNumber(momentType.value, formatOptions, userLocale);
      formatOptions.useGrouping = false;
      formatOptions.decimalSeparator = ".";
      momentType.formattedValueEn = formatNumber(momentType.value, formatOptions, "en");

      if (momentType.tokenLength === 2 && momentType.type === "milliseconds") {
        momentType.formattedValueMS = formatNumber(momentType.value, {
          minimumIntegerDigits: 3,
          useGrouping: false
        }, "en").slice(0, 2);
      }

      return momentType;
    }; // Calculate formatted values.


    momentTypes = map(momentTypes, formatValue);
    momentTypes = compact(momentTypes); // Bubble rounded values.

    if (momentTypes.length > 1) {
      var findType = function findType(type) {
        return find(momentTypes, function (momentType) {
          return momentType.type === type;
        });
      };

      var bubbleTypes = function bubbleTypes(bubble) {
        var bubbleMomentType = findType(bubble.type);

        if (!bubbleMomentType) {
          return;
        }

        each(bubble.targets, function (target) {
          var targetMomentType = findType(target.type);

          if (!targetMomentType) {
            return;
          }

          if (parseInt(bubbleMomentType.formattedValueEn, 10) === target.value) {
            bubbleMomentType.rawValue = 0;
            bubbleMomentType.wholeValue = 0;
            bubbleMomentType.decimalValue = 0;
            targetMomentType.rawValue += 1;
            targetMomentType.wholeValue += 1;
            targetMomentType.decimalValue = 0;
            targetMomentType.formattedValueEn = targetMomentType.wholeValue.toString();
            bubbled = true;
          }
        });
      };

      each(bubbles, bubbleTypes);
    } // Recalculate formatted values.


    if (bubbled) {
      foundFirst = false;
      significantDigits = significantDigitsCache;
      momentTypes = map(momentTypes, formatValue);
      momentTypes = compact(momentTypes);
    }

    if (outputTypes && !(isMaxValue && !settings.trim)) {
      momentTypes = map(momentTypes, function (momentType) {
        if (find(outputTypes, function (outputType) {
          return momentType.type === outputType;
        })) {
          return momentType;
        }

        return null;
      });
      momentTypes = compact(momentTypes);
    } else {
      // Trim Large.
      if (trimLarge) {
        momentTypes = rest(momentTypes, function (momentType) {
          // Stop trimming on:
          // - the smallest moment type
          // - a type marked for stopTrim
          // - a type that has a whole value
          return !momentType.isSmallest && !momentType.wholeValue && !find(stopTrim, momentType.type);
        });
      } // Largest.


      if (largest && momentTypes.length) {
        momentTypes = momentTypes.slice(0, largest);
      } // Trim Small.


      if (trimSmall && momentTypes.length > 1) {
        momentTypes = initial(momentTypes, function (momentType) {
          // Stop trimming on:
          // - a type marked for stopTrim
          // - a type that has a whole value
          // - the largest momentType
          return !momentType.wholeValue && !find(stopTrim, momentType.type) && !momentType.isLargest;
        });
      } // Trim Mid.


      if (trimMid) {
        momentTypes = map(momentTypes, function (momentType, index) {
          if (index > 0 && index < momentTypes.length - 1 && !momentType.wholeValue) {
            return null;
          }

          return momentType;
        });
        momentTypes = compact(momentTypes);
      } // Trim Final.


      if (trimFinal && momentTypes.length === 1 && !momentTypes[0].wholeValue && !(!trunc && momentTypes[0].isSmallest && momentTypes[0].rawValue < minValue)) {
        momentTypes = [];
      }
    }

    if (returnMomentTypes) {
      return momentTypes;
    } // Localize and pluralize unit labels.


    each(tokens, function (token) {
      var key = momentTokens[token.type];
      var momentType = find(momentTypes, function (momentType) {
        return momentType.type === token.type;
      });

      if (!key || !momentType) {
        return;
      }

      var values = momentType.formattedValueEn.split(".");
      values[0] = parseInt(values[0], 10);

      if (values[1]) {
        values[1] = parseFloat("0." + values[1], 10);
      } else {
        values[1] = null;
      }

      var pluralKey = localeData.durationPluralKey(key, values[0], values[1]);
      var labels = durationGetLabels(key, localeData);
      var autoLocalized = false;
      var pluralizedLabels = {}; // Auto-Localized unit labels.

      each(localeData._durationLabelTypes, function (labelType) {
        var label = find(labels, function (label) {
          return label.type === labelType.type && label.key === pluralKey;
        });

        if (label) {
          pluralizedLabels[label.type] = label.label;

          if (stringIncludes(token.text, labelType.string)) {
            token.text = token.text.replace(labelType.string, label.label);
            autoLocalized = true;
          }
        }
      }); // Auto-pluralized unit labels.

      if (usePlural && !autoLocalized) {
        labels.sort(durationLabelCompare);
        each(labels, function (label) {
          if (pluralizedLabels[label.type] === label.label) {
            if (stringIncludes(token.text, label.label)) {
              // Stop checking this token if its label is already
              // correctly pluralized.
              return false;
            } // Skip this label if it is correct, but not present in
            // the token's text.


            return;
          }

          if (stringIncludes(token.text, label.label)) {
            // Replece this token's label and stop checking.
            token.text = token.text.replace(label.label, pluralizedLabels[label.type]);
            return false;
          }
        });
      }
    }); // Build ouptut.

    tokens = map(tokens, function (token) {
      if (!token.type) {
        return token.text;
      }

      var momentType = find(momentTypes, function (momentType) {
        return momentType.type === token.type;
      });

      if (!momentType) {
        return "";
      }

      var out = "";

      if (useLeftUnits) {
        out += token.text;
      }

      if (isNegative && isMaxValue || !isNegative && isMinValue) {
        out += "< ";
        isMaxValue = false;
        isMinValue = false;
      }

      if (isNegative && isMinValue || !isNegative && isMaxValue) {
        out += "> ";
        isMaxValue = false;
        isMinValue = false;
      }

      if (isNegative && (momentType.value > 0 || trim === "" || find(stopTrim, momentType.type) || find(outputTypes, momentType.type))) {
        out += "-";
        isNegative = false;
      }

      if (token.type === "milliseconds" && momentType.formattedValueMS) {
        out += momentType.formattedValueMS;
      } else {
        out += momentType.formattedValue;
      }

      if (!useLeftUnits) {
        out += token.text;
      }

      return out;
    }); // Trim leading and trailing comma, space, colon, and dot.

    return tokens.join("").replace(/(,| |:|\.)*$/, "").replace(/^(,| |:|\.)*/, "");
  } // defaultFormatTemplate


  function defaultFormatTemplate() {
    var dur = this.duration;

    var findType = function findType(type) {
      return dur._data[type];
    };

    var firstType = find(this.types, findType);
    var lastType = findLast(this.types, findType); // Default template strings for each duration dimension type.

    switch (firstType) {
      case "milliseconds":
        return "S __";

      case "seconds": // Fallthrough.

      case "minutes":
        return "*_MS_";

      case "hours":
        return "_HMS_";

      case "days":
        // Possible Fallthrough.
        if (firstType === lastType) {
          return "d __";
        }

      case "weeks":
        if (firstType === lastType) {
          return "w __";
        }

        if (this.trim === null) {
          this.trim = "both";
        }

        return "w __, d __, h __";

      case "months":
        // Possible Fallthrough.
        if (firstType === lastType) {
          return "M __";
        }

      case "years":
        if (firstType === lastType) {
          return "y __";
        }

        if (this.trim === null) {
          this.trim = "both";
        }

        return "y __, M __, d __";

      default:
        if (this.trim === null) {
          this.trim = "both";
        }

        return "y __, d __, h __, m __, s __";
    }
  } // init


  function init(context) {
    if (!context) {
      throw "Moment Duration Format init cannot find moment instance.";
    }

    context.duration.format = durationsFormat;
    context.duration.fn.format = durationFormat;
    context.duration.fn.format.defaults = {
      // Many options are defaulted to `null` to distinguish between
      // 'not set' and 'set to `false`'
      // trim
      // Can be a string, a delimited list of strings, an array of strings,
      // or a boolean.
      // "large" - will trim largest-magnitude zero-value tokens until
      // finding a token with a value, a token identified as 'stopTrim', or
      // the final token of the format string.
      // "small" - will trim smallest-magnitude zero-value tokens until
      // finding a token with a value, a token identified as 'stopTrim', or
      // the final token of the format string.
      // "both" - will execute "large" trim then "small" trim.
      // "mid" - will trim any zero-value tokens that are not the first or
      // last tokens. Usually used in conjunction with "large" or "both".
      // e.g. "large mid" or "both mid".
      // "final" - will trim the final token if it is zero-value. Use this
      // option with "large" or "both" to output an empty string when
      // formatting a zero-value duration. e.g. "large final" or "both final".
      // "all" - Will trim all zero-value tokens. Shorthand for "both mid final".
      // "left" - maps to "large" to support plugin's version 1 API.
      // "right" - maps to "large" to support plugin's version 1 API.
      // `false` - template tokens are not trimmed.
      // `true` - treated as "large".
      // `null` - treated as "large".
      trim: null,
      // stopTrim
      // A moment token string, a delimited set of moment token strings,
      // or an array of moment token strings. Trimming will stop when a token
      // listed in this option is reached. A "*" character in the format
      // template string will also mark a moment token as stopTrim.
      // e.g. "d [days] *h:mm:ss" will always stop trimming at the 'hours' token.
      stopTrim: null,
      // largest
      // Set to a positive integer to output only the "n" largest-magnitude
      // moment tokens that have a value. All lesser-magnitude moment tokens
      // will be ignored. This option takes effect even if `trim` is set
      // to `false`.
      largest: null,
      // maxValue
      // Use `maxValue` to render generalized output for large duration values,
      // e.g. `"> 60 days"`. `maxValue` must be a positive integer and is
      /// applied to the greatest-magnitude moment token in the format template.
      maxValue: null,
      // minValue
      // Use `minValue` to render generalized output for small duration values,
      // e.g. `"< 5 minutes"`. `minValue` must be a positive integer and is
      // applied to the least-magnitude moment token in the format template.
      minValue: null,
      // precision
      // If a positive integer, number of decimal fraction digits to render.
      // If a negative integer, number of integer place digits to truncate to 0.
      // If `useSignificantDigits` is set to `true` and `precision` is a positive
      // integer, sets the maximum number of significant digits used in the
      // formatted output.
      precision: 0,
      // trunc
      // Default behavior rounds final token value. Set to `true` to
      // truncate final token value, which was the default behavior in
      // version 1 of this plugin.
      trunc: false,
      // forceLength
      // Force first moment token with a value to render at full length
      // even when template is trimmed and first moment token has length of 1.
      forceLength: null,
      // userLocale
      // Formatted numerical output is rendered using `toLocaleString`
      // and the locale of the user's environment. Set this option to render
      // numerical output using a different locale. Unit names are rendered
      // and detected using the locale set in moment.js, which can be different
      // from the locale of user's environment.
      userLocale: null,
      // usePlural
      // Will automatically singularize or pluralize unit names when they
      // appear in the text associated with each moment token. Standard and
      // short unit labels are singularized and pluralized, based on locale.
      // e.g. in english, "1 second" or "1 sec" would be rendered instead
      // of "1 seconds" or "1 secs". The default pluralization function
      // renders a plural label for a value with decimal precision.
      // e.g. "1.0 seconds" is never rendered as "1.0 second".
      // Label types and pluralization function are configurable in the
      // localeData extensions.
      usePlural: true,
      // useLeftUnits
      // The text to the right of each moment token in a format string
      // is treated as that token's units for the purposes of trimming,
      // singularizing, and auto-localizing.
      // e.g. "h [hours], m [minutes], s [seconds]".
      // To properly singularize or localize a format string such as
      // "[hours] h, [minutes] m, [seconds] s", where the units appear
      // to the left of each moment token, set useLeftUnits to `true`.
      // This plugin is not tested in the context of rtl text.
      useLeftUnits: false,
      // useGrouping
      // Enables locale-based digit grouping in the formatted output. See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/toLocaleString
      useGrouping: true,
      // useSignificantDigits
      // Treat the `precision` option as the maximum significant digits
      // to be rendered. Precision must be a positive integer. Significant
      // digits extend across unit types,
      // e.g. "6 hours 37.5 minutes" represents 4 significant digits.
      // Enabling this option causes token length to be ignored. See  https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/toLocaleString
      useSignificantDigits: false,
      // template
      // The template string used to format the duration. May be a function
      // or a string. Template functions are executed with the `this` binding
      // of the settings object so that template strings may be dynamically
      // generated based on the duration object (accessible via `this.duration`)
      // or any of the other settings. Leading and trailing space, comma,
      // period, and colon characters are trimmed from the resulting string.
      template: defaultFormatTemplate,
      // useToLocaleString
      // Set this option to `false` to ignore the `toLocaleString` feature
      // test and force the use of the `formatNumber` fallback function
      // included in this plugin.
      useToLocaleString: true,
      // formatNumber fallback options.
      // When `toLocaleString` is detected and passes the feature test, the
      // following options will have no effect: `toLocaleString` will be used
      // for formatting and the grouping separator, decimal separator, and
      // integer digit grouping will be determined by the user locale.
      // groupingSeparator
      // The integer digit grouping separator used when using the fallback
      // formatNumber function.
      groupingSeparator: ",",
      // decimalSeparator
      // The decimal separator used when using the fallback formatNumber
      // function.
      decimalSeparator: ".",
      // grouping
      // The integer digit grouping used when using the fallback formatNumber
      // function. Must be an array. The default value of `[3]` gives the
      // standard 3-digit thousand/million/billion digit groupings for the
      // "en" locale. Setting this option to `[3, 2]` would generate the
      // thousand/lakh/crore digit groupings used in the "en-IN" locale.
      grouping: [3]
    };
    context.updateLocale('en', engLocale);
  } // Run feature tests for `Number#toLocaleString`.


  var toLocaleStringFormatter = function toLocaleStringFormatter(number, locale, options) {
    return number.toLocaleString(locale, options);
  };

  toLocaleStringWorks = toLocaleStringSupportsLocales() && featureTestFormatter(toLocaleStringFormatter);
  toLocaleStringRoundingWorks = toLocaleStringWorks && featureTestFormatterRounding(toLocaleStringFormatter); // Run feature tests for `Intl.NumberFormat#format`.

  var intlNumberFormatFormatter = function intlNumberFormatFormatter(number, locale, options) {
    if (typeof window !== 'undefined' && window && window.Intl && window.Intl.NumberFormat) {
      return window.Intl.NumberFormat(locale, options).format(number);
    }
  };

  intlNumberFormatWorks = featureTestFormatter(intlNumberFormatFormatter);
  intlNumberFormatRoundingWorks = intlNumberFormatWorks && featureTestFormatterRounding(intlNumberFormatFormatter); // Initialize duration format on the global moment instance.

  init(moment); // Return the init function so that duration format can be
  // initialized on other moment instances.

  return init;
});

/***/ }),

/***/ "VC+i":
/*!**********************************************************************************!*\
  !*** ./src/assets/libs/naturalSortDataTablePlugin/naturalSortDataTablePlugin.js ***!
  \**********************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/**
 * Data can often be a complicated mix of numbers and letters (file names
 * are a common example) and sorting them in a natural manner is quite a
 * difficult problem.
 * 
 * Fortunately a deal of work has already been done in this area by other
 * authors - the following plug-in uses the [naturalSort() function by Jim
 * Palmer](http://www.overset.com/2008/09/01/javascript-natural-sort-algorithm-with-unicode-support) to provide natural sorting in DataTables.
 *
 *  @name Natural sorting
 *  @summary Sort data with a mix of numbers and letters _naturally_.
 *  @author [Jim Palmer](http://www.overset.com/2008/09/01/javascript-natural-sort-algorithm-with-unicode-support)
 *  @author [Michael Buehler] (https://github.com/AnimusMachina)
 *
 *  @example
 *    $('#example').dataTable( {
 *       columnDefs: [
 *         { type: 'natural', targets: 0 }
 *       ]
 *    } );
 *
 *    Html can be stripped from sorting by using 'natural-nohtml' such as
 *
 *    $('#example').dataTable( {
 *       columnDefs: [
 *    	   { type: 'natural-nohtml', targets: 0 }
 *       ]
 *    } );
 *
 */
(function () {
  /*
   * Natural Sort algorithm for Javascript - Version 0.7 - Released under MIT license
   * Author: Jim Palmer (based on chunking idea from Dave Koelle)
   * Contributors: Mike Grier (mgrier.com), Clint Priest, Kyle Adams, guillermo
   * See: http://js-naturalsort.googlecode.com/svn/trunk/naturalSort.js
   */
  function naturalSort(a, b, html) {
    var re = /(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?%?$|^0x[0-9a-f]+$|[0-9]+)/gi,
        sre = /(^[ ]*|[ ]*$)/g,
        dre = /(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,
        hre = /^0x[0-9a-f]+$/i,
        ore = /^0/,
        htmre = /(<([^>]+)>)/ig,
        // convert all to strings and trim()
    x = a.toString().replace(sre, '') || '',
        y = b.toString().replace(sre, '') || ''; // remove html from strings if desired

    if (!html) {
      x = x.replace(htmre, '');
      y = y.replace(htmre, '');
    } // chunk/tokenize


    var xN = x.replace(re, '\0$1\0').replace(/\0$/, '').replace(/^\0/, '').split('\0'),
        yN = y.replace(re, '\0$1\0').replace(/\0$/, '').replace(/^\0/, '').split('\0'),
        // numeric, hex or date detection
    xD = parseInt(x.match(hre), 10) || xN.length !== 1 && x.match(dre) && Date.parse(x),
        yD = parseInt(y.match(hre), 10) || xD && y.match(dre) && Date.parse(y) || null; // first try and sort Hex codes or Dates

    if (yD) {
      if (xD < yD) {
        return -1;
      } else if (xD > yD) {
        return 1;
      }
    } // natural sorting through split numeric strings and default strings


    for (var cLoc = 0, numS = Math.max(xN.length, yN.length); cLoc < numS; cLoc++) {
      // find floats not starting with '0', string or 0 if not defined (Clint Priest)
      var oFxNcL = !(xN[cLoc] || '').match(ore) && parseFloat(xN[cLoc], 10) || xN[cLoc] || 0;
      var oFyNcL = !(yN[cLoc] || '').match(ore) && parseFloat(yN[cLoc], 10) || yN[cLoc] || 0; // handle numeric vs string comparison - number < string - (Kyle Adams)

      if (isNaN(oFxNcL) !== isNaN(oFyNcL)) {
        return isNaN(oFxNcL) ? 1 : -1;
      } // rely on string comparison if different types - i.e. '02' < 2 != '02' < '2'
      else if (typeof oFxNcL !== typeof oFyNcL) {
        oFxNcL += '';
        oFyNcL += '';
      }

      if (oFxNcL < oFyNcL) {
        return -1;
      }

      if (oFxNcL > oFyNcL) {
        return 1;
      }
    }

    return 0;
  }

  module.exports = function () {
    jQuery.extend(jQuery.fn.dataTableExt.oSort, {
      "natural-asc": function naturalAsc(a, b) {
        return naturalSort(a, b, true);
      },
      "natural-desc": function naturalDesc(a, b) {
        return naturalSort(a, b, true) * -1;
      },
      "natural-nohtml-asc": function naturalNohtmlAsc(a, b) {
        return naturalSort(a, b, false);
      },
      "natural-nohtml-desc": function naturalNohtmlDesc(a, b) {
        return naturalSort(a, b, false) * -1;
      },
      "natural-ci-asc": function naturalCiAsc(a, b) {
        a = a.toString().toLowerCase();
        b = b.toString().toLowerCase();
        return naturalSort(a, b, true);
      },
      "natural-ci-desc": function naturalCiDesc(a, b) {
        a = a.toString().toLowerCase();
        b = b.toString().toLowerCase();
        return naturalSort(a, b, true) * -1;
      }
    });
  };
})();

/***/ }),

/***/ "VN7U":
/*!**********************************************************************************!*\
  !*** ./src/app/modules/dashboard/services/course-progress/export-csv.service.ts ***!
  \**********************************************************************************/
/*! exports provided: ExportCsvService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ExportCsvService", function() { return ExportCsvService; });
/* harmony import */ var _sunbird_shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @sunbird/shared */ "btWG");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "8Y7J");
/* harmony import */ var _shared_services_resource_resource_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../shared/services/resource/resource.service */ "vLro");



var ExportCsvService = (function () {
    function ExportCsvService(resourceService) {
        this.resourceService = resourceService;
    }
    ExportCsvService.prototype.downloadFile = function (data, columns, filename) {
        var csvData = this.ConvertToCSV(data, columns);
        var blob = new Blob(['\ufeff' + csvData], { type: 'text/csv;charset=utf-8;' });
        var dwldLink = document.createElement("a");
        var url = URL.createObjectURL(blob);
        var isSafariBrowser = navigator.userAgent.indexOf('Safari') != -1 && navigator.userAgent.indexOf('Chrome') == -1;
        if (isSafariBrowser) {
            dwldLink.setAttribute("target", "_blank");
        }
        dwldLink.setAttribute("href", url);
        dwldLink.setAttribute("download", filename + ".csv");
        dwldLink.style.visibility = "hidden";
        document.body.appendChild(dwldLink);
        dwldLink.click();
        document.body.removeChild(dwldLink);
    };
    ExportCsvService.prototype.ConvertToCSV = function (objArray, headerList) {
        var array = typeof objArray != 'object' ? JSON.parse(objArray) : objArray;
        var str = '';
        var row = 'S.No,';
        for (var index in headerList) {
            row += headerList[index] + ',';
        }
        row = row.slice(0, -1);
        str += row + '\r\n';
        for (var i = 0; i < array.length; i++) {
            var line = (i + 1) + '';
            for (var index in headerList) {
                var head = headerList[index];
                if (head === 'issued_certificates') {
                    if (array[i][head]) {
                        line += ',' + 'Yes';
                    }
                    else {
                        line += ',' + 'No';
                    }
                }
                else {
                    line += ',' + array[i][head];
                }
            }
            str += line + '\r\n';
        }
        return str;
    };
    ExportCsvService.ɵprov = _angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵdefineInjectable"]({ factory: function ExportCsvService_Factory() { return new ExportCsvService(_angular_core__WEBPACK_IMPORTED_MODULE_1__["ɵɵinject"](_shared_services_resource_resource_service__WEBPACK_IMPORTED_MODULE_2__["ResourceService"])); }, token: ExportCsvService, providedIn: "root" });
    return ExportCsvService;
}());



/***/ }),

/***/ "XoyV":
/*!*******************************************************!*\
  !*** ./src/app/modules/dashboard/dashboard.module.ts ***!
  \*******************************************************/
/*! exports provided: csCourseServiceFactory, DashboardModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "csCourseServiceFactory", function() { return csCourseServiceFactory; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DashboardModule", function() { return DashboardModule; });
/* harmony import */ var _project_sunbird_client_services__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @project-sunbird/client-services */ "6QGN");
/* harmony import */ var _project_sunbird_client_services__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_project_sunbird_client_services__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var CsLibInitializer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! CsLibInitializer */ "R9cb");


var csCourseServiceFactory = function (csLibInitializerService) {
    if (!_project_sunbird_client_services__WEBPACK_IMPORTED_MODULE_0__["CsModule"].instance.isInitialised) {
        csLibInitializerService.initializeCs();
    }
    return _project_sunbird_client_services__WEBPACK_IMPORTED_MODULE_0__["CsModule"].instance.courseService;
};
var DashboardModule = (function () {
    function DashboardModule() {
    }
    return DashboardModule;
}());



/***/ }),

/***/ "Z7x4":
/*!***********************************************************************!*\
  !*** ./src/app/modules/dashboard/services/dataset/dataset.service.ts ***!
  \***********************************************************************/
/*! exports provided: DatasetService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DatasetService", function() { return DatasetService; });
/* harmony import */ var _sunbird_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @sunbird/core */ "q/PB");
/* harmony import */ var _sunbird_shared__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @sunbird/shared */ "btWG");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! rxjs/operators */ "kU1M");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/core */ "8Y7J");
/* harmony import */ var _shared_services_config_config_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../shared/services/config/config.service */ "j0Qm");
/* harmony import */ var _core_services_report_report_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../core/services/report/report.service */ "Uutu");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};






var DatasetService = (function () {
    function DatasetService(config, baseReportService) {
        this.config = config;
        this.baseReportService = baseReportService;
    }
    DatasetService.prototype.getDataSet = function (_a) {
        var datasetId = _a.datasetId, from = _a.from, to = _a.to, _b = _a.header, header = _b === void 0 ? null : _b;
        var req = __assign({ url: this.config.urlConFig.URLS.DATASET.READ + "/" + datasetId + "?from=" + from + "&to=" + to }, (header && { header: header }));
        return this.baseReportService.get(req).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_2__["pluck"])('result'));
    };
    DatasetService.ɵprov = _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵdefineInjectable"]({ factory: function DatasetService_Factory() { return new DatasetService(_angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵinject"](_shared_services_config_config_service__WEBPACK_IMPORTED_MODULE_4__["ConfigService"]), _angular_core__WEBPACK_IMPORTED_MODULE_3__["ɵɵinject"](_core_services_report_report_service__WEBPACK_IMPORTED_MODULE_5__["BaseReportService"])); }, token: DatasetService, providedIn: "root" });
    return DatasetService;
}());



/***/ }),

/***/ "Z8Gq":
/*!*********************************************************************!*\
  !*** ./src/app/modules/dashboard/course-progress-exhaust.module.ts ***!
  \*********************************************************************/
/*! exports provided: CourseProgressExhaustModule */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CourseProgressExhaustModule", function() { return CourseProgressExhaustModule; });
var CourseProgressExhaustModule = (function () {
    function CourseProgressExhaustModule() {
    }
    return CourseProgressExhaustModule;
}());



/***/ }),

/***/ "ZMCT":
/*!*********************************************************************************!*\
  !*** ./src/app/modules/dashboard/services/organization/organization.service.ts ***!
  \*********************************************************************************/
/*! exports provided: OrganisationService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "OrganisationService", function() { return OrganisationService; });
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! rxjs */ "qCKp");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! rxjs/operators */ "kU1M");
/* harmony import */ var _sunbird_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @sunbird/core */ "q/PB");
/* harmony import */ var _sunbird_shared__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @sunbird/shared */ "btWG");
/* harmony import */ var _dashboard_utils_dashboard_utils_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./../dashboard-utils/dashboard-utils.service */ "+7xu");
/* harmony import */ var lodash_es__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! lodash-es */ "T89o");






var OrganisationService = (function () {
    function OrganisationService(learner, dashboardUtil, config) {
        this.contentStatus = {};
        this.datasetType = {};
        this.learner = learner;
        this.dashboardUtil = dashboardUtil;
        this.contentStatus = {
            'org.creation.content[@status=published].count': ' LIVE',
            'org.creation.content[@status=draft].count': ' Created',
            'org.creation.content[@status=review].count': ' IN REVIEW'
        };
        this.datasetType = {
            'ORG_CREATION': config.urlConFig.URLS.DASHBOARD.ORG_CREATION,
            'ORG_CONSUMPTION': config.urlConFig.URLS.DASHBOARD.ORG_CONSUMPTION
        };
    }
    OrganisationService.prototype.getDashboardData = function (param) {
        var _this = this;
        var paramOptions = {
            url: this.datasetType[param.dataset] + '/' + param.data.identifier,
            param: {
                period: param.data.timePeriod
            }
        };
        return this.learner.get(paramOptions).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_1__["map"])(function (data) {
            return _this.parseApiResponse(data, param.dataset);
        }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_1__["catchError"])(function (err) {
            return Object(rxjs__WEBPACK_IMPORTED_MODULE_0__["throwError"])(err);
        }));
    };
    OrganisationService.prototype.parseApiResponse = function (data, dataset) {
        var _this = this;
        this.graphSeries = [];
        this.blockData = [];
        lodash_es__WEBPACK_IMPORTED_MODULE_5__["forEach"](data.result.snapshot, function (numericData, key) {
            switch (key) {
                case 'org.creation.authors.count':
                case 'org.creation.reviewers.count':
                case 'org.creation.content.count':
                    _this.blockData.push(numericData);
                    break;
                case 'org.consumption.content.time_spent.sum':
                case 'org.consumption.content.time_spent.average':
                    _this.blockData.push(_this.dashboardUtil.secondToMinConversion(numericData));
                    break;
                default:
                    if (dataset === 'ORG_CREATION') {
                        _this.graphSeries.push(numericData.value + _this.contentStatus[key]);
                    }
                    else {
                        _this.blockData.push(numericData);
                    }
            }
        });
        if (dataset === 'ORG_CREATION') {
            return {
                bucketData: data.result.series, numericData: this.blockData, series: this.graphSeries,
                name: data.result.period === '5w' ? 'Content created per week' : 'Content created per day',
            };
        }
        else {
            return { bucketData: data.result.series, numericData: this.blockData, series: '' };
        }
    };
    return OrganisationService;
}());



/***/ }),

/***/ "ZYv9":
/*!*************************************************************************************************************!*\
  !*** ./src/app/modules/dashboard/components/content-dept-wise-report/content-dept-wise-report.component.ts ***!
  \*************************************************************************************************************/
/*! exports provided: ContentDeptWiseReportComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ContentDeptWiseReportComponent", function() { return ContentDeptWiseReportComponent; });
/* harmony import */ var _services__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../services */ "gfN8");
/* harmony import */ var lodash_es__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash-es */ "T89o");
/* harmony import */ var _angular_platform_browser__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/platform-browser */ "cUpR");
/* harmony import */ var _sunbird_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @sunbird/core */ "q/PB");
/* harmony import */ var _sunbird_shared__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @sunbird/shared */ "btWG");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/router */ "iInd");
/* harmony import */ var _services_report_report_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../services/report/report.service */ "t7hn");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/common */ "SVse");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! rxjs */ "qCKp");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! moment */ "VDUF");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_9__);










var ContentDeptWiseReportComponent = (function () {
    function ContentDeptWiseReportComponent(usageService, sanitizer, configService, userService, toasterService, searchService, resourceService, activatedRoute, router, reportService, datePipe) {
        this.usageService = usageService;
        this.sanitizer = sanitizer;
        this.configService = configService;
        this.userService = userService;
        this.toasterService = toasterService;
        this.searchService = searchService;
        this.resourceService = resourceService;
        this.router = router;
        this.reportService = reportService;
        this.datePipe = datePipe;
        this.unsubscribe = new rxjs__WEBPACK_IMPORTED_MODULE_8__["Subject"]();
        this.noResult = false;
        this.currentDate = new Date();
        this.tableData = [];
        this.allOrgName = [];
        this.allUserName = [];
        this.contentTypeList = [
            {
                name: 'Pdf',
                value: ['application/pdf']
            },
            {
                name: 'Video',
                value: ['video/x-youtube', 'video/Webm', 'video/mp4']
            },
            {
                name: 'Collection',
                value: ['application/vnd.ekstep.content-collection']
            },
            {
                name: 'Assessment',
                value: ['application/vnd.ekstep.ecml-archive']
            }
        ];
        this.cityList = [];
        this.departmentList = [];
        this.disableDepartment = false;
        this.activatedRoute = activatedRoute;
    }
    ContentDeptWiseReportComponent.prototype.ngOnInit = function () {
        this.disableDepartment = true;
        this.initializeDateFields();
        this.getOrgList();
    };
    ContentDeptWiseReportComponent.prototype.initializeDateFields = function () {
        this.moment = moment__WEBPACK_IMPORTED_MODULE_9__();
        this.fromDate = new Date(this.moment.subtract(7, "days"));
        this.toDate = new Date();
    };
    ContentDeptWiseReportComponent.prototype.getDepartmentList = function () {
        this.departmentList = lodash_es__WEBPACK_IMPORTED_MODULE_1__["map"](lodash_es__WEBPACK_IMPORTED_MODULE_1__["compact"](lodash_es__WEBPACK_IMPORTED_MODULE_1__["filter"](lodash_es__WEBPACK_IMPORTED_MODULE_1__["cloneDeep"](this.allOrgName), { rootOrgId: lodash_es__WEBPACK_IMPORTED_MODULE_1__["get"](this.selectedCity, 'rootOrgId') })), function (obj) {
            obj['orgName'] = lodash_es__WEBPACK_IMPORTED_MODULE_1__["lowerCase"](obj['orgName']);
            return obj;
        });
    };
    ContentDeptWiseReportComponent.prototype.getContentCreationStaticsReport = function () {
        var _this = this;
        var data = {
            "request": {
                "query": "",
                "filters": {
                    "status": [
                        "Live"
                    ],
                    "framework": ["nulp"],
                    "channel": [lodash_es__WEBPACK_IMPORTED_MODULE_1__["get"](this.selectedCity, 'id')],
                    "mimeType": lodash_es__WEBPACK_IMPORTED_MODULE_1__["get"](this.selectedContentType, 'value'),
                    "lastUpdatedOn": { ">=": this.datePipe.transform(this.fromDate, 'yyyy-MM-ddTHH:MM'), "<=": this.datePipe.transform(this.toDate, 'yyyy-MM-ddTHH:MM') }
                },
                "limit": "1000",
                "sort_by": {
                    "lastUpdatedOn": "desc"
                },
                "fields": ["identifier", "creator", "organisation", "name", "contentType", "createdFor", "channel", "board", "medium", "gradeLevel", "subject", "lastUpdatedOn", "status", "createdBy", "framework", "createdOn", "lastPublishedOn", "mimeType"]
            }
        };
        if (!lodash_es__WEBPACK_IMPORTED_MODULE_1__["isEmpty"](this.selectedCity) && !lodash_es__WEBPACK_IMPORTED_MODULE_1__["isEmpty"](this.selectedDepartment) && !lodash_es__WEBPACK_IMPORTED_MODULE_1__["isEmpty"](this.selectedContentType)) {
            this.reportService.getContentCreationStaticsReport(data).subscribe(function (response) {
                if (lodash_es__WEBPACK_IMPORTED_MODULE_1__["get"](response, 'responseCode') === 'OK') {
                    if (response.result.count > 0) {
                        _this.tableData = [];
                        var tempObj_1 = lodash_es__WEBPACK_IMPORTED_MODULE_1__["cloneDeep"](response.result.content);
                        var self = _this;
                        var requestparam = {
                            filters: {
                                id: lodash_es__WEBPACK_IMPORTED_MODULE_1__["uniq"](lodash_es__WEBPACK_IMPORTED_MODULE_1__["map"](tempObj_1, 'createdBy'))
                            }
                        };
                        _this.searchService.getUserList(requestparam).subscribe(function (response) {
                            var subOrgUser = lodash_es__WEBPACK_IMPORTED_MODULE_1__["map"](lodash_es__WEBPACK_IMPORTED_MODULE_1__["filter"](response.result.response.content, function (obj) { return lodash_es__WEBPACK_IMPORTED_MODULE_1__["includes"](lodash_es__WEBPACK_IMPORTED_MODULE_1__["map"](obj.organisations, 'organisationId'), lodash_es__WEBPACK_IMPORTED_MODULE_1__["get"](self.selectedDepartment, 'id')); }), 'id');
                            var filteredData = lodash_es__WEBPACK_IMPORTED_MODULE_1__["filter"](tempObj_1, function (obj) { return lodash_es__WEBPACK_IMPORTED_MODULE_1__["includes"](subOrgUser, obj.createdBy); });
                            lodash_es__WEBPACK_IMPORTED_MODULE_1__["map"](filteredData, function (value) {
                                value.createdOn = self.datePipe.transform(value.lastPublishedOn, 'MM/dd/yyyy');
                                value.OrgName = lodash_es__WEBPACK_IMPORTED_MODULE_1__["get"](self.selectedCity, 'orgName');
                                value.departmentName = lodash_es__WEBPACK_IMPORTED_MODULE_1__["get"](self.selectedDepartment, 'orgName');
                                value.UserName = value.creator;
                            });
                            _this.noResult = false;
                            _this.tableData = filteredData;
                            _this.initializeColumns();
                            if (lodash_es__WEBPACK_IMPORTED_MODULE_1__["isEmpty"](_this.tableData)) {
                                _this.noResultMessage = {
                                    'messageText': 'messages.stmsg.m0131'
                                };
                                _this.noResult = true;
                            }
                        });
                    }
                    else {
                        _this.noResultMessage = {
                            'messageText': 'messages.stmsg.m0131'
                        };
                        _this.noResult = true;
                    }
                }
                else {
                    _this.toasterService.error(_this.resourceService.messages.emsg.m0007);
                }
            }, function (err) {
                console.log(err);
                _this.toasterService.error(_this.resourceService.messages.emsg.m0007);
            });
        }
        else {
            if (lodash_es__WEBPACK_IMPORTED_MODULE_1__["isEmpty"](this.selectedCity)) {
                this.toasterService.error("Please select the city");
            }
            else if (lodash_es__WEBPACK_IMPORTED_MODULE_1__["isEmpty"](this.selectedDepartment)) {
                this.toasterService.error("Please select the department");
            }
            else if (lodash_es__WEBPACK_IMPORTED_MODULE_1__["isEmpty"](this.selectedContentType)) {
                this.toasterService.error("Please select the content type");
            }
        }
    };
    ContentDeptWiseReportComponent.prototype.getOrgList = function () {
        var _this = this;
        this.cityList = [];
        var data = {
            "request": {
                "filters": {
                    "isTenant": true,
                    "status": 1
                },
                limit: 10000
            }
        };
        this.reportService.getOrganizationName(data).subscribe(function (response) {
            if (lodash_es__WEBPACK_IMPORTED_MODULE_1__["get"](response, 'responseCode') === 'OK') {
                if (response.result.response.count > 0) {
                    _this.cityList = lodash_es__WEBPACK_IMPORTED_MODULE_1__["reject"](response.result.response.content, function (obj) { return lodash_es__WEBPACK_IMPORTED_MODULE_1__["isEmpty"](obj.orgName); });
                }
            }
            else {
                _this.toasterService.error(_this.resourceService.messages.emsg.m0007);
            }
        }, function (err) {
            console.log(err);
            _this.toasterService.error(_this.resourceService.messages.emsg.m0007);
        });
    };
    ContentDeptWiseReportComponent.prototype.getSubOrgList = function () {
        var _this = this;
        this.departmentList = [];
        var data = {
            "request": {
                "filters": {
                    channel: lodash_es__WEBPACK_IMPORTED_MODULE_1__["get"](this.selectedCity, 'channel'),
                    isTenant: false,
                    status: 1
                }
            }
        };
        this.reportService.getSubOrgList(data).subscribe(function (response) {
            _this.disableDepartment = true;
            if (lodash_es__WEBPACK_IMPORTED_MODULE_1__["get"](response, 'responseCode') === 'OK') {
                if (response.result.response.count > 0) {
                    _this.disableDepartment = false;
                    _this.departmentList = response.result.response.content;
                }
            }
            else {
                _this.toasterService.error(_this.resourceService.messages.emsg.m0007);
            }
        }, function (err) {
            console.log(err);
            _this.toasterService.error(_this.resourceService.messages.emsg.m0007);
        });
    };
    ContentDeptWiseReportComponent.prototype.getOrgDetails = function () {
        var _this = this;
        this.allOrgName = [];
        var data = {
            "request": {
                "filters": {}
            }
        };
        this.reportService.getOrganizationName(data).subscribe(function (response) {
            if (lodash_es__WEBPACK_IMPORTED_MODULE_1__["get"](response, 'responseCode') === 'OK') {
                if (response.result.response.content.length > 0) {
                    _this.allOrgName = response.result.response.content;
                    _this.cityList = lodash_es__WEBPACK_IMPORTED_MODULE_1__["map"](lodash_es__WEBPACK_IMPORTED_MODULE_1__["compact"](lodash_es__WEBPACK_IMPORTED_MODULE_1__["reject"](lodash_es__WEBPACK_IMPORTED_MODULE_1__["cloneDeep"](response.result.response.content), function (obj) {
                        if (obj.isRootOrg === false || lodash_es__WEBPACK_IMPORTED_MODULE_1__["isEmpty"](obj.orgName))
                            return obj;
                    })), function (obj) {
                        obj['orgName'] = lodash_es__WEBPACK_IMPORTED_MODULE_1__["lowerCase"](obj['orgName']);
                        return obj;
                    });
                }
            }
            else {
                _this.toasterService.error(_this.resourceService.messages.emsg.m0007);
            }
        }, function (err) {
            console.log(err);
            _this.toasterService.error(_this.resourceService.messages.emsg.m0007);
        });
    };
    ContentDeptWiseReportComponent.prototype.getUserDetails = function () {
        var _this = this;
        this.allUserName = [];
        this.reportService.getUserList().subscribe(function (response) {
            if (lodash_es__WEBPACK_IMPORTED_MODULE_1__["get"](response, 'responseCode') === 'OK') {
                if (response.result.response.content.length > 0) {
                    _this.allUserName = response.result.response.content;
                }
            }
            else {
                _this.toasterService.error(_this.resourceService.messages.emsg.m0007);
            }
        }, function (err) {
            console.log(err);
            _this.toasterService.error(_this.resourceService.messages.emsg.m0007);
        });
    };
    ContentDeptWiseReportComponent.prototype.initializeColumns = function () {
        this.cols = [
            { field: 'OrgName', header: 'City Name' },
            { field: 'departmentName', header: 'Creator Department' },
            { field: 'name', header: 'Name' },
            { field: 'board', header: 'Category' },
            { field: 'gradeLevel', header: 'Sub Category' },
            { field: 'subject', header: 'Topic' },
            { field: 'medium', header: 'Language' },
            { field: 'createdOn', header: 'Last Published On' },
            { field: 'framework', header: 'Framework' },
            { field: 'UserName', header: 'Created By' },
            { field: 'contentType', header: 'Content Type' },
        ];
    };
    ContentDeptWiseReportComponent.prototype.resetFields = function () {
        this.initializeDateFields();
        this.selectedCity = null;
        this.selectedDepartment = null;
        this.selectedContentType = null;
        this.disableDepartment = true;
    };
    ContentDeptWiseReportComponent.prototype.ngOnDestroy = function () {
        this.unsubscribe.next();
        this.unsubscribe.complete();
    };
    return ContentDeptWiseReportComponent;
}());



/***/ }),

/***/ "aZP4":
/*!*******************************************************************************************************!*\
  !*** ./src/app/modules/dashboard/components/dept-city-wise-report/dept-city-wise-report.component.ts ***!
  \*******************************************************************************************************/
/*! exports provided: DeptCityWiseReportComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DeptCityWiseReportComponent", function() { return DeptCityWiseReportComponent; });
/* harmony import */ var _services__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../services */ "gfN8");
/* harmony import */ var lodash_es__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash-es */ "T89o");
/* harmony import */ var _angular_platform_browser__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/platform-browser */ "cUpR");
/* harmony import */ var _sunbird_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @sunbird/core */ "q/PB");
/* harmony import */ var _sunbird_shared__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @sunbird/shared */ "btWG");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/router */ "iInd");
/* harmony import */ var _services_report_report_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../services/report/report.service */ "t7hn");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/common */ "SVse");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! rxjs */ "qCKp");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! moment */ "VDUF");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_9__);










var DeptCityWiseReportComponent = (function () {
    function DeptCityWiseReportComponent(usageService, sanitizer, configService, userService, searchService, toasterService, resourceService, activatedRoute, router, reportService, datePipe) {
        this.usageService = usageService;
        this.sanitizer = sanitizer;
        this.configService = configService;
        this.userService = userService;
        this.searchService = searchService;
        this.toasterService = toasterService;
        this.resourceService = resourceService;
        this.router = router;
        this.reportService = reportService;
        this.datePipe = datePipe;
        this.unsubscribe = new rxjs__WEBPACK_IMPORTED_MODULE_8__["Subject"]();
        this.noResult = false;
        this.currentDate = new Date();
        this.tableData = [];
        this.allOrgName = [];
        this.allUserName = [];
        this.cityList = [];
        this.departmentList = [];
        this.disableDepartment = false;
        this.activatedRoute = activatedRoute;
    }
    DeptCityWiseReportComponent.prototype.ngOnInit = function () {
        this.disableDepartment = true;
        this.initializeDateFields();
        this.getOrgList();
    };
    DeptCityWiseReportComponent.prototype.initializeDateFields = function () {
        this.moment = moment__WEBPACK_IMPORTED_MODULE_9__();
        this.fromDate = new Date(this.moment.subtract(7, "days"));
        this.toDate = new Date();
    };
    DeptCityWiseReportComponent.prototype.getDepartmentList = function () {
        this.departmentList = lodash_es__WEBPACK_IMPORTED_MODULE_1__["map"](lodash_es__WEBPACK_IMPORTED_MODULE_1__["compact"](lodash_es__WEBPACK_IMPORTED_MODULE_1__["filter"](lodash_es__WEBPACK_IMPORTED_MODULE_1__["cloneDeep"](this.allOrgName), { rootOrgId: lodash_es__WEBPACK_IMPORTED_MODULE_1__["get"](this.selectedCity, 'rootOrgId') })), function (obj) {
            obj['orgName'] = lodash_es__WEBPACK_IMPORTED_MODULE_1__["lowerCase"](obj['orgName']);
            return obj;
        });
    };
    DeptCityWiseReportComponent.prototype.getContentCreationStaticsReport = function () {
        var _this = this;
        var data = {
            "request": {
                "query": "",
                "filters": {
                    "status": [
                        "Live"
                    ],
                    "framework": ["nulp"],
                    "channel": [lodash_es__WEBPACK_IMPORTED_MODULE_1__["get"](this.selectedCity, 'id')],
                    "contentType": ["Course", 'Resource', 'Collection'],
                    "lastUpdatedOn": { ">=": this.datePipe.transform(this.fromDate, 'yyyy-MM-ddTHH:MM'), "<=": this.datePipe.transform(this.toDate, 'yyyy-MM-ddTHH:MM') }
                },
                "limit": "1000",
                "sort_by": {
                    "lastUpdatedOn": "desc"
                },
                "fields": ["identifier", "creator", "organisation", "name", "contentType", "createdFor", "channel", "board", "medium", "gradeLevel", "subject", "lastUpdatedOn", "status", "createdBy", "framework", "createdOn", "lastPublishedOn"]
            }
        };
        if (!lodash_es__WEBPACK_IMPORTED_MODULE_1__["isEmpty"](this.selectedCity) && !lodash_es__WEBPACK_IMPORTED_MODULE_1__["isEmpty"](this.selectedDepartment)) {
            this.reportService.getContentCreationStaticsReport(data).subscribe(function (response) {
                if (lodash_es__WEBPACK_IMPORTED_MODULE_1__["get"](response, 'responseCode') === 'OK') {
                    if (response.result.count > 0) {
                        _this.tableData = [];
                        var tempObj_1 = lodash_es__WEBPACK_IMPORTED_MODULE_1__["cloneDeep"](response.result.content);
                        var self = _this;
                        var requestparam = {
                            filters: {
                                id: lodash_es__WEBPACK_IMPORTED_MODULE_1__["uniq"](lodash_es__WEBPACK_IMPORTED_MODULE_1__["map"](tempObj_1, 'createdBy'))
                            }
                        };
                        _this.searchService.getUserList(requestparam).subscribe(function (response) {
                            var subOrgUser = lodash_es__WEBPACK_IMPORTED_MODULE_1__["map"](lodash_es__WEBPACK_IMPORTED_MODULE_1__["filter"](response.result.response.content, function (obj) { return lodash_es__WEBPACK_IMPORTED_MODULE_1__["includes"](lodash_es__WEBPACK_IMPORTED_MODULE_1__["map"](obj.organisations, 'organisationId'), lodash_es__WEBPACK_IMPORTED_MODULE_1__["get"](self.selectedDepartment, 'id')); }), 'id');
                            var filteredData = lodash_es__WEBPACK_IMPORTED_MODULE_1__["filter"](tempObj_1, function (obj) { return lodash_es__WEBPACK_IMPORTED_MODULE_1__["includes"](subOrgUser, obj.createdBy); });
                            lodash_es__WEBPACK_IMPORTED_MODULE_1__["map"](filteredData, function (value) {
                                value.createdOn = self.datePipe.transform(value.lastPublishedOn, 'MM/dd/yyyy');
                                value.OrgName = lodash_es__WEBPACK_IMPORTED_MODULE_1__["get"](self.selectedCity, 'orgName');
                                value.departmentName = lodash_es__WEBPACK_IMPORTED_MODULE_1__["get"](self.selectedDepartment, 'orgName');
                                value.UserName = value.creator;
                            });
                            _this.noResult = false;
                            _this.tableData = filteredData;
                            _this.initializeColumns();
                            if (lodash_es__WEBPACK_IMPORTED_MODULE_1__["isEmpty"](_this.tableData)) {
                                _this.noResultMessage = {
                                    'messageText': 'messages.stmsg.m0131'
                                };
                                _this.noResult = true;
                            }
                        });
                    }
                    else {
                        _this.noResultMessage = {
                            'messageText': 'messages.stmsg.m0131'
                        };
                        _this.noResult = true;
                    }
                }
                else {
                    _this.toasterService.error(_this.resourceService.messages.emsg.m0007);
                }
            }, function (err) {
                console.log(err);
                _this.toasterService.error(_this.resourceService.messages.emsg.m0007);
            });
        }
        else {
            if (lodash_es__WEBPACK_IMPORTED_MODULE_1__["isEmpty"](this.selectedCity)) {
                this.toasterService.error("Please select the city");
            }
            else if (lodash_es__WEBPACK_IMPORTED_MODULE_1__["isEmpty"](this.selectedDepartment)) {
                this.toasterService.error("Please select the department");
            }
        }
    };
    DeptCityWiseReportComponent.prototype.getOrgList = function () {
        var _this = this;
        this.cityList = [];
        var data = {
            "request": {
                "filters": {
                    "isTenant": true,
                    "status": 1
                },
                limit: 10000
            }
        };
        this.reportService.getOrganizationName(data).subscribe(function (response) {
            if (lodash_es__WEBPACK_IMPORTED_MODULE_1__["get"](response, 'responseCode') === 'OK') {
                if (response.result.response.count > 0) {
                    _this.cityList = lodash_es__WEBPACK_IMPORTED_MODULE_1__["reject"](response.result.response.content, function (obj) { return lodash_es__WEBPACK_IMPORTED_MODULE_1__["isEmpty"](obj.orgName); });
                }
            }
            else {
                _this.toasterService.error(_this.resourceService.messages.emsg.m0007);
            }
        }, function (err) {
            console.log(err);
            _this.toasterService.error(_this.resourceService.messages.emsg.m0007);
        });
    };
    DeptCityWiseReportComponent.prototype.getSubOrgList = function () {
        var _this = this;
        this.departmentList = [];
        var data = {
            "request": {
                "filters": {
                    channel: lodash_es__WEBPACK_IMPORTED_MODULE_1__["get"](this.selectedCity, 'channel'),
                    isTenant: false,
                    status: 1
                }
            }
        };
        this.reportService.getSubOrgList(data).subscribe(function (response) {
            _this.disableDepartment = true;
            if (lodash_es__WEBPACK_IMPORTED_MODULE_1__["get"](response, 'responseCode') === 'OK') {
                if (response.result.response.count > 0) {
                    _this.disableDepartment = false;
                    _this.departmentList = response.result.response.content;
                }
            }
            else {
                _this.toasterService.error(_this.resourceService.messages.emsg.m0007);
            }
        }, function (err) {
            console.log(err);
            _this.toasterService.error(_this.resourceService.messages.emsg.m0007);
        });
    };
    DeptCityWiseReportComponent.prototype.getOrgDetails = function () {
        var _this = this;
        this.allOrgName = [];
        var data = {
            "request": {
                "filters": {}
            }
        };
        this.reportService.getOrganizationName(data).subscribe(function (response) {
            if (lodash_es__WEBPACK_IMPORTED_MODULE_1__["get"](response, 'responseCode') === 'OK') {
                if (response.result.response.content.length > 0) {
                    _this.allOrgName = response.result.response.content;
                    _this.cityList = lodash_es__WEBPACK_IMPORTED_MODULE_1__["map"](lodash_es__WEBPACK_IMPORTED_MODULE_1__["compact"](lodash_es__WEBPACK_IMPORTED_MODULE_1__["reject"](lodash_es__WEBPACK_IMPORTED_MODULE_1__["cloneDeep"](response.result.response.content), function (obj) {
                        if (obj.isRootOrg === false || lodash_es__WEBPACK_IMPORTED_MODULE_1__["isEmpty"](obj.orgName))
                            return obj;
                    })), function (obj) {
                        obj['orgName'] = lodash_es__WEBPACK_IMPORTED_MODULE_1__["lowerCase"](obj['orgName']);
                        return obj;
                    });
                }
            }
            else {
                _this.toasterService.error(_this.resourceService.messages.emsg.m0007);
            }
        }, function (err) {
            console.log(err);
            _this.toasterService.error(_this.resourceService.messages.emsg.m0007);
        });
    };
    DeptCityWiseReportComponent.prototype.getUserDetails = function () {
        var _this = this;
        this.allUserName = [];
        this.reportService.getUserList().subscribe(function (response) {
            if (lodash_es__WEBPACK_IMPORTED_MODULE_1__["get"](response, 'responseCode') === 'OK') {
                if (response.result.response.content.length > 0) {
                    _this.allUserName = response.result.response.content;
                }
            }
            else {
                _this.toasterService.error(_this.resourceService.messages.emsg.m0007);
            }
        }, function (err) {
            console.log(err);
            _this.toasterService.error(_this.resourceService.messages.emsg.m0007);
        });
    };
    DeptCityWiseReportComponent.prototype.initializeColumns = function () {
        this.cols = [
            { field: 'OrgName', header: 'City Name' },
            { field: 'departmentName', header: 'Creator Department' },
            { field: 'name', header: 'Name' },
            { field: 'board', header: 'Category' },
            { field: 'gradeLevel', header: 'Sub Category' },
            { field: 'subject', header: 'Topic' },
            { field: 'medium', header: 'Language' },
            { field: 'createdOn', header: 'Last Published On' },
            { field: 'framework', header: 'Framework' },
            { field: 'UserName', header: 'Created By' },
            { field: 'contentType', header: 'Content Type' },
        ];
    };
    DeptCityWiseReportComponent.prototype.resetFields = function () {
        this.initializeDateFields();
        this.selectedCity = null;
        this.selectedDepartment = null;
        this.disableDepartment = true;
    };
    DeptCityWiseReportComponent.prototype.ngOnDestroy = function () {
        this.unsubscribe.next();
        this.unsubscribe.complete();
    };
    return DeptCityWiseReportComponent;
}());



/***/ }),

/***/ "bjt5":
/*!*********************************************************************************************!*\
  !*** ./src/app/modules/dashboard/components/course-dashboard/course-dashboard.component.ts ***!
  \*********************************************************************************************/
/*! exports provided: CourseDashboardComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CourseDashboardComponent", function() { return CourseDashboardComponent; });
/* harmony import */ var _sunbird_shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @sunbird/shared */ "btWG");
/* harmony import */ var _sunbird_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @sunbird/core */ "q/PB");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! rxjs */ "qCKp");
/* harmony import */ var lodash_es__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lodash-es */ "T89o");
/* harmony import */ var _services__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../services */ "gfN8");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/router */ "iInd");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs/operators */ "kU1M");







var CourseDashboardComponent = (function () {
    function CourseDashboardComponent(courseProgressService, activatedRoute, userService, router, navigationhelperService, resourceService, toasterService) {
        this.courseProgressService = courseProgressService;
        this.activatedRoute = activatedRoute;
        this.userService = userService;
        this.router = router;
        this.navigationhelperService = navigationhelperService;
        this.resourceService = resourceService;
        this.toasterService = toasterService;
        this.dashBoardItems = [];
        this.unsubscribe$ = new rxjs__WEBPACK_IMPORTED_MODULE_2__["Subject"]();
    }
    CourseDashboardComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.activatedRoute.parent.params.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["takeUntil"])(this.unsubscribe$)).subscribe(function (params) {
            _this.courseId = lodash_es__WEBPACK_IMPORTED_MODULE_3__["get"](params, 'courseId');
            _this.getBatchList();
            _this.setImpressionEvent();
        });
    };
    CourseDashboardComponent.prototype.setImpressionEvent = function () {
        this.telemetryImpression = {
            context: {
                env: lodash_es__WEBPACK_IMPORTED_MODULE_3__["get"](this.activatedRoute.snapshot, 'data.telemetry.env')
            },
            edata: {
                type: lodash_es__WEBPACK_IMPORTED_MODULE_3__["get"](this.activatedRoute.snapshot, 'data.telemetry.type'),
                pageid: lodash_es__WEBPACK_IMPORTED_MODULE_3__["get"](this.activatedRoute.snapshot, 'data.telemetry.pageid'),
                uri: this.router.url,
                duration: this.navigationhelperService.getPageLoadTime()
            },
            object: {
                id: this.courseId,
                type: lodash_es__WEBPACK_IMPORTED_MODULE_3__["get"](this.activatedRoute.snapshot, 'data.telemetry.object.type'),
                ver: lodash_es__WEBPACK_IMPORTED_MODULE_3__["get"](this.activatedRoute.snapshot, 'data.telemetry.object.ver'),
            }
        };
    };
    CourseDashboardComponent.prototype.getBatchList = function () {
        var _this = this;
        var searchParams = {
            courseId: this.courseId,
            status: ['0', '1', '2'],
            createdBy: this.userService.userid
        };
        this.courseProgressService.getBatches(searchParams).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["takeUntil"])(this.unsubscribe$)).subscribe(function (data) {
            _this.getDashboardData(lodash_es__WEBPACK_IMPORTED_MODULE_3__["get"](data, 'result.response'));
        }, function (err) {
            _this.toasterService.error(_this.resourceService.messages.emsg.m0005);
        });
    };
    CourseDashboardComponent.prototype.getDashboardData = function (batchList) {
        var _this = this;
        var batches = lodash_es__WEBPACK_IMPORTED_MODULE_3__["get"](batchList, 'content');
        if (batches) {
            this.dashBoardItems.push({
                title: lodash_es__WEBPACK_IMPORTED_MODULE_3__["get"](this.resourceService, 'frmelmnts.lbl.totalBatches'),
                count: lodash_es__WEBPACK_IMPORTED_MODULE_3__["get"](batchList, 'count'),
                type: 'small',
            });
            lodash_es__WEBPACK_IMPORTED_MODULE_3__["forEach"](batches, function (batch) {
                _this.updateDashBoardItems(lodash_es__WEBPACK_IMPORTED_MODULE_3__["get"](_this.resourceService, 'frmelmnts.lbl.totalCompletions'), lodash_es__WEBPACK_IMPORTED_MODULE_3__["get"](batch, 'completedCount'), 'large');
                _this.updateDashBoardItems(lodash_es__WEBPACK_IMPORTED_MODULE_3__["get"](_this.resourceService, 'frmelmnts.lbl.totalEnrollments'), lodash_es__WEBPACK_IMPORTED_MODULE_3__["get"](batch, 'participantCount'), 'small');
            });
        }
    };
    CourseDashboardComponent.prototype.updateDashBoardItems = function (title, count, type) {
        var enrollmentCount = lodash_es__WEBPACK_IMPORTED_MODULE_3__["find"](this.dashBoardItems, { title: title });
        if (enrollmentCount) {
            enrollmentCount.count += count;
        }
        else {
            this.dashBoardItems.push({
                title: title,
                count: count,
                type: type,
            });
        }
    };
    CourseDashboardComponent.prototype.ngOnDestroy = function () {
        this.unsubscribe$.next();
        this.unsubscribe$.complete();
    };
    return CourseDashboardComponent;
}());



/***/ }),

/***/ "cAXu":
/*!*************************************************************************************************!*\
  !*** ./src/app/modules/dashboard/components/course-consumption/course-consumption.component.ts ***!
  \*************************************************************************************************/
/*! exports provided: CourseConsumptionComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CourseConsumptionComponent", function() { return CourseConsumptionComponent; });
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! rxjs/operators */ "kU1M");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/router */ "iInd");
/* harmony import */ var _services__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./../../services */ "gfN8");
/* harmony import */ var _sunbird_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @sunbird/core */ "q/PB");
/* harmony import */ var _sunbird_shared__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @sunbird/shared */ "btWG");
/* harmony import */ var _sunbird_telemetry__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @sunbird/telemetry */ "RnNo");
/* harmony import */ var lodash_es__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! lodash-es */ "T89o");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! rxjs */ "qCKp");








var CourseConsumptionComponent = (function () {
    function CourseConsumptionComponent(route, consumption, activatedRoute, searchService, rendererService, resourceService, navigationhelperService, generaliseLabelService) {
        var _this = this;
        this.navigationhelperService = navigationhelperService;
        this.generaliseLabelService = generaliseLabelService;
        this.unsubscribe = new rxjs__WEBPACK_IMPORTED_MODULE_7__["Subject"]();
        this.timePeriod = '7d';
        this.identifier = '';
        this.myCoursesList = [];
        this.courseName = '';
        this.blockData = [];
        this.showGraph = 0;
        this.showLoader = true;
        this.isMultipleCourses = false;
        this.chartLegend = true;
        this.chartType = 'line';
        this.showDashboard = false;
        this.consumptionService = consumption;
        this.activatedRoute = activatedRoute;
        this.searchService = searchService;
        this.rendererService = rendererService;
        this.resourceService = resourceService;
        this.route = route;
        this.activatedRoute.params.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["takeUntil"])(this.unsubscribe))
            .subscribe(function (params) {
            if (params.id && params.timePeriod) {
                _this.interactObject = { id: params.id, type: 'Course', ver: '1.0' };
                _this.isMultipleCourses = false;
                _this.showDashboard = true;
                _this.getDashboardData(params.timePeriod, params.id);
            }
        });
        this.getMyContent();
    }
    CourseConsumptionComponent.prototype.getDashboardData = function (timePeriod, identifier) {
        var _this = this;
        this.showLoader = true;
        this.timePeriod = timePeriod ? timePeriod : '7d';
        this.identifier = identifier;
        var params = {
            data: {
                identifier: this.identifier,
                timePeriod: this.timePeriod
            }
        };
        this.consumptionService.getDashboardData(params).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["takeUntil"])(this.unsubscribe))
            .subscribe(function (data) {
            _this.blockData = data.numericData;
            _this.graphData = _this.rendererService.visualizer(data, _this.chartType);
            _this.showLoader = false;
        }, function (err) {
            _this.showLoader = false;
        });
    };
    CourseConsumptionComponent.prototype.validateIdentifier = function (identifier) {
        if (identifier) {
            var selectedCourse = lodash_es__WEBPACK_IMPORTED_MODULE_6__["find"](this.myCoursesList, ['identifier', identifier]);
            if (selectedCourse && selectedCourse.identifier) {
                this.courseName = selectedCourse.name;
                this.selectedCourse = selectedCourse;
            }
            else {
                this.route.navigate(['home']);
            }
        }
    };
    CourseConsumptionComponent.prototype.getMyContent = function () {
        var _this = this;
        var response = this.searchService.searchedContentList;
        if (response && response.count) {
            this.myCoursesList = response.content;
            if (this.myCoursesList.length === 1) {
                this.identifier = this.myCoursesList[0].identifier;
                this.courseName = this.myCoursesList[0].name;
                this.route.navigate(['dashBoard/activity/course/consumption', this.identifier, this.timePeriod]);
            }
            this.validateIdentifier(this.identifier);
            this.showLoader = false;
        }
        else {
            var searchParams = { status: ['Live'], contentType: ['Course'], params: { lastUpdatedOn: 'desc' } };
            this.searchService.searchContentByUserId(searchParams).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_0__["takeUntil"])(this.unsubscribe))
                .subscribe(function (data) {
                if (data.result.count && data.result.content) {
                    _this.myCoursesList = data.result.content;
                    if (data.result.content.length === 1) {
                        _this.identifier = data.result.content[0].identifier;
                        _this.courseName = data.result.content[0].name;
                        _this.route.navigate(['dashBoard/activity/course/consumption', _this.identifier, _this.timePeriod]);
                    }
                    else {
                        _this.isMultipleCourses = true;
                    }
                }
                _this.showLoader = false;
                if (_this.identifier) {
                    _this.validateIdentifier(_this.identifier);
                }
            }, function (err) {
                _this.showLoader = false;
            });
        }
    };
    CourseConsumptionComponent.prototype.onAfterCourseChange = function (course) {
        if (this.identifier === course.identifier) {
            return false;
        }
        this.route.navigate(['dashBoard/activity/course/consumption', course.identifier, this.timePeriod]);
    };
    CourseConsumptionComponent.prototype.onAfterFilterChange = function (timePeriod) {
        if (this.timePeriod === timePeriod) {
            return false;
        }
        this.route.navigate(['dashBoard/activity/course/consumption', this.identifier, timePeriod]);
    };
    CourseConsumptionComponent.prototype.graphNavigation = function (step) {
        step === 'next' ? this.showGraph++ : this.showGraph--;
    };
    CourseConsumptionComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        setTimeout(function () {
            var params = _this.activatedRoute.snapshot.params;
            _this.telemetryImpression = {
                context: {
                    env: _this.activatedRoute.snapshot.data.telemetry.env
                },
                edata: {
                    uri: 'dashboard/activity/course/consumption/' + params.id + '/' + params.timePeriod,
                    type: _this.activatedRoute.snapshot.data.telemetry.type,
                    pageid: _this.activatedRoute.snapshot.data.telemetry.pageid,
                    duration: _this.navigationhelperService.getPageLoadTime()
                },
                object: {
                    id: params.id,
                    type: 'Course',
                    ver: '1.0'
                }
            };
        });
    };
    CourseConsumptionComponent.prototype.ngOnDestroy = function () {
        this.unsubscribe.next();
        this.unsubscribe.complete();
    };
    return CourseConsumptionComponent;
}());



/***/ }),

/***/ "cKUk":
/*!*********************************************************************************!*\
  !*** ./src/app/modules/dashboard/components/data-table/data-table.component.ts ***!
  \*********************************************************************************/
/*! exports provided: DataTableComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DataTableComponent", function() { return DataTableComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "8Y7J");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jquery */ "EVdn");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var datatables_net__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! datatables.net */ "FlOX");
/* harmony import */ var datatables_net__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(datatables_net__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _assets_libs_naturalSortDataTablePlugin__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./../../../../../assets/libs/naturalSortDataTablePlugin */ "VC+i");
/* harmony import */ var _assets_libs_naturalSortDataTablePlugin__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_assets_libs_naturalSortDataTablePlugin__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! moment */ "VDUF");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var lodash_es__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! lodash-es */ "T89o");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};
var __spreadArrays = (undefined && undefined.__spreadArrays) || function () {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
};





var GRADE_HEADER = 'Grade';

var DataTableComponent = (function () {
    function DataTableComponent() {
        this.columnDefinations = [];
        this.rowClickEvent = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.options = {};
    }
    DataTableComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        this.rowsData && _assets_libs_naturalSortDataTablePlugin__WEBPACK_IMPORTED_MODULE_3__();
        var columnDefs = [{
                'targets': 0,
                'render': function (data) {
                    var date = moment__WEBPACK_IMPORTED_MODULE_4__(data, 'DD-MM-YYYY');
                    if (date.isValid()) {
                        return "<td><span style=\"display:none\">\n                    " + moment__WEBPACK_IMPORTED_MODULE_4__(data, 'DD-MM-YYYY').format('YYYYMMDD') + "</span> " + data + "</td>";
                    }
                    return data;
                }
            }];
        var gradeIndex = lodash_es__WEBPACK_IMPORTED_MODULE_5__["indexOf"](this.headerData, GRADE_HEADER);
        if (gradeIndex !== 1) {
            columnDefs.push({
                targets: gradeIndex,
                type: 'natural'
            });
        }
        setTimeout(function () {
            var table = jquery__WEBPACK_IMPORTED_MODULE_1__("#" + _this.tableId).removeAttr('width').DataTable(__assign({ retrieve: true, 'columnDefs': __spreadArrays([
                    {
                        'targets': 0,
                        'render': function (data) {
                            var date = moment__WEBPACK_IMPORTED_MODULE_4__(data, 'DD-MM-YYYY');
                            if (date.isValid()) {
                                return "<td><span style=\"display:none\">\n                                " + moment__WEBPACK_IMPORTED_MODULE_4__(data, 'DD-MM-YYYY').format('YYYYMMDD') + "</span> " + data + "</td>";
                            }
                            return data;
                        },
                    }
                ], _this.columnDefinations), 'data': _this.rowsData, searching: false }, _this.options));
            jquery__WEBPACK_IMPORTED_MODULE_1__("#" + _this.tableId + " tbody").on('click', 'tr', function (event) {
                var data = table.row(event.currentTarget).data();
                _this.rowClickEvent.emit(data);
            });
        }, 100);
    };
    return DataTableComponent;
}());



/***/ }),

/***/ "epgD":
/*!***************************************************************************!*\
  !*** ./src/app/modules/dashboard/components/dataset/dataset.component.ts ***!
  \***************************************************************************/
/*! exports provided: DatasetComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DatasetComponent", function() { return DatasetComponent; });
/* harmony import */ var _sunbird_shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @sunbird/shared */ "btWG");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/router */ "iInd");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ "8Y7J");
/* harmony import */ var _services__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../services */ "gfN8");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/forms */ "s7LF");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! rxjs */ "qCKp");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs/operators */ "kU1M");
/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! dayjs */ "Wgwc");
/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var lodash_es__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! lodash-es */ "T89o");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! jquery */ "EVdn");
/* harmony import */ var jquery__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var datatables_net__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! datatables.net */ "FlOX");
/* harmony import */ var datatables_net__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(datatables_net__WEBPACK_IMPORTED_MODULE_10__);
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};











var DatasetComponent = (function () {
    function DatasetComponent(datasetService, formBuilder, reportService, activatedRoute, resourceService) {
        this.datasetService = datasetService;
        this.formBuilder = formBuilder;
        this.reportService = reportService;
        this.activatedRoute = activatedRoute;
        this.resourceService = resourceService;
        this.showLoader = false;
        this.options = { maxLines: 1000, printMargin: false };
        this.customTimePicker = new rxjs__WEBPACK_IMPORTED_MODULE_5__["BehaviorSubject"]({ from: dayjs__WEBPACK_IMPORTED_MODULE_7___default()().subtract(7, 'day').toDate(), to: dayjs__WEBPACK_IMPORTED_MODULE_7___default()().subtract(1, 'day').toDate() });
        this.getDefaultTableOptions = function () { return ({
            paging: true,
            lengthChange: false,
            searching: false,
            ordering: true,
            info: false,
            autoWidth: true
        }); };
    }
    Object.defineProperty(DatasetComponent.prototype, "pickerMaxDate", {
        get: function () {
            return dayjs__WEBPACK_IMPORTED_MODULE_7___default()().subtract(1, 'day').toDate();
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DatasetComponent.prototype, "pickerMinDate", {
        get: function () {
            if (Object(lodash_es__WEBPACK_IMPORTED_MODULE_8__["get"])(this.dataset, 'dataAvailableFrom')) {
                return dayjs__WEBPACK_IMPORTED_MODULE_7___default()(this.dataset.dataAvailableFrom).toDate();
            }
            return dayjs__WEBPACK_IMPORTED_MODULE_7___default()().subtract(6, 'month').toDate();
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(DatasetComponent.prototype, "initTable", {
        set: function (element) {
            if (!element) {
                return;
            }
            this.prepareTable(element.nativeElement);
        },
        enumerable: false,
        configurable: true
    });
    DatasetComponent.prototype.onMarkdownChange = function (updatedData, type) {
        this[type] = updatedData;
    };
    DatasetComponent.prototype.prepareForm = function () {
        this.timeRangePicker = this.formBuilder.group({
            from: [dayjs__WEBPACK_IMPORTED_MODULE_7___default()().subtract(7, 'day').toDate()],
            to: [dayjs__WEBPACK_IMPORTED_MODULE_7___default()().subtract(1, 'day').toDate()]
        });
        this.subscribeToTimePicker();
    };
    DatasetComponent.prototype.ngOnInit = function () {
        this.prepareForm();
        this.setMarkdowns();
    };
    DatasetComponent.prototype.setMarkdowns = function () {
        var _a = this.dataset || {}, _b = _a.dataDictionary, dataDictionary = _b === void 0 ? '' : _b, _c = _a.examples, examples = _c === void 0 ? '' : _c;
        try {
            this.dataDictionary = atob(dataDictionary);
            this.examples = atob(examples);
        }
        catch (error) {
            console.error(error);
            this.dataDictionary = this.examples = '';
        }
    };
    DatasetComponent.prototype.subscribeToTimePicker = function () {
        var _this = this;
        this.subscription = this.customTimePicker.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["tap"])(function (res) { return _this.showLoader = true; }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["distinctUntilChanged"])(function (p, n) { return JSON.stringify(p) === JSON.stringify(n); }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["filter"])(function (res) { return res.from && res.to && res.from <= res.to; }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["switchMap"])(function (res) {
            var dateRange = _this.getDateRange(res.from, res.to, false);
            var chunks = _this.getDateChunks(dateRange);
            return rxjs__WEBPACK_IMPORTED_MODULE_5__["zip"].apply(void 0, Object(lodash_es__WEBPACK_IMPORTED_MODULE_8__["map"])(chunks, function (chunkObj) {
                var from = chunkObj[0], to = chunkObj[1];
                return _this.getDataset({ from: dayjs__WEBPACK_IMPORTED_MODULE_7___default()(from), to: dayjs__WEBPACK_IMPORTED_MODULE_7___default()(to) });
            }));
        })).subscribe(function (data) {
            _this.showLoader = false;
            _this.reRenderTable(data);
        }, function (err) {
            _this.showLoader = false;
        });
    };
    DatasetComponent.prototype.reRenderTable = function (data) {
        this.data = Object(lodash_es__WEBPACK_IMPORTED_MODULE_8__["flatMap"])(data);
        if (this.table) {
            this.table.clear();
            this.table.rows.add(this.data);
            this.table.draw();
        }
    };
    DatasetComponent.prototype.onSubmit = function () {
        this.customTimePicker.next(this.timeRangePicker.value);
    };
    DatasetComponent.prototype.getDataset = function (_a) {
        var _b;
        var _c = _a.from, from = _c === void 0 ? dayjs__WEBPACK_IMPORTED_MODULE_7___default()().subtract(7, 'day') : _c, _d = _a.to, to = _d === void 0 ? dayjs__WEBPACK_IMPORTED_MODULE_7___default()().subtract(1, 'day') : _d;
        var dateRange = this.getDateRange(from, to);
        var hash = this.activatedRoute.snapshot.params.hash;
        return this.datasetService.getDataSet(__assign({ datasetId: this.dataset.datasetId || 'raw', from: from.format('YYYY-MM-DD'), to: to.format('YYYY-MM-DD') }, (hash && {
            header: (_b = {},
                _b['X-Channel-Id'] = atob(hash),
                _b)
        })))
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["map"])(function (response) {
            var periodWiseFiles = response.periodWiseFiles;
            return Object(lodash_es__WEBPACK_IMPORTED_MODULE_8__["map"])(dateRange, function (date) {
                var files = Object(lodash_es__WEBPACK_IMPORTED_MODULE_8__["get"])(periodWiseFiles, date);
                var _a = Object(lodash_es__WEBPACK_IMPORTED_MODULE_8__["partition"])(files, function (val) { return val.includes('.json'); }), _b = _a[0], json = _b === void 0 ? [] : _b, _c = _a[1], csv = _c === void 0 ? [] : _c;
                return { date: date, json: json, csv: csv };
            });
        }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["catchError"])(function (err) {
            return Object(rxjs__WEBPACK_IMPORTED_MODULE_5__["of"])([]);
        }));
    };
    DatasetComponent.prototype.getDateRange = function (startDate, endDate, formatted) {
        if (formatted === void 0) { formatted = true; }
        var dates = [];
        while (startDate <= endDate) {
            var date = dayjs__WEBPACK_IMPORTED_MODULE_7___default()(startDate);
            if (formatted) {
                dates.push(date.format('YYYY-MM-DD'));
            }
            else {
                dates.push(date.toDate());
            }
            startDate = date.add(1, 'day');
        }
        return dates;
    };
    DatasetComponent.prototype.getDateChunks = function (dates, chunkSize) {
        if (chunkSize === void 0) { chunkSize = 7; }
        var chunks = Object(lodash_es__WEBPACK_IMPORTED_MODULE_8__["chunk"])(dates, chunkSize);
        return Object(lodash_es__WEBPACK_IMPORTED_MODULE_8__["map"])(chunks, function (chunkObj) { return [Object(lodash_es__WEBPACK_IMPORTED_MODULE_8__["first"])(chunkObj), Object(lodash_es__WEBPACK_IMPORTED_MODULE_8__["last"])(chunkObj)]; });
    };
    DatasetComponent.prototype.getPickerMinDate = function () {
        var startDate = Object(lodash_es__WEBPACK_IMPORTED_MODULE_8__["get"])(this.timeRangePicker.get('from'), 'value');
        if (!startDate) {
            return this.pickerMinDate;
        }
        return startDate;
    };
    DatasetComponent.prototype.getPickerMaxDate = function () {
        var endDate = Object(lodash_es__WEBPACK_IMPORTED_MODULE_8__["get"])(this.timeRangePicker.get('to'), 'value');
        if (!endDate) {
            return this.pickerMaxDate;
        }
        return endDate;
    };
    DatasetComponent.prototype.ngOnDestroy = function () {
        this.subscription.unsubscribe();
    };
    DatasetComponent.prototype.handleDownload = function (event) {
        var fileType = event.target.getAttribute('filetype');
        var tr = jquery__WEBPACK_IMPORTED_MODULE_9__(event.currentTarget).closest('tr');
        var row = this.table.row(tr);
        var data = row.data();
        Object(lodash_es__WEBPACK_IMPORTED_MODULE_8__["forEach"])(data[fileType], function (file) {
            window.open(file, '_blank');
        });
    };
    DatasetComponent.prototype.prepareTable = function (el) {
        var _this = this;
        this.table = jquery__WEBPACK_IMPORTED_MODULE_9__(el).DataTable(__assign(__assign({}, this.getDefaultTableOptions()), { data: this.data || [], columns: [
                {
                    title: 'Date',
                    data: 'date',
                    class: 'dt-center'
                },
                {
                    title: 'Download Files',
                    class: 'dt-center download-datasets',
                    render: function (data, type, row) {
                        var downloadFormat = _this.dataset.downloadFormats || ['json', 'csv'];
                        var html = "<div>\n            " + downloadFormat.map(function (format) {
                            return "<button filetype=\"" + format + "\" class=\"sb-btn sb-btn-primary sb-left-icon-btn sb-btn-normal " + (row[format] && !row[format].length ? 'sb-btn-disabled' : '') + "\">\n              <i class=\"download icon\"></i>" + format.toUpperCase() + "</button>";
                        }) + "\n             </div>";
                        return html;
                    }
                }
            ] }));
        jquery__WEBPACK_IMPORTED_MODULE_9__(el).on('click', '.download-datasets', this.handleDownload.bind(this));
        jquery__WEBPACK_IMPORTED_MODULE_9__(el).removeClass('no-footer');
    };
    DatasetComponent.prototype.handleMarkdownSubmission = function (event) {
        this.markdownUpdated$.next({ data: this[event], type: event });
    };
    return DatasetComponent;
}());



/***/ }),

/***/ "eqls":
/*!***************************************************************************************!*\
  !*** ./src/app/modules/dashboard/components/usage-reports/usage-reports.component.ts ***!
  \***************************************************************************************/
/*! exports provided: UsageReportsComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "UsageReportsComponent", function() { return UsageReportsComponent; });
/* harmony import */ var _sunbird_telemetry__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @sunbird/telemetry */ "RnNo");
/* harmony import */ var _services__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../../services */ "gfN8");
/* harmony import */ var lodash_es__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! lodash-es */ "T89o");
/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! dayjs */ "Wgwc");
/* harmony import */ var dayjs__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _angular_platform_browser__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/platform-browser */ "cUpR");
/* harmony import */ var _sunbird_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @sunbird/core */ "q/PB");
/* harmony import */ var _sunbird_shared__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @sunbird/shared */ "btWG");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/router */ "iInd");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! rxjs */ "qCKp");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! rxjs/operators */ "kU1M");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (undefined && undefined.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (_) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};










var UsageReportsComponent = (function () {
    function UsageReportsComponent(usageService, sanitizer, userService, toasterService, resourceService, activatedRoute, router, navigationhelperService, layoutService, courseProgressService, tncService) {
        this.usageService = usageService;
        this.sanitizer = sanitizer;
        this.userService = userService;
        this.toasterService = toasterService;
        this.resourceService = resourceService;
        this.router = router;
        this.navigationhelperService = navigationhelperService;
        this.layoutService = layoutService;
        this.tncService = tncService;
        this.chartData = [];
        this.isTableDataLoaded = false;
        this.isFileDataLoaded = false;
        this.showLoader = false;
        this.unsubscribe$ = new rxjs__WEBPACK_IMPORTED_MODULE_8__["Subject"]();
        this.showTncPopup = false;
        this.activatedRoute = activatedRoute;
        this.courseProgressService = courseProgressService;
    }
    UsageReportsComponent.prototype.ngOnInit = function () {
        var _this = this;
        this.initLayout();
        var reportsLocation = document.getElementById('reportsLocation') ? document.getElementById('reportsLocation').value : '';
        this.slug = lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](this.userService, 'userProfile.rootOrg.slug');
        this.userService.userData$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_9__["first"])()).subscribe(function (user) { return __awaiter(_this, void 0, void 0, function () {
            return __generator(this, function (_a) {
                if (user && user.userProfile) {
                    this.userProfile = user.userProfile;
                    this.getReportViewerTncPolicy();
                }
                return [2];
            });
        }); });
        this.usageService.getData("/" + reportsLocation + "/" + this.slug + "/config.json")
            .subscribe(function (data) {
            if (lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](data, 'responseCode') === 'OK') {
                _this.noResult = false;
                _this.reportMetaData = lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](data, 'result');
                if (_this.reportMetaData[0]) {
                    _this.renderReport(_this.reportMetaData[0]);
                }
            }
        }, function (err) {
            console.log(err);
            _this.noResultMessage = {
                'messageText': 'messages.stmsg.m0131'
            };
            _this.noResult = true;
        });
    };
    UsageReportsComponent.prototype.setTelemetryInteractObject = function (val) {
        return {
            id: val,
            type: 'Report',
            ver: '1.0'
        };
    };
    UsageReportsComponent.prototype.initLayout = function () {
        var _this = this;
        this.layoutConfiguration = this.layoutService.initlayoutConfig();
        this.layoutService.switchableLayout().pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_9__["takeUntil"])(this.unsubscribe$)).subscribe(function (layoutConfig) {
            if (layoutConfig != null) {
                _this.layoutConfiguration = layoutConfig.layout;
            }
        });
    };
    UsageReportsComponent.prototype.setTelemetryInteractEdata = function (val) {
        return {
            id: val,
            type: 'click',
            pageid: this.activatedRoute.snapshot.data.telemetry.pageid
        };
    };
    UsageReportsComponent.prototype.renderReport = function (report) {
        var _this = this;
        this.chartData = [];
        this.tables = [];
        this.files = [];
        this.currentReport = report;
        this.isTableDataLoaded = false;
        var url = report.dataSource;
        this.showLoader = true;
        this.downloadUrl = report.downloadUrl;
        this.usageService.getData(url)
            .subscribe(function (response) {
            if (lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](response, 'responseCode') === 'OK') {
                var data = lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](response, 'result');
                _this.showLoader = false;
                if (lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](report, 'charts')) {
                    _this.createChartData(lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](report, 'charts'), data, url);
                }
                if (lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](report, 'table')) {
                    _this.renderTable(lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](report, 'table'), data);
                }
                else {
                    _this.renderTable({}, data);
                }
                if (lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](report, 'files')) {
                    _this.renderFiles(lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](report, 'files'), data);
                }
                else {
                    _this.renderFiles({}, data);
                }
            }
            else {
            }
        }, function (err) { console.log(err); });
    };
    UsageReportsComponent.prototype.renderFiles = function (files, data) {
        var _this = this;
        this.files = [];
        lodash_es__WEBPACK_IMPORTED_MODULE_2__["forEach"](files, function (file) {
            var fileData = {};
            fileData.id = lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](file, 'id');
            fileData.name = lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](file, 'name');
            fileData.desc = lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](file, 'description');
            fileData.size = lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](file, 'fileSize');
            fileData.createdOn = lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](file, 'createdOn');
            fileData.downloadUrl = lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](file, 'downloadUrl');
            _this.files.push(fileData);
        });
        if (this.files.length) {
            this.isFileDataLoaded = true;
        }
        else {
            this.isFileDataLoaded = false;
        }
        lodash_es__WEBPACK_IMPORTED_MODULE_2__["forEach"](this.files, function (file) {
            var path = (file.downloadUrl).replace('/reports/', '');
            var requestParams = {
                params: {
                    fileNames: JSON.stringify({ path: path })
                },
                telemetryData: _this.activatedRoute
            };
            _this.courseProgressService.getReportsMetaData(requestParams).subscribe(function (response) {
                if (lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](response, 'responseCode') === 'OK') {
                    file.size = (lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](response, 'result.path.fileSize')) / 1024;
                    if (lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](response, 'result.path.lastModified')) {
                        file.createdOn = dayjs__WEBPACK_IMPORTED_MODULE_3___default()(new Date(lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](response, 'result.path.lastModified'))).format('DD MMM YYYY');
                    }
                    else {
                        file.createdOn = '';
                    }
                }
            });
        });
    };
    UsageReportsComponent.prototype.createChartData = function (charts, data, downloadUrl) {
        var _this = this;
        this.chartData = [];
        lodash_es__WEBPACK_IMPORTED_MODULE_2__["forEach"](charts, function (chart) {
            var chartObj = {};
            chartObj.chartConfig = chart;
            chartObj.downloadUrl = downloadUrl;
            chartObj.chartData = lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](data, 'data');
            chartObj.lastUpdatedOn = lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](data, 'metadata.lastUpdatedOn');
            _this.chartData.push(chartObj);
        });
    };
    UsageReportsComponent.prototype.renderTable = function (tables, data) {
        var _this = this;
        this.tables = [];
        tables = lodash_es__WEBPACK_IMPORTED_MODULE_2__["isArray"](tables) ? tables : [tables];
        lodash_es__WEBPACK_IMPORTED_MODULE_2__["forEach"](tables, function (table) {
            var tableData = {};
            tableData.id = lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](table, 'id') || "table-" + lodash_es__WEBPACK_IMPORTED_MODULE_2__["random"](1000);
            tableData.name = lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](table, 'name') || 'Table';
            tableData.header = lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](table, 'columns') || lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](data, lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](table, 'columnsExpr'));
            tableData.data = lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](table, 'values') || lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](data, lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](table, 'valuesExpr'));
            tableData.downloadUrl = lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](table, 'downloadUrl') || _this.downloadUrl;
            _this.tables.push(tableData);
        });
        this.isTableDataLoaded = true;
    };
    UsageReportsComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        setTimeout(function () {
            _this.telemetryImpression = {
                context: {
                    env: _this.activatedRoute.snapshot.data.telemetry.env
                },
                object: {
                    id: _this.userService.userid,
                    type: 'user',
                    ver: '1.0'
                },
                edata: {
                    type: _this.activatedRoute.snapshot.data.telemetry.type,
                    pageid: _this.activatedRoute.snapshot.data.telemetry.pageid,
                    uri: _this.router.url,
                    duration: _this.navigationhelperService.getPageLoadTime()
                }
            };
        });
    };
    UsageReportsComponent.prototype.setDownloadUrl = function (url) {
        this.downloadUrl = url;
    };
    UsageReportsComponent.prototype.downloadCSV = function (filepath) {
        var _this = this;
        if (!filepath) {
            filepath = this.downloadUrl;
        }
        this.usageService.getData(filepath).subscribe(function (response) {
            if (lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](response, 'responseCode') === 'OK') {
                var url = lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](response, 'result.signedUrl');
                if (url) {
                    window.open(url, '_blank');
                }
            }
            else {
                _this.toasterService.error(_this.resourceService.messages.emsg.m0076);
            }
        }, function (err) {
            _this.toasterService.error(_this.resourceService.messages.emsg.m0076);
        });
    };
    UsageReportsComponent.prototype.transformHTML = function (data) {
        return this.sanitizer.bypassSecurityTrustHtml(data);
    };
    UsageReportsComponent.prototype.selectedTabChange = function (event) {
        var downloadURL = lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](event, 'tab.textLabel').downloadURL;
        downloadURL && this.setDownloadUrl(downloadURL);
    };
    UsageReportsComponent.prototype.getReportViewerTncPolicy = function () {
        var _this = this;
        this.tncService.getReportViewerTnc().subscribe(function (data) {
            var reportViewerTncData = JSON.parse(lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](data, 'result.response.value'));
            if (lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](reportViewerTncData, 'latestVersion')) {
                _this.reportViewerTncVersion = lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](reportViewerTncData, 'latestVersion');
                _this.reportViewerTncUrl = lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](reportViewerTncData, lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](reportViewerTncData, 'latestVersion')), 'url');
                _this.showReportViewerTncForFirstUser();
            }
        });
    };
    UsageReportsComponent.prototype.showReportViewerTncForFirstUser = function () {
        var reportViewerTncObj = lodash_es__WEBPACK_IMPORTED_MODULE_2__["get"](this.userProfile, 'allTncAccepted.reportViewerTnc');
        if (!reportViewerTncObj) {
            this.showTncPopup = true;
        }
    };
    return UsageReportsComponent;
}());



/***/ }),

/***/ "g8j1":
/*!*****************************************************************************************!*\
  !*** ./src/app/modules/dashboard/components/content-report/content-report.component.ts ***!
  \*****************************************************************************************/
/*! exports provided: ContentReportComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ContentReportComponent", function() { return ContentReportComponent; });
/* harmony import */ var chart_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! chart.js */ "MO+k");
/* harmony import */ var chart_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(chart_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _sunbird_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @sunbird/core */ "q/PB");
/* harmony import */ var _services_report_report_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../services/report/report.service */ "t7hn");
/* harmony import */ var _sunbird_shared__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @sunbird/shared */ "btWG");
/* harmony import */ var lodash_es__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! lodash-es */ "T89o");
/* harmony import */ var _services_addusser_addusser_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../services/addusser/addusser.service */ "9r3v");






var ContentReportComponent = (function () {
    function ContentReportComponent(_httpService, reportService, searchService, toasterService, resourceService) {
        this._httpService = _httpService;
        this.reportService = reportService;
        this.searchService = searchService;
        this.toasterService = toasterService;
        this.resourceService = resourceService;
        this.organizationTab = true;
        this.userTab = true;
        this.cityList = [];
        this.userList = [];
        this.noResult = true;
        this.popupTitle = "Content wise Graphical Reports";
        this.selectedItems = [];
        this.addUserPopup = false;
        this.i = 0;
        this.Graph_Data_List = [];
        this.Table_Data_List = [];
        this.G1_Group_list = [];
        this.G2_Group_list = [];
        this.G3_Group_list = [];
        this.G4_Group_list = [];
        this.strList = "";
        this.colsUser = [];
    }
    ContentReportComponent.prototype.ngOnInit = function () {
        this.getContentList();
        this.colsUser = [
            { field: 'SNo', header: 'SNo', width: '50px' },
            { field: 'creator', header: 'Creator', width: '150px' },
            { field: 'subject', header: 'Subject', width: '150px' },
            { field: 'organisation', header: 'Organisation', width: '150px' },
            { field: 'Category', header: 'Category', width: '150px' },
            { field: 'name', header: 'Name', width: '150px' },
            { field: 'contentType', header: 'ContentType', width: '150px' },
            { field: 'copyright', header: 'Copyright', width: '150px' },
        ];
    };
    ContentReportComponent.prototype.getContentList = function () {
        var _this = this;
        var data = {
            "request": {
                "query": "",
                "filters": { "status": ["Live"],
                    "framework": ["nulp"],
                    "contentType": ["Course", 'Resource', 'Collection'] },
                "limit": "1000",
                "sort_by": { "lastUpdatedOn": "desc" },
                "fields": ["identifier", "creator", "organisation", "copyright",
                    "name", "contentType", "createdFor", "channel",
                    "board", "medium", "gradeLevel", "subject",
                    "lastUpdatedOn", "status", "createdBy",
                    "framework", "createdOn", "lastPublishedOn"]
            }
        };
        this.reportService.getContentCreationStaticsReport(data).subscribe(function (response) {
            if (lodash_es__WEBPACK_IMPORTED_MODULE_4__["get"](response, 'responseCode') === 'OK') {
                if (response.result.count > 0) {
                    var tableData = [];
                    var tempObj = lodash_es__WEBPACK_IMPORTED_MODULE_4__["cloneDeep"](response.result.content);
                    tableData = tempObj;
                    var self = _this;
                    var ChnlIds = [];
                    var UserIds = [];
                    ChnlIds = lodash_es__WEBPACK_IMPORTED_MODULE_4__["uniq"](lodash_es__WEBPACK_IMPORTED_MODULE_4__["map"](tempObj, 'channel'));
                    UserIds = lodash_es__WEBPACK_IMPORTED_MODULE_4__["uniq"](lodash_es__WEBPACK_IMPORTED_MODULE_4__["map"](tempObj, 'createdBy'));
                    var reqParam = { filters: { id: UserIds } };
                    _this.searchService.getUserList(reqParam).subscribe(function (response) {
                        _this.userList = [];
                        var userObj = lodash_es__WEBPACK_IMPORTED_MODULE_4__["cloneDeep"](response.result.response.content);
                        _this.userList = userObj;
                        var reqPayload = { "request": { "filters": { "id": ChnlIds, "isTenant": true } } };
                        _this.reportService.getOrganizationName(reqPayload).subscribe(function (response) {
                            _this.cityList = [];
                            var cityObj = lodash_es__WEBPACK_IMPORTED_MODULE_4__["cloneDeep"](response.result.response.content);
                            _this.cityList = cityObj;
                            _this.cityList = lodash_es__WEBPACK_IMPORTED_MODULE_4__["reject"](response.result.response.content, function (obj) { return lodash_es__WEBPACK_IMPORTED_MODULE_4__["isEmpty"](obj.orgName); });
                            _this.InitializeGraph(tableData);
                        });
                    });
                }
                else {
                    _this.noResultMessage = { 'messageText': 'messages.stmsg.m0131' };
                    _this.noResult = true;
                }
            }
            else {
                _this.toasterService.error(_this.resourceService.messages.emsg.m0007);
            }
        }, function (err) {
            console.log(err);
            _this.toasterService.error(_this.resourceService.messages.emsg.m0007);
        });
    };
    ContentReportComponent.prototype.InitializeGraph = function (C_List) {
        var _this = this;
        if (this.cityList.length > 0) {
        }
        this.userList.forEach(function (element) {
            _this.cityList.forEach(function (element1) {
                if (element.organisations.length > 1) {
                    if ((element1.identifier == element.organisations[1].organisationId) &&
                        (element.rootOrgId != element.organisations[1].organisationId)) {
                        element.orgNameUser_new = element1.orgName;
                        element.orgTypeUser_new = 'Sub Organization';
                    }
                    else if (element.rootOrgId == element.organisations[1].organisationId) {
                        element.orgNameUser_new = element.organisations[0].orgName;
                        element.orgTypeUser_new = 'Sub Organization';
                    }
                    else {
                        element.orgNameUser_new = element.organisations[1].orgName;
                        element.orgTypeUser_new = 'Sub Organization';
                    }
                }
                else if (element.organisations.length == 1) {
                    element.orgNameUser_new = element.organisations[0].orgName;
                    element.orgTypeUser_new = 'Root  Organization';
                }
            });
        });
        var groupedUserData = this.userList.reduce(function (rv, x) {
            (rv[x['orgNameUser_new']] = rv[x['orgNameUser_new']] || []).push(x);
            return rv;
        }, {});
        this.Graph_Data_List = [];
        C_List.forEach(function (x) {
            var CityTraced = _this.cityList.find(function (el) { return el.id === x.channel; });
            var UserTraced = _this.userList.find(function (el) { return el.id === x.createdBy; });
            _this.Graph_Data_List.push({
                "identifier": x.identifier,
                "copyright": x.copyright,
                "createdFor": x.createdFor,
                "creator": x.creator,
                "subject": x.subject,
                "channel": x.channel,
                "organisation": x.organisation,
                "RootOrgName_new_user": CityTraced["orgName"],
                "rootOrgName_new_city": UserTraced["rootOrgName"],
                "orgNameUser_new": UserTraced["orgNameUser_new"],
                "orgTypeUser_new": UserTraced["orgTypeUser_new"],
                "lastNameUser_new": UserTraced["lastName"],
                "createdBy": x.createdBy,
                "medium": x.medium,
                "name": x.name,
                "createdOn": x.createdOn,
                "objectType": x.objectType,
                "gradeLevel": x.gradeLevel,
                "framework": x.framework,
                "contentType": x.contentType,
                "Category": x.board,
                "lastPublishedOn": x.lastPublishedOn,
                "lastUpdatedOn": x.lastUpdatedOn,
                "status": x.status
            });
        });
        this.Graph_Data_List.sort(function (a, b) {
            if (a.createdBy < b.createdBy)
                return -1;
            if (a.createdBy > b.createdBy)
                return 1;
            return 0;
        });
        this.GeneratingChannelList(this.Graph_Data_List);
    };
    ContentReportComponent.prototype.GeneratingChannelList = function (ResultCN) {
        var _this = this;
        var G1_Name = [];
        var G1_Value = [];
        var G1_Filter = [];
        var G1_Colour = [];
        this.G1_Group_list = this.groupBy1(ResultCN, "channel");
        Object.keys(this.G1_Group_list).forEach(function (x) {
            var xx = _this.G1_Group_list[x];
            G1_Name.push(xx[0].RootOrgName_new_user);
            G1_Value.push(_this.G1_Group_list[x].length);
            G1_Filter.push(xx[0].channel);
            G1_Colour.push(_this.getRandomColorHex());
        });
        this.G1_Chart(G1_Name, G1_Value, G1_Filter, G1_Colour);
    };
    ContentReportComponent.prototype.G1_Chart = function (G1_Name, G1_Value, G1_Filter, G1_Colour) {
        if (this.G1_Piechart) {
            this.G1_Piechart.destroy();
        }
        this.G1_Piechart = new chart_js__WEBPACK_IMPORTED_MODULE_0__["Chart"]('G1_Canvas', {
            type: 'bar',
            data: {
                labels: G1_Name,
                datasets: [{
                        data: G1_Value,
                        borderSkipped: G1_Filter,
                        backgroundColor: G1_Colour,
                        fill: true
                    }
                ]
            },
            options: {
                title: { display: true, text: "Aggregated Organization wise Contents ", fontSize: 18, fontColor: "#111", },
                legend: { display: false, labels: { fontColor: "green", } },
                scales: {
                    xAxes: [{ scaleLabel: { display: true, labelString: 'Organization' } }],
                    yAxes: [{ scaleLabel: { display: true, labelString: 'Number of Content' } }],
                },
            }
        });
    };
    ContentReportComponent.prototype.G1_Chart_showData = function (evt) {
        this.resetGraph('G1');
        var activePoint = this.G1_Piechart.getElementAtEvent(evt);
        if (activePoint.length > 0) {
            var filter_data = activePoint[0]._model.borderSkipped;
            this.G2_Group_list = this.groupBy1(this.G1_Group_list[filter_data], "Category");
            this.G3_Group_list = this.groupBy(this.G1_Group_list[filter_data], function (item) {
                return [item.orgTypeUser_new, item.orgNameUser_new];
            });
            this.GeneratingCategoryChart(this.G2_Group_list);
            this.GeneratingOrg_TypeChart(this.G3_Group_list);
        }
    };
    ContentReportComponent.prototype.GeneratingCategoryChart = function (ResultTT) {
        var _this = this;
        var G2_Name = [];
        var G2_Value = [];
        var G2_Filter = [];
        var G2_Colour = [];
        Object.keys(ResultTT).forEach(function (x) {
            G2_Name.push(x);
            G2_Value.push(ResultTT[x].length);
            G2_Filter.push(x);
            G2_Colour.push(_this.getRandomColorHex());
        });
        this.G2_Chart(G2_Name, G2_Value, G2_Filter, G2_Colour);
    };
    ContentReportComponent.prototype.G2_Chart = function (G2_Name, G2_Value, G2_Filter, G2_Colour) {
        if (this.G2_Piechart) {
            this.G2_Piechart.destroy();
        }
        this.G2_Piechart = new chart_js__WEBPACK_IMPORTED_MODULE_0__["Chart"]('G2_Canvas', {
            type: 'bar',
            data: {
                labels: G2_Name,
                datasets: [{
                        data: G2_Value,
                        borderSkipped: G2_Filter,
                        backgroundColor: G2_Colour,
                        fill: true
                    }
                ]
            },
            options: {
                legend: { display: false },
                title: { display: true, text: "Category wise Contents based on Aggregated Organization", fontSize: 18, fontColor: "#111", },
                scales: {
                    xAxes: [{ scaleLabel: { display: true, labelString: 'Categories' } }],
                    yAxes: [{ scaleLabel: { display: true, labelString: 'Number of Content' } }],
                },
            }
        });
    };
    ContentReportComponent.prototype.G2_Chart_showData = function (evt) {
        this.resetGraph('G2');
        var data = this.G2_Piechart.getElementsAtEvent(evt);
        var activePoint = this.G2_Piechart.getElementAtEvent(evt);
        if (activePoint.length > 0) {
            var clickedDatasetIndex = activePoint[0]._datasetIndex;
            var clickedElementindex = activePoint[0]._index;
            var filter_data = activePoint[0]._model.borderSkipped;
            var label = this.G2_Piechart.data.labels[clickedElementindex];
            var value = this.G2_Piechart.data.datasets[clickedDatasetIndex].data[clickedElementindex];
            this.loadGridView(this.G2_Group_list[filter_data]);
            this.popupTitle = "List of Courses Created under '" + filter_data + "' Category ";
        }
    };
    ContentReportComponent.prototype.GeneratingOrg_TypeChart = function (ResultCC) {
        var _this = this;
        var G3_Name = [];
        var G3_Value = [];
        var G3_Filter = [];
        var G3_Colour = [];
        Object.keys(ResultCC).forEach(function (x) {
            var Obj = ResultCC[x];
            G3_Name.push(Obj[0].orgNameUser_new);
            G3_Value.push(ResultCC[x].length);
            G3_Filter.push(x);
            G3_Colour.push(_this.getRandomColorHex());
        });
        this.G3_Chart(G3_Name, G3_Value, G3_Filter, G3_Colour);
    };
    ContentReportComponent.prototype.G3_Chart = function (G3_Name, G3_Value, G3_Filter, G3_Colour) {
        if (this.G3_Piechart) {
            this.G3_Piechart.destroy();
        }
        this.G3_Piechart = new chart_js__WEBPACK_IMPORTED_MODULE_0__["Chart"]('G3_Canvas', {
            type: 'bar',
            data: {
                labels: G3_Name,
                datasets: [{
                        data: G3_Value,
                        borderSkipped: G3_Filter,
                        backgroundColor: G3_Colour,
                        fill: true
                    }
                ]
            },
            options: {
                legend: { display: false },
                title: { display: true, text: "Root/Subroot Organization wise Contents", fontSize: 18, fontColor: "#111", },
                scales: {
                    xAxes: [{ scaleLabel: { display: true, labelString: 'Organization' } }],
                    yAxes: [{ scaleLabel: { display: true, labelString: 'Number of Content' } }],
                },
            }
        });
    };
    ContentReportComponent.prototype.G3_Chart_showData = function (evt) {
        this.resetGraph('G3');
        var activePoint = this.G3_Piechart.getElementAtEvent(evt);
        if (activePoint.length > 0) {
            var clickedDatasetIndex = activePoint[0]._datasetIndex;
            var clickedElementindex = activePoint[0]._index;
            var filter_data = activePoint[0]._model.borderSkipped;
            var label = this.G3_Piechart.data.labels[clickedElementindex];
            var value = this.G3_Piechart.data.datasets[clickedDatasetIndex].data[clickedElementindex];
            this.G4_Group_list = this.groupBy1(this.G3_Group_list[filter_data], "Category");
            this.ContentChart(this.G4_Group_list);
        }
    };
    ContentReportComponent.prototype.ContentChart = function (ResultTT) {
        var _this = this;
        var G4_Name = [];
        var G4_Value = [];
        var G4_Filter = [];
        var G4_Colour = [];
        Object.keys(ResultTT).forEach(function (x) {
            G4_Name.push(x);
            G4_Value.push(ResultTT[x].length);
            G4_Filter.push(x);
            G4_Colour.push(_this.getRandomColorHex());
        });
        this.G4_Chart(G4_Name, G4_Value, G4_Filter, G4_Colour);
    };
    ContentReportComponent.prototype.G4_Chart = function (G4_Name, G4_Value, G4_Filter, G4_Colour) {
        if (this.G4_Piechart) {
            this.G4_Piechart.destroy();
        }
        this.G4_Piechart = new chart_js__WEBPACK_IMPORTED_MODULE_0__["Chart"]('G4_Canvas', {
            type: 'bar',
            data: {
                labels: G4_Name,
                datasets: [{
                        data: G4_Value,
                        borderSkipped: G4_Filter,
                        backgroundColor: G4_Colour,
                        fill: true
                    }
                ]
            },
            options: {
                legend: { display: false },
                title: { display: true, text: "Category wise Contents based on Root/Subroot Organization", fontSize: 18, fontColor: "#111", },
                scales: {
                    xAxes: [{ scaleLabel: { display: true, labelString: 'Categories' } }],
                    yAxes: [{ scaleLabel: { display: true, labelString: 'Number of Content' } }],
                },
            }
        });
    };
    ContentReportComponent.prototype.G4_Chart_showData = function (evt) {
        var activePoint = this.G4_Piechart.getElementAtEvent(evt);
        if (activePoint.length > 0) {
            var clickedDatasetIndex = activePoint[0]._datasetIndex;
            var clickedElementindex = activePoint[0]._index;
            var filter_data = activePoint[0]._model.borderSkipped;
            var label = this.G4_Piechart.data.labels[clickedElementindex];
            var value = this.G4_Piechart.data.datasets[clickedDatasetIndex].data[clickedElementindex];
            this.loadGridView(this.G4_Group_list[filter_data]);
            this.popupTitle = "List of Courses Created under '" + filter_data + "' Category ";
        }
    };
    ContentReportComponent.prototype.resetGraph = function (ngClick) {
        if (ngClick == "G1") {
            this.Table_Data_List = [];
        }
        else if (ngClick == "G2") {
            this.Table_Data_List = [];
        }
        else if (ngClick == "G3") {
            this.Table_Data_List = [];
        }
    };
    ContentReportComponent.prototype.loadGridView = function (tableData) {
        var SNo = 0;
        tableData.forEach(function (y) {
            SNo++;
            y.SNo = SNo;
        });
        this.Table_Data_List = tableData;
    };
    ContentReportComponent.prototype.getRandomColorHex = function () {
        var color = ["red", "green", "blue", "purple", "magenta", "aqua", "salmon", "darkgray", "pink", "coral"];
        this.i++;
        return "blue";
    };
    ContentReportComponent.prototype.groupBy = function (array, f) {
        var groups = {};
        array.forEach(function (o) {
            var group = JSON.stringify(f(o));
            groups[group] = groups[group] || [];
            groups[group].push(o);
        });
        return Object.keys(groups).map(function (group) {
            return groups[group];
        });
    };
    ContentReportComponent.prototype.groupBy1 = function (list, key) {
        return list.reduce(function (rv, x) {
            (rv[x[key]] = rv[x[key]] || []).push(x);
            return rv;
        }, {});
    };
    ;
    return ContentReportComponent;
}());



/***/ }),

/***/ "gfN8":
/*!*****************************************************!*\
  !*** ./src/app/modules/dashboard/services/index.ts ***!
  \*****************************************************/
/*! exports provided: RendererService, DownloadService, OrganisationService, CourseConsumptionService, DashboardUtilsService, LineChartService, CourseProgressService, UsageService, ReportService, DatasetService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _renderer_renderer_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./renderer/renderer.service */ "M2Y2");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RendererService", function() { return _renderer_renderer_service__WEBPACK_IMPORTED_MODULE_0__["RendererService"]; });

/* harmony import */ var _download_download_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./download/download.service */ "+F6K");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DownloadService", function() { return _download_download_service__WEBPACK_IMPORTED_MODULE_1__["DownloadService"]; });

/* harmony import */ var _organization_organization_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./organization/organization.service */ "ZMCT");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "OrganisationService", function() { return _organization_organization_service__WEBPACK_IMPORTED_MODULE_2__["OrganisationService"]; });

/* harmony import */ var _course_consumption_course_consumption_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./course-consumption/course-consumption.service */ "DGHK");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CourseConsumptionService", function() { return _course_consumption_course_consumption_service__WEBPACK_IMPORTED_MODULE_3__["CourseConsumptionService"]; });

/* harmony import */ var _dashboard_utils_dashboard_utils_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./dashboard-utils/dashboard-utils.service */ "+7xu");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DashboardUtilsService", function() { return _dashboard_utils_dashboard_utils_service__WEBPACK_IMPORTED_MODULE_4__["DashboardUtilsService"]; });

/* harmony import */ var _chartjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./chartjs */ "qcPd");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LineChartService", function() { return _chartjs__WEBPACK_IMPORTED_MODULE_5__["LineChartService"]; });

/* harmony import */ var _course_progress_course_progress_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./course-progress/course-progress.service */ "A6gx");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CourseProgressService", function() { return _course_progress_course_progress_service__WEBPACK_IMPORTED_MODULE_6__["CourseProgressService"]; });

/* harmony import */ var _usage_usage_service__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./usage/usage.service */ "WKNp");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "UsageService", function() { return _usage_usage_service__WEBPACK_IMPORTED_MODULE_7__["UsageService"]; });

/* harmony import */ var _report_report_service__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./report/report.service */ "t7hn");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ReportService", function() { return _report_report_service__WEBPACK_IMPORTED_MODULE_8__["ReportService"]; });

/* harmony import */ var _dataset_dataset_service__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./dataset/dataset.service */ "Z7x4");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DatasetService", function() { return _dataset_dataset_service__WEBPACK_IMPORTED_MODULE_9__["DatasetService"]; });













/***/ }),

/***/ "hmMN":
/*!*******************************************************!*\
  !*** ./src/app/modules/dashboard/components/index.ts ***!
  \*******************************************************/
/*! exports provided: CourseConsumptionComponent, OrganisationComponent, CourseProgressComponent, CourseProgressExhaustComponent, UsageReportsComponent, DataTableComponent, DataChartComponent, ReportComponent, ReportSummaryComponent, ListAllReportsComponent, AddSummaryModalComponent, CourseDashboardComponent, ReIssueCertificateComponent, DashboardSidebarComponent, DatasetComponent, MapComponent, FilterComponent, AllReportsComponent, CityWiseReportComponent, DeptCityWiseReportComponent, ContentDeptWiseReportComponent, ReportsComponent, UserReportComponent, OrganizationReportComponent, ContentReportComponent, ContentCategoryWiseComponent, ContentLeaderboardComponent, CourseReportComponent, CourseCategoryWiseComponent, ContentCreationStaticsComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _course_consumption_course_consumption_component__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./course-consumption/course-consumption.component */ "cAXu");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CourseConsumptionComponent", function() { return _course_consumption_course_consumption_component__WEBPACK_IMPORTED_MODULE_0__["CourseConsumptionComponent"]; });

/* harmony import */ var _organization_organization_component__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./organization/organization.component */ "PA1u");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "OrganisationComponent", function() { return _organization_organization_component__WEBPACK_IMPORTED_MODULE_1__["OrganisationComponent"]; });

/* harmony import */ var _course_progress_course_progress_component__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./course-progress/course-progress.component */ "IV8a");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CourseProgressComponent", function() { return _course_progress_course_progress_component__WEBPACK_IMPORTED_MODULE_2__["CourseProgressComponent"]; });

/* harmony import */ var _course_progress_exhaust_course_progress_exhaust_component__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./course-progress-exhaust/course-progress-exhaust.component */ "OBlA");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CourseProgressExhaustComponent", function() { return _course_progress_exhaust_course_progress_exhaust_component__WEBPACK_IMPORTED_MODULE_3__["CourseProgressExhaustComponent"]; });

/* harmony import */ var _usage_reports_usage_reports_component__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./usage-reports/usage-reports.component */ "eqls");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "UsageReportsComponent", function() { return _usage_reports_usage_reports_component__WEBPACK_IMPORTED_MODULE_4__["UsageReportsComponent"]; });

/* harmony import */ var _data_table_data_table_component__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./data-table/data-table.component */ "cKUk");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DataTableComponent", function() { return _data_table_data_table_component__WEBPACK_IMPORTED_MODULE_5__["DataTableComponent"]; });

/* harmony import */ var _data_chart_data_chart_component__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./data-chart/data-chart.component */ "tPYi");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DataChartComponent", function() { return _data_chart_data_chart_component__WEBPACK_IMPORTED_MODULE_6__["DataChartComponent"]; });

/* harmony import */ var _report_report_component__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./report/report.component */ "Bt5J");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ReportComponent", function() { return _report_report_component__WEBPACK_IMPORTED_MODULE_7__["ReportComponent"]; });

/* harmony import */ var _report_summary_report_summary_component__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./report-summary/report-summary.component */ "/sDM");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ReportSummaryComponent", function() { return _report_summary_report_summary_component__WEBPACK_IMPORTED_MODULE_8__["ReportSummaryComponent"]; });

/* harmony import */ var _list_all_reports_list_all_reports_component__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./list-all-reports/list-all-reports.component */ "NSNA");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ListAllReportsComponent", function() { return _list_all_reports_list_all_reports_component__WEBPACK_IMPORTED_MODULE_9__["ListAllReportsComponent"]; });

/* harmony import */ var _add_summary_modal_add_summary_modal_component__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./add-summary-modal/add-summary-modal.component */ "ntp9");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AddSummaryModalComponent", function() { return _add_summary_modal_add_summary_modal_component__WEBPACK_IMPORTED_MODULE_10__["AddSummaryModalComponent"]; });

/* harmony import */ var _course_dashboard_course_dashboard_component__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./course-dashboard/course-dashboard.component */ "bjt5");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CourseDashboardComponent", function() { return _course_dashboard_course_dashboard_component__WEBPACK_IMPORTED_MODULE_11__["CourseDashboardComponent"]; });

/* harmony import */ var _re_issue_certificate_re_issue_certificate_component__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./re-issue-certificate/re-issue-certificate.component */ "Lxfu");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ReIssueCertificateComponent", function() { return _re_issue_certificate_re_issue_certificate_component__WEBPACK_IMPORTED_MODULE_12__["ReIssueCertificateComponent"]; });

/* harmony import */ var _dashboard_sidebar_dashboard_sidebar_component__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./dashboard-sidebar/dashboard-sidebar.component */ "AYsr");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DashboardSidebarComponent", function() { return _dashboard_sidebar_dashboard_sidebar_component__WEBPACK_IMPORTED_MODULE_13__["DashboardSidebarComponent"]; });

/* harmony import */ var _dataset_dataset_component__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./dataset/dataset.component */ "epgD");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DatasetComponent", function() { return _dataset_dataset_component__WEBPACK_IMPORTED_MODULE_14__["DatasetComponent"]; });

/* harmony import */ var _map_map_component__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./map/map.component */ "uvmS");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "MapComponent", function() { return _map_map_component__WEBPACK_IMPORTED_MODULE_15__["MapComponent"]; });

/* harmony import */ var _filter_filter_component__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./filter/filter.component */ "jYBy");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "FilterComponent", function() { return _filter_filter_component__WEBPACK_IMPORTED_MODULE_16__["FilterComponent"]; });

/* harmony import */ var _all_dashboard_all_dashboard_component__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./all-dashboard/all-dashboard.component */ "B/52");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AllReportsComponent", function() { return _all_dashboard_all_dashboard_component__WEBPACK_IMPORTED_MODULE_17__["AllReportsComponent"]; });

/* harmony import */ var _city_wise_report_city_wise_report_component__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./city-wise-report/city-wise-report.component */ "ijb2");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CityWiseReportComponent", function() { return _city_wise_report_city_wise_report_component__WEBPACK_IMPORTED_MODULE_18__["CityWiseReportComponent"]; });

/* harmony import */ var _dept_city_wise_report_dept_city_wise_report_component__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./dept-city-wise-report/dept-city-wise-report.component */ "aZP4");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DeptCityWiseReportComponent", function() { return _dept_city_wise_report_dept_city_wise_report_component__WEBPACK_IMPORTED_MODULE_19__["DeptCityWiseReportComponent"]; });

/* harmony import */ var _content_dept_wise_report_content_dept_wise_report_component__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./content-dept-wise-report/content-dept-wise-report.component */ "ZYv9");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ContentDeptWiseReportComponent", function() { return _content_dept_wise_report_content_dept_wise_report_component__WEBPACK_IMPORTED_MODULE_20__["ContentDeptWiseReportComponent"]; });

/* harmony import */ var _reports_reports_component__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./reports/reports.component */ "/031");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ReportsComponent", function() { return _reports_reports_component__WEBPACK_IMPORTED_MODULE_21__["ReportsComponent"]; });

/* harmony import */ var _user_report_user_report_component__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./user-report/user-report.component */ "3FOv");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "UserReportComponent", function() { return _user_report_user_report_component__WEBPACK_IMPORTED_MODULE_22__["UserReportComponent"]; });

/* harmony import */ var _organization_report_organization_report_component__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./organization-report/organization-report.component */ "OPDd");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "OrganizationReportComponent", function() { return _organization_report_organization_report_component__WEBPACK_IMPORTED_MODULE_23__["OrganizationReportComponent"]; });

/* harmony import */ var _content_report_content_report_component__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./content-report/content-report.component */ "g8j1");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ContentReportComponent", function() { return _content_report_content_report_component__WEBPACK_IMPORTED_MODULE_24__["ContentReportComponent"]; });

/* harmony import */ var _content_category_wise_content_category_wise_component__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./content-category-wise/content-category-wise.component */ "tE9X");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ContentCategoryWiseComponent", function() { return _content_category_wise_content_category_wise_component__WEBPACK_IMPORTED_MODULE_25__["ContentCategoryWiseComponent"]; });

/* harmony import */ var _content_leaderboard_content_leaderboard_component__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./content-leaderboard/content-leaderboard.component */ "wZW7");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ContentLeaderboardComponent", function() { return _content_leaderboard_content_leaderboard_component__WEBPACK_IMPORTED_MODULE_26__["ContentLeaderboardComponent"]; });

/* harmony import */ var _course_report_course_report_component__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./course-report/course-report.component */ "M0G/");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CourseReportComponent", function() { return _course_report_course_report_component__WEBPACK_IMPORTED_MODULE_27__["CourseReportComponent"]; });

/* harmony import */ var _course_category_wise_course_category_wise_component__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./course-category-wise/course-category-wise.component */ "9YJs");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CourseCategoryWiseComponent", function() { return _course_category_wise_course_category_wise_component__WEBPACK_IMPORTED_MODULE_28__["CourseCategoryWiseComponent"]; });

/* harmony import */ var _content_creation_statics_content_creation_statics_component__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./content-creation-statics/content-creation-statics.component */ "mmcY");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ContentCreationStaticsComponent", function() { return _content_creation_statics_content_creation_statics_component__WEBPACK_IMPORTED_MODULE_29__["ContentCreationStaticsComponent"]; });

































/***/ }),

/***/ "ijb2":
/*!*********************************************************************************************!*\
  !*** ./src/app/modules/dashboard/components/city-wise-report/city-wise-report.component.ts ***!
  \*********************************************************************************************/
/*! exports provided: CityWiseReportComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CityWiseReportComponent", function() { return CityWiseReportComponent; });
/* harmony import */ var _services__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./../../services */ "gfN8");
/* harmony import */ var lodash_es__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash-es */ "T89o");
/* harmony import */ var _angular_platform_browser__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/platform-browser */ "cUpR");
/* harmony import */ var _sunbird_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @sunbird/core */ "q/PB");
/* harmony import */ var _sunbird_shared__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @sunbird/shared */ "btWG");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/router */ "iInd");
/* harmony import */ var _services_report_report_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../services/report/report.service */ "t7hn");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/common */ "SVse");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! rxjs */ "qCKp");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! moment */ "VDUF");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_9__);










var CityWiseReportComponent = (function () {
    function CityWiseReportComponent(usageService, sanitizer, configService, userService, toasterService, resourceService, activatedRoute, router, reportService, datePipe) {
        this.usageService = usageService;
        this.sanitizer = sanitizer;
        this.configService = configService;
        this.userService = userService;
        this.toasterService = toasterService;
        this.resourceService = resourceService;
        this.router = router;
        this.reportService = reportService;
        this.datePipe = datePipe;
        this.unsubscribe = new rxjs__WEBPACK_IMPORTED_MODULE_8__["Subject"]();
        this.noResult = false;
        this.currentDate = new Date();
        this.tableData = [];
        this.allOrgName = [];
        this.allUserName = [];
        this.cityList = [];
        this.activatedRoute = activatedRoute;
    }
    CityWiseReportComponent.prototype.ngOnInit = function () {
        this.initializeDateFields();
        this.getOrgList();
        this.getOrgDetails();
    };
    CityWiseReportComponent.prototype.initializeDateFields = function () {
        this.moment = moment__WEBPACK_IMPORTED_MODULE_9__();
        this.fromDate = new Date(this.moment.subtract(7, "days"));
        this.toDate = new Date();
    };
    CityWiseReportComponent.prototype.getContentCreationStaticsReport = function () {
        var _this = this;
        var channelfilter = [];
        var data = {
            "request": {
                "query": "",
                "filters": {
                    "status": [
                        "Live"
                    ],
                    "framework": ["nulp"],
                    "channel": [lodash_es__WEBPACK_IMPORTED_MODULE_1__["get"](this.selectedCity, 'id')],
                    "contentType": ["Course", 'Resource', 'Collection'],
                    "lastUpdatedOn": { ">=": this.datePipe.transform(this.fromDate, 'yyyy-MM-ddTHH:MM'), "<=": this.datePipe.transform(this.toDate, 'yyyy-MM-ddTHH:MM') }
                },
                "limit": "1000",
                "sort_by": {
                    "lastUpdatedOn": "desc"
                },
                "fields": ["identifier", "creator", "organisation", "name", "contentType", "createdFor", "channel", "board", "medium", "gradeLevel", "subject", "lastUpdatedOn", "status", "createdBy", "framework", "createdOn", "lastPublishedOn"]
            }
        };
        if (!lodash_es__WEBPACK_IMPORTED_MODULE_1__["isEmpty"](this.selectedCity)) {
            this.reportService.getContentCreationStaticsReport(data).subscribe(function (response) {
                if (lodash_es__WEBPACK_IMPORTED_MODULE_1__["get"](response, 'responseCode') === 'OK') {
                    if (response.result.count > 0) {
                        _this.tableData = [];
                        var tempObj = lodash_es__WEBPACK_IMPORTED_MODULE_1__["cloneDeep"](response.result.content);
                        var self = _this;
                        lodash_es__WEBPACK_IMPORTED_MODULE_1__["map"](tempObj, function (obj) {
                            obj.createdOn = self.datePipe.transform(obj.lastPublishedOn, 'MM/dd/yyyy');
                            obj.OrgName = lodash_es__WEBPACK_IMPORTED_MODULE_1__["get"](self.selectedCity, 'orgName');
                            if (lodash_es__WEBPACK_IMPORTED_MODULE_1__["toArray"](obj.createdFor).length === 1) {
                                obj.departmentName = lodash_es__WEBPACK_IMPORTED_MODULE_1__["get"](lodash_es__WEBPACK_IMPORTED_MODULE_1__["find"](self.allOrgName, { 'id': lodash_es__WEBPACK_IMPORTED_MODULE_1__["toArray"](obj.createdFor)[0] }), 'orgName');
                            }
                            else if (lodash_es__WEBPACK_IMPORTED_MODULE_1__["toArray"](obj.createdFor).length > 1) {
                                if (lodash_es__WEBPACK_IMPORTED_MODULE_1__["get"](self.selectedCity, 'identifier') === lodash_es__WEBPACK_IMPORTED_MODULE_1__["toArray"](obj.createdFor)[0]) {
                                    obj.departmentName = lodash_es__WEBPACK_IMPORTED_MODULE_1__["get"](lodash_es__WEBPACK_IMPORTED_MODULE_1__["find"](self.allOrgName, { 'id': lodash_es__WEBPACK_IMPORTED_MODULE_1__["toArray"](obj.createdFor)[1] }), 'orgName');
                                }
                                else {
                                    obj.departmentName = lodash_es__WEBPACK_IMPORTED_MODULE_1__["get"](lodash_es__WEBPACK_IMPORTED_MODULE_1__["find"](self.allOrgName, { 'id': lodash_es__WEBPACK_IMPORTED_MODULE_1__["toArray"](obj.createdFor)[0] }), 'orgName');
                                }
                            }
                            obj.UserName = obj.creator;
                        });
                        _this.noResult = false;
                        _this.tableData = tempObj;
                        _this.initializeColumns();
                        _this.initializePieChart();
                    }
                    else {
                        _this.noResultMessage = {
                            'messageText': 'messages.stmsg.m0131'
                        };
                        _this.noResult = true;
                    }
                }
                else {
                    _this.toasterService.error(_this.resourceService.messages.emsg.m0007);
                }
            }, function (err) {
                console.log(err);
                _this.toasterService.error(_this.resourceService.messages.emsg.m0007);
            });
        }
        else {
            this.toasterService.error("Please select the city");
        }
    };
    CityWiseReportComponent.prototype.initializePieChart = function () {
        var pieChartLabels = [];
        var pieChartData = [];
        var pieChartColors = [];
        var staticColors = ["#42a5f5", "#26a69a", "#8bc34a", "#43a047", "#0097a7"];
        var self = this;
        lodash_es__WEBPACK_IMPORTED_MODULE_1__["map"](lodash_es__WEBPACK_IMPORTED_MODULE_1__["uniqBy"](lodash_es__WEBPACK_IMPORTED_MODULE_1__["cloneDeep"](this.tableData), 'departmentName'), function (obj) {
            pieChartLabels.push(lodash_es__WEBPACK_IMPORTED_MODULE_1__["get"](obj, 'departmentName'));
            pieChartData.push(lodash_es__WEBPACK_IMPORTED_MODULE_1__["filter"](lodash_es__WEBPACK_IMPORTED_MODULE_1__["cloneDeep"](self.tableData), { departmentName: lodash_es__WEBPACK_IMPORTED_MODULE_1__["get"](obj, 'departmentName') }).length);
        });
        lodash_es__WEBPACK_IMPORTED_MODULE_1__["map"](pieChartLabels, function (obj, index) {
            pieChartColors.push(staticColors[index % 5]);
        });
        this.pieChartData = {
            labels: pieChartLabels,
            datasets: [
                {
                    data: pieChartData,
                    backgroundColor: pieChartColors,
                    hoverBackgroundColor: pieChartColors
                }
            ]
        };
    };
    CityWiseReportComponent.prototype.getOrgList = function () {
        var _this = this;
        this.cityList = [];
        var data = {
            "request": {
                "filters": {
                    "isTenant": true,
                    "status": 1
                },
                limit: 10000
            }
        };
        this.reportService.getOrganizationName(data).subscribe(function (response) {
            if (lodash_es__WEBPACK_IMPORTED_MODULE_1__["get"](response, 'responseCode') === 'OK') {
                if (response.result.response.count > 0) {
                    _this.cityList = lodash_es__WEBPACK_IMPORTED_MODULE_1__["reject"](response.result.response.content, function (obj) { return lodash_es__WEBPACK_IMPORTED_MODULE_1__["isEmpty"](obj.orgName); });
                }
            }
            else {
                _this.toasterService.error(_this.resourceService.messages.emsg.m0007);
            }
        }, function (err) {
            console.log(err);
            _this.toasterService.error(_this.resourceService.messages.emsg.m0007);
        });
    };
    CityWiseReportComponent.prototype.getOrgDetails = function () {
        var _this = this;
        this.allOrgName = [];
        var data = {
            "request": {
                "filters": {}
            }
        };
        this.reportService.getOrganizationName(data).subscribe(function (response) {
            if (lodash_es__WEBPACK_IMPORTED_MODULE_1__["get"](response, 'responseCode') === 'OK') {
                if (response.result.response.content.length > 0) {
                    _this.allOrgName = response.result.response.content;
                }
            }
            else {
                _this.toasterService.error(_this.resourceService.messages.emsg.m0007);
            }
        }, function (err) {
            console.log(err);
            _this.toasterService.error(_this.resourceService.messages.emsg.m0007);
        });
    };
    CityWiseReportComponent.prototype.getUserDetails = function () {
        var _this = this;
        this.allUserName = [];
        this.reportService.getUserList().subscribe(function (response) {
            if (lodash_es__WEBPACK_IMPORTED_MODULE_1__["get"](response, 'responseCode') === 'OK') {
                if (response.result.response.content.length > 0) {
                    _this.allUserName = response.result.response.content;
                }
            }
            else {
                _this.toasterService.error(_this.resourceService.messages.emsg.m0007);
            }
        }, function (err) {
            console.log(err);
            _this.toasterService.error(_this.resourceService.messages.emsg.m0007);
        });
    };
    CityWiseReportComponent.prototype.initializeColumns = function () {
        this.cols = [
            { field: 'OrgName', header: 'City Name' },
            { field: 'name', header: 'Name' },
            { field: 'board', header: 'Category' },
            { field: 'gradeLevel', header: 'Sub Category' },
            { field: 'subject', header: 'Topic' },
            { field: 'medium', header: 'Language' },
            { field: 'createdOn', header: 'Last Published On' },
            { field: 'framework', header: 'Framework' },
            { field: 'UserName', header: 'Created By' },
            { field: 'contentType', header: 'Content Type' },
        ];
    };
    CityWiseReportComponent.prototype.resetFields = function () {
        this.initializeDateFields();
        this.selectedCity = null;
    };
    CityWiseReportComponent.prototype.ngOnDestroy = function () {
        this.unsubscribe.next();
        this.unsubscribe.complete();
    };
    return CityWiseReportComponent;
}());



/***/ }),

/***/ "jYBy":
/*!*************************************************************************!*\
  !*** ./src/app/modules/dashboard/components/filter/filter.component.ts ***!
  \*************************************************************************/
/*! exports provided: FilterComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "FilterComponent", function() { return FilterComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "8Y7J");
/* harmony import */ var _sunbird_shared__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @sunbird/shared */ "btWG");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/forms */ "s7LF");
/* harmony import */ var lodash_es__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! lodash-es */ "T89o");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! moment */ "VDUF");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/router */ "iInd");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs */ "qCKp");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! rxjs/operators */ "kU1M");
/* harmony import */ var _angular_material_autocomplete__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @angular/material/autocomplete */ "vrAh");









var FilterComponent = (function () {
    function FilterComponent(resourceService, fb, activatedRoute, cdr) {
        this.resourceService = resourceService;
        this.fb = fb;
        this.activatedRoute = activatedRoute;
        this.cdr = cdr;
        this.hideElements = false;
        this.filterChanged = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.chartLabels = [];
        this.resultStatistics = {};
        this.loadash = lodash_es__WEBPACK_IMPORTED_MODULE_3__;
        this.showFilters = true;
        this.unsubscribe = new rxjs__WEBPACK_IMPORTED_MODULE_6__["Subject"]();
        this.formChartData = [];
        this.ranges = {
            'Today': [moment__WEBPACK_IMPORTED_MODULE_4__(), moment__WEBPACK_IMPORTED_MODULE_4__()],
            'Yesterday': [moment__WEBPACK_IMPORTED_MODULE_4__().subtract(1, 'days'), moment__WEBPACK_IMPORTED_MODULE_4__().subtract(1, 'days')],
            'Last 7 Days': [moment__WEBPACK_IMPORTED_MODULE_4__().subtract(6, 'days'), moment__WEBPACK_IMPORTED_MODULE_4__()],
            'Last 30 Days': [moment__WEBPACK_IMPORTED_MODULE_4__().subtract(29, 'days'), moment__WEBPACK_IMPORTED_MODULE_4__()],
            'This Month': [moment__WEBPACK_IMPORTED_MODULE_4__().startOf('month'), moment__WEBPACK_IMPORTED_MODULE_4__().endOf('month')],
            'Last Month': [moment__WEBPACK_IMPORTED_MODULE_4__().subtract(1, 'month').startOf('month'), moment__WEBPACK_IMPORTED_MODULE_4__().subtract(1, 'month').endOf('month')]
        };
    }
    Object.defineProperty(FilterComponent.prototype, "selectedFilter", {
        set: function (val) {
            if (val) {
                this.selectedFilters = {};
                if (val.filters) {
                    this.filters = val.filters;
                }
                this.formGeneration(val.data);
                if (val.selectedFilters) {
                    this.selectedFilters = val.selectedFilters;
                    this.filtersFormGroup.patchValue(val.selectedFilters);
                }
            }
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(FilterComponent.prototype, "resetFilters", {
        set: function (val) {
            if (val) {
                var currentFilterValue = lodash_es__WEBPACK_IMPORTED_MODULE_3__["get"](this.filtersFormGroup, 'value');
                this.resetFilter();
                this.chartData = val.data;
                this.buildFiltersForm();
                if (val.reset && val.reset == true) {
                    this.selectedFilters = {};
                }
                else if (val.filters) {
                    this.filtersFormGroup.patchValue(val.filters);
                    this.selectedFilters = val.filters;
                }
                else if (currentFilterValue) {
                    this.filtersFormGroup.patchValue(currentFilterValue);
                    this.selectedFilters = currentFilterValue;
                }
            }
        },
        enumerable: false,
        configurable: true
    });
    FilterComponent.prototype.ngOnInit = function () {
        var charts = [];
        if (this.chartData && this.chartData.length > 0) {
            this.chartData.map(function (data) {
                charts.push.apply(charts, data.data);
                return data.data;
            });
        }
        this.formChartData = charts;
        if (this.filters) {
            this.buildFiltersForm();
        }
    };
    FilterComponent.prototype.ngOnDestroy = function () {
        this.unsubscribe.next();
        this.unsubscribe.complete();
    };
    FilterComponent.prototype.formUpdate = function (chartData) {
        var _this = this;
        var filterKeys = Object.keys(this.selectedFilters);
        var previousKeys = [];
        if (this.previousFilters) {
            previousKeys = Object.keys(this.previousFilters);
        }
        lodash_es__WEBPACK_IMPORTED_MODULE_3__["forEach"](this.filters, function (filter) {
            var options = (lodash_es__WEBPACK_IMPORTED_MODULE_3__["sortBy"](lodash_es__WEBPACK_IMPORTED_MODULE_3__["uniq"](lodash_es__WEBPACK_IMPORTED_MODULE_3__["map"](chartData, function (data) { return data[filter.reference] ? data[filter.reference].toLowerCase() : ''; })))).filter(Boolean);
            if (!filterKeys.includes(filter.reference)) {
                filter.options = options;
            }
            else {
                if (previousKeys && previousKeys.includes(filter.reference) && _this.previousFilters && _this.previousFilters[filter.reference].length == _this.selectedFilters[filter.reference].length) {
                    if (options.length > filter.options) {
                        filter.options = options;
                    }
                }
            }
        });
        this.previousFilters = this.selectedFilters;
    };
    FilterComponent.prototype.formGeneration = function (chartData) {
        var _this = this;
        this.filtersFormGroup = this.fb.group({});
        lodash_es__WEBPACK_IMPORTED_MODULE_3__["forEach"](this.filters, function (filter) {
            if (filter.controlType === 'date' || /date/i.test(lodash_es__WEBPACK_IMPORTED_MODULE_3__["get"](filter, 'reference'))) {
                var dateRange = lodash_es__WEBPACK_IMPORTED_MODULE_3__["uniq"](lodash_es__WEBPACK_IMPORTED_MODULE_3__["map"](chartData, lodash_es__WEBPACK_IMPORTED_MODULE_3__["get"](filter, 'reference')));
                _this.pickerMinDate = moment__WEBPACK_IMPORTED_MODULE_4__(dateRange[0], 'DD-MM-YYYY');
                _this.pickerMaxDate = moment__WEBPACK_IMPORTED_MODULE_4__(dateRange[dateRange.length - 1], 'DD-MM-YYYY');
                _this.dateFilterReferenceName = filter.reference;
            }
            _this.filtersFormGroup.addControl(lodash_es__WEBPACK_IMPORTED_MODULE_3__["get"](filter, 'reference'), _this.fb.control(''));
            filter.options = (lodash_es__WEBPACK_IMPORTED_MODULE_3__["sortBy"](lodash_es__WEBPACK_IMPORTED_MODULE_3__["uniq"](lodash_es__WEBPACK_IMPORTED_MODULE_3__["map"](chartData, function (data) { return data[filter.reference] ? data[filter.reference].toLowerCase() : ''; })))).filter(Boolean);
        });
    };
    FilterComponent.prototype.buildFiltersForm = function () {
        var _this = this;
        this.formGeneration(this.formChartData);
        this.filtersSubscription = this.filtersFormGroup.valueChanges
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_7__["takeUntil"])(this.unsubscribe), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_7__["map"])(function (filters) {
            return lodash_es__WEBPACK_IMPORTED_MODULE_3__["omitBy"](filters, lodash_es__WEBPACK_IMPORTED_MODULE_3__["isEmpty"]);
        }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_7__["debounceTime"])(100), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_7__["distinctUntilChanged"])())
            .subscribe(function (filters) {
            _this.selectedFilters = filters;
            _this.filterData();
        }, function (err) {
            console.log(err);
        });
        if (this.chartData.selectedFilters) {
            this.filtersFormGroup.patchValue(this.chartData.selectedFilters);
        }
    };
    FilterComponent.prototype.setTelemetryInteractEdata = function (val) {
        return {
            id: lodash_es__WEBPACK_IMPORTED_MODULE_3__["join"](lodash_es__WEBPACK_IMPORTED_MODULE_3__["split"](val, ' '), '-').toLowerCase(),
            type: 'click',
            pageid: this.activatedRoute.snapshot.data.telemetry.pageid
        };
    };
    FilterComponent.prototype.resetFilter = function () {
        if (this.filtersFormGroup) {
            this.filtersFormGroup.reset();
        }
        if (this.datepicker) {
            this.datepicker.nativeElement.value = '';
        }
        this.showFilters = false;
        this.cdr.detectChanges();
        this.showFilters = true;
    };
    FilterComponent.prototype.getDateRange = function (_a, columnRef) {
        var startDate = _a.startDate, endDate = _a.endDate;
        this.selectedStartDate = moment__WEBPACK_IMPORTED_MODULE_4__(startDate).subtract(1, 'day');
        this.selectedEndDate = moment__WEBPACK_IMPORTED_MODULE_4__(endDate).add(1, 'day');
        var dateRange = [];
        var currDate = moment__WEBPACK_IMPORTED_MODULE_4__(this.selectedStartDate).startOf('day');
        var lastDate = moment__WEBPACK_IMPORTED_MODULE_4__(this.selectedEndDate).startOf('day');
        while (currDate.add(1, 'days').diff(lastDate) < 0) {
            dateRange.push(currDate.clone().format('DD-MM-YYYY'));
        }
        this.filtersFormGroup.get(columnRef).setValue(dateRange);
    };
    FilterComponent.prototype.filterData = function () {
        var _this = this;
        if (this.selectedFilters) {
            var filterData_1 = [];
            var filteredChartData_1 = [];
            this.chartData.forEach(function (chart) {
                var id = chart.id;
                delete chart.id;
                delete chart.data.selectedFilters;
                delete chart.data.id;
                var result = lodash_es__WEBPACK_IMPORTED_MODULE_3__["filter"](chart.data, function (data) {
                    return lodash_es__WEBPACK_IMPORTED_MODULE_3__["every"](_this.selectedFilters, function (filterValues, key) {
                        if (data[key]) {
                            return lodash_es__WEBPACK_IMPORTED_MODULE_3__["some"](filterValues, function (filterValue) { return lodash_es__WEBPACK_IMPORTED_MODULE_3__["trim"](lodash_es__WEBPACK_IMPORTED_MODULE_3__["toLower"](filterValue)) === lodash_es__WEBPACK_IMPORTED_MODULE_3__["trim"](lodash_es__WEBPACK_IMPORTED_MODULE_3__["toLower"](lodash_es__WEBPACK_IMPORTED_MODULE_3__["get"](data, key))); });
                        }
                    });
                });
                filteredChartData_1.push({ id: id, data: result });
                result['selectedFilters'] = _this.selectedFilters;
                filterData_1.push.apply(filterData_1, result);
            });
            this.formUpdate(filterData_1);
            var keys_1 = Object.keys(this.selectedFilters);
            this.dateFilters = [];
            this.filters.map(function (ele) {
                if (ele && ele['controlType'].toLowerCase() == 'date') {
                    keys_1.map(function (item) {
                        if (item == ele['reference']) {
                            _this.dateFilters.push(item);
                        }
                    });
                }
            });
            this.filterChanged.emit({
                allFilters: this.filters,
                filters: this.selectedFilters,
                chartData: filteredChartData_1,
            });
        }
        else {
            this.dateFilters = [];
            this.filterChanged.emit({
                allFilters: this.filters,
                filters: {},
                chartData: this.chartData,
            });
        }
    };
    FilterComponent.prototype.checkFilterReferance = function (element) {
        if (this.dateFilters && this.dateFilters.includes(element)) {
            return true;
        }
        else {
            return false;
        }
    };
    FilterComponent.prototype.autoCompleteChange = function (data, reference) {
        var object = {};
        if (data && data.length > 0) {
            object[reference] = data;
        }
        this.filtersFormGroup.controls[reference].setValue(data);
    };
    FilterComponent.prototype.getSelectedData = function (reference) {
        if (this.selectedFilters && this.selectedFilters[reference]) {
            return this.selectedFilters[reference];
        }
        else {
            return [];
        }
    };
    FilterComponent.prototype.getFilters = function (options) {
        var _this = this;
        if (this.filterQuery && this.filterQuery != "") {
            return options.filter(function (opt) {
                return opt.toLowerCase().indexOf(_this.filterQuery.toLowerCase()) === 0;
            });
        }
        else {
            return options;
        }
    };
    FilterComponent.prototype.chooseOption = function () {
        this.matAutocomplete.options.first.select();
    };
    FilterComponent.prototype.getFiltersValues = function (filter) {
        return Array.isArray(filter) ? filter : [filter];
    };
    return FilterComponent;
}());



/***/ }),

/***/ "mmcY":
/*!*************************************************************************************************************!*\
  !*** ./src/app/modules/dashboard/components/content-creation-statics/content-creation-statics.component.ts ***!
  \*************************************************************************************************************/
/*! exports provided: ContentCreationStaticsComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ContentCreationStaticsComponent", function() { return ContentCreationStaticsComponent; });
/* harmony import */ var _services__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./../../services */ "gfN8");
/* harmony import */ var lodash_es__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lodash-es */ "T89o");
/* harmony import */ var _angular_platform_browser__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/platform-browser */ "cUpR");
/* harmony import */ var _sunbird_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @sunbird/core */ "q/PB");
/* harmony import */ var _sunbird_shared__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @sunbird/shared */ "btWG");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @angular/router */ "iInd");
/* harmony import */ var _services_report_report_service__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../services/report/report.service */ "t7hn");
/* harmony import */ var _angular_common__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/common */ "SVse");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! rxjs */ "qCKp");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! moment */ "VDUF");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_9__);










var ContentCreationStaticsComponent = (function () {
    function ContentCreationStaticsComponent(usageService, sanitizer, configService, userService, toasterService, resourceService, activatedRoute, router, reportService, datePipe) {
        this.usageService = usageService;
        this.sanitizer = sanitizer;
        this.configService = configService;
        this.userService = userService;
        this.toasterService = toasterService;
        this.resourceService = resourceService;
        this.router = router;
        this.reportService = reportService;
        this.datePipe = datePipe;
        this.unsubscribe = new rxjs__WEBPACK_IMPORTED_MODULE_8__["Subject"]();
        this.noResult = false;
        this.currentDate = new Date();
        this.tableData = [];
        this.allOrgName = [];
        this.orgList = [];
        this.allUserName = [];
        this.activatedRoute = activatedRoute;
    }
    ContentCreationStaticsComponent.prototype.ngOnInit = function () {
        this.initializeDateFields();
        this.getOrgDetails();
        this.getContentCreationStaticsReport();
    };
    ContentCreationStaticsComponent.prototype.initializeDateFields = function () {
        this.moment = moment__WEBPACK_IMPORTED_MODULE_9__();
        this.fromDate = new Date(this.moment.subtract(7, "days"));
        this.toDate = new Date();
    };
    ContentCreationStaticsComponent.prototype.getContentCreationStaticsReport = function () {
        var _this = this;
        var data = {
            "request": {
                "query": "",
                "filters": {
                    "status": [
                        "Live"
                    ],
                    "framework": ["nulp"],
                    "contentType": ["Course", 'Resource', 'Collection'],
                    "lastUpdatedOn": { ">=": this.datePipe.transform(this.fromDate, 'yyyy-MM-ddTHH:MM'), "<=": this.datePipe.transform(this.toDate, 'yyyy-MM-ddTHH:MM') }
                },
                "limit": "1000",
                "sort_by": {
                    "lastUpdatedOn": "desc"
                },
                "fields": ["identifier", "creator", "organisation", "name", "contentType", "createdFor", "channel", "board", "medium", "gradeLevel", "subject", "lastUpdatedOn", "status", "createdBy", "framework", "createdOn", "lastPublishedOn"]
            }
        };
        this.reportService.getContentCreationStaticsReport(data).subscribe(function (response) {
            if (lodash_es__WEBPACK_IMPORTED_MODULE_1__["get"](response, 'responseCode') === 'OK') {
                if (response.result.count > 0) {
                    _this.tableData = [];
                    var tempObj = lodash_es__WEBPACK_IMPORTED_MODULE_1__["cloneDeep"](response.result.content);
                    var self = _this;
                    lodash_es__WEBPACK_IMPORTED_MODULE_1__["map"](tempObj, function (obj) {
                        obj.createdOn = self.datePipe.transform(obj.lastPublishedOn, 'MM/dd/yyyy');
                        obj.UserName = obj.creator;
                        if (!lodash_es__WEBPACK_IMPORTED_MODULE_1__["isEmpty"](obj.channel)) {
                            obj.OrgName = lodash_es__WEBPACK_IMPORTED_MODULE_1__["get"](lodash_es__WEBPACK_IMPORTED_MODULE_1__["find"](self.allOrgName, { 'id': obj.channel }), 'orgName');
                        }
                        else {
                            obj.OrgName = '';
                        }
                        obj.board = obj.board ? obj.board : ' - ';
                        obj.medium = obj.medium ? obj.medium : ' - ';
                        obj.gradeLevel = obj.gradeLevel ? obj.gradeLevel : ' - ';
                    });
                    _this.noResult = false;
                    _this.tableData = tempObj;
                    _this.initializeColumns();
                }
                else {
                    _this.noResultMessage = {
                        'messageText': 'messages.stmsg.m0131'
                    };
                    _this.noResult = true;
                }
            }
            else {
                _this.toasterService.error(_this.resourceService.messages.emsg.m0007);
            }
        }, function (err) {
            console.log(err);
            _this.toasterService.error(_this.resourceService.messages.emsg.m0007);
        });
    };
    ContentCreationStaticsComponent.prototype.getOrgDetails = function () {
        var _this = this;
        this.allOrgName = [];
        var data = {
            "request": {
                "filters": {}
            }
        };
        this.reportService.getOrganizationName(data).subscribe(function (response) {
            if (lodash_es__WEBPACK_IMPORTED_MODULE_1__["get"](response, 'responseCode') === 'OK') {
                if (response.result.response.content.length > 0) {
                    _this.allOrgName = response.result.response.content;
                }
            }
            else {
                _this.toasterService.error(_this.resourceService.messages.emsg.m0007);
            }
        }, function (err) {
            console.log(err);
            _this.toasterService.error(_this.resourceService.messages.emsg.m0007);
        });
    };
    ContentCreationStaticsComponent.prototype.getOrgList = function () {
        var _this = this;
        this.orgList = [];
        this.reportService.getOrgList().subscribe(function (response) {
            if (lodash_es__WEBPACK_IMPORTED_MODULE_1__["get"](response, 'responseCode') === 'OK') {
                if (response.result.count > 0) {
                    _this.orgList = lodash_es__WEBPACK_IMPORTED_MODULE_1__["reject"](response.result.channels, function (obj) {
                        if (obj.name === 'nuis_test' || obj.name === 'niua_test' || obj.name === 'nuis' || obj.name === 'pwc') {
                            return obj;
                        }
                    });
                }
            }
            else {
                _this.toasterService.error(_this.resourceService.messages.emsg.m0007);
            }
        }, function (err) {
            console.log(err);
            _this.toasterService.error(_this.resourceService.messages.emsg.m0007);
        });
    };
    ContentCreationStaticsComponent.prototype.getUserDetails = function () {
        var _this = this;
        this.allUserName = [];
        this.reportService.getUserList().subscribe(function (response) {
            if (lodash_es__WEBPACK_IMPORTED_MODULE_1__["get"](response, 'responseCode') === 'OK') {
                if (response.result.response.content.length > 0) {
                    _this.allUserName = response.result.response.content;
                }
            }
            else {
                _this.toasterService.error(_this.resourceService.messages.emsg.m0007);
            }
        }, function (err) {
            console.log(err);
            _this.toasterService.error(_this.resourceService.messages.emsg.m0007);
        });
    };
    ContentCreationStaticsComponent.prototype.initializeColumns = function () {
        this.cols = [
            { field: 'OrgName', header: 'City Name' },
            { field: 'name', header: 'Name' },
            { field: 'board', header: 'Category' },
            { field: 'gradeLevel', header: 'Sub Category' },
            { field: 'subject', header: 'Topic' },
            { field: 'medium', header: 'Language' },
            { field: 'createdOn', header: 'Last Published On' },
            { field: 'framework', header: 'Framework' },
            { field: 'UserName', header: 'Created By' },
            { field: 'contentType', header: 'Content Type' },
        ];
    };
    ContentCreationStaticsComponent.prototype.resetFields = function () {
        this.initializeDateFields();
    };
    ContentCreationStaticsComponent.prototype.ngOnDestroy = function () {
        this.unsubscribe.next();
        this.unsubscribe.complete();
    };
    return ContentCreationStaticsComponent;
}());



/***/ }),

/***/ "ntp9":
/*!***********************************************************************************************!*\
  !*** ./src/app/modules/dashboard/components/add-summary-modal/add-summary-modal.component.ts ***!
  \***********************************************************************************************/
/*! exports provided: AddSummaryModalComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "AddSummaryModalComponent", function() { return AddSummaryModalComponent; });
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/forms */ "s7LF");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @angular/core */ "8Y7J");
/* harmony import */ var _project_sunbird_ckeditor_build_classic__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @project-sunbird/ckeditor-build-classic */ "C5se");
/* harmony import */ var _project_sunbird_ckeditor_build_classic__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_project_sunbird_ckeditor_build_classic__WEBPACK_IMPORTED_MODULE_2__);
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};



var AddSummaryModalComponent = (function () {
    function AddSummaryModalComponent(fb) {
        this.fb = fb;
        this.submitButtonEvent = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.closeModalEvent = new _angular_core__WEBPACK_IMPORTED_MODULE_1__["EventEmitter"]();
        this.toolbarItems = ['undo', 'redo', 'bold', 'italic', 'blockQuote', 'heading', 'link', 'numberedList', 'bulletedList', 'fontFamily',
            'fontSize', 'fontColor', 'fontBackgroundColor', 'underline', 'subscript', 'superscript', 'insertTable', 'tableColumn', 'tableRow', 'mergeTableCells'];
    }
    AddSummaryModalComponent.prototype.ngOnInit = function () {
        this.initForm();
    };
    AddSummaryModalComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        _project_sunbird_ckeditor_build_classic__WEBPACK_IMPORTED_MODULE_2__["create"](this.editorRef.nativeElement, {
            toolbar: this.toolbarItems
        })
            .then(function (editor) {
            _this.editorInstance = editor;
            if (_this.input.summary) {
                var editorDataInput = _this.input.summary
                    .replace(/(<img("[^"]*"|[^\/">])*)>/gi, '$1/>')
                    .replace(/(<br("[^"]*"|[^\/">])*)>/gi, '$1/>');
                _this.editorInstance.setData(editorDataInput);
            }
            editor.model.document.on('change', function (eventInfo, batch) {
                _this.summaryFormGroup.controls.summary.setValue(editor.getData());
            });
        })
            .catch(function (err) { console.error(err); });
    };
    AddSummaryModalComponent.prototype.ngOnDestroy = function () {
        this.closeModal();
    };
    AddSummaryModalComponent.prototype.handleSubmitButton = function () {
        if (this.summaryFormGroup.valid) {
            this.submitButtonEvent.emit(__assign({ summary: this.summaryFormGroup.get('summary').value, type: this.input.type }, (this.input.type === 'chart' && { index: this.input.index, chartId: this.input.chartId })));
        }
    };
    AddSummaryModalComponent.prototype.initForm = function () {
        this.summaryFormGroup = this.fb.group({
            summary: ['', _angular_forms__WEBPACK_IMPORTED_MODULE_0__["Validators"].required]
        });
    };
    AddSummaryModalComponent.prototype.resetForm = function () {
        this.summaryFormGroup.reset();
        this.editorInstance.setData('');
    };
    AddSummaryModalComponent.prototype.closeModal = function () {
        this.closeModalEvent.emit(true);
    };
    return AddSummaryModalComponent;
}());



/***/ }),

/***/ "qcPd":
/*!*************************************************************!*\
  !*** ./src/app/modules/dashboard/services/chartjs/index.ts ***!
  \*************************************************************/
/*! exports provided: LineChartService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _line_chart_line_chart_service__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./line-chart/line-chart.service */ "Qmjz");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LineChartService", function() { return _line_chart_line_chart_service__WEBPACK_IMPORTED_MODULE_0__["LineChartService"]; });




/***/ }),

/***/ "t7hn":
/*!*********************************************************************!*\
  !*** ./src/app/modules/dashboard/services/report/report.service.ts ***!
  \*********************************************************************/
/*! exports provided: ReportService */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ReportService", function() { return ReportService; });
/* harmony import */ var _sunbird_profile__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @sunbird/profile */ "XCaa");
/* harmony import */ var _course_progress_course_progress_service__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../course-progress/course-progress.service */ "A6gx");
/* harmony import */ var _sunbird_shared__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @sunbird/shared */ "btWG");
/* harmony import */ var _sunbird_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @sunbird/core */ "q/PB");
/* harmony import */ var _angular_platform_browser__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @angular/platform-browser */ "cUpR");
/* harmony import */ var _usage_usage_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../usage/usage.service */ "WKNp");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! rxjs/operators */ "kU1M");
/* harmony import */ var lodash_es__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! lodash-es */ "T89o");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! rxjs */ "qCKp");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! moment */ "VDUF");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_9__);
/* harmony import */ var angular2_uuid__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! angular2-uuid */ "o9EK");
/* harmony import */ var angular2_uuid__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(angular2_uuid__WEBPACK_IMPORTED_MODULE_10__);
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};











var PRE_DEFINED_PARAMETERS = ['$slug', '$board', '$state', '$channel'];
var ReportService = (function () {
    function ReportService(sanitizer, usageService, userService, configService, baseReportService, permissionService, courseProgressService, searchService, frameworkService, profileService, publicDataService, learnerService) {
        var _this = this;
        this.sanitizer = sanitizer;
        this.usageService = usageService;
        this.userService = userService;
        this.configService = configService;
        this.baseReportService = baseReportService;
        this.permissionService = permissionService;
        this.courseProgressService = courseProgressService;
        this.searchService = searchService;
        this.frameworkService = frameworkService;
        this.profileService = profileService;
        this.publicDataService = publicDataService;
        this.learnerService = learnerService;
        this.cachedMapping = {};
        this.getChartData = function (data, chart) {
            var chartDataSource = lodash_es__WEBPACK_IMPORTED_MODULE_7__["get"](chart, 'dataSource');
            if (chartDataSource.ids.length === 1) {
                return lodash_es__WEBPACK_IMPORTED_MODULE_7__["get"](_this.getDataSourceById(data, lodash_es__WEBPACK_IMPORTED_MODULE_7__["head"](chartDataSource.ids)), 'data');
            }
            var datasources = lodash_es__WEBPACK_IMPORTED_MODULE_7__["map"](chartDataSource.ids, function (id) {
                return lodash_es__WEBPACK_IMPORTED_MODULE_7__["get"](_this.getDataSourceById(data, id), 'data');
            });
            var result = _this.overlayMultipleDataSources(datasources, lodash_es__WEBPACK_IMPORTED_MODULE_7__["get"](chartDataSource, 'commonDimension'));
            return result;
        };
        this.convertToBase64 = function (value) { return btoa(value); };
        this.getParametersHash = function (report) {
            var parameters = lodash_es__WEBPACK_IMPORTED_MODULE_7__["get"](report, 'parameters');
            return _this.convertToBase64(lodash_es__WEBPACK_IMPORTED_MODULE_7__["join"](lodash_es__WEBPACK_IMPORTED_MODULE_7__["map"](parameters, function (param) {
                return lodash_es__WEBPACK_IMPORTED_MODULE_7__["replace"](param, lodash_es__WEBPACK_IMPORTED_MODULE_7__["toLower"](param), _this.getParameterValues(param).value);
            }), '__'));
        };
        this.getParameterFromHash = function (hash) {
            return lodash_es__WEBPACK_IMPORTED_MODULE_7__["split"](atob(hash), '__');
        };
        this.isReportParameterized = function (report) { return lodash_es__WEBPACK_IMPORTED_MODULE_7__["get"](report, 'parameters.length') > 0 && lodash_es__WEBPACK_IMPORTED_MODULE_7__["isArray"](report.parameters) && lodash_es__WEBPACK_IMPORTED_MODULE_7__["get"](report, 'isParameterized'); };
        try {
            this._superAdminSlug = document.getElementById('superAdminSlug').value;
        }
        catch (error) {
            this._superAdminSlug = 'sunbird';
        }
    }
    ReportService.prototype.fetchDataSource = function (filePath, id) {
        return this.usageService.getData(filePath).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["map"])(function (configData) {
            return __assign({ loaded: true, result: lodash_es__WEBPACK_IMPORTED_MODULE_7__["get"](configData, 'result') }, (id && { id: id }));
        }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["catchError"])(function (error) { return Object(rxjs__WEBPACK_IMPORTED_MODULE_8__["of"])({ loaded: false }); }));
    };
    ReportService.prototype.downloadMultipleDataSources = function (dataSources) {
        var _this = this;
        if (!dataSources.length) {
            return Object(rxjs__WEBPACK_IMPORTED_MODULE_8__["of"])([]);
        }
        var apiCalls = lodash_es__WEBPACK_IMPORTED_MODULE_7__["map"](dataSources, function (source) {
            return _this.fetchDataSource(lodash_es__WEBPACK_IMPORTED_MODULE_7__["get"](source, 'path'), lodash_es__WEBPACK_IMPORTED_MODULE_7__["get"](source, 'id'));
        });
        return rxjs__WEBPACK_IMPORTED_MODULE_8__["forkJoin"].apply(void 0, apiCalls).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["mergeMap"])(function (response) {
            response = response.filter(function (item) { if (item) {
                return item.loaded = true;
            } });
            return _this.getFileMetaData(dataSources).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["map"])(function (metadata) {
                return lodash_es__WEBPACK_IMPORTED_MODULE_7__["map"](response, function (res) {
                    res.lastModifiedOn = lodash_es__WEBPACK_IMPORTED_MODULE_7__["get"](metadata[res.id], 'lastModified');
                    return res;
                });
            }));
        }));
    };
    ReportService.prototype.fetchReportById = function (id, hash) {
        var req = {
            url: this.configService.urlConFig.URLS.REPORT.READ + "/" + id
        };
        if (hash) {
            req.url = this.configService.urlConFig.URLS.REPORT.READ + "/" + id + "/" + hash;
        }
        return this.baseReportService.get(req).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["map"])(function (apiResponse) { return lodash_es__WEBPACK_IMPORTED_MODULE_7__["get"](apiResponse, 'result'); }));
    };
    ReportService.prototype.publishReport = function (reportId, hash) {
        var req = {
            url: this.configService.urlConFig.URLS.REPORT.PUBLISH + "/" + reportId
        };
        if (hash) {
            req.url = this.configService.urlConFig.URLS.REPORT.PUBLISH + "/" + reportId + "/" + hash;
        }
        return this.baseReportService.get(req).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["map"])(function (apiResponse) { return lodash_es__WEBPACK_IMPORTED_MODULE_7__["get"](apiResponse, 'result'); }));
    };
    ReportService.prototype.retireReport = function (reportId, hash) {
        var req = {
            url: this.configService.urlConFig.URLS.REPORT.RETIRE + "/" + reportId
        };
        if (hash) {
            req.url = this.configService.urlConFig.URLS.REPORT.RETIRE + "/" + reportId + "/" + hash;
        }
        return this.baseReportService.get(req).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["map"])(function (apiResponse) { return lodash_es__WEBPACK_IMPORTED_MODULE_7__["get"](apiResponse, 'result'); }));
    };
    ReportService.prototype.listAllReports = function (filters) {
        if (filters === void 0) { filters = {}; }
        var request = {
            url: this.configService.urlConFig.URLS.REPORT.LIST,
            data: {
                'request': {
                    'filters': filters
                }
            }
        };
        return this.baseReportService.post(request).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["map"])(function (apiResponse) { return lodash_es__WEBPACK_IMPORTED_MODULE_7__["get"](apiResponse, 'result'); }));
    };
    ReportService.prototype.updateReport = function (reportId, body) {
        var request = {
            url: this.configService.urlConFig.URLS.REPORT.UPDATE + "/" + reportId,
            data: {
                'request': {
                    'report': body
                }
            }
        };
        return this.baseReportService.patch(request).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["map"])(function (apiResponse) { return lodash_es__WEBPACK_IMPORTED_MODULE_7__["get"](apiResponse, 'result'); }));
    };
    ReportService.prototype.addSummary = function (body) {
        var request = {
            url: "" + this.configService.urlConFig.URLS.REPORT.SUMMARY.CREATE,
            data: {
                'request': {
                    'summary': body
                }
            }
        };
        return this.baseReportService.post(request).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["map"])(function (apiResponse) { return lodash_es__WEBPACK_IMPORTED_MODULE_7__["get"](apiResponse, 'result'); }));
    };
    ReportService.prototype.prepareChartData = function (chartsArray, data, downloadUrl, reportLevelDataSourceId) {
        var _this = this;
        return lodash_es__WEBPACK_IMPORTED_MODULE_7__["map"](chartsArray, function (chart) {
            var chartType = chart.chartType, _a = chart.dataSource, dataSource = _a === void 0 ? null : _a, _b = chart.mapData, mapData = _b === void 0 ? {} : _b;
            var chartObj = {};
            chartObj.chartConfig = chart;
            if (!chartObj.chartConfig['id']) {
                chartObj.chartConfig['id'] = angular2_uuid__WEBPACK_IMPORTED_MODULE_10__["UUID"].UUID();
            }
            chartObj.downloadUrl = downloadUrl;
            chartObj.chartData = dataSource ? _this.getChartData(data, chart) :
                lodash_es__WEBPACK_IMPORTED_MODULE_7__["get"](_this.getDataSourceById(data, reportLevelDataSourceId || 'default'), 'data');
            chartObj.lastUpdatedOn = lodash_es__WEBPACK_IMPORTED_MODULE_7__["get"](data, 'metadata.lastUpdatedOn') ||
                _this.getLatestLastModifiedOnDate(data, dataSource || { ids: [reportLevelDataSourceId || 'default'] });
            if (chartType && lodash_es__WEBPACK_IMPORTED_MODULE_7__["toLower"](chartType) === 'map') {
                chartObj.mapData = __assign(__assign({}, mapData), { reportData: chartObj.chartData });
            }
            if (chartObj && chartObj.chartData && chartObj.chartData.length > 0) {
                return chartObj;
            }
        }).filter(function (chartData) {
            if (chartData) {
                return (chartData['chartData'] != null || chartData['chartData'] != undefined);
            }
        });
    };
    ReportService.prototype.prepareTableData = function (tablesArray, data, downloadUrl, hash) {
        var _this = this;
        tablesArray = lodash_es__WEBPACK_IMPORTED_MODULE_7__["isArray"](tablesArray) ? tablesArray : [tablesArray];
        return lodash_es__WEBPACK_IMPORTED_MODULE_7__["map"](tablesArray, function (table) {
            var tableId = lodash_es__WEBPACK_IMPORTED_MODULE_7__["get"](table, 'id') || "table-" + lodash_es__WEBPACK_IMPORTED_MODULE_7__["random"](1000);
            var dataset = _this.getTableData(data, lodash_es__WEBPACK_IMPORTED_MODULE_7__["get"](table, 'id'));
            var tableData = {};
            tableData.id = tableId;
            tableData.name = lodash_es__WEBPACK_IMPORTED_MODULE_7__["get"](table, 'name') || 'Table';
            tableData.config = lodash_es__WEBPACK_IMPORTED_MODULE_7__["get"](table, 'config') || false;
            if (!tableData.config) {
                tableData.data = lodash_es__WEBPACK_IMPORTED_MODULE_7__["get"](table, 'values') || lodash_es__WEBPACK_IMPORTED_MODULE_7__["get"](dataset, lodash_es__WEBPACK_IMPORTED_MODULE_7__["get"](table, 'valuesExpr'));
            }
            else {
                tableData.data = dataset.data;
            }
            tableData.header = lodash_es__WEBPACK_IMPORTED_MODULE_7__["get"](table, 'columns') || lodash_es__WEBPACK_IMPORTED_MODULE_7__["get"](dataset, lodash_es__WEBPACK_IMPORTED_MODULE_7__["get"](table, 'columnsExpr'));
            tableData.downloadUrl = _this.resolveParameterizedPath(lodash_es__WEBPACK_IMPORTED_MODULE_7__["get"](table, 'downloadUrl') || downloadUrl, hash ? _this.getParameterFromHash(hash) : null);
            return tableData;
        });
    };
    ReportService.prototype.getParameterizedFiles = function (files, hash) {
        var _this = this;
        return files.map(function (file) { return (__assign(__assign({}, file), { downloadUrl: _this.resolveParameterizedPath(file.downloadUrl, hash ? _this.getParameterFromHash(hash) : null) })); });
    };
    ReportService.prototype.getTableData = function (data, tableId) {
        if (data.length === 1) {
            var dataSource = data[0];
            if (dataSource.id === 'default') {
                return dataSource.result;
            }
        }
        return this.getDataSourceById(data, tableId) || {};
    };
    ReportService.prototype.getLatestLastModifiedOnDate = function (data, dataSourceIds) {
        var queryObj = data;
        if (dataSourceIds) {
            queryObj = lodash_es__WEBPACK_IMPORTED_MODULE_7__["filter"](data, function (obj) { return lodash_es__WEBPACK_IMPORTED_MODULE_7__["includes"](dataSourceIds.ids, obj.id); });
        }
        return Date.parse(lodash_es__WEBPACK_IMPORTED_MODULE_7__["get"](lodash_es__WEBPACK_IMPORTED_MODULE_7__["maxBy"](queryObj, function (val) { return Date.parse(val.lastModifiedOn); }), 'lastModifiedOn'));
    };
    ReportService.prototype.getDataSourceById = function (dataSources, id) {
        if (id === void 0) { id = 'default'; }
        return lodash_es__WEBPACK_IMPORTED_MODULE_7__["get"](lodash_es__WEBPACK_IMPORTED_MODULE_7__["find"](dataSources, ['id', id]), 'result');
    };
    ReportService.prototype.overlayMultipleDataSources = function (dataSources, commonDimension) {
        return lodash_es__WEBPACK_IMPORTED_MODULE_7__["flatten"](dataSources);
    };
    ReportService.prototype.downloadReport = function (filePathSource) {
        return this.fetchDataSource(filePathSource).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["map"])(function (response) { return lodash_es__WEBPACK_IMPORTED_MODULE_7__["get"](response, 'result.signedUrl'); }));
    };
    ReportService.prototype.isAuthenticated = function (roles) {
        var _this = this;
        return this.userService.userData$.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["map"])(function (user) {
            if (user && !user.err) {
                var allowedRoles = _this.configService.rolesConfig.ROLES[roles];
                var userRoles = user.userProfile.userRoles;
                return lodash_es__WEBPACK_IMPORTED_MODULE_7__["intersection"](allowedRoles, userRoles).length;
            }
            else {
                return false;
            }
        }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["catchError"])(function (err) { return Object(rxjs__WEBPACK_IMPORTED_MODULE_8__["of"])(false); }));
    };
    ReportService.prototype.isUserReportAdmin = function () {
        if (this.userService.userProfile) {
            return lodash_es__WEBPACK_IMPORTED_MODULE_7__["includes"](lodash_es__WEBPACK_IMPORTED_MODULE_7__["get"](this.userService, 'userProfile.userRoles'), 'REPORT_ADMIN');
        }
        return false;
    };
    ReportService.prototype.isUserSuperAdmin = function () {
        if (!this.isUserReportAdmin()) {
            return false;
        }
        return lodash_es__WEBPACK_IMPORTED_MODULE_7__["get"](this.userService, 'userProfile.rootOrg.slug') === this._superAdminSlug;
    };
    ReportService.prototype.transformHTML = function (data) {
        return this.sanitizer.bypassSecurityTrustHtml(data);
    };
    ReportService.prototype.addReportSummary = function (_a) {
        var reportId = _a.reportId, summaryDetails = _a.summaryDetails;
        var type = lodash_es__WEBPACK_IMPORTED_MODULE_7__["get"](summaryDetails, 'type');
        var reqBody = __assign(__assign({ reportid: reportId, createdby: this.userService.userid, summary: summaryDetails.summary }, (summaryDetails.hash && { param_hash: summaryDetails.hash })), (type === 'chart' && { chartid: summaryDetails.chartId }));
        return this.addSummary(reqBody);
    };
    ReportService.prototype.getFileMetaData = function (dataSources) {
        var mappedfileIdWithPath = lodash_es__WEBPACK_IMPORTED_MODULE_7__["mapValues"](lodash_es__WEBPACK_IMPORTED_MODULE_7__["keyBy"](dataSources, 'id'), 'path');
        lodash_es__WEBPACK_IMPORTED_MODULE_7__["forIn"](mappedfileIdWithPath, function (val, key, object) {
            object[key] = lodash_es__WEBPACK_IMPORTED_MODULE_7__["join"](lodash_es__WEBPACK_IMPORTED_MODULE_7__["slice"](lodash_es__WEBPACK_IMPORTED_MODULE_7__["split"](val, '/'), -2), '/');
        });
        var requestParams = {
            params: {
                fileNames: JSON.stringify(mappedfileIdWithPath)
            }
        };
        return this.courseProgressService.getReportsMetaData(requestParams)
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["pluck"])('result'), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["catchError"])(function (err) { return Object(rxjs__WEBPACK_IMPORTED_MODULE_8__["of"])({}); }));
    };
    ReportService.prototype.getFormattedDate = function (dateString) {
        return moment__WEBPACK_IMPORTED_MODULE_9__(dateString).format('DD-MMMM-YYYY');
    };
    ReportService.prototype.getLatestSummary = function (_a) {
        var reportId = _a.reportId, _b = _a.chartId, chartId = _b === void 0 ? null : _b, _c = _a.hash, hash = _c === void 0 ? null : _c;
        var url = this.configService.urlConFig.URLS.REPORT.SUMMARY.PREFIX + "/" + reportId;
        var req = {
            url: chartId ? url + "/" + chartId : url
        };
        if (hash) {
            req.url = req.url + "?hash=" + hash;
        }
        return this.baseReportService.get(req).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["map"])(function (apiResponse) { return lodash_es__WEBPACK_IMPORTED_MODULE_7__["get"](apiResponse, 'result.summaries'); }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["catchError"])(function (err) { return Object(rxjs__WEBPACK_IMPORTED_MODULE_8__["of"])([]); }));
    };
    ReportService.prototype.getParameterValues = function (parameter) {
        var _this = this;
        var parameterMappings = {
            $slug: {
                value: lodash_es__WEBPACK_IMPORTED_MODULE_7__["get"](this.userService, 'userProfile.rootOrg.slug'),
                masterData: function () {
                    if (!_this.cachedMapping.hasOwnProperty('$slug')) {
                        var req = {
                            filters: { isRootOrg: true },
                            fields: ['id', 'channel', 'slug', 'orgName'],
                            pageNumber: 1,
                            limit: 10000
                        };
                        _this.cachedMapping['$slug'] = _this.searchService.orgSearch(req).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["map"])(function (res) { return lodash_es__WEBPACK_IMPORTED_MODULE_7__["map"](lodash_es__WEBPACK_IMPORTED_MODULE_7__["get"](res, 'result.response.content'), 'slug'); }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["shareReplay"])(1));
                    }
                    return _this.cachedMapping['$slug'];
                }
            },
            $board: {
                value: lodash_es__WEBPACK_IMPORTED_MODULE_7__["get"](this.userService, 'userProfile.framework.board[0]'),
                masterData: function () {
                    if (!_this.cachedMapping.hasOwnProperty('$board')) {
                        _this.cachedMapping['$board'] = _this.frameworkService.getChannel(lodash_es__WEBPACK_IMPORTED_MODULE_7__["get"](_this.userService, 'hashTagId'))
                            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["mergeMap"])(function (channel) { return _this.frameworkService.getFrameworkCategories(lodash_es__WEBPACK_IMPORTED_MODULE_7__["get"](channel, 'result.channel.defaultFramework'))
                            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["map"])(function (framework) {
                            var frameworkData = lodash_es__WEBPACK_IMPORTED_MODULE_7__["get"](framework, 'result.framework');
                            var boardCategory = lodash_es__WEBPACK_IMPORTED_MODULE_7__["find"](frameworkData.categories, ['code', 'board']);
                            if (!boardCategory) {
                                return Object(rxjs__WEBPACK_IMPORTED_MODULE_8__["of"])([]);
                            }
                            return lodash_es__WEBPACK_IMPORTED_MODULE_7__["map"](boardCategory.terms, 'name');
                        }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["shareReplay"])(1)); }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["catchError"])(function (err) { return Object(rxjs__WEBPACK_IMPORTED_MODULE_8__["of"])([]); }));
                    }
                    return _this.cachedMapping['$board'];
                }
            },
            $state: {
                value: lodash_es__WEBPACK_IMPORTED_MODULE_7__["get"](lodash_es__WEBPACK_IMPORTED_MODULE_7__["find"](lodash_es__WEBPACK_IMPORTED_MODULE_7__["get"](this.userService, 'userProfile.userLocations'), ['type', 'state']), 'name'),
                masterData: function () {
                    if (!_this.cachedMapping.hasOwnProperty('$state')) {
                        var requestData = { 'filters': { 'type': 'state' } };
                        _this.cachedMapping['$state'] = _this.profileService.getUserLocation(requestData).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["map"])(function (apiResponse) { return lodash_es__WEBPACK_IMPORTED_MODULE_7__["map"](lodash_es__WEBPACK_IMPORTED_MODULE_7__["get"](apiResponse, 'result.response'), function (state) { return lodash_es__WEBPACK_IMPORTED_MODULE_7__["get"](state, 'name'); }); }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["shareReplay"])(1), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["catchError"])(function (err) { return Object(rxjs__WEBPACK_IMPORTED_MODULE_8__["of"])([]); }));
                    }
                    return _this.cachedMapping['$state'];
                }
            },
            $channel: {
                value: lodash_es__WEBPACK_IMPORTED_MODULE_7__["get"](this.userService, 'userProfile.rootOrg.hashTagId'),
                masterData: function () {
                    if (!_this.cachedMapping.hasOwnProperty('$channel')) {
                        var req = {
                            filters: { isRootOrg: true },
                            fields: ['id', 'channel', 'slug', 'orgName'],
                            pageNumber: 1,
                            limit: 10000
                        };
                        _this.cachedMapping['$channel'] = _this.searchService.orgSearch(req).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["map"])(function (res) { return lodash_es__WEBPACK_IMPORTED_MODULE_7__["map"](lodash_es__WEBPACK_IMPORTED_MODULE_7__["get"](res, 'result.response.content'), 'id'); }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["shareReplay"])(1));
                    }
                    return _this.cachedMapping['$channel'];
                }
            }
        };
        return parameterMappings[parameter];
    };
    ReportService.prototype.resolveParameterizedPath = function (path, explicitValue) {
        var _this = this;
        return lodash_es__WEBPACK_IMPORTED_MODULE_7__["reduce"](PRE_DEFINED_PARAMETERS, function (result, parameter) {
            if (lodash_es__WEBPACK_IMPORTED_MODULE_7__["includes"](result, parameter) && _this.getParameterValues(parameter)) {
                result = lodash_es__WEBPACK_IMPORTED_MODULE_7__["replace"](result, parameter, explicitValue || _this.getParameterValues(parameter).value);
            }
            return result;
        }, path);
    };
    ReportService.prototype.getUpdatedParameterizedPath = function (dataSources, hash) {
        var _this = this;
        var explicitValue = hash ? this.getParameterFromHash(hash) : null;
        return lodash_es__WEBPACK_IMPORTED_MODULE_7__["map"](dataSources, function (dataSource) { return ({
            id: dataSource.id,
            path: _this.resolveParameterizedPath(dataSource.path, explicitValue)
        }); });
    };
    ReportService.prototype.getMaterializedChildRows = function (reports) {
        var _this = this;
        var apiCall = lodash_es__WEBPACK_IMPORTED_MODULE_7__["map"](reports, function (report) {
            var isParameterized = lodash_es__WEBPACK_IMPORTED_MODULE_7__["get"](report, 'isParameterized') || false;
            if (!isParameterized) {
                return Object(rxjs__WEBPACK_IMPORTED_MODULE_8__["of"])(report);
            }
            var parameters = lodash_es__WEBPACK_IMPORTED_MODULE_7__["get"](report, 'parameters');
            if (!parameters.length) {
                return Object(rxjs__WEBPACK_IMPORTED_MODULE_8__["of"])(report);
            }
            var paramObj = _this.getParameterValues(lodash_es__WEBPACK_IMPORTED_MODULE_7__["toLower"](parameters[0]));
            if (!paramObj) {
                return Object(rxjs__WEBPACK_IMPORTED_MODULE_8__["of"])(report);
            }
            return paramObj.masterData()
                .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["map"])(function (results) {
                report.children = lodash_es__WEBPACK_IMPORTED_MODULE_7__["uniqBy"](lodash_es__WEBPACK_IMPORTED_MODULE_7__["concat"](lodash_es__WEBPACK_IMPORTED_MODULE_7__["map"](report.children, function (child) { return (__assign(__assign({}, child), { label: _this.getParameterFromHash(child.hashed_val) })); }), lodash_es__WEBPACK_IMPORTED_MODULE_7__["map"](results, function (res) { return ({
                    label: res,
                    hashed_val: _this.convertToBase64(lodash_es__WEBPACK_IMPORTED_MODULE_7__["split"](res, '__')),
                    status: 'draft',
                    reportid: lodash_es__WEBPACK_IMPORTED_MODULE_7__["get"](report, 'reportid'),
                    materialize: true
                }); })), 'hashed_val');
                return report;
            }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_6__["catchError"])(function (err) {
                console.error(err);
                return Object(rxjs__WEBPACK_IMPORTED_MODULE_8__["of"])(report);
            }));
        });
        return Object(rxjs__WEBPACK_IMPORTED_MODULE_8__["forkJoin"])(apiCall);
    };
    ReportService.prototype.getFlattenedReports = function (reports) {
        return lodash_es__WEBPACK_IMPORTED_MODULE_7__["reduce"](reports, function (result, report) {
            var isParameterized = lodash_es__WEBPACK_IMPORTED_MODULE_7__["get"](report, 'isParameterized') || false;
            if (isParameterized && lodash_es__WEBPACK_IMPORTED_MODULE_7__["get"](report, 'children.length')) {
                for (var _i = 0, _a = report.children; _i < _a.length; _i++) {
                    var childReport = _a[_i];
                    var flattenedReport = lodash_es__WEBPACK_IMPORTED_MODULE_7__["assign"](__assign({}, report), lodash_es__WEBPACK_IMPORTED_MODULE_7__["omit"](childReport, 'id'));
                    delete flattenedReport.children;
                    result.push(flattenedReport);
                }
                return result;
            }
            result.push(report);
            return result;
        }, []);
    };
    ReportService.prototype.getContentCreationStaticsReport = function (data) {
        var options = {
            url: this.configService.urlConFig.URLS.CONTENT.SEARCH,
            data: data
        };
        return this.publicDataService.post(options);
    };
    ReportService.prototype.getOrganizationName = function (data) {
        var options = {
            url: this.configService.urlConFig.URLS.ADMIN.ORG_SEARCH,
            data: data,
        };
        return this.publicDataService.post(options);
    };
    ReportService.prototype.getOrgList = function () {
        var options = {
            url: this.configService.urlConFig.URLS.CHANNEL.LIST,
        };
        return this.learnerService.post(options);
    };
    ReportService.prototype.getDepartmentList = function (frameWork) {
        var options = {
            url: this.configService.urlConFig.URLS.FRAMEWORK.READ + '/' + frameWork,
        };
        return this.publicDataService.get(options);
    };
    ReportService.prototype.getSubOrgList = function (data) {
        var option = {
            url: this.configService.urlConFig.URLS.ADMIN.ORG_SEARCH,
            data: data
        };
        return this.publicDataService.post(option);
    };
    ReportService.prototype.getEnrolledCourses = function () {
        var option = {
            url: this.configService.urlConFig.URLS.COURSE.GET_ENROLLED_COURSES + '/' + this.userService.userid,
            param: __assign(__assign({}, this.configService.appConfig.Course.contentApiQueryParams), this.configService.urlConFig.params.enrolledCourses)
        };
        return this.learnerService.get(option);
    };
    ReportService.prototype.getUserList = function () {
        var options = {
            url: this.configService.urlConFig.URLS.ADMIN.USER_SEARCH,
            data: {
                request: {
                    filters: {},
                    limit: 5000,
                }
            }
        };
        return this.learnerService.post(options);
    };
    return ReportService;
}());



/***/ }),

/***/ "tE9X":
/*!*******************************************************************************************************!*\
  !*** ./src/app/modules/dashboard/components/content-category-wise/content-category-wise.component.ts ***!
  \*******************************************************************************************************/
/*! exports provided: ContentCategoryWiseComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ContentCategoryWiseComponent", function() { return ContentCategoryWiseComponent; });
/* harmony import */ var chart_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! chart.js */ "MO+k");
/* harmony import */ var chart_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(chart_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _sunbird_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @sunbird/core */ "q/PB");
/* harmony import */ var _services_report_report_service__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../services/report/report.service */ "t7hn");
/* harmony import */ var _sunbird_shared__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @sunbird/shared */ "btWG");
/* harmony import */ var lodash_es__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! lodash-es */ "T89o");
/* harmony import */ var _services_addusser_addusser_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../services/addusser/addusser.service */ "9r3v");






var ContentCategoryWiseComponent = (function () {
    function ContentCategoryWiseComponent(_httpService, reportService, searchService, toasterService, resourceService) {
        this._httpService = _httpService;
        this.reportService = reportService;
        this.searchService = searchService;
        this.toasterService = toasterService;
        this.resourceService = resourceService;
        this.organizationTab = true;
        this.userTab = true;
        this.cityList = [];
        this.userList = [];
        this.noResult = true;
        this.popupTitle = "Content wise Graphical Reports";
        this.selectedItems = [];
        this.addUserPopup = false;
        this.i = 0;
        this.strList = "";
        this.colsUser = [];
        this.Graph_Data_List = [];
        this.Table_Data_List = [];
        this.B1_Root_list = [];
        this.B2_Root_list = [];
        this.strTxt = '';
        this.tooltip = '';
    }
    ContentCategoryWiseComponent.prototype.ngOnInit = function () {
        this.getContentList();
        this.colsUser = [
            { field: 'SNo', header: 'SNo', width: '50px' },
            { field: 'organisation', header: 'Organisation', width: '150px' },
            { field: 'Category', header: 'Category', width: '150px' },
            { field: 'subject', header: 'Sub Category', width: '150px' },
            { field: 'name', header: 'Topic', width: '150px' },
            { field: 'creator', header: 'Creator', width: '150px' },
        ];
    };
    ContentCategoryWiseComponent.prototype.getContentList = function () {
        var _this = this;
        var data = {
            "request": {
                "query": "",
                "filters": { "status": ["Live"],
                    "framework": ["nulp"],
                    "contentType": ["Course", 'Resource', 'Collection'] },
                "limit": "1000",
                "sort_by": { "lastUpdatedOn": "desc" },
                "fields": ["identifier", "creator", "organisation", "copyright",
                    "name", "contentType", "createdFor", "channel",
                    "board", "medium", "gradeLevel", "subject",
                    "lastUpdatedOn", "status", "createdBy",
                    "framework", "createdOn", "lastPublishedOn"]
            }
        };
        this.reportService.getContentCreationStaticsReport(data).subscribe(function (response) {
            if (lodash_es__WEBPACK_IMPORTED_MODULE_4__["get"](response, 'responseCode') === 'OK') {
                if (response.result.count > 0) {
                    var tableData = [];
                    var tempObj = lodash_es__WEBPACK_IMPORTED_MODULE_4__["cloneDeep"](response.result.content);
                    tableData = tempObj;
                    var self = _this;
                    var ChnlIds = [];
                    var UserIds = [];
                    ChnlIds = lodash_es__WEBPACK_IMPORTED_MODULE_4__["uniq"](lodash_es__WEBPACK_IMPORTED_MODULE_4__["map"](tempObj, 'channel'));
                    UserIds = lodash_es__WEBPACK_IMPORTED_MODULE_4__["uniq"](lodash_es__WEBPACK_IMPORTED_MODULE_4__["map"](tempObj, 'createdBy'));
                    var reqParam = { filters: { id: UserIds } };
                    _this.searchService.getUserList(reqParam).subscribe(function (response) {
                        _this.userList = [];
                        var userObj = lodash_es__WEBPACK_IMPORTED_MODULE_4__["cloneDeep"](response.result.response.content);
                        _this.userList = userObj;
                        var reqPayload = { "request": { "filters": { "id": ChnlIds }, "limit": 1000, "offset": 0 } };
                        _this.reportService.getOrganizationName(reqPayload).subscribe(function (response) {
                            response.result.response.content.forEach(function (c) {
                                _this.cityList.push({ "id": c.id, "orgName": c.orgName, "identifier": c.identifier });
                            });
                            _this.InitializeGraph(tableData);
                        });
                    });
                }
                else {
                    _this.noResultMessage = { 'messageText': 'messages.stmsg.m0131' };
                    _this.noResult = true;
                }
            }
            else {
                _this.toasterService.error(_this.resourceService.messages.emsg.m0007);
            }
        }, function (err) {
            _this.toasterService.error(_this.resourceService.messages.emsg.m0007);
        });
    };
    ContentCategoryWiseComponent.prototype.InitializeGraph = function (C_List) {
        var _this = this;
        if (this.cityList.length > 0) {
        }
        this.userList.forEach(function (element) {
            _this.cityList.forEach(function (element1) {
                if (element.organisations.length > 1) {
                    if ((element1.identifier == element.organisations[1].organisationId) &&
                        (element.rootOrgId != element.organisations[1].organisationId)) {
                        element.orgNameUser_new = element1.orgName;
                        element.orgTypeUser_new = 'Sub Organization';
                    }
                    else if (element.rootOrgId == element.organisations[1].organisationId) {
                        element.orgNameUser_new = element.organisations[0].orgName;
                        element.orgTypeUser_new = 'Sub Organization';
                    }
                    else {
                        element.orgNameUser_new = element.organisations[0].orgName;
                        element.orgTypeUser_new = 'Sub Organization';
                    }
                }
                else if (element.organisations.length == 1) {
                    element.orgNameUser_new = element.organisations[0].orgName;
                    element.orgTypeUser_new = 'Root  Organization';
                }
            });
        });
        var groupedUserData = this.userList.reduce(function (rv, x) {
            (rv[x['orgNameUser_new']] = rv[x['orgNameUser_new']] || []).push(x);
            return rv;
        }, {});
        this.Graph_Data_List = [];
        C_List.forEach(function (x) {
            var CityTraced = _this.cityList.find(function (el) { return el.id === x.channel; });
            var UserTraced = _this.userList.find(function (el) { return el.id === x.createdBy; });
            _this.Graph_Data_List.push({
                "identifier": x.identifier,
                "copyright": x.copyright,
                "createdFor": x.createdFor,
                "creator": x.creator,
                "subject": x.subject,
                "channel": x.channel,
                "organisation": x.organisation,
                "RootOrgName_new_user": CityTraced["orgName"],
                "rootOrgName_new_city": UserTraced["rootOrgName"],
                "orgNameUser_new": UserTraced["orgNameUser_new"],
                "orgTypeUser_new": UserTraced["orgTypeUser_new"],
                "lastNameUser_new": UserTraced["lastName"],
                "createdBy": x.createdBy,
                "medium": x.medium,
                "name": x.name,
                "createdOn": x.createdOn,
                "objectType": x.objectType,
                "gradeLevel": x.gradeLevel,
                "framework": x.framework,
                "contentType": x.contentType,
                "Category": x.board,
                "lastPublishedOn": x.lastPublishedOn,
                "lastUpdatedOn": x.lastUpdatedOn,
                "status": x.status
            });
        });
        this.Graph_Data_List.sort(function (a, b) {
            if (a.createdBy < b.createdBy)
                return -1;
            if (a.createdBy > b.createdBy)
                return 1;
            return 0;
        });
        this.GeneratingCategorylChart(this.Graph_Data_List);
    };
    ContentCategoryWiseComponent.prototype.GeneratingCategorylChart = function (ResultCT) {
        var _this = this;
        var B1_Name = [];
        var B1_Value = [];
        var B1_Filter = [];
        var B1_Colour = [];
        this.B1_Root_list = this.groupByKey(ResultCT, "Category");
        Object.keys(this.B1_Root_list).forEach(function (x) {
            B1_Name.push(x);
            B1_Value.push(_this.B1_Root_list[x].length);
            var xx = _this.B1_Root_list[x];
            B1_Filter.push(xx[0].Category);
            B1_Colour.push(_this.getRandomColorHex());
        });
        this.B1_Chart(B1_Name, B1_Value, B1_Filter, B1_Colour);
    };
    ContentCategoryWiseComponent.prototype.B1_Chart = function (B1_Name, B1_Value, B1_Filter, B1_Colour) {
        if (this.B1_Piechart) {
            this.B1_Piechart.destroy();
        }
        this.B1_Piechart = new chart_js__WEBPACK_IMPORTED_MODULE_0__["Chart"]('B1_Canvas1', {
            type: 'bar',
            data: {
                labels: B1_Name,
                datasets: [{
                        data: B1_Value,
                        borderColor: B1_Filter,
                        borderSkipped: B1_Filter,
                        backgroundColor: B1_Colour,
                        borderWidth: 1,
                        fill: true
                    }
                ]
            },
            options: {
                tooltips: { mode: 'index' },
                title: { display: true, text: "Category wise Content Dashboard", fontSize: 18, fontColor: "#111", },
                legend: { display: false, labels: { fontColor: "green", } },
                scales: {
                    xAxes: [{ scaleLabel: { display: true, labelString: 'Content Category' } }],
                    yAxes: [{ scaleLabel: { display: true, labelString: 'Content Count' } }],
                },
            }
        });
    };
    ContentCategoryWiseComponent.prototype.B1_Chart_showData = function (evt) {
        this.resetGraph('B1');
        var activePoint = this.B1_Piechart.getElementAtEvent(evt);
        if (activePoint.length > 0) {
            var clickedDatasetIndex = activePoint[0]._datasetIndex;
            var clickedElementindex = activePoint[0]._index;
            var filter_data = activePoint[0]._model.borderSkipped;
            this.strTxt = JSON.stringify(activePoint[0]._model);
            var label = this.B1_Piechart.data.labels[clickedElementindex];
            var value = this.B1_Piechart.data.datasets[clickedDatasetIndex].data[clickedElementindex];
            this.B2_Root_list = this.groupBy(this.B1_Root_list[filter_data], function (item) {
                return [item.orgTypeUser_new, item.orgNameUser_new];
            });
            this.popupTitle = this.B1_Root_list[filter_data].length + " Content(s) Created in '" + filter_data + "' Category.";
            this.tooltip = filter_data;
            this.loadGridView(this.B1_Root_list[filter_data]);
            this.GeneratingOrg_TypeChart(this.B2_Root_list);
        }
    };
    ContentCategoryWiseComponent.prototype.GeneratingOrg_TypeChart = function (ResultCO) {
        var _this = this;
        var B2_Name = [];
        var B2_Value = [];
        var B2_Filter = [];
        var B2_Colour = [];
        Object.keys(ResultCO).forEach(function (x) {
            var Obj = ResultCO[x];
            B2_Name.push(Obj[0].orgNameUser_new);
            B2_Value.push(ResultCO[x].length);
            B2_Filter.push(x);
            B2_Colour.push(_this.getRandomColorHex());
        });
        this.B2_Chart(B2_Name, B2_Value, B2_Filter, B2_Colour);
    };
    ContentCategoryWiseComponent.prototype.B2_Chart = function (B2_Name, B2_Value, B2_Filter, B2_Colour) {
        if (this.B2_Piechart) {
            this.B2_Piechart.destroy();
        }
        this.B2_Piechart = new chart_js__WEBPACK_IMPORTED_MODULE_0__["Chart"]('B2_Canvas', {
            type: 'bar',
            data: {
                labels: B2_Name,
                datasets: [{
                        data: B2_Value,
                        borderColor: B2_Filter,
                        borderSkipped: B2_Filter,
                        backgroundColor: B2_Colour,
                        borderWidth: 1,
                        fill: true
                    }
                ]
            },
            options: {
                tooltips: { mode: 'index' },
                title: { display: true, text: "Orgnization wise Content Created", fontSize: 18, fontColor: "#111", },
                legend: { display: false, labels: { fontColor: "green", } },
                scales: {
                    xAxes: [{ scaleLabel: { display: true, labelString: 'Organization' } }],
                    yAxes: [{ scaleLabel: { display: true, labelString: 'Content Count' } }],
                },
            }
        });
    };
    ContentCategoryWiseComponent.prototype.B2_Chart_showData = function (evt) {
        this.resetGraph('B2');
        var activePoint = this.B2_Piechart.getElementAtEvent(evt);
        if (activePoint.length > 0) {
            var clickedDatasetIndex = activePoint[0]._datasetIndex;
            var clickedElementindex = activePoint[0]._index;
            var filter_data = activePoint[0]._model.borderSkipped;
            var label = this.B2_Piechart.data.labels[clickedElementindex];
            var value = this.B2_Piechart.data.datasets[clickedDatasetIndex].data[clickedElementindex];
            this.popupTitle = this.B2_Root_list[filter_data].length + " Content(s) of '" + this.tooltip + "' Category are Created.";
            this.loadGridView(this.B2_Root_list[filter_data]);
        }
    };
    ContentCategoryWiseComponent.prototype.resetGraph = function (ngClick) {
        if (ngClick == "B1") {
            this.Table_Data_List = [];
            this.B2_Root_list = [];
        }
        else if (ngClick == "B2") {
            this.Table_Data_List = [];
        }
    };
    ContentCategoryWiseComponent.prototype.loadGridView = function (tableData) {
        var SNo = 0;
        tableData.forEach(function (y) {
            SNo++;
            y.SNo = SNo;
        });
        this.Table_Data_List = tableData;
    };
    ContentCategoryWiseComponent.prototype.getRandomColorHex = function () {
        var color = ["red", "green", "blue", "purple", "magenta", "aqua", "salmon", "darkgray", "pink", "coral"];
        this.i++;
        return "blue";
    };
    ContentCategoryWiseComponent.prototype.groupBy = function (array, f) {
        var groups = {};
        array.forEach(function (o) {
            var group = JSON.stringify(f(o));
            groups[group] = groups[group] || [];
            groups[group].push(o);
        });
        return Object.keys(groups).map(function (group) {
            return groups[group];
        });
    };
    ContentCategoryWiseComponent.prototype.groupByKey = function (list, key) {
        return list.reduce(function (rv, x) {
            (rv[x[key]] = rv[x[key]] || []).push(x);
            return rv;
        }, {});
    };
    ;
    return ContentCategoryWiseComponent;
}());



/***/ }),

/***/ "tPYi":
/*!*********************************************************************************!*\
  !*** ./src/app/modules/dashboard/components/data-chart/data-chart.component.ts ***!
  \*********************************************************************************/
/*! exports provided: DataChartComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DataChartComponent", function() { return DataChartComponent; });
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @angular/core */ "8Y7J");
/* harmony import */ var _services__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./../../services */ "gfN8");
/* harmony import */ var _angular_platform_browser__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/platform-browser */ "cUpR");
/* harmony import */ var _angular_router__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @angular/router */ "iInd");
/* harmony import */ var _sunbird_shared__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @sunbird/shared */ "btWG");
/* harmony import */ var ng2_charts__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ng2-charts */ "hrfs");
/* harmony import */ var lodash_es__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! lodash-es */ "T89o");
/* harmony import */ var _angular_forms__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @angular/forms */ "s7LF");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! rxjs */ "qCKp");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! rxjs/operators */ "kU1M");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! moment */ "VDUF");
/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_10__);
/* harmony import */ var _angular_material_dialog__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @angular/material/dialog */ "iELJ");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};













var DataChartComponent = (function () {
    function DataChartComponent(resourceService, fb, cdr, toasterService, activatedRoute, sanitizer, usageService, reportService, dialog) {
        var _this = this;
        this.resourceService = resourceService;
        this.fb = fb;
        this.cdr = cdr;
        this.toasterService = toasterService;
        this.activatedRoute = activatedRoute;
        this.sanitizer = sanitizer;
        this.usageService = usageService;
        this.reportService = reportService;
        this.dialog = dialog;
        this.hideElements = false;
        this.isUserReportAdmin = false;
        this.openAddSummaryModal = new _angular_core__WEBPACK_IMPORTED_MODULE_0__["EventEmitter"]();
        this.unsubscribe = new rxjs__WEBPACK_IMPORTED_MODULE_8__["Subject"]();
        this.loadash = lodash_es__WEBPACK_IMPORTED_MODULE_6__;
        this.chartLabels = [];
        this.showFilters = false;
        this.showStats = false;
        this.availableChartTypeOptions = ['Bar', 'Line'];
        this.datePickerConfig = { applyLabel: 'Set Date', format: 'DD-MM-YYYY' };
        this.resultStatistics = {};
        this.showGraphStats = false;
        this.bigNumberCharts = [];
        this.showLastUpdatedOn = false;
        this.showChart = false;
        this.filterPopup = false;
        this.filterOpen = false;
        this.filterType = 'chart-filter';
        this.showPercentageInCharts = function () {
            return {
                label: function (tooltipItem, data) {
                    var dataset = data.datasets[tooltipItem.datasetIndex];
                    var total = dataset.data.reduce(function (previousValue, currentValue, currentIndex, array) {
                        return previousValue + currentValue;
                    });
                    var currentVal = dataset.data[tooltipItem.index];
                    var percentage = Math.floor(((currentVal / total) * 100) + 0.5);
                    return data.labels[tooltipItem.index] + ": " + currentVal + "  ( " + percentage + " % )";
                }
            };
        };
        this.setChartLabels = function (groupedDataBasedOnLabels) {
            var labels = [];
            labels = lodash_es__WEBPACK_IMPORTED_MODULE_6__["keys"](groupedDataBasedOnLabels);
            if (lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](_this.chartConfig, 'labels')) {
                labels = lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](_this.chartConfig, 'labels');
            }
            lodash_es__WEBPACK_IMPORTED_MODULE_6__["forEach"](labels, function (label, key) {
                labels[key] = lodash_es__WEBPACK_IMPORTED_MODULE_6__["capitalize"](label);
            });
            _this.chartLabels = labels;
        };
        this.alwaysShowCalendars = true;
    }
    DataChartComponent.prototype.ngOnInit = function () {
        this.chartConfig = lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](this.chartInfo, 'chartConfig');
        this.chartData = lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](this.chartInfo, 'chartData');
        this.chartSummarylabel = "Add " + lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](this.resourceService, 'frmelmnts.lbl.chartSummary');
        if (lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](this.chartInfo, 'lastUpdatedOn')) {
            this.lastUpdatedOn = moment__WEBPACK_IMPORTED_MODULE_10__(lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](this.chartInfo, 'lastUpdatedOn')).format('DD-MMMM-YYYY');
        }
        this.prepareChart();
        this.setTelemetryCdata();
        this.cdr.detectChanges();
    };
    DataChartComponent.prototype.calculateBigNumber = function (chartData) {
        var _this = this;
        var bigNumbersConfig = lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](this.chartConfig, 'bigNumbers');
        this.bigNumberCharts = [];
        if (bigNumbersConfig && bigNumbersConfig.length) {
            lodash_es__WEBPACK_IMPORTED_MODULE_6__["forEach"](bigNumbersConfig, function (config) {
                var bigNumberChartObj = {};
                if (lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](config, 'dataExpr')) {
                    bigNumberChartObj['header'] = lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](config, 'header') || '';
                    bigNumberChartObj['footer'] = lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](config, 'footer') || lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](config, 'dataExpr');
                    bigNumberChartObj['data'] =
                        (lodash_es__WEBPACK_IMPORTED_MODULE_6__["round"](lodash_es__WEBPACK_IMPORTED_MODULE_6__["sumBy"](chartData, function (data) { return lodash_es__WEBPACK_IMPORTED_MODULE_6__["toNumber"](data[lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](config, 'dataExpr')] ? data[lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](config, 'dataExpr')] : 0); }))).toLocaleString('hi-IN');
                    _this.bigNumberCharts.push(bigNumberChartObj);
                }
            });
        }
    };
    DataChartComponent.prototype.checkForExternalChart = function () {
        var iframeConfig = lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](this.chartConfig, 'iframeConfig');
        if (iframeConfig) {
            if (lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](iframeConfig, 'sourceUrl')) {
                return true;
            }
        }
        return false;
    };
    DataChartComponent.prototype.getIframeURL = function () {
        var url = lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](this.iframeDetails, 'sourceUrl') + "?qs=" + Math.round(Math.random() * 10000000);
        return this.sanitizer.bypassSecurityTrustResourceUrl(url);
    };
    DataChartComponent.prototype.prepareChart = function () {
        if (!this.checkForExternalChart()) {
            this.chartOptions = lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](this.chartConfig, 'options') || { responsive: true };
            this.chartColors = lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](this.chartConfig, 'colors') || [];
            this.chartType = lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](this.chartConfig, 'chartType');
            if (this.chartType === 'pie' && lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](this.chartOptions, 'showPercentage')) {
                (this.chartOptions.tooltips || (this.chartOptions.tooltips = {})).callbacks = this.showPercentageInCharts();
            }
            this.legend = (lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](this.chartConfig, 'legend') === false) ? false : true;
            this.showLastUpdatedOn = false;
            this.showChart = false;
            if (lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](this.chartConfig, 'options.showLastUpdatedOn') || this.lastUpdatedOn) {
                this.showLastUpdatedOn = true;
            }
            if ((lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](this.chartConfig, 'labelsExpr') || lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](this.chartConfig, 'labels')) && lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](this.chartConfig, 'datasets')) {
                this.showChart = true;
            }
            this.showGraphStats = lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](this.chartOptions, 'showGraphStats') || false;
            this.getDataSetValue();
        }
        else {
            this.iframeDetails = lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](this.chartConfig, 'iframeConfig');
        }
        if (lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](this.chartConfig, 'bigNumbers')) {
            this.calculateBigNumber(this.chartData);
        }
        var refreshInterval = lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](this.chartConfig, 'options.refreshInterval');
        if (refreshInterval) {
            this.refreshChartDataAfterInterval(refreshInterval);
        }
        this.filters = lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](this.chartConfig, 'filters') || [];
        this.chartSummary$ = this.getChartSummary();
    };
    DataChartComponent.prototype.refreshChartDataAfterInterval = function (interval) {
        var _this = this;
        Object(rxjs__WEBPACK_IMPORTED_MODULE_8__["timer"])(interval, interval).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_9__["switchMap"])(function (val) {
            return _this.usageService.getData(lodash_es__WEBPACK_IMPORTED_MODULE_6__["head"](lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](_this.chartInfo, 'downloadUrl')).path);
        }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_9__["takeUntil"])(this.unsubscribe)).subscribe(function (apiResponse) {
            if (lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](apiResponse, 'responseCode') === 'OK') {
                var chartData = lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](apiResponse, 'result.data');
                _this.chartData = chartData;
                _this.resetFilters = { data: chartData };
            }
        }, function (err) {
            console.log('failed to update chart data', err);
        });
    };
    DataChartComponent.prototype.sortData = function (chartData, labelsExpr) {
        return lodash_es__WEBPACK_IMPORTED_MODULE_6__["orderBy"](chartData, function (data) {
            var date = moment__WEBPACK_IMPORTED_MODULE_10__(data[labelsExpr], 'DD-MM-YYYY');
            if (date.isValid()) {
                return date;
            }
            return data[labelsExpr];
        });
    };
    DataChartComponent.prototype.getDataSetValue = function (chartData) {
        var _this = this;
        if (chartData === void 0) { chartData = this.chartData; }
        var groupedDataBasedOnLabels;
        var labelsExpr = lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](this.chartConfig, 'labelsExpr');
        if (labelsExpr) {
            var sortedData = this.sortData(chartData, labelsExpr);
            groupedDataBasedOnLabels = lodash_es__WEBPACK_IMPORTED_MODULE_6__["groupBy"](sortedData, function (data) { return (data[labelsExpr] ? (lodash_es__WEBPACK_IMPORTED_MODULE_6__["trim"](data[labelsExpr].toLowerCase())) : ''); });
        }
        this.setChartLabels(groupedDataBasedOnLabels);
        this.datasets = [];
        var isStackingEnabled = this.checkForStacking();
        lodash_es__WEBPACK_IMPORTED_MODULE_6__["forEach"](this.chartConfig.datasets, function (dataset) {
            var hidden = lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](dataset, 'hidden') || false;
            var fill = lodash_es__WEBPACK_IMPORTED_MODULE_6__["isBoolean"](lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](dataset, 'fill')) ? lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](dataset, 'fill') : true;
            var type = lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](dataset, 'type');
            var lineThickness = lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](dataset, 'lineThickness');
            var goalValue = lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](dataset, 'goal');
            _this.datasets.push(__assign(__assign(__assign({ label: dataset.label, data: (goalValue && _this.getGoalsDataset(chartData, +goalValue)) || (lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](dataset, 'data') ||
                    _this.getData(groupedDataBasedOnLabels, dataset['dataExpr'], +lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](dataset, 'top'))), hidden: hidden,
                fill: fill }, (isStackingEnabled) && { stack: lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](dataset, 'stack') || 'default' }), (type && { type: type })), (lineThickness) && { borderWidth: lineThickness }));
        });
        if (this.showGraphStats) {
            this.calculateGraphStats();
        }
    };
    DataChartComponent.prototype.getGoalsDataset = function (chartData, goalValue) {
        return lodash_es__WEBPACK_IMPORTED_MODULE_6__["fill"](chartData, goalValue);
    };
    DataChartComponent.prototype.calculateGraphStats = function () {
        var _this = this;
        lodash_es__WEBPACK_IMPORTED_MODULE_6__["forEach"](this.datasets, function (dataset) {
            _this.resultStatistics[dataset.label] = {
                sum: lodash_es__WEBPACK_IMPORTED_MODULE_6__["sumBy"](dataset.data, function (val) { return lodash_es__WEBPACK_IMPORTED_MODULE_6__["toNumber"](val); }).toFixed(2),
                min: lodash_es__WEBPACK_IMPORTED_MODULE_6__["minBy"](dataset.data, function (val) { return lodash_es__WEBPACK_IMPORTED_MODULE_6__["toNumber"](val); }),
                max: lodash_es__WEBPACK_IMPORTED_MODULE_6__["maxBy"](dataset.data, function (val) { return lodash_es__WEBPACK_IMPORTED_MODULE_6__["toNumber"](val); }),
                avg: dataset.data.length > 0 ? (lodash_es__WEBPACK_IMPORTED_MODULE_6__["sumBy"](dataset.data, function (val) { return lodash_es__WEBPACK_IMPORTED_MODULE_6__["toNumber"](val); }) / dataset.data.length).toFixed(2) : 0
            };
        });
    };
    DataChartComponent.prototype.getData = function (groupedDataBasedOnLabels, dataExpr, pickTopNElements) {
        var data = lodash_es__WEBPACK_IMPORTED_MODULE_6__["mapValues"](groupedDataBasedOnLabels, function (value) {
            value = value.filter(function (element) {
                if (element[dataExpr]) {
                    return element;
                }
            });
            return lodash_es__WEBPACK_IMPORTED_MODULE_6__["sumBy"](value, function (o) { return +o[dataExpr]; });
        });
        if (this.chartType === 'pie' && pickTopNElements) {
            var sortedDataInDescOrder = lodash_es__WEBPACK_IMPORTED_MODULE_6__["orderBy"](lodash_es__WEBPACK_IMPORTED_MODULE_6__["map"](data, function (val, key) { return ({ key: key, val: val }); }), 'val', 'desc');
            var topNData = lodash_es__WEBPACK_IMPORTED_MODULE_6__["slice"](sortedDataInDescOrder, 0, pickTopNElements);
            var restOfTheData = lodash_es__WEBPACK_IMPORTED_MODULE_6__["slice"](sortedDataInDescOrder, pickTopNElements);
            var result = lodash_es__WEBPACK_IMPORTED_MODULE_6__["mapValues"](lodash_es__WEBPACK_IMPORTED_MODULE_6__["keyBy"](topNData, 'key'), 'val');
            result['others'] = lodash_es__WEBPACK_IMPORTED_MODULE_6__["sumBy"](restOfTheData, 'val');
            this.setChartLabels(result);
            return lodash_es__WEBPACK_IMPORTED_MODULE_6__["values"](result);
        }
        return lodash_es__WEBPACK_IMPORTED_MODULE_6__["values"](data);
    };
    DataChartComponent.prototype.ngOnDestroy = function () {
        this.unsubscribe.next();
        this.unsubscribe.complete();
    };
    DataChartComponent.prototype.setTelemetryCdata = function () {
        this.telemetryCdata = [
            {
                id: 'dashboard:filter',
                type: 'Feature'
            },
            {
                id: 'SB-13051',
                type: 'Task'
            }
        ];
    };
    DataChartComponent.prototype.setTelemetryInteractEdata = function (val) {
        return {
            id: lodash_es__WEBPACK_IMPORTED_MODULE_6__["join"](lodash_es__WEBPACK_IMPORTED_MODULE_6__["split"](val, ' '), '-').toLowerCase(),
            type: 'click',
            pageid: this.activatedRoute.snapshot.data.telemetry.pageid
        };
    };
    DataChartComponent.prototype.checkForStacking = function () {
        if (lodash_es__WEBPACK_IMPORTED_MODULE_6__["includes"](['bar', 'horizontalbar'], lodash_es__WEBPACK_IMPORTED_MODULE_6__["toLower"](this.chartType))) {
            return lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](this.chartOptions, 'scales.yAxes') && lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](this.chartOptions, 'scales.xAxes') &&
                lodash_es__WEBPACK_IMPORTED_MODULE_6__["every"](this.chartOptions.scales.yAxes, 'stacked') && lodash_es__WEBPACK_IMPORTED_MODULE_6__["every"](this.chartOptions.scales.xAxes, 'stacked');
        }
        else if (lodash_es__WEBPACK_IMPORTED_MODULE_6__["toLower"](this.chartType) === 'line') {
            return lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](this.chartOptions, 'scales.yAxes') && lodash_es__WEBPACK_IMPORTED_MODULE_6__["every"](this.chartOptions.scales.yAxes, 'stacked');
        }
        return false;
    };
    DataChartComponent.prototype.addChartSummary = function () {
        var chartId = lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](this.chartConfig, 'id');
        if (chartId) {
            this.openAddSummaryModal.emit(__assign({ title: this.chartSummarylabel, type: 'chart', chartId: chartId }, (this._chartSummary && { summary: this._chartSummary })));
        }
        else {
            this.toasterService.error('Chart id is not present');
        }
    };
    DataChartComponent.prototype.getChartSummary = function () {
        var _this = this;
        var chartId = lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](this.chartConfig, 'id');
        if (lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](this.chartConfig, 'id')) {
            return this.reportService.getLatestSummary(__assign({ reportId: this.activatedRoute.snapshot.params.reportId, chartId: chartId }, (this.hash && { hash: this.hash }))).pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_9__["map"])(function (chartSummary) {
                _this._chartSummary = '';
                return lodash_es__WEBPACK_IMPORTED_MODULE_6__["map"](chartSummary, function (summaryObj) {
                    var summary = lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](summaryObj, 'summary');
                    _this._chartSummary = summary;
                    if (summary) {
                        _this.chartSummarylabel = lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](_this.resourceService, 'frmelmnts.lbl.updateChartSummary');
                    }
                    return {
                        label: lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](_this.resourceService, 'frmelmnts.lbl.chartSummary'),
                        text: [summary],
                        createdOn: lodash_es__WEBPACK_IMPORTED_MODULE_6__["get"](summaryObj, 'createdon')
                    };
                });
            }));
        }
        else {
            return Object(rxjs__WEBPACK_IMPORTED_MODULE_8__["of"])([]);
        }
    };
    Object.defineProperty(DataChartComponent.prototype, "globalFilter", {
        get: function () {
            return this._globalFilter;
        },
        set: function (val) {
            var _this = this;
            if (val && val.chartData) {
                var updatedChartData = val.chartData.filter(function (chart) {
                    if (chart && chart.id) {
                        if (_this.chartConfig['id'] == chart.id) {
                            return chart.data;
                        }
                    }
                });
                if (updatedChartData && updatedChartData[0] && updatedChartData[0].data) {
                    delete updatedChartData[0].data['selectedFilters'];
                    this.chartData = updatedChartData[0].data;
                    this.cdr.detectChanges();
                    this.getDataSetValue(updatedChartData[0].data);
                    this.calculateBigNumber(updatedChartData[0].data);
                    this.resetForm();
                }
            }
        },
        enumerable: false,
        configurable: true
    });
    DataChartComponent.prototype.filterChanged = function (data) {
        var _this = this;
        this.cdr.detectChanges();
        this.currentFilters = data.filters;
        var keys = Object.keys(this.currentFilters);
        this.dateFilters = [];
        this.filters.map(function (ele) {
            if (ele && ele['controlType'].toLowerCase() == 'date') {
                keys.map(function (item) {
                    if (item == ele['reference']) {
                        _this.dateFilters.push(item);
                    }
                });
            }
        });
        if (data.filters) {
            this.chartData['selectedFilters'] = data.filters;
        }
        else {
            this.chartData['selectedFilters'] = {};
        }
        this.getDataSetValue(data.chartData[0].data);
        this.calculateBigNumber(data.chartData[0].data);
    };
    DataChartComponent.prototype.graphStatsChange = function (data) {
        this.showStats = data;
    };
    DataChartComponent.prototype.changeChartType = function (chartType) {
        this.chartType = lodash_es__WEBPACK_IMPORTED_MODULE_6__["lowerCase"](chartType);
    };
    DataChartComponent.prototype.filterModalPopup = function (operator) {
        if (operator == false) {
            this.closeDialog();
            this.cdr.detectChanges();
        }
        else {
            if (this.currentFilters) {
                this.chartData['selectedFilters'] = this.currentFilters;
                this.resetFilters = { data: this.chartData, reset: true };
            }
            else {
                this.chartData['selectedFilters'] = {};
            }
            this.cdr.detectChanges();
            this.openDialog();
        }
    };
    DataChartComponent.prototype.resetForm = function () {
        this.chartData['selectedFilters'] = {};
        this.resetFilters = { data: this.chartData, reset: true };
        this.currentFilters = [];
    };
    DataChartComponent.prototype.checkFilterReferance = function (element) {
        if (this.dateFilters && this.dateFilters.includes(element)) {
            return true;
        }
        else {
            return false;
        }
    };
    DataChartComponent.prototype.getChartData = function () {
        return [{ id: this.chartConfig.id, data: this.chartData, selectedFilters: this.currentFilters }];
    };
    DataChartComponent.prototype.openDialog = function () {
        if (this.filterPopUpMat) {
            this.dialogRef = this.dialog.open(this.filterPopUpMat);
        }
    };
    DataChartComponent.prototype.closeDialog = function () {
        if (this.dialogRef) {
            this.dialogRef.close();
        }
    };
    return DataChartComponent;
}());



/***/ }),

/***/ "uvmS":
/*!*******************************************************************!*\
  !*** ./src/app/modules/dashboard/components/map/map.component.ts ***!
  \*******************************************************************/
/*! exports provided: MapComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "MapComponent", function() { return MapComponent; });
/* harmony import */ var _sunbird_shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @sunbird/shared */ "btWG");
/* harmony import */ var _services__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../services */ "gfN8");
/* harmony import */ var _angular_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @angular/core */ "8Y7J");
/* harmony import */ var rxjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! rxjs */ "qCKp");
/* harmony import */ var rxjs_operators__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! rxjs/operators */ "kU1M");
/* harmony import */ var _config_nameToCodeMapping_json__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../config/nameToCodeMapping.json */ "8nkE");
var _config_nameToCodeMapping_json__WEBPACK_IMPORTED_MODULE_5___namespace = /*#__PURE__*/__webpack_require__.t(/*! ../../config/nameToCodeMapping.json */ "8nkE", 1);
/* harmony import */ var lodash_es__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! lodash-es */ "T89o");
var __assign = (undefined && undefined.__assign) || function () {
    __assign = Object.assign || function(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
                t[p] = s[p];
        }
        return t;
    };
    return __assign.apply(this, arguments);
};







var MapComponent = (function () {
    function MapComponent(toasterService, reportService) {
        this.toasterService = toasterService;
        this.reportService = reportService;
        this.getGeoJSON = new rxjs__WEBPACK_IMPORTED_MODULE_3__["BehaviorSubject"](undefined);
        this.featureClicked = new _angular_core__WEBPACK_IMPORTED_MODULE_2__["EventEmitter"]();
        this.__defaultConfig = {
            initialCoordinate: [20, 78],
            latBounds: [6.4626999, 68.1097],
            lonBounds: [35.513327, 97.39535869999999],
            initialZoomLevel: 5,
            controlTitle: 'India Heat Map',
            tileLayer: {
                urlTemplate: 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',
                options: {
                    attributions: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
                }
            },
            rootStyle: {
                fillColor: '#007cbe',
                weight: 2,
                opacity: 1,
                color: 'white',
                dashArray: '3',
                fillOpacity: 0.7,
                cursor: 'no-drop'
            }
        };
        this.__mapData = {
            folder: 'geoJSONFiles',
            strict: true
        };
        this.__options = Object.assign(this.__defaultConfig);
        this.mappingConfig = _config_nameToCodeMapping_json__WEBPACK_IMPORTED_MODULE_5__;
        this.mapId = "map-" + Object(lodash_es__WEBPACK_IMPORTED_MODULE_6__["random"])(0, 1000);
    }
    Object.defineProperty(MapComponent.prototype, "options", {
        set: function (options) {
            this.__options = __assign(__assign({}, this.__defaultConfig), options);
        },
        enumerable: false,
        configurable: true
    });
    Object.defineProperty(MapComponent.prototype, "mapData", {
        set: function (data) {
            this.__mapData = __assign(__assign({}, this.__mapData), data);
            this.getGeoJSON.next(this.__mapData);
        },
        enumerable: false,
        configurable: true
    });
    MapComponent.prototype.getLayer = function (data) {
        return L && L.geoJSON(data || null, {
            style: this.setStyle.bind(this),
            onEachFeature: this.onEachFeature.bind(this)
        });
    };
    MapComponent.prototype.setInitialMapView = function () {
        var _a = this.__options, initialCoordinate = _a.initialCoordinate, initialZoomLevel = _a.initialZoomLevel, latBounds = _a.latBounds, lonBounds = _a.lonBounds;
        this.map = L && L.map(this.mapId).setView(initialCoordinate, initialZoomLevel);
        this.geoJSONRootLayer = this.map && this.getLayer().addTo(this.map);
        var maxBounds = L && L.latLngBounds([latBounds, lonBounds]);
        if (this.map) {
            this.map.setMaxBounds(maxBounds);
            this.map.fitBounds(maxBounds);
        }
    };
    MapComponent.prototype.clickHandler = function (_a, event) {
        var _b = _a.properties, properties = _b === void 0 ? {} : _b, _c = _a.metaData, metaData = _c === void 0 ? {} : _c;
        console.log(__assign(__assign({}, properties), metaData));
        this.featureClicked.emit(__assign(__assign({}, metaData), properties));
    };
    MapComponent.prototype.mouseoutHandler = function (_a, event) {
        var _b = _a.properties, properties = _b === void 0 ? {} : _b, _c = _a.metaData, metaData = _c === void 0 ? {} : _c;
        this.geoJSONRootLayer.resetStyle(event.target);
    };
    MapComponent.prototype.mouseoverHandler = function (_a, event) {
        var _b = _a.properties, properties = _b === void 0 ? {} : _b, _c = _a.metaData, metaData = _c === void 0 ? {} : _c;
        var layer = event.target;
        layer.setStyle({
            weight: 3,
            color: '#666',
            dashArray: '',
            fillOpacity: 0.8
        });
        if (L && (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge)) {
            layer.bringToFront();
        }
        this.infoControl && this.infoControl.update(properties);
        var mergedObj = __assign(__assign({}, properties), metaData);
        layer.bindPopup(mergedObj.name || 'Unknown').openPopup();
    };
    MapComponent.prototype.onEachFeature = function (feature, layer) {
        var properties = feature.properties, _a = feature.metaData, metaData = _a === void 0 ? {} : _a;
        layer.on({
            mouseover: this.mouseoverHandler.bind(this, { properties: properties, metaData: metaData }),
            mouseout: this.mouseoutHandler.bind(this, { properties: properties, metaData: metaData }),
            click: this.clickHandler.bind(this, { properties: properties, metaData: metaData })
        });
    };
    MapComponent.prototype.setControl = function () {
        var controlTitle = this.__options.controlTitle;
        var infoControl = this.infoControl = L && L.control();
        infoControl.onAdd = function (map) {
            this._div = L && L.DomUtil.create('div', 'infoControl');
            this.update();
            return this._div;
        };
        infoControl.update = function (properties) {
            if (properties === void 0) { properties = {}; }
            var text = Object.entries(properties).map(function (_a) {
                var key = _a[0], value = _a[1];
                return "<br />" + key + ": " + value;
            }).join('<br />');
            this._div.innerHTML = "<h4>" + controlTitle + "</h4>\n      " + text;
        };
        infoControl.addTo(this.map);
    };
    MapComponent.prototype.setStyle = function (feature, layer) {
        var _a = feature.metaData, metaData = _a === void 0 ? {} : _a;
        return __assign(__assign({}, this.__options.rootStyle), (!metaData.drillDown && !metaData.fileName &&
            { className: 'notAllowedCursor' }));
    };
    MapComponent.prototype.addTileLayer = function () {
        var _a = this.__options.tileLayer, urlTemplate = _a.urlTemplate, options = _a.options;
        L && this.map && L.tileLayer(urlTemplate, options).addTo(this.map);
    };
    MapComponent.prototype.addProperties = function (_a) {
        var _this = this;
        var _b = _a.reportData, reportData = _b === void 0 ? [] : _b, _c = _a.layers, layers = _c === void 0 ? [] : _c, _d = _a.labelExpr, labelExpr = _d === void 0 ? 'District' : _d, _e = _a.type, type = _e === void 0 ? 'district' : _e, _f = _a.features, features = _f === void 0 ? [] : _f, _g = _a.metrics, metrics = _g === void 0 ? [] : _g;
        var filteredFeatures = [];
        var datasets = Object(lodash_es__WEBPACK_IMPORTED_MODULE_6__["groupBy"])(reportData || [], function (data) { return Object(lodash_es__WEBPACK_IMPORTED_MODULE_6__["toLower"])(data[labelExpr]); });
        layers.forEach(function (layer) {
            var recordFromConfigMapping = _this.findRecordInConfigMapping({ type: type, name: layer });
            var dataset = datasets.hasOwnProperty(Object(lodash_es__WEBPACK_IMPORTED_MODULE_6__["toLower"])(layer)) && datasets[Object(lodash_es__WEBPACK_IMPORTED_MODULE_6__["toLower"])(layer)];
            var featureObj = features.find(function (feature) {
                var _a = feature.properties, properties = _a === void 0 ? {} : _a;
                return recordFromConfigMapping && +properties.code === +recordFromConfigMapping.code;
            });
            if (!recordFromConfigMapping || !dataset || !featureObj) {
                return;
            }
            featureObj['metaData'] = { name: layer };
            var result = Object(lodash_es__WEBPACK_IMPORTED_MODULE_6__["reduce"])(dataset, function (accumulator, value) {
                metrics.forEach(function (metric) {
                    accumulator[metric] = (accumulator[metric] || 0) + (+value[metric]);
                });
                return accumulator;
            }, {});
            featureObj.properties = __assign(__assign({}, (featureObj.properties || {})), (result || {}));
            filteredFeatures.push(featureObj);
        });
        return filteredFeatures;
    };
    MapComponent.prototype.dataHandler = function () {
        var _this = this;
        return this.getGeoJSON.pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["skipWhile"])(function (input) { return input === undefined || input === null || !(input.hasOwnProperty('state') || input.hasOwnProperty('country')); }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["mergeMap"])(function (input) {
            var _a = input.country, country = _a === void 0 ? null : _a, _b = input.states, states = _b === void 0 ? [] : _b, state = input.state, _c = input.districts, districts = _c === void 0 ? [] : _c, _d = input.metrics, metrics = _d === void 0 ? [] : _d, _e = input.labelExpr, labelExpr = _e === void 0 ? 'District' : _e, _f = input.strict, strict = _f === void 0 ? false : _f, folder = input.folder;
            var paramter;
            if (country) {
                paramter = { type: 'country', name: country };
            }
            else {
                paramter = { type: 'state', name: state };
            }
            var _g = (_this.findRecordInConfigMapping(paramter) || {}).geoJSONFilename, geoJSONFilename = _g === void 0 ? null : _g;
            if (!geoJSONFilename) {
                return Object(rxjs__WEBPACK_IMPORTED_MODULE_3__["throwError"])('specified geoJSON file not found');
            }
            return Object(rxjs__WEBPACK_IMPORTED_MODULE_3__["zip"])(_this.getGeoJSONFile({ fileName: geoJSONFilename, folder: folder }), _this.getDataSourceData())
                .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["map"])(function (_a) {
                var geoJSONData = _a[0], reportData = _a[1];
                var _b = Object(lodash_es__WEBPACK_IMPORTED_MODULE_6__["cloneDeep"])(geoJSONData), type = _b.type, _c = _b.features, features = _c === void 0 ? [] : _c;
                var filteredFeatures;
                if (country && states.length) {
                    filteredFeatures = _this.addProperties({ reportData: reportData, layers: states, labelExpr: labelExpr, type: 'state', features: features, metrics: metrics });
                }
                else {
                    filteredFeatures = _this.addProperties({ reportData: reportData, layers: districts, labelExpr: labelExpr, type: 'district', features: features, metrics: metrics });
                }
                return { type: type, features: strict ? filteredFeatures : features };
            }));
        }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["tap"])(function (response) {
            if (_this.geoJSONRootLayer && _this.map && response) {
                _this.geoJSONRootLayer.addData(response);
                _this.map.fitBounds(_this.geoJSONRootLayer.getBounds());
            }
        }, function (err) {
            console.error(err);
            var _a = err.errorText, errorText = _a === void 0 ? 'Failed to render Map' : _a;
            _this.toasterService.error(errorText);
        }), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(function (err) {
            return Object(rxjs__WEBPACK_IMPORTED_MODULE_3__["of"])(null);
        }));
    };
    MapComponent.prototype.ngOnInit = function () {
        this.subscription$ = this.dataHandler();
    };
    MapComponent.prototype.ngAfterViewInit = function () {
        this.setInitialMapView();
        this.addTileLayer();
        this.setControl();
    };
    MapComponent.prototype.findRecordInConfigMapping = function (_a) {
        var _b = _a.type, type = _b === void 0 ? null : _b, _c = _a.name, name = _c === void 0 ? null : _c, _d = _a.code, code = _d === void 0 ? null : _d;
        return Object(lodash_es__WEBPACK_IMPORTED_MODULE_6__["find"])(this.mappingConfig, function (config) {
            var configType = config.type, configName = config.name, configCode = config.code;
            if (code) {
                return configCode === code;
            }
            return configType && configName && Object(lodash_es__WEBPACK_IMPORTED_MODULE_6__["toLower"])(configType) === Object(lodash_es__WEBPACK_IMPORTED_MODULE_6__["toLower"])(type) && Object(lodash_es__WEBPACK_IMPORTED_MODULE_6__["toLower"])(configName) === Object(lodash_es__WEBPACK_IMPORTED_MODULE_6__["toLower"])(name);
        });
    };
    MapComponent.prototype.getGeoJSONFile = function (_a) {
        var _b = _a.folder, folder = _b === void 0 ? 'geoJSONFiles' : _b, fileName = _a.fileName;
        return this.reportService.fetchDataSource("/reports/fetch/" + folder + "/" + fileName)
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["pluck"])('result'), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["retry"])(2), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(function (err) { return Object(rxjs__WEBPACK_IMPORTED_MODULE_3__["throwError"])({ errorText: 'Failed to download geoJSON file.' }); }));
    };
    MapComponent.prototype.getDataSourceData = function () {
        var _a = this.__mapData, reportLoc = _a.reportLoc, reportData = _a.reportData;
        if (reportData) {
            return Object(rxjs__WEBPACK_IMPORTED_MODULE_3__["of"])(reportData);
        }
        return this.reportService.fetchDataSource(reportLoc)
            .pipe(Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["pluck"])('result'), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["pluck"])('data'), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["retry"])(2), Object(rxjs_operators__WEBPACK_IMPORTED_MODULE_4__["catchError"])(function (err) { return Object(rxjs__WEBPACK_IMPORTED_MODULE_3__["throwError"])({ errorText: 'Failed to download dataSource file.' }); }));
    };
    return MapComponent;
}());



/***/ }),

/***/ "wOnQ":
/*!******************************************************!*\
  !*** ./node_modules/html2canvas/dist/html2canvas.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/*!
 * html2canvas 1.0.0-rc.3 <https://html2canvas.hertzen.com>
 * Copyright (c) 2019 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 */
(function (global, factory) {
   true ? module.exports = factory() : undefined;
})(this, function () {
  'use strict';
  /*! *****************************************************************************
  Copyright (c) Microsoft Corporation. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0
    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.
    See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** */

  /* global Reflect, Promise */

  var _extendStatics = function extendStatics(d, b) {
    _extendStatics = Object.setPrototypeOf || {
      __proto__: []
    } instanceof Array && function (d, b) {
      d.__proto__ = b;
    } || function (d, b) {
      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    };

    return _extendStatics(d, b);
  };

  function __extends(d, b) {
    _extendStatics(d, b);

    function __() {
      this.constructor = d;
    }

    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
  }

  var _assign = function __assign() {
    _assign = Object.assign || function __assign(t) {
      for (var s, i = 1, n = arguments.length; i < n; i++) {
        s = arguments[i];

        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
      }

      return t;
    };

    return _assign.apply(this, arguments);
  };

  function __awaiter(thisArg, _arguments, P, generator) {
    return new (P || (P = Promise))(function (resolve, reject) {
      function fulfilled(value) {
        try {
          step(generator.next(value));
        } catch (e) {
          reject(e);
        }
      }

      function rejected(value) {
        try {
          step(generator["throw"](value));
        } catch (e) {
          reject(e);
        }
      }

      function step(result) {
        result.done ? resolve(result.value) : new P(function (resolve) {
          resolve(result.value);
        }).then(fulfilled, rejected);
      }

      step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
  }

  function __generator(thisArg, body) {
    var _ = {
      label: 0,
      sent: function sent() {
        if (t[0] & 1) throw t[1];
        return t[1];
      },
      trys: [],
      ops: []
    },
        f,
        y,
        t,
        g;
    return g = {
      next: verb(0),
      "throw": verb(1),
      "return": verb(2)
    }, typeof Symbol === "function" && (g[Symbol.iterator] = function () {
      return this;
    }), g;

    function verb(n) {
      return function (v) {
        return step([n, v]);
      };
    }

    function step(op) {
      if (f) throw new TypeError("Generator is already executing.");

      while (_) try {
        if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
        if (y = 0, t) op = [op[0] & 2, t.value];

        switch (op[0]) {
          case 0:
          case 1:
            t = op;
            break;

          case 4:
            _.label++;
            return {
              value: op[1],
              done: false
            };

          case 5:
            _.label++;
            y = op[1];
            op = [0];
            continue;

          case 7:
            op = _.ops.pop();

            _.trys.pop();

            continue;

          default:
            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _ = 0;
              continue;
            }

            if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {
              _.label = op[1];
              break;
            }

            if (op[0] === 6 && _.label < t[1]) {
              _.label = t[1];
              t = op;
              break;
            }

            if (t && _.label < t[2]) {
              _.label = t[2];

              _.ops.push(op);

              break;
            }

            if (t[2]) _.ops.pop();

            _.trys.pop();

            continue;
        }

        op = body.call(thisArg, _);
      } catch (e) {
        op = [6, e];
        y = 0;
      } finally {
        f = t = 0;
      }

      if (op[0] & 5) throw op[1];
      return {
        value: op[0] ? op[1] : void 0,
        done: true
      };
    }
  }

  var Bounds =
  /** @class */
  function () {
    function Bounds(x, y, w, h) {
      this.left = x;
      this.top = y;
      this.width = w;
      this.height = h;
    }

    Bounds.prototype.add = function (x, y, w, h) {
      return new Bounds(this.left + x, this.top + y, this.width + w, this.height + h);
    };

    Bounds.fromClientRect = function (clientRect) {
      return new Bounds(clientRect.left, clientRect.top, clientRect.width, clientRect.height);
    };

    return Bounds;
  }();

  var parseBounds = function parseBounds(node) {
    return Bounds.fromClientRect(node.getBoundingClientRect());
  };

  var parseDocumentSize = function parseDocumentSize(document) {
    var body = document.body;
    var documentElement = document.documentElement;

    if (!body || !documentElement) {
      throw new Error("Unable to get document size");
    }

    var width = Math.max(Math.max(body.scrollWidth, documentElement.scrollWidth), Math.max(body.offsetWidth, documentElement.offsetWidth), Math.max(body.clientWidth, documentElement.clientWidth));
    var height = Math.max(Math.max(body.scrollHeight, documentElement.scrollHeight), Math.max(body.offsetHeight, documentElement.offsetHeight), Math.max(body.clientHeight, documentElement.clientHeight));
    return new Bounds(0, 0, width, height);
  };
  /*
   * css-line-break 1.1.1 <https://github.com/niklasvh/css-line-break#readme>
   * Copyright (c) 2019 Niklas von Hertzen <https://hertzen.com>
   * Released under MIT License
   */


  var toCodePoints = function toCodePoints(str) {
    var codePoints = [];
    var i = 0;
    var length = str.length;

    while (i < length) {
      var value = str.charCodeAt(i++);

      if (value >= 0xd800 && value <= 0xdbff && i < length) {
        var extra = str.charCodeAt(i++);

        if ((extra & 0xfc00) === 0xdc00) {
          codePoints.push(((value & 0x3ff) << 10) + (extra & 0x3ff) + 0x10000);
        } else {
          codePoints.push(value);
          i--;
        }
      } else {
        codePoints.push(value);
      }
    }

    return codePoints;
  };

  var fromCodePoint = function fromCodePoint() {
    var codePoints = [];

    for (var _i = 0; _i < arguments.length; _i++) {
      codePoints[_i] = arguments[_i];
    }

    if (String.fromCodePoint) {
      return String.fromCodePoint.apply(String, codePoints);
    }

    var length = codePoints.length;

    if (!length) {
      return '';
    }

    var codeUnits = [];
    var index = -1;
    var result = '';

    while (++index < length) {
      var codePoint = codePoints[index];

      if (codePoint <= 0xffff) {
        codeUnits.push(codePoint);
      } else {
        codePoint -= 0x10000;
        codeUnits.push((codePoint >> 10) + 0xd800, codePoint % 0x400 + 0xdc00);
      }

      if (index + 1 === length || codeUnits.length > 0x4000) {
        result += String.fromCharCode.apply(String, codeUnits);
        codeUnits.length = 0;
      }
    }

    return result;
  };

  var chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'; // Use a lookup table to find the index.

  var lookup = typeof Uint8Array === 'undefined' ? [] : new Uint8Array(256);

  for (var i = 0; i < chars.length; i++) {
    lookup[chars.charCodeAt(i)] = i;
  }

  var decode = function decode(base64) {
    var bufferLength = base64.length * 0.75,
        len = base64.length,
        i,
        p = 0,
        encoded1,
        encoded2,
        encoded3,
        encoded4;

    if (base64[base64.length - 1] === '=') {
      bufferLength--;

      if (base64[base64.length - 2] === '=') {
        bufferLength--;
      }
    }

    var buffer = typeof ArrayBuffer !== 'undefined' && typeof Uint8Array !== 'undefined' && typeof Uint8Array.prototype.slice !== 'undefined' ? new ArrayBuffer(bufferLength) : new Array(bufferLength);
    var bytes = Array.isArray(buffer) ? buffer : new Uint8Array(buffer);

    for (i = 0; i < len; i += 4) {
      encoded1 = lookup[base64.charCodeAt(i)];
      encoded2 = lookup[base64.charCodeAt(i + 1)];
      encoded3 = lookup[base64.charCodeAt(i + 2)];
      encoded4 = lookup[base64.charCodeAt(i + 3)];
      bytes[p++] = encoded1 << 2 | encoded2 >> 4;
      bytes[p++] = (encoded2 & 15) << 4 | encoded3 >> 2;
      bytes[p++] = (encoded3 & 3) << 6 | encoded4 & 63;
    }

    return buffer;
  };

  var polyUint16Array = function polyUint16Array(buffer) {
    var length = buffer.length;
    var bytes = [];

    for (var i = 0; i < length; i += 2) {
      bytes.push(buffer[i + 1] << 8 | buffer[i]);
    }

    return bytes;
  };

  var polyUint32Array = function polyUint32Array(buffer) {
    var length = buffer.length;
    var bytes = [];

    for (var i = 0; i < length; i += 4) {
      bytes.push(buffer[i + 3] << 24 | buffer[i + 2] << 16 | buffer[i + 1] << 8 | buffer[i]);
    }

    return bytes;
  };
  /** Shift size for getting the index-2 table offset. */


  var UTRIE2_SHIFT_2 = 5;
  /** Shift size for getting the index-1 table offset. */

  var UTRIE2_SHIFT_1 = 6 + 5;
  /**
   * Shift size for shifting left the index array values.
   * Increases possible data size with 16-bit index values at the cost
   * of compactability.
   * This requires data blocks to be aligned by UTRIE2_DATA_GRANULARITY.
   */

  var UTRIE2_INDEX_SHIFT = 2;
  /**
   * Difference between the two shift sizes,
   * for getting an index-1 offset from an index-2 offset. 6=11-5
   */

  var UTRIE2_SHIFT_1_2 = UTRIE2_SHIFT_1 - UTRIE2_SHIFT_2;
  /**
   * The part of the index-2 table for U+D800..U+DBFF stores values for
   * lead surrogate code _units_ not code _points_.
   * Values for lead surrogate code _points_ are indexed with this portion of the table.
   * Length=32=0x20=0x400>>UTRIE2_SHIFT_2. (There are 1024=0x400 lead surrogates.)
   */

  var UTRIE2_LSCP_INDEX_2_OFFSET = 0x10000 >> UTRIE2_SHIFT_2;
  /** Number of entries in a data block. 32=0x20 */

  var UTRIE2_DATA_BLOCK_LENGTH = 1 << UTRIE2_SHIFT_2;
  /** Mask for getting the lower bits for the in-data-block offset. */

  var UTRIE2_DATA_MASK = UTRIE2_DATA_BLOCK_LENGTH - 1;
  var UTRIE2_LSCP_INDEX_2_LENGTH = 0x400 >> UTRIE2_SHIFT_2;
  /** Count the lengths of both BMP pieces. 2080=0x820 */

  var UTRIE2_INDEX_2_BMP_LENGTH = UTRIE2_LSCP_INDEX_2_OFFSET + UTRIE2_LSCP_INDEX_2_LENGTH;
  /**
   * The 2-byte UTF-8 version of the index-2 table follows at offset 2080=0x820.
   * Length 32=0x20 for lead bytes C0..DF, regardless of UTRIE2_SHIFT_2.
   */

  var UTRIE2_UTF8_2B_INDEX_2_OFFSET = UTRIE2_INDEX_2_BMP_LENGTH;
  var UTRIE2_UTF8_2B_INDEX_2_LENGTH = 0x800 >> 6;
  /* U+0800 is the first code point after 2-byte UTF-8 */

  /**
   * The index-1 table, only used for supplementary code points, at offset 2112=0x840.
   * Variable length, for code points up to highStart, where the last single-value range starts.
   * Maximum length 512=0x200=0x100000>>UTRIE2_SHIFT_1.
   * (For 0x100000 supplementary code points U+10000..U+10ffff.)
   *
   * The part of the index-2 table for supplementary code points starts
   * after this index-1 table.
   *
   * Both the index-1 table and the following part of the index-2 table
   * are omitted completely if there is only BMP data.
   */

  var UTRIE2_INDEX_1_OFFSET = UTRIE2_UTF8_2B_INDEX_2_OFFSET + UTRIE2_UTF8_2B_INDEX_2_LENGTH;
  /**
   * Number of index-1 entries for the BMP. 32=0x20
   * This part of the index-1 table is omitted from the serialized form.
   */

  var UTRIE2_OMITTED_BMP_INDEX_1_LENGTH = 0x10000 >> UTRIE2_SHIFT_1;
  /** Number of entries in an index-2 block. 64=0x40 */

  var UTRIE2_INDEX_2_BLOCK_LENGTH = 1 << UTRIE2_SHIFT_1_2;
  /** Mask for getting the lower bits for the in-index-2-block offset. */

  var UTRIE2_INDEX_2_MASK = UTRIE2_INDEX_2_BLOCK_LENGTH - 1;

  var slice16 = function slice16(view, start, end) {
    if (view.slice) {
      return view.slice(start, end);
    }

    return new Uint16Array(Array.prototype.slice.call(view, start, end));
  };

  var slice32 = function slice32(view, start, end) {
    if (view.slice) {
      return view.slice(start, end);
    }

    return new Uint32Array(Array.prototype.slice.call(view, start, end));
  };

  var createTrieFromBase64 = function createTrieFromBase64(base64) {
    var buffer = decode(base64);
    var view32 = Array.isArray(buffer) ? polyUint32Array(buffer) : new Uint32Array(buffer);
    var view16 = Array.isArray(buffer) ? polyUint16Array(buffer) : new Uint16Array(buffer);
    var headerLength = 24;
    var index = slice16(view16, headerLength / 2, view32[4] / 2);
    var data = view32[5] === 2 ? slice16(view16, (headerLength + view32[4]) / 2) : slice32(view32, Math.ceil((headerLength + view32[4]) / 4));
    return new Trie(view32[0], view32[1], view32[2], view32[3], index, data);
  };

  var Trie =
  /** @class */
  function () {
    function Trie(initialValue, errorValue, highStart, highValueIndex, index, data) {
      this.initialValue = initialValue;
      this.errorValue = errorValue;
      this.highStart = highStart;
      this.highValueIndex = highValueIndex;
      this.index = index;
      this.data = data;
    }
    /**
     * Get the value for a code point as stored in the Trie.
     *
     * @param codePoint the code point
     * @return the value
     */


    Trie.prototype.get = function (codePoint) {
      var ix;

      if (codePoint >= 0) {
        if (codePoint < 0x0d800 || codePoint > 0x0dbff && codePoint <= 0x0ffff) {
          // Ordinary BMP code point, excluding leading surrogates.
          // BMP uses a single level lookup.  BMP index starts at offset 0 in the Trie2 index.
          // 16 bit data is stored in the index array itself.
          ix = this.index[codePoint >> UTRIE2_SHIFT_2];
          ix = (ix << UTRIE2_INDEX_SHIFT) + (codePoint & UTRIE2_DATA_MASK);
          return this.data[ix];
        }

        if (codePoint <= 0xffff) {
          // Lead Surrogate Code Point.  A Separate index section is stored for
          // lead surrogate code units and code points.
          //   The main index has the code unit data.
          //   For this function, we need the code point data.
          // Note: this expression could be refactored for slightly improved efficiency, but
          //       surrogate code points will be so rare in practice that it's not worth it.
          ix = this.index[UTRIE2_LSCP_INDEX_2_OFFSET + (codePoint - 0xd800 >> UTRIE2_SHIFT_2)];
          ix = (ix << UTRIE2_INDEX_SHIFT) + (codePoint & UTRIE2_DATA_MASK);
          return this.data[ix];
        }

        if (codePoint < this.highStart) {
          // Supplemental code point, use two-level lookup.
          ix = UTRIE2_INDEX_1_OFFSET - UTRIE2_OMITTED_BMP_INDEX_1_LENGTH + (codePoint >> UTRIE2_SHIFT_1);
          ix = this.index[ix];
          ix += codePoint >> UTRIE2_SHIFT_2 & UTRIE2_INDEX_2_MASK;
          ix = this.index[ix];
          ix = (ix << UTRIE2_INDEX_SHIFT) + (codePoint & UTRIE2_DATA_MASK);
          return this.data[ix];
        }

        if (codePoint <= 0x10ffff) {
          return this.data[this.highValueIndex];
        }
      } // Fall through.  The code point is outside of the legal range of 0..0x10ffff.


      return this.errorValue;
    };

    return Trie;
  }();

  var base64 = 'KwAAAAAAAAAACA4AIDoAAPAfAAACAAAAAAAIABAAGABAAEgAUABYAF4AZgBeAGYAYABoAHAAeABeAGYAfACEAIAAiACQAJgAoACoAK0AtQC9AMUAXgBmAF4AZgBeAGYAzQDVAF4AZgDRANkA3gDmAOwA9AD8AAQBDAEUARoBIgGAAIgAJwEvATcBPwFFAU0BTAFUAVwBZAFsAXMBewGDATAAiwGTAZsBogGkAawBtAG8AcIBygHSAdoB4AHoAfAB+AH+AQYCDgIWAv4BHgImAi4CNgI+AkUCTQJTAlsCYwJrAnECeQKBAk0CiQKRApkCoQKoArACuALAAsQCzAIwANQC3ALkAjAA7AL0AvwCAQMJAxADGAMwACADJgMuAzYDPgOAAEYDSgNSA1IDUgNaA1oDYANiA2IDgACAAGoDgAByA3YDfgOAAIQDgACKA5IDmgOAAIAAogOqA4AAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAK8DtwOAAIAAvwPHA88D1wPfAyAD5wPsA/QD/AOAAIAABAQMBBIEgAAWBB4EJgQuBDMEIAM7BEEEXgBJBCADUQRZBGEEaQQwADAAcQQ+AXkEgQSJBJEEgACYBIAAoASoBK8EtwQwAL8ExQSAAIAAgACAAIAAgACgAM0EXgBeAF4AXgBeAF4AXgBeANUEXgDZBOEEXgDpBPEE+QQBBQkFEQUZBSEFKQUxBTUFPQVFBUwFVAVcBV4AYwVeAGsFcwV7BYMFiwWSBV4AmgWgBacFXgBeAF4AXgBeAKsFXgCyBbEFugW7BcIFwgXIBcIFwgXQBdQF3AXkBesF8wX7BQMGCwYTBhsGIwYrBjMGOwZeAD8GRwZNBl4AVAZbBl4AXgBeAF4AXgBeAF4AXgBeAF4AXgBeAGMGXgBqBnEGXgBeAF4AXgBeAF4AXgBeAF4AXgB5BoAG4wSGBo4GkwaAAIADHgR5AF4AXgBeAJsGgABGA4AAowarBrMGswagALsGwwbLBjAA0wbaBtoG3QbaBtoG2gbaBtoG2gblBusG8wb7BgMHCwcTBxsHCwcjBysHMAc1BzUHOgdCB9oGSgdSB1oHYAfaBloHaAfaBlIH2gbaBtoG2gbaBtoG2gbaBjUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHbQdeAF4ANQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQd1B30HNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B4MH2gaKB68EgACAAIAAgACAAIAAgACAAI8HlwdeAJ8HpweAAIAArwe3B14AXgC/B8UHygcwANAH2AfgB4AA6AfwBz4B+AcACFwBCAgPCBcIogEYAR8IJwiAAC8INwg/CCADRwhPCFcIXwhnCEoDGgSAAIAAgABvCHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIhAiLCI4IMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAANQc1BzUHNQc1BzUHNQc1BzUHNQc1B54INQc1B6II2gaqCLIIugiAAIAAvgjGCIAAgACAAIAAgACAAIAAgACAAIAAywiHAYAA0wiAANkI3QjlCO0I9Aj8CIAAgACAAAIJCgkSCRoJIgknCTYHLwk3CZYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiAAIAAAAFAAXgBeAGAAcABeAHwAQACQAKAArQC9AJ4AXgBeAE0A3gBRAN4A7AD8AMwBGgEAAKcBNwEFAUwBXAF4QkhCmEKnArcCgAHHAsABz4LAAcABwAHAAd+C6ABoAG+C/4LAAcABwAHAAc+DF4MAAcAB54M3gweDV4Nng3eDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEeDqABVg6WDqABoQ6gAaABoAHXDvcONw/3DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DncPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB7cPPwlGCU4JMACAAIAAgABWCV4JYQmAAGkJcAl4CXwJgAkwADAAMAAwAIgJgACLCZMJgACZCZ8JowmrCYAAswkwAF4AXgB8AIAAuwkABMMJyQmAAM4JgADVCTAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAqwYWBNkIMAAwADAAMADdCeAJ6AnuCR4E9gkwAP4JBQoNCjAAMACAABUK0wiAAB0KJAosCjQKgAAwADwKQwqAAEsKvQmdCVMKWwowADAAgACAALcEMACAAGMKgABrCjAAMAAwADAAMAAwADAAMAAwADAAMAAeBDAAMAAwADAAMAAwADAAMAAwADAAMAAwAIkEPQFzCnoKiQSCCooKkAqJBJgKoAqkCokEGAGsCrQKvArBCjAAMADJCtEKFQHZCuEK/gHpCvEKMAAwADAAMACAAIwE+QowAIAAPwEBCzAAMAAwADAAMACAAAkLEQswAIAAPwEZCyELgAAOCCkLMAAxCzkLMAAwADAAMAAwADAAXgBeAEELMAAwADAAMAAwADAAMAAwAEkLTQtVC4AAXAtkC4AAiQkwADAAMAAwADAAMAAwADAAbAtxC3kLgAuFC4sLMAAwAJMLlwufCzAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAApwswADAAMACAAIAAgACvC4AAgACAAIAAgACAALcLMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAvwuAAMcLgACAAIAAgACAAIAAyguAAIAAgACAAIAA0QswADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAANkLgACAAIAA4AswADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACJCR4E6AswADAAhwHwC4AA+AsADAgMEAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMACAAIAAGAwdDCUMMAAwAC0MNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQw1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHPQwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADUHNQc1BzUHNQc1BzUHNQc2BzAAMAA5DDUHNQc1BzUHNQc1BzUHNQc1BzUHNQdFDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAATQxSDFoMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAF4AXgBeAF4AXgBeAF4AYgxeAGoMXgBxDHkMfwxeAIUMXgBeAI0MMAAwADAAMAAwAF4AXgCVDJ0MMAAwADAAMABeAF4ApQxeAKsMswy7DF4Awgy9DMoMXgBeAF4AXgBeAF4AXgBeAF4AXgDRDNkMeQBqCeAM3Ax8AOYM7Az0DPgMXgBeAF4AXgBeAF4AXgBeAF4AXgBeAF4AXgBeAF4AXgCgAAANoAAHDQ4NFg0wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAeDSYNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAC4NMABeAF4ANg0wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAD4NRg1ODVYNXg1mDTAAbQ0wADAAMAAwADAAMAAwADAA2gbaBtoG2gbaBtoG2gbaBnUNeg3CBYANwgWFDdoGjA3aBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gaUDZwNpA2oDdoG2gawDbcNvw3HDdoG2gbPDdYN3A3fDeYN2gbsDfMN2gbaBvoN/g3aBgYODg7aBl4AXgBeABYOXgBeACUG2gYeDl4AJA5eACwO2w3aBtoGMQ45DtoG2gbaBtoGQQ7aBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gZJDjUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B1EO2gY1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQdZDjUHNQc1BzUHNQc1B2EONQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHaA41BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B3AO2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gY1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B2EO2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gZJDtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBkkOeA6gAKAAoAAwADAAMAAwAKAAoACgAKAAoACgAKAAgA4wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAD//wQABAAEAAQABAAEAAQABAAEAA0AAwABAAEAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAKABMAFwAeABsAGgAeABcAFgASAB4AGwAYAA8AGAAcAEsASwBLAEsASwBLAEsASwBLAEsAGAAYAB4AHgAeABMAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAFgAbABIAHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYADQARAB4ABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkAFgAaABsAGwAbAB4AHQAdAB4ATwAXAB4ADQAeAB4AGgAbAE8ATwAOAFAAHQAdAB0ATwBPABcATwBPAE8AFgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwArAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAAQABAANAA0ASwBLAEsASwBLAEsASwBLAEsASwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUAArACsABABQAAQABAAEAAQABAAEAAQAKwArAAQABAArACsABAAEAAQAUAArACsAKwArACsAKwArACsABAArACsAKwArAFAAUAArAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAGgAaAFAAUABQAFAAUABMAB4AGwBQAB4AKwArACsABAAEAAQAKwBQAFAAUABQAFAAUAArACsAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUAArAFAAUAArACsABAArAAQABAAEAAQABAArACsAKwArAAQABAArACsABAAEAAQAKwArACsABAArACsAKwArACsAKwArAFAAUABQAFAAKwBQACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwAEAAQAUABQAFAABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUAArACsABABQAAQABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQAKwArAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwAeABsAKwArACsAKwArACsAKwBQAAQABAAEAAQABAAEACsABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwArAAQABAArACsABAAEAAQAKwArACsAKwArACsAKwArAAQABAArACsAKwArAFAAUAArAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwAeAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwAEAFAAKwBQAFAAUABQAFAAUAArACsAKwBQAFAAUAArAFAAUABQAFAAKwArACsAUABQACsAUAArAFAAUAArACsAKwBQAFAAKwArACsAUABQAFAAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQAKwArACsABAAEAAQAKwAEAAQABAAEACsAKwBQACsAKwArACsAKwArAAQAKwArACsAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAB4AHgAeAB4AHgAeABsAHgArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABAArACsAKwArACsAKwArAAQABAArAFAAUABQACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAB4AUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABAArACsAKwArACsAKwArAAQABAArACsAKwArACsAKwArAFAAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwArAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAKwBcAFwAKwBcACsAKwBcACsAKwArACsAKwArAFwAXABcAFwAKwBcAFwAXABcAFwAXABcACsAXABcAFwAKwBcACsAXAArACsAXABcACsAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgArACoAKgBcACsAKwBcAFwAXABcAFwAKwBcACsAKgAqACoAKgAqACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAFwAXABcAFwAUAAOAA4ADgAOAB4ADgAOAAkADgAOAA0ACQATABMAEwATABMACQAeABMAHgAeAB4ABAAEAB4AHgAeAB4AHgAeAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUAANAAQAHgAEAB4ABAAWABEAFgARAAQABABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAAQABAAEAAQABAANAAQABABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsADQANAB4AHgAeAB4AHgAeAAQAHgAeAB4AHgAeAB4AKwAeAB4ADgAOAA0ADgAeAB4AHgAeAB4ACQAJACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgAeAB4AHgBcAFwAXABcAFwAXAAqACoAKgAqAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAKgAqACoAKgAqACoAKgBcAFwAXAAqACoAKgAqAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAXAAqAEsASwBLAEsASwBLAEsASwBLAEsAKgAqACoAKgAqACoAUABQAFAAUABQAFAAKwBQACsAKwArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQACsAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwAEAAQABAAeAA0AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAEQArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAADQANAA0AUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAA0ADQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoADQANABUAXAANAB4ADQAbAFwAKgArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAB4AHgATABMADQANAA4AHgATABMAHgAEAAQABAAJACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAUABQAFAAUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwAeACsAKwArABMAEwBLAEsASwBLAEsASwBLAEsASwBLAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwBcAFwAXABcAFwAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcACsAKwArACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwAeAB4AXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgArACsABABLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKgAqACoAKgAqACoAKgBcACoAKgAqACoAKgAqACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAUABQAFAAUABQAFAAUAArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4ADQANAA0ADQAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAHgAeAB4AHgBQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwANAA0ADQANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwBQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsABAAEAAQAHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAABABQAFAAUABQAAQABAAEAFAAUAAEAAQABAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAKwBQACsAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAKwArAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAKwAeAB4AHgAeAB4AHgAeAA4AHgArAA0ADQANAA0ADQANAA0ACQANAA0ADQAIAAQACwAEAAQADQAJAA0ADQAMAB0AHQAeABcAFwAWABcAFwAXABYAFwAdAB0AHgAeABQAFAAUAA0AAQABAAQABAAEAAQABAAJABoAGgAaABoAGgAaABoAGgAeABcAFwAdABUAFQAeAB4AHgAeAB4AHgAYABYAEQAVABUAFQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgANAB4ADQANAA0ADQAeAA0ADQANAAcAHgAeAB4AHgArAAQABAAEAAQABAAEAAQABAAEAAQAUABQACsAKwBPAFAAUABQAFAAUAAeAB4AHgAWABEATwBQAE8ATwBPAE8AUABQAFAAUABQAB4AHgAeABYAEQArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAGwAbABsAGwAbABsAGwAaABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAaABsAGwAbABsAGgAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgBQABoAHgAdAB4AUAAeABoAHgAeAB4AHgAeAB4AHgAeAB4ATwAeAFAAGwAeAB4AUABQAFAAUABQAB4AHgAeAB0AHQAeAFAAHgBQAB4AUAAeAFAATwBQAFAAHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AUABQAFAAUABPAE8AUABQAFAAUABQAE8AUABQAE8AUABPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAE8ATwBPAE8ATwBPAE8ATwBPAE8AUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAATwAeAB4AKwArACsAKwAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB0AHQAeAB4AHgAdAB0AHgAeAB0AHgAeAB4AHQAeAB0AGwAbAB4AHQAeAB4AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB0AHgAdAB4AHQAdAB0AHQAdAB0AHgAdAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAdAB0AHQAdAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAlACUAHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBQAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB0AHQAeAB4AHgAeAB0AHQAdAB4AHgAdAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB0AHQAeAB4AHQAeAB4AHgAeAB0AHQAeAB4AHgAeACUAJQAdAB0AJQAeACUAJQAlACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAHgAeAB4AHgAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHQAdAB0AHgAdACUAHQAdAB4AHQAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHQAdAB0AHQAlAB4AJQAlACUAHQAlACUAHQAdAB0AJQAlAB0AHQAlAB0AHQAlACUAJQAeAB0AHgAeAB4AHgAdAB0AJQAdAB0AHQAdAB0AHQAlACUAJQAlACUAHQAlACUAIAAlAB0AHQAlACUAJQAlACUAJQAlACUAHgAeAB4AJQAlACAAIAAgACAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeABcAFwAXABcAFwAXAB4AEwATACUAHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwArACUAJQBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAKwArACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAE8ATwBPAE8ATwBPAE8ATwAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeACsAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUAArACsAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQBQAFAAUABQACsAKwArACsAUABQAFAAUABQAFAAUABQAA0AUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQACsAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgBQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAABAAEAAQAKwAEAAQAKwArACsAKwArAAQABAAEAAQAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsABAAEAAQAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsADQANAA0ADQANAA0ADQANAB4AKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AUABQAFAAUABQAFAAUABQAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAUABQAFAAUABQAA0ADQANAA0ADQANABQAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwANAA0ADQANAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAeAAQABAAEAB4AKwArAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLACsADQArAB4AKwArAAQABAAEAAQAUABQAB4AUAArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwAEAAQABAAEAAQABAAEAAQABAAOAA0ADQATABMAHgAeAB4ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0AUABQAFAAUAAEAAQAKwArAAQADQANAB4AUAArACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXABcAA0ADQANACoASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUAArACsAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANACsADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEcARwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQACsAKwAeAAQABAANAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAEAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUAArACsAUAArACsAUABQACsAKwBQAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AKwArAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAeAB4ADQANAA0ADQAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAArAAQABAArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAEAAQABAAEAAQABAAEACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAFgAWAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAKwBQACsAKwArACsAKwArAFAAKwArACsAKwBQACsAUAArAFAAKwBQAFAAUAArAFAAUAArAFAAKwArAFAAKwBQACsAUAArAFAAKwBQACsAUABQACsAUAArACsAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAUABQAFAAUAArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUAArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAlACUAJQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeACUAJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeACUAJQAlACUAJQAeACUAJQAlACUAJQAgACAAIAAlACUAIAAlACUAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIQAhACEAIQAhACUAJQAgACAAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACAAIAAlACUAJQAlACAAJQAgACAAIAAgACAAIAAgACAAIAAlACUAJQAgACUAJQAlACUAIAAgACAAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeACUAHgAlAB4AJQAlACUAJQAlACAAJQAlACUAJQAeACUAHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAIAAgACAAJQAlACUAIAAgACAAIAAgAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFwAXABcAFQAVABUAHgAeAB4AHgAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACAAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAlACAAIAAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsA';
  /* @flow */

  var LETTER_NUMBER_MODIFIER = 50; // Non-tailorable Line Breaking Classes

  var BK = 1; //  Cause a line break (after)

  var CR = 2; //  Cause a line break (after), except between CR and LF

  var LF = 3; //  Cause a line break (after)

  var CM = 4; //  Prohibit a line break between the character and the preceding character

  var NL = 5; //  Cause a line break (after)

  var WJ = 7; //  Prohibit line breaks before and after

  var ZW = 8; //  Provide a break opportunity

  var GL = 9; //  Prohibit line breaks before and after

  var SP = 10; // Enable indirect line breaks

  var ZWJ = 11; // Prohibit line breaks within joiner sequences
  // Break Opportunities

  var B2 = 12; //  Provide a line break opportunity before and after the character

  var BA = 13; //  Generally provide a line break opportunity after the character

  var BB = 14; //  Generally provide a line break opportunity before the character

  var HY = 15; //  Provide a line break opportunity after the character, except in numeric context

  var CB = 16; //   Provide a line break opportunity contingent on additional information
  // Characters Prohibiting Certain Breaks

  var CL = 17; //  Prohibit line breaks before

  var CP = 18; //  Prohibit line breaks before

  var EX = 19; //  Prohibit line breaks before

  var IN = 20; //  Allow only indirect line breaks between pairs

  var NS = 21; //  Allow only indirect line breaks before

  var OP = 22; //  Prohibit line breaks after

  var QU = 23; //  Act like they are both opening and closing
  // Numeric Context

  var IS = 24; //  Prevent breaks after any and before numeric

  var NU = 25; //  Form numeric expressions for line breaking purposes

  var PO = 26; //  Do not break following a numeric expression

  var PR = 27; //  Do not break in front of a numeric expression

  var SY = 28; //  Prevent a break before; and allow a break after
  // Other Characters

  var AI = 29; //  Act like AL when the resolvedEAW is N; otherwise; act as ID

  var AL = 30; //  Are alphabetic characters or symbols that are used with alphabetic characters

  var CJ = 31; //  Treat as NS or ID for strict or normal breaking.

  var EB = 32; //  Do not break from following Emoji Modifier

  var EM = 33; //  Do not break from preceding Emoji Base

  var H2 = 34; //  Form Korean syllable blocks

  var H3 = 35; //  Form Korean syllable blocks

  var HL = 36; //  Do not break around a following hyphen; otherwise act as Alphabetic

  var ID = 37; //  Break before or after; except in some numeric context

  var JL = 38; //  Form Korean syllable blocks

  var JV = 39; //  Form Korean syllable blocks

  var JT = 40; //  Form Korean syllable blocks

  var RI = 41; //  Keep pairs together. For pairs; break before and after other classes

  var SA = 42; //  Provide a line break opportunity contingent on additional, language-specific context analysis

  var XX = 43; //  Have as yet unknown line breaking behavior or unassigned code positions

  var BREAK_MANDATORY = '!';
  var BREAK_NOT_ALLOWED = '×';
  var BREAK_ALLOWED = '÷';
  var UnicodeTrie = createTrieFromBase64(base64);
  var ALPHABETICS = [AL, HL];
  var HARD_LINE_BREAKS = [BK, CR, LF, NL];
  var SPACE = [SP, ZW];
  var PREFIX_POSTFIX = [PR, PO];
  var LINE_BREAKS = HARD_LINE_BREAKS.concat(SPACE);
  var KOREAN_SYLLABLE_BLOCK = [JL, JV, JT, H2, H3];
  var HYPHEN = [HY, BA];

  var codePointsToCharacterClasses = function codePointsToCharacterClasses(codePoints, lineBreak) {
    if (lineBreak === void 0) {
      lineBreak = 'strict';
    }

    var types = [];
    var indicies = [];
    var categories = [];
    codePoints.forEach(function (codePoint, index) {
      var classType = UnicodeTrie.get(codePoint);

      if (classType > LETTER_NUMBER_MODIFIER) {
        categories.push(true);
        classType -= LETTER_NUMBER_MODIFIER;
      } else {
        categories.push(false);
      }

      if (['normal', 'auto', 'loose'].indexOf(lineBreak) !== -1) {
        // U+2010, – U+2013, 〜 U+301C, ゠ U+30A0
        if ([0x2010, 0x2013, 0x301c, 0x30a0].indexOf(codePoint) !== -1) {
          indicies.push(index);
          return types.push(CB);
        }
      }

      if (classType === CM || classType === ZWJ) {
        // LB10 Treat any remaining combining mark or ZWJ as AL.
        if (index === 0) {
          indicies.push(index);
          return types.push(AL);
        } // LB9 Do not break a combining character sequence; treat it as if it has the line breaking class of
        // the base character in all of the following rules. Treat ZWJ as if it were CM.


        var prev = types[index - 1];

        if (LINE_BREAKS.indexOf(prev) === -1) {
          indicies.push(indicies[index - 1]);
          return types.push(prev);
        }

        indicies.push(index);
        return types.push(AL);
      }

      indicies.push(index);

      if (classType === CJ) {
        return types.push(lineBreak === 'strict' ? NS : ID);
      }

      if (classType === SA) {
        return types.push(AL);
      }

      if (classType === AI) {
        return types.push(AL);
      } // For supplementary characters, a useful default is to treat characters in the range 10000..1FFFD as AL
      // and characters in the ranges 20000..2FFFD and 30000..3FFFD as ID, until the implementation can be revised
      // to take into account the actual line breaking properties for these characters.


      if (classType === XX) {
        if (codePoint >= 0x20000 && codePoint <= 0x2fffd || codePoint >= 0x30000 && codePoint <= 0x3fffd) {
          return types.push(ID);
        } else {
          return types.push(AL);
        }
      }

      types.push(classType);
    });
    return [indicies, types, categories];
  };

  var isAdjacentWithSpaceIgnored = function isAdjacentWithSpaceIgnored(a, b, currentIndex, classTypes) {
    var current = classTypes[currentIndex];

    if (Array.isArray(a) ? a.indexOf(current) !== -1 : a === current) {
      var i = currentIndex;

      while (i <= classTypes.length) {
        i++;
        var next = classTypes[i];

        if (next === b) {
          return true;
        }

        if (next !== SP) {
          break;
        }
      }
    }

    if (current === SP) {
      var i = currentIndex;

      while (i > 0) {
        i--;
        var prev = classTypes[i];

        if (Array.isArray(a) ? a.indexOf(prev) !== -1 : a === prev) {
          var n = currentIndex;

          while (n <= classTypes.length) {
            n++;
            var next = classTypes[n];

            if (next === b) {
              return true;
            }

            if (next !== SP) {
              break;
            }
          }
        }

        if (prev !== SP) {
          break;
        }
      }
    }

    return false;
  };

  var previousNonSpaceClassType = function previousNonSpaceClassType(currentIndex, classTypes) {
    var i = currentIndex;

    while (i >= 0) {
      var type = classTypes[i];

      if (type === SP) {
        i--;
      } else {
        return type;
      }
    }

    return 0;
  };

  var _lineBreakAtIndex = function _lineBreakAtIndex(codePoints, classTypes, indicies, index, forbiddenBreaks) {
    if (indicies[index] === 0) {
      return BREAK_NOT_ALLOWED;
    }

    var currentIndex = index - 1;

    if (Array.isArray(forbiddenBreaks) && forbiddenBreaks[currentIndex] === true) {
      return BREAK_NOT_ALLOWED;
    }

    var beforeIndex = currentIndex - 1;
    var afterIndex = currentIndex + 1;
    var current = classTypes[currentIndex]; // LB4 Always break after hard line breaks.
    // LB5 Treat CR followed by LF, as well as CR, LF, and NL as hard line breaks.

    var before = beforeIndex >= 0 ? classTypes[beforeIndex] : 0;
    var next = classTypes[afterIndex];

    if (current === CR && next === LF) {
      return BREAK_NOT_ALLOWED;
    }

    if (HARD_LINE_BREAKS.indexOf(current) !== -1) {
      return BREAK_MANDATORY;
    } // LB6 Do not break before hard line breaks.


    if (HARD_LINE_BREAKS.indexOf(next) !== -1) {
      return BREAK_NOT_ALLOWED;
    } // LB7 Do not break before spaces or zero width space.


    if (SPACE.indexOf(next) !== -1) {
      return BREAK_NOT_ALLOWED;
    } // LB8 Break before any character following a zero-width space, even if one or more spaces intervene.


    if (previousNonSpaceClassType(currentIndex, classTypes) === ZW) {
      return BREAK_ALLOWED;
    } // LB8a Do not break between a zero width joiner and an ideograph, emoji base or emoji modifier.


    if (UnicodeTrie.get(codePoints[currentIndex]) === ZWJ && (next === ID || next === EB || next === EM)) {
      return BREAK_NOT_ALLOWED;
    } // LB11 Do not break before or after Word joiner and related characters.


    if (current === WJ || next === WJ) {
      return BREAK_NOT_ALLOWED;
    } // LB12 Do not break after NBSP and related characters.


    if (current === GL) {
      return BREAK_NOT_ALLOWED;
    } // LB12a Do not break before NBSP and related characters, except after spaces and hyphens.


    if ([SP, BA, HY].indexOf(current) === -1 && next === GL) {
      return BREAK_NOT_ALLOWED;
    } // LB13 Do not break before ‘]’ or ‘!’ or ‘;’ or ‘/’, even after spaces.


    if ([CL, CP, EX, IS, SY].indexOf(next) !== -1) {
      return BREAK_NOT_ALLOWED;
    } // LB14 Do not break after ‘[’, even after spaces.


    if (previousNonSpaceClassType(currentIndex, classTypes) === OP) {
      return BREAK_NOT_ALLOWED;
    } // LB15 Do not break within ‘”[’, even with intervening spaces.


    if (isAdjacentWithSpaceIgnored(QU, OP, currentIndex, classTypes)) {
      return BREAK_NOT_ALLOWED;
    } // LB16 Do not break between closing punctuation and a nonstarter (lb=NS), even with intervening spaces.


    if (isAdjacentWithSpaceIgnored([CL, CP], NS, currentIndex, classTypes)) {
      return BREAK_NOT_ALLOWED;
    } // LB17 Do not break within ‘——’, even with intervening spaces.


    if (isAdjacentWithSpaceIgnored(B2, B2, currentIndex, classTypes)) {
      return BREAK_NOT_ALLOWED;
    } // LB18 Break after spaces.


    if (current === SP) {
      return BREAK_ALLOWED;
    } // LB19 Do not break before or after quotation marks, such as ‘ ” ’.


    if (current === QU || next === QU) {
      return BREAK_NOT_ALLOWED;
    } // LB20 Break before and after unresolved CB.


    if (next === CB || current === CB) {
      return BREAK_ALLOWED;
    } // LB21 Do not break before hyphen-minus, other hyphens, fixed-width spaces, small kana, and other non-starters, or after acute accents.


    if ([BA, HY, NS].indexOf(next) !== -1 || current === BB) {
      return BREAK_NOT_ALLOWED;
    } // LB21a Don't break after Hebrew + Hyphen.


    if (before === HL && HYPHEN.indexOf(current) !== -1) {
      return BREAK_NOT_ALLOWED;
    } // LB21b Don’t break between Solidus and Hebrew letters.


    if (current === SY && next === HL) {
      return BREAK_NOT_ALLOWED;
    } // LB22 Do not break between two ellipses, or between letters, numbers or exclamations and ellipsis.


    if (next === IN && ALPHABETICS.concat(IN, EX, NU, ID, EB, EM).indexOf(current) !== -1) {
      return BREAK_NOT_ALLOWED;
    } // LB23 Do not break between digits and letters.


    if (ALPHABETICS.indexOf(next) !== -1 && current === NU || ALPHABETICS.indexOf(current) !== -1 && next === NU) {
      return BREAK_NOT_ALLOWED;
    } // LB23a Do not break between numeric prefixes and ideographs, or between ideographs and numeric postfixes.


    if (current === PR && [ID, EB, EM].indexOf(next) !== -1 || [ID, EB, EM].indexOf(current) !== -1 && next === PO) {
      return BREAK_NOT_ALLOWED;
    } // LB24 Do not break between numeric prefix/postfix and letters, or between letters and prefix/postfix.


    if (ALPHABETICS.indexOf(current) !== -1 && PREFIX_POSTFIX.indexOf(next) !== -1 || PREFIX_POSTFIX.indexOf(current) !== -1 && ALPHABETICS.indexOf(next) !== -1) {
      return BREAK_NOT_ALLOWED;
    } // LB25 Do not break between the following pairs of classes relevant to numbers:


    if ( // (PR | PO) × ( OP | HY )? NU
    [PR, PO].indexOf(current) !== -1 && (next === NU || [OP, HY].indexOf(next) !== -1 && classTypes[afterIndex + 1] === NU) || // ( OP | HY ) × NU
    [OP, HY].indexOf(current) !== -1 && next === NU || // NU ×	(NU | SY | IS)
    current === NU && [NU, SY, IS].indexOf(next) !== -1) {
      return BREAK_NOT_ALLOWED;
    } // NU (NU | SY | IS)* × (NU | SY | IS | CL | CP)


    if ([NU, SY, IS, CL, CP].indexOf(next) !== -1) {
      var prevIndex = currentIndex;

      while (prevIndex >= 0) {
        var type = classTypes[prevIndex];

        if (type === NU) {
          return BREAK_NOT_ALLOWED;
        } else if ([SY, IS].indexOf(type) !== -1) {
          prevIndex--;
        } else {
          break;
        }
      }
    } // NU (NU | SY | IS)* (CL | CP)? × (PO | PR))


    if ([PR, PO].indexOf(next) !== -1) {
      var prevIndex = [CL, CP].indexOf(current) !== -1 ? beforeIndex : currentIndex;

      while (prevIndex >= 0) {
        var type = classTypes[prevIndex];

        if (type === NU) {
          return BREAK_NOT_ALLOWED;
        } else if ([SY, IS].indexOf(type) !== -1) {
          prevIndex--;
        } else {
          break;
        }
      }
    } // LB26 Do not break a Korean syllable.


    if (JL === current && [JL, JV, H2, H3].indexOf(next) !== -1 || [JV, H2].indexOf(current) !== -1 && [JV, JT].indexOf(next) !== -1 || [JT, H3].indexOf(current) !== -1 && next === JT) {
      return BREAK_NOT_ALLOWED;
    } // LB27 Treat a Korean Syllable Block the same as ID.


    if (KOREAN_SYLLABLE_BLOCK.indexOf(current) !== -1 && [IN, PO].indexOf(next) !== -1 || KOREAN_SYLLABLE_BLOCK.indexOf(next) !== -1 && current === PR) {
      return BREAK_NOT_ALLOWED;
    } // LB28 Do not break between alphabetics (“at”).


    if (ALPHABETICS.indexOf(current) !== -1 && ALPHABETICS.indexOf(next) !== -1) {
      return BREAK_NOT_ALLOWED;
    } // LB29 Do not break between numeric punctuation and alphabetics (“e.g.”).


    if (current === IS && ALPHABETICS.indexOf(next) !== -1) {
      return BREAK_NOT_ALLOWED;
    } // LB30 Do not break between letters, numbers, or ordinary symbols and opening or closing parentheses.


    if (ALPHABETICS.concat(NU).indexOf(current) !== -1 && next === OP || ALPHABETICS.concat(NU).indexOf(next) !== -1 && current === CP) {
      return BREAK_NOT_ALLOWED;
    } // LB30a Break between two regional indicator symbols if and only if there are an even number of regional
    // indicators preceding the position of the break.


    if (current === RI && next === RI) {
      var i = indicies[currentIndex];
      var count = 1;

      while (i > 0) {
        i--;

        if (classTypes[i] === RI) {
          count++;
        } else {
          break;
        }
      }

      if (count % 2 !== 0) {
        return BREAK_NOT_ALLOWED;
      }
    } // LB30b Do not break between an emoji base and an emoji modifier.


    if (current === EB && next === EM) {
      return BREAK_NOT_ALLOWED;
    }

    return BREAK_ALLOWED;
  };

  var cssFormattedClasses = function cssFormattedClasses(codePoints, options) {
    if (!options) {
      options = {
        lineBreak: 'normal',
        wordBreak: 'normal'
      };
    }

    var _a = codePointsToCharacterClasses(codePoints, options.lineBreak),
        indicies = _a[0],
        classTypes = _a[1],
        isLetterNumber = _a[2];

    if (options.wordBreak === 'break-all' || options.wordBreak === 'break-word') {
      classTypes = classTypes.map(function (type) {
        return [NU, AL, SA].indexOf(type) !== -1 ? ID : type;
      });
    }

    var forbiddenBreakpoints = options.wordBreak === 'keep-all' ? isLetterNumber.map(function (letterNumber, i) {
      return letterNumber && codePoints[i] >= 0x4e00 && codePoints[i] <= 0x9fff;
    }) : undefined;
    return [indicies, classTypes, forbiddenBreakpoints];
  };

  var Break =
  /** @class */
  function () {
    function Break(codePoints, lineBreak, start, end) {
      this.codePoints = codePoints;
      this.required = lineBreak === BREAK_MANDATORY;
      this.start = start;
      this.end = end;
    }

    Break.prototype.slice = function () {
      return fromCodePoint.apply(void 0, this.codePoints.slice(this.start, this.end));
    };

    return Break;
  }();

  var LineBreaker = function LineBreaker(str, options) {
    var codePoints = toCodePoints(str);

    var _a = cssFormattedClasses(codePoints, options),
        indicies = _a[0],
        classTypes = _a[1],
        forbiddenBreakpoints = _a[2];

    var length = codePoints.length;
    var lastEnd = 0;
    var nextIndex = 0;
    return {
      next: function next() {
        if (nextIndex >= length) {
          return {
            done: true,
            value: null
          };
        }

        var lineBreak = BREAK_NOT_ALLOWED;

        while (nextIndex < length && (lineBreak = _lineBreakAtIndex(codePoints, classTypes, indicies, ++nextIndex, forbiddenBreakpoints)) === BREAK_NOT_ALLOWED) {}

        if (lineBreak !== BREAK_NOT_ALLOWED || nextIndex === length) {
          var value = new Break(codePoints, lineBreak, lastEnd, nextIndex);
          lastEnd = nextIndex;
          return {
            value: value,
            done: false
          };
        }

        return {
          done: true,
          value: null
        };
      }
    };
  }; // https://www.w3.org/TR/css-syntax-3


  var TokenType;

  (function (TokenType) {
    TokenType[TokenType["STRING_TOKEN"] = 0] = "STRING_TOKEN";
    TokenType[TokenType["BAD_STRING_TOKEN"] = 1] = "BAD_STRING_TOKEN";
    TokenType[TokenType["LEFT_PARENTHESIS_TOKEN"] = 2] = "LEFT_PARENTHESIS_TOKEN";
    TokenType[TokenType["RIGHT_PARENTHESIS_TOKEN"] = 3] = "RIGHT_PARENTHESIS_TOKEN";
    TokenType[TokenType["COMMA_TOKEN"] = 4] = "COMMA_TOKEN";
    TokenType[TokenType["HASH_TOKEN"] = 5] = "HASH_TOKEN";
    TokenType[TokenType["DELIM_TOKEN"] = 6] = "DELIM_TOKEN";
    TokenType[TokenType["AT_KEYWORD_TOKEN"] = 7] = "AT_KEYWORD_TOKEN";
    TokenType[TokenType["PREFIX_MATCH_TOKEN"] = 8] = "PREFIX_MATCH_TOKEN";
    TokenType[TokenType["DASH_MATCH_TOKEN"] = 9] = "DASH_MATCH_TOKEN";
    TokenType[TokenType["INCLUDE_MATCH_TOKEN"] = 10] = "INCLUDE_MATCH_TOKEN";
    TokenType[TokenType["LEFT_CURLY_BRACKET_TOKEN"] = 11] = "LEFT_CURLY_BRACKET_TOKEN";
    TokenType[TokenType["RIGHT_CURLY_BRACKET_TOKEN"] = 12] = "RIGHT_CURLY_BRACKET_TOKEN";
    TokenType[TokenType["SUFFIX_MATCH_TOKEN"] = 13] = "SUFFIX_MATCH_TOKEN";
    TokenType[TokenType["SUBSTRING_MATCH_TOKEN"] = 14] = "SUBSTRING_MATCH_TOKEN";
    TokenType[TokenType["DIMENSION_TOKEN"] = 15] = "DIMENSION_TOKEN";
    TokenType[TokenType["PERCENTAGE_TOKEN"] = 16] = "PERCENTAGE_TOKEN";
    TokenType[TokenType["NUMBER_TOKEN"] = 17] = "NUMBER_TOKEN";
    TokenType[TokenType["FUNCTION"] = 18] = "FUNCTION";
    TokenType[TokenType["FUNCTION_TOKEN"] = 19] = "FUNCTION_TOKEN";
    TokenType[TokenType["IDENT_TOKEN"] = 20] = "IDENT_TOKEN";
    TokenType[TokenType["COLUMN_TOKEN"] = 21] = "COLUMN_TOKEN";
    TokenType[TokenType["URL_TOKEN"] = 22] = "URL_TOKEN";
    TokenType[TokenType["BAD_URL_TOKEN"] = 23] = "BAD_URL_TOKEN";
    TokenType[TokenType["CDC_TOKEN"] = 24] = "CDC_TOKEN";
    TokenType[TokenType["CDO_TOKEN"] = 25] = "CDO_TOKEN";
    TokenType[TokenType["COLON_TOKEN"] = 26] = "COLON_TOKEN";
    TokenType[TokenType["SEMICOLON_TOKEN"] = 27] = "SEMICOLON_TOKEN";
    TokenType[TokenType["LEFT_SQUARE_BRACKET_TOKEN"] = 28] = "LEFT_SQUARE_BRACKET_TOKEN";
    TokenType[TokenType["RIGHT_SQUARE_BRACKET_TOKEN"] = 29] = "RIGHT_SQUARE_BRACKET_TOKEN";
    TokenType[TokenType["UNICODE_RANGE_TOKEN"] = 30] = "UNICODE_RANGE_TOKEN";
    TokenType[TokenType["WHITESPACE_TOKEN"] = 31] = "WHITESPACE_TOKEN";
    TokenType[TokenType["EOF_TOKEN"] = 32] = "EOF_TOKEN";
  })(TokenType || (TokenType = {}));

  var FLAG_UNRESTRICTED = 1 << 0;
  var FLAG_ID = 1 << 1;
  var FLAG_INTEGER = 1 << 2;
  var FLAG_NUMBER = 1 << 3;
  var LINE_FEED = 0x000a;
  var SOLIDUS = 0x002f;
  var REVERSE_SOLIDUS = 0x005c;
  var CHARACTER_TABULATION = 0x0009;
  var SPACE$1 = 0x0020;
  var QUOTATION_MARK = 0x0022;
  var EQUALS_SIGN = 0x003d;
  var NUMBER_SIGN = 0x0023;
  var DOLLAR_SIGN = 0x0024;
  var PERCENTAGE_SIGN = 0x0025;
  var APOSTROPHE = 0x0027;
  var LEFT_PARENTHESIS = 0x0028;
  var RIGHT_PARENTHESIS = 0x0029;
  var LOW_LINE = 0x005f;
  var HYPHEN_MINUS = 0x002d;
  var EXCLAMATION_MARK = 0x0021;
  var LESS_THAN_SIGN = 0x003c;
  var GREATER_THAN_SIGN = 0x003e;
  var COMMERCIAL_AT = 0x0040;
  var LEFT_SQUARE_BRACKET = 0x005b;
  var RIGHT_SQUARE_BRACKET = 0x005d;
  var CIRCUMFLEX_ACCENT = 0x003d;
  var LEFT_CURLY_BRACKET = 0x007b;
  var QUESTION_MARK = 0x003f;
  var RIGHT_CURLY_BRACKET = 0x007d;
  var VERTICAL_LINE = 0x007c;
  var TILDE = 0x007e;
  var CONTROL = 0x0080;
  var REPLACEMENT_CHARACTER = 0xfffd;
  var ASTERISK = 0x002a;
  var PLUS_SIGN = 0x002b;
  var COMMA = 0x002c;
  var COLON = 0x003a;
  var SEMICOLON = 0x003b;
  var FULL_STOP = 0x002e;
  var NULL = 0x0000;
  var BACKSPACE = 0x0008;
  var LINE_TABULATION = 0x000b;
  var SHIFT_OUT = 0x000e;
  var INFORMATION_SEPARATOR_ONE = 0x001f;
  var DELETE = 0x007f;
  var EOF = -1;
  var ZERO = 0x0030;
  var a = 0x0061;
  var e = 0x0065;
  var f = 0x0066;
  var u = 0x0075;
  var z = 0x007a;
  var A = 0x0041;
  var E = 0x0045;
  var F = 0x0046;
  var U = 0x0055;
  var Z = 0x005a;

  var isDigit = function isDigit(codePoint) {
    return codePoint >= ZERO && codePoint <= 0x0039;
  };

  var isSurrogateCodePoint = function isSurrogateCodePoint(codePoint) {
    return codePoint >= 0xd800 && codePoint <= 0xdfff;
  };

  var isHex = function isHex(codePoint) {
    return isDigit(codePoint) || codePoint >= A && codePoint <= F || codePoint >= a && codePoint <= f;
  };

  var isLowerCaseLetter = function isLowerCaseLetter(codePoint) {
    return codePoint >= a && codePoint <= z;
  };

  var isUpperCaseLetter = function isUpperCaseLetter(codePoint) {
    return codePoint >= A && codePoint <= Z;
  };

  var isLetter = function isLetter(codePoint) {
    return isLowerCaseLetter(codePoint) || isUpperCaseLetter(codePoint);
  };

  var isNonASCIICodePoint = function isNonASCIICodePoint(codePoint) {
    return codePoint >= CONTROL;
  };

  var isWhiteSpace = function isWhiteSpace(codePoint) {
    return codePoint === LINE_FEED || codePoint === CHARACTER_TABULATION || codePoint === SPACE$1;
  };

  var isNameStartCodePoint = function isNameStartCodePoint(codePoint) {
    return isLetter(codePoint) || isNonASCIICodePoint(codePoint) || codePoint === LOW_LINE;
  };

  var isNameCodePoint = function isNameCodePoint(codePoint) {
    return isNameStartCodePoint(codePoint) || isDigit(codePoint) || codePoint === HYPHEN_MINUS;
  };

  var isNonPrintableCodePoint = function isNonPrintableCodePoint(codePoint) {
    return codePoint >= NULL && codePoint <= BACKSPACE || codePoint === LINE_TABULATION || codePoint >= SHIFT_OUT && codePoint <= INFORMATION_SEPARATOR_ONE || codePoint === DELETE;
  };

  var isValidEscape = function isValidEscape(c1, c2) {
    if (c1 !== REVERSE_SOLIDUS) {
      return false;
    }

    return c2 !== LINE_FEED;
  };

  var isIdentifierStart = function isIdentifierStart(c1, c2, c3) {
    if (c1 === HYPHEN_MINUS) {
      return isNameStartCodePoint(c2) || isValidEscape(c2, c3);
    } else if (isNameStartCodePoint(c1)) {
      return true;
    } else if (c1 === REVERSE_SOLIDUS && isValidEscape(c1, c2)) {
      return true;
    }

    return false;
  };

  var isNumberStart = function isNumberStart(c1, c2, c3) {
    if (c1 === PLUS_SIGN || c1 === HYPHEN_MINUS) {
      if (isDigit(c2)) {
        return true;
      }

      return c2 === FULL_STOP && isDigit(c3);
    }

    if (c1 === FULL_STOP) {
      return isDigit(c2);
    }

    return isDigit(c1);
  };

  var stringToNumber = function stringToNumber(codePoints) {
    var c = 0;
    var sign = 1;

    if (codePoints[c] === PLUS_SIGN || codePoints[c] === HYPHEN_MINUS) {
      if (codePoints[c] === HYPHEN_MINUS) {
        sign = -1;
      }

      c++;
    }

    var integers = [];

    while (isDigit(codePoints[c])) {
      integers.push(codePoints[c++]);
    }

    var int = integers.length ? parseInt(fromCodePoint.apply(void 0, integers), 10) : 0;

    if (codePoints[c] === FULL_STOP) {
      c++;
    }

    var fraction = [];

    while (isDigit(codePoints[c])) {
      fraction.push(codePoints[c++]);
    }

    var fracd = fraction.length;
    var frac = fracd ? parseInt(fromCodePoint.apply(void 0, fraction), 10) : 0;

    if (codePoints[c] === E || codePoints[c] === e) {
      c++;
    }

    var expsign = 1;

    if (codePoints[c] === PLUS_SIGN || codePoints[c] === HYPHEN_MINUS) {
      if (codePoints[c] === HYPHEN_MINUS) {
        expsign = -1;
      }

      c++;
    }

    var exponent = [];

    while (isDigit(codePoints[c])) {
      exponent.push(codePoints[c++]);
    }

    var exp = exponent.length ? parseInt(fromCodePoint.apply(void 0, exponent), 10) : 0;
    return sign * (int + frac * Math.pow(10, -fracd)) * Math.pow(10, expsign * exp);
  };

  var LEFT_PARENTHESIS_TOKEN = {
    type: TokenType.LEFT_PARENTHESIS_TOKEN
  };
  var RIGHT_PARENTHESIS_TOKEN = {
    type: TokenType.RIGHT_PARENTHESIS_TOKEN
  };
  var COMMA_TOKEN = {
    type: TokenType.COMMA_TOKEN
  };
  var SUFFIX_MATCH_TOKEN = {
    type: TokenType.SUFFIX_MATCH_TOKEN
  };
  var PREFIX_MATCH_TOKEN = {
    type: TokenType.PREFIX_MATCH_TOKEN
  };
  var COLUMN_TOKEN = {
    type: TokenType.COLUMN_TOKEN
  };
  var DASH_MATCH_TOKEN = {
    type: TokenType.DASH_MATCH_TOKEN
  };
  var INCLUDE_MATCH_TOKEN = {
    type: TokenType.INCLUDE_MATCH_TOKEN
  };
  var LEFT_CURLY_BRACKET_TOKEN = {
    type: TokenType.LEFT_CURLY_BRACKET_TOKEN
  };
  var RIGHT_CURLY_BRACKET_TOKEN = {
    type: TokenType.RIGHT_CURLY_BRACKET_TOKEN
  };
  var SUBSTRING_MATCH_TOKEN = {
    type: TokenType.SUBSTRING_MATCH_TOKEN
  };
  var BAD_URL_TOKEN = {
    type: TokenType.BAD_URL_TOKEN
  };
  var BAD_STRING_TOKEN = {
    type: TokenType.BAD_STRING_TOKEN
  };
  var CDO_TOKEN = {
    type: TokenType.CDO_TOKEN
  };
  var CDC_TOKEN = {
    type: TokenType.CDC_TOKEN
  };
  var COLON_TOKEN = {
    type: TokenType.COLON_TOKEN
  };
  var SEMICOLON_TOKEN = {
    type: TokenType.SEMICOLON_TOKEN
  };
  var LEFT_SQUARE_BRACKET_TOKEN = {
    type: TokenType.LEFT_SQUARE_BRACKET_TOKEN
  };
  var RIGHT_SQUARE_BRACKET_TOKEN = {
    type: TokenType.RIGHT_SQUARE_BRACKET_TOKEN
  };
  var WHITESPACE_TOKEN = {
    type: TokenType.WHITESPACE_TOKEN
  };
  var EOF_TOKEN = {
    type: TokenType.EOF_TOKEN
  };

  var Tokenizer =
  /** @class */
  function () {
    function Tokenizer() {
      this._value = [];
    }

    Tokenizer.prototype.write = function (chunk) {
      this._value = this._value.concat(toCodePoints(chunk));
    };

    Tokenizer.prototype.read = function () {
      var tokens = [];
      var token = this.consumeToken();

      while (token !== EOF_TOKEN) {
        tokens.push(token);
        token = this.consumeToken();
      }

      return tokens;
    };

    Tokenizer.prototype.consumeToken = function () {
      var codePoint = this.consumeCodePoint();

      switch (codePoint) {
        case QUOTATION_MARK:
          return this.consumeStringToken(QUOTATION_MARK);

        case NUMBER_SIGN:
          var c1 = this.peekCodePoint(0);
          var c2 = this.peekCodePoint(1);
          var c3 = this.peekCodePoint(2);

          if (isNameCodePoint(c1) || isValidEscape(c2, c3)) {
            var flags = isIdentifierStart(c1, c2, c3) ? FLAG_ID : FLAG_UNRESTRICTED;
            var value = this.consumeName();
            return {
              type: TokenType.HASH_TOKEN,
              value: value,
              flags: flags
            };
          }

          break;

        case DOLLAR_SIGN:
          if (this.peekCodePoint(0) === EQUALS_SIGN) {
            this.consumeCodePoint();
            return SUFFIX_MATCH_TOKEN;
          }

          break;

        case APOSTROPHE:
          return this.consumeStringToken(APOSTROPHE);

        case LEFT_PARENTHESIS:
          return LEFT_PARENTHESIS_TOKEN;

        case RIGHT_PARENTHESIS:
          return RIGHT_PARENTHESIS_TOKEN;

        case ASTERISK:
          if (this.peekCodePoint(0) === EQUALS_SIGN) {
            this.consumeCodePoint();
            return SUBSTRING_MATCH_TOKEN;
          }

          break;

        case PLUS_SIGN:
          if (isNumberStart(codePoint, this.peekCodePoint(0), this.peekCodePoint(1))) {
            this.reconsumeCodePoint(codePoint);
            return this.consumeNumericToken();
          }

          break;

        case COMMA:
          return COMMA_TOKEN;

        case HYPHEN_MINUS:
          var e1 = codePoint;
          var e2 = this.peekCodePoint(0);
          var e3 = this.peekCodePoint(1);

          if (isNumberStart(e1, e2, e3)) {
            this.reconsumeCodePoint(codePoint);
            return this.consumeNumericToken();
          }

          if (isIdentifierStart(e1, e2, e3)) {
            this.reconsumeCodePoint(codePoint);
            return this.consumeIdentLikeToken();
          }

          if (e2 === HYPHEN_MINUS && e3 === GREATER_THAN_SIGN) {
            this.consumeCodePoint();
            this.consumeCodePoint();
            return CDC_TOKEN;
          }

          break;

        case FULL_STOP:
          if (isNumberStart(codePoint, this.peekCodePoint(0), this.peekCodePoint(1))) {
            this.reconsumeCodePoint(codePoint);
            return this.consumeNumericToken();
          }

          break;

        case SOLIDUS:
          if (this.peekCodePoint(0) === ASTERISK) {
            this.consumeCodePoint();

            while (true) {
              var c = this.consumeCodePoint();

              if (c === ASTERISK) {
                c = this.consumeCodePoint();

                if (c === SOLIDUS) {
                  return this.consumeToken();
                }
              }

              if (c === EOF) {
                return this.consumeToken();
              }
            }
          }

          break;

        case COLON:
          return COLON_TOKEN;

        case SEMICOLON:
          return SEMICOLON_TOKEN;

        case LESS_THAN_SIGN:
          if (this.peekCodePoint(0) === EXCLAMATION_MARK && this.peekCodePoint(1) === HYPHEN_MINUS && this.peekCodePoint(2) === HYPHEN_MINUS) {
            this.consumeCodePoint();
            this.consumeCodePoint();
            return CDO_TOKEN;
          }

          break;

        case COMMERCIAL_AT:
          var a1 = this.peekCodePoint(0);
          var a2 = this.peekCodePoint(1);
          var a3 = this.peekCodePoint(2);

          if (isIdentifierStart(a1, a2, a3)) {
            var value = this.consumeName();
            return {
              type: TokenType.AT_KEYWORD_TOKEN,
              value: value
            };
          }

          break;

        case LEFT_SQUARE_BRACKET:
          return LEFT_SQUARE_BRACKET_TOKEN;

        case REVERSE_SOLIDUS:
          if (isValidEscape(codePoint, this.peekCodePoint(0))) {
            this.reconsumeCodePoint(codePoint);
            return this.consumeIdentLikeToken();
          }

          break;

        case RIGHT_SQUARE_BRACKET:
          return RIGHT_SQUARE_BRACKET_TOKEN;

        case CIRCUMFLEX_ACCENT:
          if (this.peekCodePoint(0) === EQUALS_SIGN) {
            this.consumeCodePoint();
            return PREFIX_MATCH_TOKEN;
          }

          break;

        case LEFT_CURLY_BRACKET:
          return LEFT_CURLY_BRACKET_TOKEN;

        case RIGHT_CURLY_BRACKET:
          return RIGHT_CURLY_BRACKET_TOKEN;

        case u:
        case U:
          var u1 = this.peekCodePoint(0);
          var u2 = this.peekCodePoint(1);

          if (u1 === PLUS_SIGN && (isHex(u2) || u2 === QUESTION_MARK)) {
            this.consumeCodePoint();
            this.consumeUnicodeRangeToken();
          }

          this.reconsumeCodePoint(codePoint);
          return this.consumeIdentLikeToken();

        case VERTICAL_LINE:
          if (this.peekCodePoint(0) === EQUALS_SIGN) {
            this.consumeCodePoint();
            return DASH_MATCH_TOKEN;
          }

          if (this.peekCodePoint(0) === VERTICAL_LINE) {
            this.consumeCodePoint();
            return COLUMN_TOKEN;
          }

          break;

        case TILDE:
          if (this.peekCodePoint(0) === EQUALS_SIGN) {
            this.consumeCodePoint();
            return INCLUDE_MATCH_TOKEN;
          }

          break;

        case EOF:
          return EOF_TOKEN;
      }

      if (isWhiteSpace(codePoint)) {
        this.consumeWhiteSpace();
        return WHITESPACE_TOKEN;
      }

      if (isDigit(codePoint)) {
        this.reconsumeCodePoint(codePoint);
        return this.consumeNumericToken();
      }

      if (isNameStartCodePoint(codePoint)) {
        this.reconsumeCodePoint(codePoint);
        return this.consumeIdentLikeToken();
      }

      return {
        type: TokenType.DELIM_TOKEN,
        value: fromCodePoint(codePoint)
      };
    };

    Tokenizer.prototype.consumeCodePoint = function () {
      var value = this._value.shift();

      return typeof value === 'undefined' ? -1 : value;
    };

    Tokenizer.prototype.reconsumeCodePoint = function (codePoint) {
      this._value.unshift(codePoint);
    };

    Tokenizer.prototype.peekCodePoint = function (delta) {
      if (delta >= this._value.length) {
        return -1;
      }

      return this._value[delta];
    };

    Tokenizer.prototype.consumeUnicodeRangeToken = function () {
      var digits = [];
      var codePoint = this.consumeCodePoint();

      while (isHex(codePoint) && digits.length < 6) {
        digits.push(codePoint);
        codePoint = this.consumeCodePoint();
      }

      var questionMarks = false;

      while (codePoint === QUESTION_MARK && digits.length < 6) {
        digits.push(codePoint);
        codePoint = this.consumeCodePoint();
        questionMarks = true;
      }

      if (questionMarks) {
        var start_1 = parseInt(fromCodePoint.apply(void 0, digits.map(function (digit) {
          return digit === QUESTION_MARK ? ZERO : digit;
        })), 16);
        var end = parseInt(fromCodePoint.apply(void 0, digits.map(function (digit) {
          return digit === QUESTION_MARK ? F : digit;
        })), 16);
        return {
          type: TokenType.UNICODE_RANGE_TOKEN,
          start: start_1,
          end: end
        };
      }

      var start = parseInt(fromCodePoint.apply(void 0, digits), 16);

      if (this.peekCodePoint(0) === HYPHEN_MINUS && isHex(this.peekCodePoint(1))) {
        this.consumeCodePoint();
        codePoint = this.consumeCodePoint();
        var endDigits = [];

        while (isHex(codePoint) && endDigits.length < 6) {
          endDigits.push(codePoint);
          codePoint = this.consumeCodePoint();
        }

        var end = parseInt(fromCodePoint.apply(void 0, endDigits), 16);
        return {
          type: TokenType.UNICODE_RANGE_TOKEN,
          start: start,
          end: end
        };
      } else {
        return {
          type: TokenType.UNICODE_RANGE_TOKEN,
          start: start,
          end: start
        };
      }
    };

    Tokenizer.prototype.consumeIdentLikeToken = function () {
      var value = this.consumeName();

      if (value.toLowerCase() === 'url' && this.peekCodePoint(0) === LEFT_PARENTHESIS) {
        this.consumeCodePoint();
        return this.consumeUrlToken();
      } else if (this.peekCodePoint(0) === LEFT_PARENTHESIS) {
        this.consumeCodePoint();
        return {
          type: TokenType.FUNCTION_TOKEN,
          value: value
        };
      }

      return {
        type: TokenType.IDENT_TOKEN,
        value: value
      };
    };

    Tokenizer.prototype.consumeUrlToken = function () {
      var value = [];
      this.consumeWhiteSpace();

      if (this.peekCodePoint(0) === EOF) {
        return {
          type: TokenType.URL_TOKEN,
          value: ''
        };
      }

      var next = this.peekCodePoint(0);

      if (next === APOSTROPHE || next === QUOTATION_MARK) {
        var stringToken = this.consumeStringToken(this.consumeCodePoint());

        if (stringToken.type === TokenType.STRING_TOKEN) {
          this.consumeWhiteSpace();

          if (this.peekCodePoint(0) === EOF || this.peekCodePoint(0) === RIGHT_PARENTHESIS) {
            this.consumeCodePoint();
            return {
              type: TokenType.URL_TOKEN,
              value: stringToken.value
            };
          }
        }

        this.consumeBadUrlRemnants();
        return BAD_URL_TOKEN;
      }

      while (true) {
        var codePoint = this.consumeCodePoint();

        if (codePoint === EOF || codePoint === RIGHT_PARENTHESIS) {
          return {
            type: TokenType.URL_TOKEN,
            value: fromCodePoint.apply(void 0, value)
          };
        } else if (isWhiteSpace(codePoint)) {
          this.consumeWhiteSpace();

          if (this.peekCodePoint(0) === EOF || this.peekCodePoint(0) === RIGHT_PARENTHESIS) {
            this.consumeCodePoint();
            return {
              type: TokenType.URL_TOKEN,
              value: fromCodePoint.apply(void 0, value)
            };
          }

          this.consumeBadUrlRemnants();
          return BAD_URL_TOKEN;
        } else if (codePoint === QUOTATION_MARK || codePoint === APOSTROPHE || codePoint === LEFT_PARENTHESIS || isNonPrintableCodePoint(codePoint)) {
          this.consumeBadUrlRemnants();
          return BAD_URL_TOKEN;
        } else if (codePoint === REVERSE_SOLIDUS) {
          if (isValidEscape(codePoint, this.peekCodePoint(0))) {
            value.push(this.consumeEscapedCodePoint());
          } else {
            this.consumeBadUrlRemnants();
            return BAD_URL_TOKEN;
          }
        } else {
          value.push(codePoint);
        }
      }
    };

    Tokenizer.prototype.consumeWhiteSpace = function () {
      while (isWhiteSpace(this.peekCodePoint(0))) {
        this.consumeCodePoint();
      }
    };

    Tokenizer.prototype.consumeBadUrlRemnants = function () {
      while (true) {
        var codePoint = this.consumeCodePoint();

        if (codePoint === RIGHT_PARENTHESIS || codePoint === EOF) {
          return;
        }

        if (isValidEscape(codePoint, this.peekCodePoint(0))) {
          this.consumeEscapedCodePoint();
        }
      }
    };

    Tokenizer.prototype.consumeStringSlice = function (count) {
      var SLICE_STACK_SIZE = 60000;
      var value = '';

      while (count > 0) {
        var amount = Math.min(SLICE_STACK_SIZE, count);
        value += fromCodePoint.apply(void 0, this._value.splice(0, amount));
        count -= amount;
      }

      this._value.shift();

      return value;
    };

    Tokenizer.prototype.consumeStringToken = function (endingCodePoint) {
      var value = '';
      var i = 0;

      do {
        var codePoint = this._value[i];

        if (codePoint === EOF || codePoint === undefined || codePoint === endingCodePoint) {
          value += this.consumeStringSlice(i);
          return {
            type: TokenType.STRING_TOKEN,
            value: value
          };
        }

        if (codePoint === LINE_FEED) {
          this._value.splice(0, i);

          return BAD_STRING_TOKEN;
        }

        if (codePoint === REVERSE_SOLIDUS) {
          var next = this._value[i + 1];

          if (next !== EOF && next !== undefined) {
            if (next === LINE_FEED) {
              value += this.consumeStringSlice(i);
              i = -1;

              this._value.shift();
            } else if (isValidEscape(codePoint, next)) {
              value += this.consumeStringSlice(i);
              value += fromCodePoint(this.consumeEscapedCodePoint());
              i = -1;
            }
          }
        }

        i++;
      } while (true);
    };

    Tokenizer.prototype.consumeNumber = function () {
      var repr = [];
      var type = FLAG_INTEGER;
      var c1 = this.peekCodePoint(0);

      if (c1 === PLUS_SIGN || c1 === HYPHEN_MINUS) {
        repr.push(this.consumeCodePoint());
      }

      while (isDigit(this.peekCodePoint(0))) {
        repr.push(this.consumeCodePoint());
      }

      c1 = this.peekCodePoint(0);
      var c2 = this.peekCodePoint(1);

      if (c1 === FULL_STOP && isDigit(c2)) {
        repr.push(this.consumeCodePoint(), this.consumeCodePoint());
        type = FLAG_NUMBER;

        while (isDigit(this.peekCodePoint(0))) {
          repr.push(this.consumeCodePoint());
        }
      }

      c1 = this.peekCodePoint(0);
      c2 = this.peekCodePoint(1);
      var c3 = this.peekCodePoint(2);

      if ((c1 === E || c1 === e) && ((c2 === PLUS_SIGN || c2 === HYPHEN_MINUS) && isDigit(c3) || isDigit(c2))) {
        repr.push(this.consumeCodePoint(), this.consumeCodePoint());
        type = FLAG_NUMBER;

        while (isDigit(this.peekCodePoint(0))) {
          repr.push(this.consumeCodePoint());
        }
      }

      return [stringToNumber(repr), type];
    };

    Tokenizer.prototype.consumeNumericToken = function () {
      var _a = this.consumeNumber(),
          number = _a[0],
          flags = _a[1];

      var c1 = this.peekCodePoint(0);
      var c2 = this.peekCodePoint(1);
      var c3 = this.peekCodePoint(2);

      if (isIdentifierStart(c1, c2, c3)) {
        var unit = this.consumeName();
        return {
          type: TokenType.DIMENSION_TOKEN,
          number: number,
          flags: flags,
          unit: unit
        };
      }

      if (c1 === PERCENTAGE_SIGN) {
        this.consumeCodePoint();
        return {
          type: TokenType.PERCENTAGE_TOKEN,
          number: number,
          flags: flags
        };
      }

      return {
        type: TokenType.NUMBER_TOKEN,
        number: number,
        flags: flags
      };
    };

    Tokenizer.prototype.consumeEscapedCodePoint = function () {
      var codePoint = this.consumeCodePoint();

      if (isHex(codePoint)) {
        var hex = fromCodePoint(codePoint);

        while (isHex(this.peekCodePoint(0)) && hex.length < 6) {
          hex += fromCodePoint(this.consumeCodePoint());
        }

        if (isWhiteSpace(this.peekCodePoint(0))) {
          this.consumeCodePoint();
        }

        var hexCodePoint = parseInt(hex, 16);

        if (hexCodePoint === 0 || isSurrogateCodePoint(hexCodePoint) || hexCodePoint > 0x10ffff) {
          return REPLACEMENT_CHARACTER;
        }

        return hexCodePoint;
      }

      if (codePoint === EOF) {
        return REPLACEMENT_CHARACTER;
      }

      return codePoint;
    };

    Tokenizer.prototype.consumeName = function () {
      var result = '';

      while (true) {
        var codePoint = this.consumeCodePoint();

        if (isNameCodePoint(codePoint)) {
          result += fromCodePoint(codePoint);
        } else if (isValidEscape(codePoint, this.peekCodePoint(0))) {
          result += fromCodePoint(this.consumeEscapedCodePoint());
        } else {
          this.reconsumeCodePoint(codePoint);
          return result;
        }
      }
    };

    return Tokenizer;
  }();

  var Parser =
  /** @class */
  function () {
    function Parser(tokens) {
      this._tokens = tokens;
    }

    Parser.create = function (value) {
      var tokenizer = new Tokenizer();
      tokenizer.write(value);
      return new Parser(tokenizer.read());
    };

    Parser.parseValue = function (value) {
      return Parser.create(value).parseComponentValue();
    };

    Parser.parseValues = function (value) {
      return Parser.create(value).parseComponentValues();
    };

    Parser.prototype.parseComponentValue = function () {
      var token = this.consumeToken();

      while (token.type === TokenType.WHITESPACE_TOKEN) {
        token = this.consumeToken();
      }

      if (token.type === TokenType.EOF_TOKEN) {
        throw new SyntaxError("Error parsing CSS component value, unexpected EOF");
      }

      this.reconsumeToken(token);
      var value = this.consumeComponentValue();

      do {
        token = this.consumeToken();
      } while (token.type === TokenType.WHITESPACE_TOKEN);

      if (token.type === TokenType.EOF_TOKEN) {
        return value;
      }

      throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one");
    };

    Parser.prototype.parseComponentValues = function () {
      var values = [];

      while (true) {
        var value = this.consumeComponentValue();

        if (value.type === TokenType.EOF_TOKEN) {
          return values;
        }

        values.push(value);
        values.push();
      }
    };

    Parser.prototype.consumeComponentValue = function () {
      var token = this.consumeToken();

      switch (token.type) {
        case TokenType.LEFT_CURLY_BRACKET_TOKEN:
        case TokenType.LEFT_SQUARE_BRACKET_TOKEN:
        case TokenType.LEFT_PARENTHESIS_TOKEN:
          return this.consumeSimpleBlock(token.type);

        case TokenType.FUNCTION_TOKEN:
          return this.consumeFunction(token);
      }

      return token;
    };

    Parser.prototype.consumeSimpleBlock = function (type) {
      var block = {
        type: type,
        values: []
      };
      var token = this.consumeToken();

      while (true) {
        if (token.type === TokenType.EOF_TOKEN || isEndingTokenFor(token, type)) {
          return block;
        }

        this.reconsumeToken(token);
        block.values.push(this.consumeComponentValue());
        token = this.consumeToken();
      }
    };

    Parser.prototype.consumeFunction = function (functionToken) {
      var cssFunction = {
        name: functionToken.value,
        values: [],
        type: TokenType.FUNCTION
      };

      while (true) {
        var token = this.consumeToken();

        if (token.type === TokenType.EOF_TOKEN || token.type === TokenType.RIGHT_PARENTHESIS_TOKEN) {
          return cssFunction;
        }

        this.reconsumeToken(token);
        cssFunction.values.push(this.consumeComponentValue());
      }
    };

    Parser.prototype.consumeToken = function () {
      var token = this._tokens.shift();

      return typeof token === 'undefined' ? EOF_TOKEN : token;
    };

    Parser.prototype.reconsumeToken = function (token) {
      this._tokens.unshift(token);
    };

    return Parser;
  }();

  var isDimensionToken = function isDimensionToken(token) {
    return token.type === TokenType.DIMENSION_TOKEN;
  };

  var isNumberToken = function isNumberToken(token) {
    return token.type === TokenType.NUMBER_TOKEN;
  };

  var isIdentToken = function isIdentToken(token) {
    return token.type === TokenType.IDENT_TOKEN;
  };

  var isStringToken = function isStringToken(token) {
    return token.type === TokenType.STRING_TOKEN;
  };

  var isIdentWithValue = function isIdentWithValue(token, value) {
    return isIdentToken(token) && token.value === value;
  };

  var nonWhiteSpace = function nonWhiteSpace(token) {
    return token.type !== TokenType.WHITESPACE_TOKEN;
  };

  var nonFunctionArgSeperator = function nonFunctionArgSeperator(token) {
    return token.type !== TokenType.WHITESPACE_TOKEN && token.type !== TokenType.COMMA_TOKEN;
  };

  var parseFunctionArgs = function parseFunctionArgs(tokens) {
    var args = [];
    var arg = [];
    tokens.forEach(function (token) {
      if (token.type === TokenType.COMMA_TOKEN) {
        if (arg.length === 0) {
          throw new Error("Error parsing function args, zero tokens for arg");
        }

        args.push(arg);
        arg = [];
        return;
      }

      if (token.type !== TokenType.WHITESPACE_TOKEN) {
        arg.push(token);
      }
    });

    if (arg.length) {
      args.push(arg);
    }

    return args;
  };

  var isEndingTokenFor = function isEndingTokenFor(token, type) {
    if (type === TokenType.LEFT_CURLY_BRACKET_TOKEN && token.type === TokenType.RIGHT_CURLY_BRACKET_TOKEN) {
      return true;
    }

    if (type === TokenType.LEFT_SQUARE_BRACKET_TOKEN && token.type === TokenType.RIGHT_SQUARE_BRACKET_TOKEN) {
      return true;
    }

    return type === TokenType.LEFT_PARENTHESIS_TOKEN && token.type === TokenType.RIGHT_PARENTHESIS_TOKEN;
  };

  var isLength = function isLength(token) {
    return token.type === TokenType.NUMBER_TOKEN || token.type === TokenType.DIMENSION_TOKEN;
  };

  var isLengthPercentage = function isLengthPercentage(token) {
    return token.type === TokenType.PERCENTAGE_TOKEN || isLength(token);
  };

  var parseLengthPercentageTuple = function parseLengthPercentageTuple(tokens) {
    return tokens.length > 1 ? [tokens[0], tokens[1]] : [tokens[0]];
  };

  var ZERO_LENGTH = {
    type: TokenType.NUMBER_TOKEN,
    number: 0,
    flags: FLAG_INTEGER
  };
  var FIFTY_PERCENT = {
    type: TokenType.PERCENTAGE_TOKEN,
    number: 50,
    flags: FLAG_INTEGER
  };
  var HUNDRED_PERCENT = {
    type: TokenType.PERCENTAGE_TOKEN,
    number: 100,
    flags: FLAG_INTEGER
  };

  var getAbsoluteValueForTuple = function getAbsoluteValueForTuple(tuple, width, height) {
    var x = tuple[0],
        y = tuple[1];
    return [getAbsoluteValue(x, width), getAbsoluteValue(typeof y !== 'undefined' ? y : x, height)];
  };

  var getAbsoluteValue = function getAbsoluteValue(token, parent) {
    if (token.type === TokenType.PERCENTAGE_TOKEN) {
      return token.number / 100 * parent;
    }

    if (isDimensionToken(token)) {
      switch (token.unit) {
        case 'rem':
        case 'em':
          return 16 * token.number;
        // TODO use correct font-size

        case 'px':
        default:
          return token.number;
      }
    }

    return token.number;
  };

  var DEG = 'deg';
  var GRAD = 'grad';
  var RAD = 'rad';
  var TURN = 'turn';
  var angle = {
    name: 'angle',
    parse: function parse(value) {
      if (value.type === TokenType.DIMENSION_TOKEN) {
        switch (value.unit) {
          case DEG:
            return Math.PI * value.number / 180;

          case GRAD:
            return Math.PI / 200 * value.number;

          case RAD:
            return value.number;

          case TURN:
            return Math.PI * 2 * value.number;
        }
      }

      throw new Error("Unsupported angle type");
    }
  };

  var isAngle = function isAngle(value) {
    if (value.type === TokenType.DIMENSION_TOKEN) {
      if (value.unit === DEG || value.unit === GRAD || value.unit === RAD || value.unit === TURN) {
        return true;
      }
    }

    return false;
  };

  var parseNamedSide = function parseNamedSide(tokens) {
    var sideOrCorner = tokens.filter(isIdentToken).map(function (ident) {
      return ident.value;
    }).join(' ');

    switch (sideOrCorner) {
      case 'to bottom right':
      case 'to right bottom':
      case 'left top':
      case 'top left':
        return [ZERO_LENGTH, ZERO_LENGTH];

      case 'to top':
      case 'bottom':
        return deg(0);

      case 'to bottom left':
      case 'to left bottom':
      case 'right top':
      case 'top right':
        return [ZERO_LENGTH, HUNDRED_PERCENT];

      case 'to right':
      case 'left':
        return deg(90);

      case 'to top left':
      case 'to left top':
      case 'right bottom':
      case 'bottom right':
        return [HUNDRED_PERCENT, HUNDRED_PERCENT];

      case 'to bottom':
      case 'top':
        return deg(180);

      case 'to top right':
      case 'to right top':
      case 'left bottom':
      case 'bottom left':
        return [HUNDRED_PERCENT, ZERO_LENGTH];

      case 'to left':
      case 'right':
        return deg(270);
    }

    return 0;
  };

  var deg = function deg(_deg) {
    return Math.PI * _deg / 180;
  };

  var color = {
    name: 'color',
    parse: function parse(value) {
      if (value.type === TokenType.FUNCTION) {
        var colorFunction = SUPPORTED_COLOR_FUNCTIONS[value.name];

        if (typeof colorFunction === 'undefined') {
          throw new Error("Attempting to parse an unsupported color function \"" + value.name + "\"");
        }

        return colorFunction(value.values);
      }

      if (value.type === TokenType.HASH_TOKEN) {
        if (value.value.length === 3) {
          var r = value.value.substring(0, 1);
          var g = value.value.substring(1, 2);
          var b = value.value.substring(2, 3);
          return pack(parseInt(r + r, 16), parseInt(g + g, 16), parseInt(b + b, 16), 1);
        }

        if (value.value.length === 4) {
          var r = value.value.substring(0, 1);
          var g = value.value.substring(1, 2);
          var b = value.value.substring(2, 3);
          var a = value.value.substring(3, 4);
          return pack(parseInt(r + r, 16), parseInt(g + g, 16), parseInt(b + b, 16), parseInt(a + a, 16) / 255);
        }

        if (value.value.length === 6) {
          var r = value.value.substring(0, 2);
          var g = value.value.substring(2, 4);
          var b = value.value.substring(4, 6);
          return pack(parseInt(r, 16), parseInt(g, 16), parseInt(b, 16), 1);
        }

        if (value.value.length === 8) {
          var r = value.value.substring(0, 2);
          var g = value.value.substring(2, 4);
          var b = value.value.substring(4, 6);
          var a = value.value.substring(6, 8);
          return pack(parseInt(r, 16), parseInt(g, 16), parseInt(b, 16), parseInt(a, 16) / 255);
        }
      }

      if (value.type === TokenType.IDENT_TOKEN) {
        var namedColor = COLORS[value.value.toUpperCase()];

        if (typeof namedColor !== 'undefined') {
          return namedColor;
        }
      }

      return COLORS.TRANSPARENT;
    }
  };

  var isTransparent = function isTransparent(color) {
    return (0xff & color) === 0;
  };

  var asString = function asString(color) {
    var alpha = 0xff & color;
    var blue = 0xff & color >> 8;
    var green = 0xff & color >> 16;
    var red = 0xff & color >> 24;
    return alpha < 255 ? "rgba(" + red + "," + green + "," + blue + "," + alpha / 255 + ")" : "rgb(" + red + "," + green + "," + blue + ")";
  };

  var pack = function pack(r, g, b, a) {
    return (r << 24 | g << 16 | b << 8 | Math.round(a * 255) << 0) >>> 0;
  };

  var getTokenColorValue = function getTokenColorValue(token, i) {
    if (token.type === TokenType.NUMBER_TOKEN) {
      return token.number;
    }

    if (token.type === TokenType.PERCENTAGE_TOKEN) {
      var max = i === 3 ? 1 : 255;
      return i === 3 ? token.number / 100 * max : Math.round(token.number / 100 * max);
    }

    return 0;
  };

  var rgb = function rgb(args) {
    var tokens = args.filter(nonFunctionArgSeperator);

    if (tokens.length === 3) {
      var _a = tokens.map(getTokenColorValue),
          r = _a[0],
          g = _a[1],
          b = _a[2];

      return pack(r, g, b, 1);
    }

    if (tokens.length === 4) {
      var _b = tokens.map(getTokenColorValue),
          r = _b[0],
          g = _b[1],
          b = _b[2],
          a = _b[3];

      return pack(r, g, b, a);
    }

    return 0;
  };

  function hue2rgb(t1, t2, hue) {
    if (hue < 0) {
      hue += 1;
    }

    if (hue >= 1) {
      hue -= 1;
    }

    if (hue < 1 / 6) {
      return (t2 - t1) * hue * 6 + t1;
    } else if (hue < 1 / 2) {
      return t2;
    } else if (hue < 2 / 3) {
      return (t2 - t1) * 6 * (2 / 3 - hue) + t1;
    } else {
      return t1;
    }
  }

  var hsl = function hsl(args) {
    var tokens = args.filter(nonFunctionArgSeperator);
    var hue = tokens[0],
        saturation = tokens[1],
        lightness = tokens[2],
        alpha = tokens[3];
    var h = (hue.type === TokenType.NUMBER_TOKEN ? deg(hue.number) : angle.parse(hue)) / (Math.PI * 2);
    var s = isLengthPercentage(saturation) ? saturation.number / 100 : 0;
    var l = isLengthPercentage(lightness) ? lightness.number / 100 : 0;
    var a = typeof alpha !== 'undefined' && isLengthPercentage(alpha) ? getAbsoluteValue(alpha, 1) : 1;

    if (s === 0) {
      return pack(l * 255, l * 255, l * 255, 1);
    }

    var t2 = l <= 0.5 ? l * (s + 1) : l + s - l * s;
    var t1 = l * 2 - t2;
    var r = hue2rgb(t1, t2, h + 1 / 3);
    var g = hue2rgb(t1, t2, h);
    var b = hue2rgb(t1, t2, h - 1 / 3);
    return pack(r * 255, g * 255, b * 255, a);
  };

  var SUPPORTED_COLOR_FUNCTIONS = {
    hsl: hsl,
    hsla: hsl,
    rgb: rgb,
    rgba: rgb
  };
  var COLORS = {
    ALICEBLUE: 0xf0f8ffff,
    ANTIQUEWHITE: 0xfaebd7ff,
    AQUA: 0x00ffffff,
    AQUAMARINE: 0x7fffd4ff,
    AZURE: 0xf0ffffff,
    BEIGE: 0xf5f5dcff,
    BISQUE: 0xffe4c4ff,
    BLACK: 0x000000ff,
    BLANCHEDALMOND: 0xffebcdff,
    BLUE: 0x0000ffff,
    BLUEVIOLET: 0x8a2be2ff,
    BROWN: 0xa52a2aff,
    BURLYWOOD: 0xdeb887ff,
    CADETBLUE: 0x5f9ea0ff,
    CHARTREUSE: 0x7fff00ff,
    CHOCOLATE: 0xd2691eff,
    CORAL: 0xff7f50ff,
    CORNFLOWERBLUE: 0x6495edff,
    CORNSILK: 0xfff8dcff,
    CRIMSON: 0xdc143cff,
    CYAN: 0x00ffffff,
    DARKBLUE: 0x00008bff,
    DARKCYAN: 0x008b8bff,
    DARKGOLDENROD: 0xb886bbff,
    DARKGRAY: 0xa9a9a9ff,
    DARKGREEN: 0x006400ff,
    DARKGREY: 0xa9a9a9ff,
    DARKKHAKI: 0xbdb76bff,
    DARKMAGENTA: 0x8b008bff,
    DARKOLIVEGREEN: 0x556b2fff,
    DARKORANGE: 0xff8c00ff,
    DARKORCHID: 0x9932ccff,
    DARKRED: 0x8b0000ff,
    DARKSALMON: 0xe9967aff,
    DARKSEAGREEN: 0x8fbc8fff,
    DARKSLATEBLUE: 0x483d8bff,
    DARKSLATEGRAY: 0x2f4f4fff,
    DARKSLATEGREY: 0x2f4f4fff,
    DARKTURQUOISE: 0x00ced1ff,
    DARKVIOLET: 0x9400d3ff,
    DEEPPINK: 0xff1493ff,
    DEEPSKYBLUE: 0x00bfffff,
    DIMGRAY: 0x696969ff,
    DIMGREY: 0x696969ff,
    DODGERBLUE: 0x1e90ffff,
    FIREBRICK: 0xb22222ff,
    FLORALWHITE: 0xfffaf0ff,
    FORESTGREEN: 0x228b22ff,
    FUCHSIA: 0xff00ffff,
    GAINSBORO: 0xdcdcdcff,
    GHOSTWHITE: 0xf8f8ffff,
    GOLD: 0xffd700ff,
    GOLDENROD: 0xdaa520ff,
    GRAY: 0x808080ff,
    GREEN: 0x008000ff,
    GREENYELLOW: 0xadff2fff,
    GREY: 0x808080ff,
    HONEYDEW: 0xf0fff0ff,
    HOTPINK: 0xff69b4ff,
    INDIANRED: 0xcd5c5cff,
    INDIGO: 0x4b0082ff,
    IVORY: 0xfffff0ff,
    KHAKI: 0xf0e68cff,
    LAVENDER: 0xe6e6faff,
    LAVENDERBLUSH: 0xfff0f5ff,
    LAWNGREEN: 0x7cfc00ff,
    LEMONCHIFFON: 0xfffacdff,
    LIGHTBLUE: 0xadd8e6ff,
    LIGHTCORAL: 0xf08080ff,
    LIGHTCYAN: 0xe0ffffff,
    LIGHTGOLDENRODYELLOW: 0xfafad2ff,
    LIGHTGRAY: 0xd3d3d3ff,
    LIGHTGREEN: 0x90ee90ff,
    LIGHTGREY: 0xd3d3d3ff,
    LIGHTPINK: 0xffb6c1ff,
    LIGHTSALMON: 0xffa07aff,
    LIGHTSEAGREEN: 0x20b2aaff,
    LIGHTSKYBLUE: 0x87cefaff,
    LIGHTSLATEGRAY: 0x778899ff,
    LIGHTSLATEGREY: 0x778899ff,
    LIGHTSTEELBLUE: 0xb0c4deff,
    LIGHTYELLOW: 0xffffe0ff,
    LIME: 0x00ff00ff,
    LIMEGREEN: 0x32cd32ff,
    LINEN: 0xfaf0e6ff,
    MAGENTA: 0xff00ffff,
    MAROON: 0x800000ff,
    MEDIUMAQUAMARINE: 0x66cdaaff,
    MEDIUMBLUE: 0x0000cdff,
    MEDIUMORCHID: 0xba55d3ff,
    MEDIUMPURPLE: 0x9370dbff,
    MEDIUMSEAGREEN: 0x3cb371ff,
    MEDIUMSLATEBLUE: 0x7b68eeff,
    MEDIUMSPRINGGREEN: 0x00fa9aff,
    MEDIUMTURQUOISE: 0x48d1ccff,
    MEDIUMVIOLETRED: 0xc71585ff,
    MIDNIGHTBLUE: 0x191970ff,
    MINTCREAM: 0xf5fffaff,
    MISTYROSE: 0xffe4e1ff,
    MOCCASIN: 0xffe4b5ff,
    NAVAJOWHITE: 0xffdeadff,
    NAVY: 0x000080ff,
    OLDLACE: 0xfdf5e6ff,
    OLIVE: 0x808000ff,
    OLIVEDRAB: 0x6b8e23ff,
    ORANGE: 0xffa500ff,
    ORANGERED: 0xff4500ff,
    ORCHID: 0xda70d6ff,
    PALEGOLDENROD: 0xeee8aaff,
    PALEGREEN: 0x98fb98ff,
    PALETURQUOISE: 0xafeeeeff,
    PALEVIOLETRED: 0xdb7093ff,
    PAPAYAWHIP: 0xffefd5ff,
    PEACHPUFF: 0xffdab9ff,
    PERU: 0xcd853fff,
    PINK: 0xffc0cbff,
    PLUM: 0xdda0ddff,
    POWDERBLUE: 0xb0e0e6ff,
    PURPLE: 0x800080ff,
    REBECCAPURPLE: 0x663399ff,
    RED: 0xff0000ff,
    ROSYBROWN: 0xbc8f8fff,
    ROYALBLUE: 0x4169e1ff,
    SADDLEBROWN: 0x8b4513ff,
    SALMON: 0xfa8072ff,
    SANDYBROWN: 0xf4a460ff,
    SEAGREEN: 0x2e8b57ff,
    SEASHELL: 0xfff5eeff,
    SIENNA: 0xa0522dff,
    SILVER: 0xc0c0c0ff,
    SKYBLUE: 0x87ceebff,
    SLATEBLUE: 0x6a5acdff,
    SLATEGRAY: 0x708090ff,
    SLATEGREY: 0x708090ff,
    SNOW: 0xfffafaff,
    SPRINGGREEN: 0x00ff7fff,
    STEELBLUE: 0x4682b4ff,
    TAN: 0xd2b48cff,
    TEAL: 0x008080ff,
    THISTLE: 0xd8bfd8ff,
    TOMATO: 0xff6347ff,
    TRANSPARENT: 0x00000000,
    TURQUOISE: 0x40e0d0ff,
    VIOLET: 0xee82eeff,
    WHEAT: 0xf5deb3ff,
    WHITE: 0xffffffff,
    WHITESMOKE: 0xf5f5f5ff,
    YELLOW: 0xffff00ff,
    YELLOWGREEN: 0x9acd32ff
  };
  var PropertyDescriptorParsingType;

  (function (PropertyDescriptorParsingType) {
    PropertyDescriptorParsingType[PropertyDescriptorParsingType["VALUE"] = 0] = "VALUE";
    PropertyDescriptorParsingType[PropertyDescriptorParsingType["LIST"] = 1] = "LIST";
    PropertyDescriptorParsingType[PropertyDescriptorParsingType["IDENT_VALUE"] = 2] = "IDENT_VALUE";
    PropertyDescriptorParsingType[PropertyDescriptorParsingType["TYPE_VALUE"] = 3] = "TYPE_VALUE";
    PropertyDescriptorParsingType[PropertyDescriptorParsingType["TOKEN_VALUE"] = 4] = "TOKEN_VALUE";
  })(PropertyDescriptorParsingType || (PropertyDescriptorParsingType = {}));

  var BACKGROUND_CLIP;

  (function (BACKGROUND_CLIP) {
    BACKGROUND_CLIP[BACKGROUND_CLIP["BORDER_BOX"] = 0] = "BORDER_BOX";
    BACKGROUND_CLIP[BACKGROUND_CLIP["PADDING_BOX"] = 1] = "PADDING_BOX";
    BACKGROUND_CLIP[BACKGROUND_CLIP["CONTENT_BOX"] = 2] = "CONTENT_BOX";
  })(BACKGROUND_CLIP || (BACKGROUND_CLIP = {}));

  var backgroundClip = {
    name: 'background-clip',
    initialValue: 'border-box',
    prefix: false,
    type: PropertyDescriptorParsingType.LIST,
    parse: function parse(tokens) {
      return tokens.map(function (token) {
        if (isIdentToken(token)) {
          switch (token.value) {
            case 'padding-box':
              return BACKGROUND_CLIP.PADDING_BOX;

            case 'content-box':
              return BACKGROUND_CLIP.CONTENT_BOX;
          }
        }

        return BACKGROUND_CLIP.BORDER_BOX;
      });
    }
  };
  var backgroundColor = {
    name: "background-color",
    initialValue: 'transparent',
    prefix: false,
    type: PropertyDescriptorParsingType.TYPE_VALUE,
    format: 'color'
  };

  var parseColorStop = function parseColorStop(args) {
    var color$1 = color.parse(args[0]);
    var stop = args[1];
    return stop && isLengthPercentage(stop) ? {
      color: color$1,
      stop: stop
    } : {
      color: color$1,
      stop: null
    };
  };

  var processColorStops = function processColorStops(stops, lineLength) {
    var first = stops[0];
    var last = stops[stops.length - 1];

    if (first.stop === null) {
      first.stop = ZERO_LENGTH;
    }

    if (last.stop === null) {
      last.stop = HUNDRED_PERCENT;
    }

    var processStops = [];
    var previous = 0;

    for (var i = 0; i < stops.length; i++) {
      var stop_1 = stops[i].stop;

      if (stop_1 !== null) {
        var absoluteValue = getAbsoluteValue(stop_1, lineLength);

        if (absoluteValue > previous) {
          processStops.push(absoluteValue);
        } else {
          processStops.push(previous);
        }

        previous = absoluteValue;
      } else {
        processStops.push(null);
      }
    }

    var gapBegin = null;

    for (var i = 0; i < processStops.length; i++) {
      var stop_2 = processStops[i];

      if (stop_2 === null) {
        if (gapBegin === null) {
          gapBegin = i;
        }
      } else if (gapBegin !== null) {
        var gapLength = i - gapBegin;
        var beforeGap = processStops[gapBegin - 1];
        var gapValue = (stop_2 - beforeGap) / (gapLength + 1);

        for (var g = 1; g <= gapLength; g++) {
          processStops[gapBegin + g - 1] = gapValue * g;
        }

        gapBegin = null;
      }
    }

    return stops.map(function (_a, i) {
      var color = _a.color;
      return {
        color: color,
        stop: Math.max(Math.min(1, processStops[i] / lineLength), 0)
      };
    });
  };

  var getAngleFromCorner = function getAngleFromCorner(corner, width, height) {
    var centerX = width / 2;
    var centerY = height / 2;
    var x = getAbsoluteValue(corner[0], width) - centerX;
    var y = centerY - getAbsoluteValue(corner[1], height);
    return (Math.atan2(y, x) + Math.PI * 2) % (Math.PI * 2);
  };

  var calculateGradientDirection = function calculateGradientDirection(angle, width, height) {
    var radian = typeof angle === 'number' ? angle : getAngleFromCorner(angle, width, height);
    var lineLength = Math.abs(width * Math.sin(radian)) + Math.abs(height * Math.cos(radian));
    var halfWidth = width / 2;
    var halfHeight = height / 2;
    var halfLineLength = lineLength / 2;
    var yDiff = Math.sin(radian - Math.PI / 2) * halfLineLength;
    var xDiff = Math.cos(radian - Math.PI / 2) * halfLineLength;
    return [lineLength, halfWidth - xDiff, halfWidth + xDiff, halfHeight - yDiff, halfHeight + yDiff];
  };

  var distance = function distance(a, b) {
    return Math.sqrt(a * a + b * b);
  };

  var findCorner = function findCorner(width, height, x, y, closest) {
    var corners = [[0, 0], [0, height], [width, 0], [width, height]];
    return corners.reduce(function (stat, corner) {
      var cx = corner[0],
          cy = corner[1];
      var d = distance(x - cx, y - cy);

      if (closest ? d < stat.optimumDistance : d > stat.optimumDistance) {
        return {
          optimumCorner: corner,
          optimumDistance: d
        };
      }

      return stat;
    }, {
      optimumDistance: closest ? Infinity : -Infinity,
      optimumCorner: null
    }).optimumCorner;
  };

  var calculateRadius = function calculateRadius(gradient, x, y, width, height) {
    var rx = 0;
    var ry = 0;

    switch (gradient.size) {
      case CSSRadialExtent.CLOSEST_SIDE:
        // The ending shape is sized so that that it exactly meets the side of the gradient box closest to the gradient’s center.
        // If the shape is an ellipse, it exactly meets the closest side in each dimension.
        if (gradient.shape === CSSRadialShape.CIRCLE) {
          rx = ry = Math.min(Math.abs(x), Math.abs(x - width), Math.abs(y), Math.abs(y - height));
        } else if (gradient.shape === CSSRadialShape.ELLIPSE) {
          rx = Math.min(Math.abs(x), Math.abs(x - width));
          ry = Math.min(Math.abs(y), Math.abs(y - height));
        }

        break;

      case CSSRadialExtent.CLOSEST_CORNER:
        // The ending shape is sized so that that it passes through the corner of the gradient box closest to the gradient’s center.
        // If the shape is an ellipse, the ending shape is given the same aspect-ratio it would have if closest-side were specified.
        if (gradient.shape === CSSRadialShape.CIRCLE) {
          rx = ry = Math.min(distance(x, y), distance(x, y - height), distance(x - width, y), distance(x - width, y - height));
        } else if (gradient.shape === CSSRadialShape.ELLIPSE) {
          // Compute the ratio ry/rx (which is to be the same as for "closest-side")
          var c = Math.min(Math.abs(y), Math.abs(y - height)) / Math.min(Math.abs(x), Math.abs(x - width));

          var _a = findCorner(width, height, x, y, true),
              cx = _a[0],
              cy = _a[1];

          rx = distance(cx - x, (cy - y) / c);
          ry = c * rx;
        }

        break;

      case CSSRadialExtent.FARTHEST_SIDE:
        // Same as closest-side, except the ending shape is sized based on the farthest side(s)
        if (gradient.shape === CSSRadialShape.CIRCLE) {
          rx = ry = Math.max(Math.abs(x), Math.abs(x - width), Math.abs(y), Math.abs(y - height));
        } else if (gradient.shape === CSSRadialShape.ELLIPSE) {
          rx = Math.max(Math.abs(x), Math.abs(x - width));
          ry = Math.max(Math.abs(y), Math.abs(y - height));
        }

        break;

      case CSSRadialExtent.FARTHEST_CORNER:
        // Same as closest-corner, except the ending shape is sized based on the farthest corner.
        // If the shape is an ellipse, the ending shape is given the same aspect ratio it would have if farthest-side were specified.
        if (gradient.shape === CSSRadialShape.CIRCLE) {
          rx = ry = Math.max(distance(x, y), distance(x, y - height), distance(x - width, y), distance(x - width, y - height));
        } else if (gradient.shape === CSSRadialShape.ELLIPSE) {
          // Compute the ratio ry/rx (which is to be the same as for "farthest-side")
          var c = Math.max(Math.abs(y), Math.abs(y - height)) / Math.max(Math.abs(x), Math.abs(x - width));

          var _b = findCorner(width, height, x, y, false),
              cx = _b[0],
              cy = _b[1];

          rx = distance(cx - x, (cy - y) / c);
          ry = c * rx;
        }

        break;
    }

    if (Array.isArray(gradient.size)) {
      rx = getAbsoluteValue(gradient.size[0], width);
      ry = gradient.size.length === 2 ? getAbsoluteValue(gradient.size[1], height) : rx;
    }

    return [rx, ry];
  };

  var linearGradient = function linearGradient(tokens) {
    var angle$1 = deg(180);
    var stops = [];
    parseFunctionArgs(tokens).forEach(function (arg, i) {
      if (i === 0) {
        var firstToken = arg[0];

        if (firstToken.type === TokenType.IDENT_TOKEN && firstToken.value === 'to') {
          angle$1 = parseNamedSide(arg);
          return;
        } else if (isAngle(firstToken)) {
          angle$1 = angle.parse(firstToken);
          return;
        }
      }

      var colorStop = parseColorStop(arg);
      stops.push(colorStop);
    });
    return {
      angle: angle$1,
      stops: stops,
      type: CSSImageType.LINEAR_GRADIENT
    };
  };

  var prefixLinearGradient = function prefixLinearGradient(tokens) {
    var angle$1 = deg(180);
    var stops = [];
    parseFunctionArgs(tokens).forEach(function (arg, i) {
      if (i === 0) {
        var firstToken = arg[0];

        if (firstToken.type === TokenType.IDENT_TOKEN && ['top', 'left', 'right', 'bottom'].indexOf(firstToken.value) !== -1) {
          angle$1 = parseNamedSide(arg);
          return;
        } else if (isAngle(firstToken)) {
          angle$1 = (angle.parse(firstToken) + deg(270)) % deg(360);
          return;
        }
      }

      var colorStop = parseColorStop(arg);
      stops.push(colorStop);
    });
    return {
      angle: angle$1,
      stops: stops,
      type: CSSImageType.LINEAR_GRADIENT
    };
  };

  var testRangeBounds = function testRangeBounds(document) {
    var TEST_HEIGHT = 123;

    if (document.createRange) {
      var range = document.createRange();

      if (range.getBoundingClientRect) {
        var testElement = document.createElement('boundtest');
        testElement.style.height = TEST_HEIGHT + "px";
        testElement.style.display = 'block';
        document.body.appendChild(testElement);
        range.selectNode(testElement);
        var rangeBounds = range.getBoundingClientRect();
        var rangeHeight = Math.round(rangeBounds.height);
        document.body.removeChild(testElement);

        if (rangeHeight === TEST_HEIGHT) {
          return true;
        }
      }
    }

    return false;
  };

  var testCORS = function testCORS() {
    return typeof new Image().crossOrigin !== 'undefined';
  };

  var testResponseType = function testResponseType() {
    return typeof new XMLHttpRequest().responseType === 'string';
  };

  var testSVG = function testSVG(document) {
    var img = new Image();
    var canvas = document.createElement('canvas');
    var ctx = canvas.getContext('2d');

    if (!ctx) {
      return false;
    }

    img.src = "data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";

    try {
      ctx.drawImage(img, 0, 0);
      canvas.toDataURL();
    } catch (e) {
      return false;
    }

    return true;
  };

  var isGreenPixel = function isGreenPixel(data) {
    return data[0] === 0 && data[1] === 255 && data[2] === 0 && data[3] === 255;
  };

  var testForeignObject = function testForeignObject(document) {
    var canvas = document.createElement('canvas');
    var size = 100;
    canvas.width = size;
    canvas.height = size;
    var ctx = canvas.getContext('2d');

    if (!ctx) {
      return Promise.reject(false);
    }

    ctx.fillStyle = 'rgb(0, 255, 0)';
    ctx.fillRect(0, 0, size, size);
    var img = new Image();
    var greenImageSrc = canvas.toDataURL();
    img.src = greenImageSrc;
    var svg = createForeignObjectSVG(size, size, 0, 0, img);
    ctx.fillStyle = 'red';
    ctx.fillRect(0, 0, size, size);
    return loadSerializedSVG(svg).then(function (img) {
      ctx.drawImage(img, 0, 0);
      var data = ctx.getImageData(0, 0, size, size).data;
      ctx.fillStyle = 'red';
      ctx.fillRect(0, 0, size, size);
      var node = document.createElement('div');
      node.style.backgroundImage = "url(" + greenImageSrc + ")";
      node.style.height = size + "px"; // Firefox 55 does not render inline <img /> tags

      return isGreenPixel(data) ? loadSerializedSVG(createForeignObjectSVG(size, size, 0, 0, node)) : Promise.reject(false);
    }).then(function (img) {
      ctx.drawImage(img, 0, 0); // Edge does not render background-images

      return isGreenPixel(ctx.getImageData(0, 0, size, size).data);
    }).catch(function () {
      return false;
    });
  };

  var createForeignObjectSVG = function createForeignObjectSVG(width, height, x, y, node) {
    var xmlns = 'http://www.w3.org/2000/svg';
    var svg = document.createElementNS(xmlns, 'svg');
    var foreignObject = document.createElementNS(xmlns, 'foreignObject');
    svg.setAttributeNS(null, 'width', width.toString());
    svg.setAttributeNS(null, 'height', height.toString());
    foreignObject.setAttributeNS(null, 'width', '100%');
    foreignObject.setAttributeNS(null, 'height', '100%');
    foreignObject.setAttributeNS(null, 'x', x.toString());
    foreignObject.setAttributeNS(null, 'y', y.toString());
    foreignObject.setAttributeNS(null, 'externalResourcesRequired', 'true');
    svg.appendChild(foreignObject);
    foreignObject.appendChild(node);
    return svg;
  };

  var loadSerializedSVG = function loadSerializedSVG(svg) {
    return new Promise(function (resolve, reject) {
      var img = new Image();

      img.onload = function () {
        return resolve(img);
      };

      img.onerror = reject;
      img.src = "data:image/svg+xml;charset=utf-8," + encodeURIComponent(new XMLSerializer().serializeToString(svg));
    });
  };

  var FEATURES = {
    get SUPPORT_RANGE_BOUNDS() {
      var value = testRangeBounds(document);
      Object.defineProperty(FEATURES, 'SUPPORT_RANGE_BOUNDS', {
        value: value
      });
      return value;
    },

    get SUPPORT_SVG_DRAWING() {
      var value = testSVG(document);
      Object.defineProperty(FEATURES, 'SUPPORT_SVG_DRAWING', {
        value: value
      });
      return value;
    },

    get SUPPORT_FOREIGNOBJECT_DRAWING() {
      var value = typeof Array.from === 'function' && typeof window.fetch === 'function' ? testForeignObject(document) : Promise.resolve(false);
      Object.defineProperty(FEATURES, 'SUPPORT_FOREIGNOBJECT_DRAWING', {
        value: value
      });
      return value;
    },

    get SUPPORT_CORS_IMAGES() {
      var value = testCORS();
      Object.defineProperty(FEATURES, 'SUPPORT_CORS_IMAGES', {
        value: value
      });
      return value;
    },

    get SUPPORT_RESPONSE_TYPE() {
      var value = testResponseType();
      Object.defineProperty(FEATURES, 'SUPPORT_RESPONSE_TYPE', {
        value: value
      });
      return value;
    },

    get SUPPORT_CORS_XHR() {
      var value = ('withCredentials' in new XMLHttpRequest());
      Object.defineProperty(FEATURES, 'SUPPORT_CORS_XHR', {
        value: value
      });
      return value;
    }

  };

  var Logger =
  /** @class */
  function () {
    function Logger(id) {
      this.id = id;
      this.start = Date.now();
    } // eslint-disable-next-line @typescript-eslint/no-explicit-any


    Logger.prototype.debug = function () {
      var args = [];

      for (var _i = 0; _i < arguments.length; _i++) {
        args[_i] = arguments[_i];
      } // eslint-disable-next-line no-console


      if (typeof window !== 'undefined' && window.console && typeof console.debug === 'function') {
        // eslint-disable-next-line no-console
        console.debug.apply(console, [this.id, this.getTime() + "ms"].concat(args));
      } else {
        this.info.apply(this, args);
      }
    };

    Logger.prototype.getTime = function () {
      return Date.now() - this.start;
    };

    Logger.create = function (id) {
      Logger.instances[id] = new Logger(id);
    };

    Logger.destroy = function (id) {
      delete Logger.instances[id];
    };

    Logger.getInstance = function (id) {
      var instance = Logger.instances[id];

      if (typeof instance === 'undefined') {
        throw new Error("No logger instance found with id " + id);
      }

      return instance;
    }; // eslint-disable-next-line @typescript-eslint/no-explicit-any


    Logger.prototype.info = function () {
      var args = [];

      for (var _i = 0; _i < arguments.length; _i++) {
        args[_i] = arguments[_i];
      } // eslint-disable-next-line no-console


      if (typeof window !== 'undefined' && window.console && typeof console.info === 'function') {
        // eslint-disable-next-line no-console
        console.info.apply(console, [this.id, this.getTime() + "ms"].concat(args));
      }
    }; // eslint-disable-next-line @typescript-eslint/no-explicit-any


    Logger.prototype.error = function () {
      var args = [];

      for (var _i = 0; _i < arguments.length; _i++) {
        args[_i] = arguments[_i];
      } // eslint-disable-next-line no-console


      if (typeof window !== 'undefined' && window.console && typeof console.error === 'function') {
        // eslint-disable-next-line no-console
        console.error.apply(console, [this.id, this.getTime() + "ms"].concat(args));
      } else {
        this.info.apply(this, args);
      }
    };

    Logger.instances = {};
    return Logger;
  }();

  var CacheStorage =
  /** @class */
  function () {
    function CacheStorage() {}

    CacheStorage.create = function (name, options) {
      return CacheStorage._caches[name] = new Cache(name, options);
    };

    CacheStorage.destroy = function (name) {
      delete CacheStorage._caches[name];
    };

    CacheStorage.open = function (name) {
      var cache = CacheStorage._caches[name];

      if (typeof cache !== 'undefined') {
        return cache;
      }

      throw new Error("Cache with key \"" + name + "\" not found");
    };

    CacheStorage.getOrigin = function (url) {
      var link = CacheStorage._link;

      if (!link) {
        return 'about:blank';
      }

      link.href = url;
      link.href = link.href; // IE9, LOL! - http://jsfiddle.net/niklasvh/2e48b/

      return link.protocol + link.hostname + link.port;
    };

    CacheStorage.isSameOrigin = function (src) {
      return CacheStorage.getOrigin(src) === CacheStorage._origin;
    };

    CacheStorage.setContext = function (window) {
      CacheStorage._link = window.document.createElement('a');
      CacheStorage._origin = CacheStorage.getOrigin(window.location.href);
    };

    CacheStorage.getInstance = function () {
      var current = CacheStorage._current;

      if (current === null) {
        throw new Error("No cache instance attached");
      }

      return current;
    };

    CacheStorage.attachInstance = function (cache) {
      CacheStorage._current = cache;
    };

    CacheStorage.detachInstance = function () {
      CacheStorage._current = null;
    };

    CacheStorage._caches = {};
    CacheStorage._origin = 'about:blank';
    CacheStorage._current = null;
    return CacheStorage;
  }();

  var Cache =
  /** @class */
  function () {
    function Cache(id, options) {
      this.id = id;
      this._options = options;
      this._cache = {};
    }

    Cache.prototype.addImage = function (src) {
      var result = Promise.resolve();

      if (this.has(src)) {
        return result;
      }

      if (isBlobImage(src) || isRenderable(src)) {
        this._cache[src] = this.loadImage(src);
        return result;
      }

      return result;
    }; // eslint-disable-next-line @typescript-eslint/no-explicit-any


    Cache.prototype.match = function (src) {
      return this._cache[src];
    };

    Cache.prototype.loadImage = function (key) {
      return __awaiter(this, void 0, void 0, function () {
        var isSameOrigin, useCORS, useProxy, src;

        var _this = this;

        return __generator(this, function (_a) {
          switch (_a.label) {
            case 0:
              isSameOrigin = CacheStorage.isSameOrigin(key);
              useCORS = !isInlineImage(key) && this._options.useCORS === true && FEATURES.SUPPORT_CORS_IMAGES && !isSameOrigin;
              useProxy = !isInlineImage(key) && !isSameOrigin && typeof this._options.proxy === 'string' && FEATURES.SUPPORT_CORS_XHR && !useCORS;

              if (!isSameOrigin && this._options.allowTaint === false && !isInlineImage(key) && !useProxy && !useCORS) {
                return [2
                /*return*/
                ];
              }

              src = key;
              if (!useProxy) return [3
              /*break*/
              , 2];
              return [4
              /*yield*/
              , this.proxy(src)];

            case 1:
              src = _a.sent();
              _a.label = 2;

            case 2:
              Logger.getInstance(this.id).debug("Added image " + key.substring(0, 256));
              return [4
              /*yield*/
              , new Promise(function (resolve, reject) {
                var img = new Image();

                img.onload = function () {
                  return resolve(img);
                };

                img.onerror = reject; //ios safari 10.3 taints canvas with data urls unless crossOrigin is set to anonymous

                if (isInlineBase64Image(src) || useCORS) {
                  img.crossOrigin = 'anonymous';
                }

                img.src = src;

                if (img.complete === true) {
                  // Inline XML images may fail to parse, throwing an Error later on
                  setTimeout(function () {
                    return resolve(img);
                  }, 500);
                }

                if (_this._options.imageTimeout > 0) {
                  setTimeout(function () {
                    return reject("Timed out (" + _this._options.imageTimeout + "ms) loading image");
                  }, _this._options.imageTimeout);
                }
              })];

            case 3:
              return [2
              /*return*/
              , _a.sent()];
          }
        });
      });
    };

    Cache.prototype.has = function (key) {
      return typeof this._cache[key] !== 'undefined';
    };

    Cache.prototype.keys = function () {
      return Promise.resolve(Object.keys(this._cache));
    };

    Cache.prototype.proxy = function (src) {
      var _this = this;

      var proxy = this._options.proxy;

      if (!proxy) {
        throw new Error('No proxy defined');
      }

      var key = src.substring(0, 256);
      return new Promise(function (resolve, reject) {
        var responseType = FEATURES.SUPPORT_RESPONSE_TYPE ? 'blob' : 'text';
        var xhr = new XMLHttpRequest();

        xhr.onload = function () {
          if (xhr.status === 200) {
            if (responseType === 'text') {
              resolve(xhr.response);
            } else {
              var reader_1 = new FileReader();
              reader_1.addEventListener('load', function () {
                return resolve(reader_1.result);
              }, false);
              reader_1.addEventListener('error', function (e) {
                return reject(e);
              }, false);
              reader_1.readAsDataURL(xhr.response);
            }
          } else {
            reject("Failed to proxy resource " + key + " with status code " + xhr.status);
          }
        };

        xhr.onerror = reject;
        xhr.open('GET', proxy + "?url=" + encodeURIComponent(src) + "&responseType=" + responseType);

        if (responseType !== 'text' && xhr instanceof XMLHttpRequest) {
          xhr.responseType = responseType;
        }

        if (_this._options.imageTimeout) {
          var timeout_1 = _this._options.imageTimeout;
          xhr.timeout = timeout_1;

          xhr.ontimeout = function () {
            return reject("Timed out (" + timeout_1 + "ms) proxying " + key);
          };
        }

        xhr.send();
      });
    };

    return Cache;
  }();

  var INLINE_SVG = /^data:image\/svg\+xml/i;
  var INLINE_BASE64 = /^data:image\/.*;base64,/i;
  var INLINE_IMG = /^data:image\/.*/i;

  var isRenderable = function isRenderable(src) {
    return FEATURES.SUPPORT_SVG_DRAWING || !isSVG(src);
  };

  var isInlineImage = function isInlineImage(src) {
    return INLINE_IMG.test(src);
  };

  var isInlineBase64Image = function isInlineBase64Image(src) {
    return INLINE_BASE64.test(src);
  };

  var isBlobImage = function isBlobImage(src) {
    return src.substr(0, 4) === 'blob';
  };

  var isSVG = function isSVG(src) {
    return src.substr(-3).toLowerCase() === 'svg' || INLINE_SVG.test(src);
  };

  var webkitGradient = function webkitGradient(tokens) {
    var angle = deg(180);
    var stops = [];
    var type = CSSImageType.LINEAR_GRADIENT;
    var shape = CSSRadialShape.CIRCLE;
    var size = CSSRadialExtent.FARTHEST_CORNER;
    var position = [];
    parseFunctionArgs(tokens).forEach(function (arg, i) {
      var firstToken = arg[0];

      if (i === 0) {
        if (isIdentToken(firstToken) && firstToken.value === 'linear') {
          type = CSSImageType.LINEAR_GRADIENT;
          return;
        } else if (isIdentToken(firstToken) && firstToken.value === 'radial') {
          type = CSSImageType.RADIAL_GRADIENT;
          return;
        }
      }

      if (firstToken.type === TokenType.FUNCTION) {
        if (firstToken.name === 'from') {
          var color$1 = color.parse(firstToken.values[0]);
          stops.push({
            stop: ZERO_LENGTH,
            color: color$1
          });
        } else if (firstToken.name === 'to') {
          var color$1 = color.parse(firstToken.values[0]);
          stops.push({
            stop: HUNDRED_PERCENT,
            color: color$1
          });
        } else if (firstToken.name === 'color-stop') {
          var values = firstToken.values.filter(nonFunctionArgSeperator);

          if (values.length === 2) {
            var color$1 = color.parse(values[1]);
            var stop_1 = values[0];

            if (isNumberToken(stop_1)) {
              stops.push({
                stop: {
                  type: TokenType.PERCENTAGE_TOKEN,
                  number: stop_1.number * 100,
                  flags: stop_1.flags
                },
                color: color$1
              });
            }
          }
        }
      }
    });
    return type === CSSImageType.LINEAR_GRADIENT ? {
      angle: (angle + deg(180)) % deg(360),
      stops: stops,
      type: type
    } : {
      size: size,
      shape: shape,
      stops: stops,
      position: position,
      type: type
    };
  };

  var CLOSEST_SIDE = 'closest-side';
  var FARTHEST_SIDE = 'farthest-side';
  var CLOSEST_CORNER = 'closest-corner';
  var FARTHEST_CORNER = 'farthest-corner';
  var CIRCLE = 'circle';
  var ELLIPSE = 'ellipse';
  var COVER = 'cover';
  var CONTAIN = 'contain';

  var radialGradient = function radialGradient(tokens) {
    var shape = CSSRadialShape.CIRCLE;
    var size = CSSRadialExtent.FARTHEST_CORNER;
    var stops = [];
    var position = [];
    parseFunctionArgs(tokens).forEach(function (arg, i) {
      var isColorStop = true;

      if (i === 0) {
        var isAtPosition_1 = false;
        isColorStop = arg.reduce(function (acc, token) {
          if (isAtPosition_1) {
            if (isIdentToken(token)) {
              switch (token.value) {
                case 'center':
                  position.push(FIFTY_PERCENT);
                  return acc;

                case 'top':
                case 'left':
                  position.push(ZERO_LENGTH);
                  return acc;

                case 'right':
                case 'bottom':
                  position.push(HUNDRED_PERCENT);
                  return acc;
              }
            } else if (isLengthPercentage(token) || isLength(token)) {
              position.push(token);
            }
          } else if (isIdentToken(token)) {
            switch (token.value) {
              case CIRCLE:
                shape = CSSRadialShape.CIRCLE;
                return false;

              case ELLIPSE:
                shape = CSSRadialShape.ELLIPSE;
                return false;

              case 'at':
                isAtPosition_1 = true;
                return false;

              case CLOSEST_SIDE:
                size = CSSRadialExtent.CLOSEST_SIDE;
                return false;

              case COVER:
              case FARTHEST_SIDE:
                size = CSSRadialExtent.FARTHEST_SIDE;
                return false;

              case CONTAIN:
              case CLOSEST_CORNER:
                size = CSSRadialExtent.CLOSEST_CORNER;
                return false;

              case FARTHEST_CORNER:
                size = CSSRadialExtent.FARTHEST_CORNER;
                return false;
            }
          } else if (isLength(token) || isLengthPercentage(token)) {
            if (!Array.isArray(size)) {
              size = [];
            }

            size.push(token);
            return false;
          }

          return acc;
        }, isColorStop);
      }

      if (isColorStop) {
        var colorStop = parseColorStop(arg);
        stops.push(colorStop);
      }
    });
    return {
      size: size,
      shape: shape,
      stops: stops,
      position: position,
      type: CSSImageType.RADIAL_GRADIENT
    };
  };

  var prefixRadialGradient = function prefixRadialGradient(tokens) {
    var shape = CSSRadialShape.CIRCLE;
    var size = CSSRadialExtent.FARTHEST_CORNER;
    var stops = [];
    var position = [];
    parseFunctionArgs(tokens).forEach(function (arg, i) {
      var isColorStop = true;

      if (i === 0) {
        isColorStop = arg.reduce(function (acc, token) {
          if (isIdentToken(token)) {
            switch (token.value) {
              case 'center':
                position.push(FIFTY_PERCENT);
                return false;

              case 'top':
              case 'left':
                position.push(ZERO_LENGTH);
                return false;

              case 'right':
              case 'bottom':
                position.push(HUNDRED_PERCENT);
                return false;
            }
          } else if (isLengthPercentage(token) || isLength(token)) {
            position.push(token);
            return false;
          }

          return acc;
        }, isColorStop);
      } else if (i === 1) {
        isColorStop = arg.reduce(function (acc, token) {
          if (isIdentToken(token)) {
            switch (token.value) {
              case CIRCLE:
                shape = CSSRadialShape.CIRCLE;
                return false;

              case ELLIPSE:
                shape = CSSRadialShape.ELLIPSE;
                return false;

              case CONTAIN:
              case CLOSEST_SIDE:
                size = CSSRadialExtent.CLOSEST_SIDE;
                return false;

              case FARTHEST_SIDE:
                size = CSSRadialExtent.FARTHEST_SIDE;
                return false;

              case CLOSEST_CORNER:
                size = CSSRadialExtent.CLOSEST_CORNER;
                return false;

              case COVER:
              case FARTHEST_CORNER:
                size = CSSRadialExtent.FARTHEST_CORNER;
                return false;
            }
          } else if (isLength(token) || isLengthPercentage(token)) {
            if (!Array.isArray(size)) {
              size = [];
            }

            size.push(token);
            return false;
          }

          return acc;
        }, isColorStop);
      }

      if (isColorStop) {
        var colorStop = parseColorStop(arg);
        stops.push(colorStop);
      }
    });
    return {
      size: size,
      shape: shape,
      stops: stops,
      position: position,
      type: CSSImageType.RADIAL_GRADIENT
    };
  };

  var CSSImageType;

  (function (CSSImageType) {
    CSSImageType[CSSImageType["URL"] = 0] = "URL";
    CSSImageType[CSSImageType["LINEAR_GRADIENT"] = 1] = "LINEAR_GRADIENT";
    CSSImageType[CSSImageType["RADIAL_GRADIENT"] = 2] = "RADIAL_GRADIENT";
  })(CSSImageType || (CSSImageType = {}));

  var isLinearGradient = function isLinearGradient(background) {
    return background.type === CSSImageType.LINEAR_GRADIENT;
  };

  var isRadialGradient = function isRadialGradient(background) {
    return background.type === CSSImageType.RADIAL_GRADIENT;
  };

  var CSSRadialShape;

  (function (CSSRadialShape) {
    CSSRadialShape[CSSRadialShape["CIRCLE"] = 0] = "CIRCLE";
    CSSRadialShape[CSSRadialShape["ELLIPSE"] = 1] = "ELLIPSE";
  })(CSSRadialShape || (CSSRadialShape = {}));

  var CSSRadialExtent;

  (function (CSSRadialExtent) {
    CSSRadialExtent[CSSRadialExtent["CLOSEST_SIDE"] = 0] = "CLOSEST_SIDE";
    CSSRadialExtent[CSSRadialExtent["FARTHEST_SIDE"] = 1] = "FARTHEST_SIDE";
    CSSRadialExtent[CSSRadialExtent["CLOSEST_CORNER"] = 2] = "CLOSEST_CORNER";
    CSSRadialExtent[CSSRadialExtent["FARTHEST_CORNER"] = 3] = "FARTHEST_CORNER";
  })(CSSRadialExtent || (CSSRadialExtent = {}));

  var image = {
    name: 'image',
    parse: function parse(value) {
      if (value.type === TokenType.URL_TOKEN) {
        var image_1 = {
          url: value.value,
          type: CSSImageType.URL
        };
        CacheStorage.getInstance().addImage(value.value);
        return image_1;
      }

      if (value.type === TokenType.FUNCTION) {
        var imageFunction = SUPPORTED_IMAGE_FUNCTIONS[value.name];

        if (typeof imageFunction === 'undefined') {
          throw new Error("Attempting to parse an unsupported image function \"" + value.name + "\"");
        }

        return imageFunction(value.values);
      }

      throw new Error("Unsupported image type");
    }
  };
  var SUPPORTED_IMAGE_FUNCTIONS = {
    'linear-gradient': linearGradient,
    '-moz-linear-gradient': prefixLinearGradient,
    '-ms-linear-gradient': prefixLinearGradient,
    '-o-linear-gradient': prefixLinearGradient,
    '-webkit-linear-gradient': prefixLinearGradient,
    'radial-gradient': radialGradient,
    '-moz-radial-gradient': prefixRadialGradient,
    '-ms-radial-gradient': prefixRadialGradient,
    '-o-radial-gradient': prefixRadialGradient,
    '-webkit-radial-gradient': prefixRadialGradient,
    '-webkit-gradient': webkitGradient
  };
  var backgroundImage = {
    name: 'background-image',
    initialValue: 'none',
    type: PropertyDescriptorParsingType.LIST,
    prefix: false,
    parse: function parse(tokens) {
      if (tokens.length === 0) {
        return [];
      }

      var first = tokens[0];

      if (first.type === TokenType.IDENT_TOKEN && first.value === 'none') {
        return [];
      }

      return tokens.filter(nonFunctionArgSeperator).map(image.parse);
    }
  };
  var backgroundOrigin = {
    name: 'background-origin',
    initialValue: 'border-box',
    prefix: false,
    type: PropertyDescriptorParsingType.LIST,
    parse: function parse(tokens) {
      return tokens.map(function (token) {
        if (isIdentToken(token)) {
          switch (token.value) {
            case 'padding-box':
              return 1
              /* PADDING_BOX */
              ;

            case 'content-box':
              return 2
              /* CONTENT_BOX */
              ;
          }
        }

        return 0
        /* BORDER_BOX */
        ;
      });
    }
  };
  var backgroundPosition = {
    name: 'background-position',
    initialValue: '0% 0%',
    type: PropertyDescriptorParsingType.LIST,
    prefix: false,
    parse: function parse(tokens) {
      return parseFunctionArgs(tokens).map(function (values) {
        return values.filter(isLengthPercentage);
      }).map(parseLengthPercentageTuple);
    }
  };
  var BACKGROUND_REPEAT;

  (function (BACKGROUND_REPEAT) {
    BACKGROUND_REPEAT[BACKGROUND_REPEAT["REPEAT"] = 0] = "REPEAT";
    BACKGROUND_REPEAT[BACKGROUND_REPEAT["NO_REPEAT"] = 1] = "NO_REPEAT";
    BACKGROUND_REPEAT[BACKGROUND_REPEAT["REPEAT_X"] = 2] = "REPEAT_X";
    BACKGROUND_REPEAT[BACKGROUND_REPEAT["REPEAT_Y"] = 3] = "REPEAT_Y";
  })(BACKGROUND_REPEAT || (BACKGROUND_REPEAT = {}));

  var backgroundRepeat = {
    name: 'background-repeat',
    initialValue: 'repeat',
    prefix: false,
    type: PropertyDescriptorParsingType.LIST,
    parse: function parse(tokens) {
      return parseFunctionArgs(tokens).map(function (values) {
        return values.filter(isIdentToken).map(function (token) {
          return token.value;
        }).join(' ');
      }).map(parseBackgroundRepeat);
    }
  };

  var parseBackgroundRepeat = function parseBackgroundRepeat(value) {
    switch (value) {
      case 'no-repeat':
        return BACKGROUND_REPEAT.NO_REPEAT;

      case 'repeat-x':
      case 'repeat no-repeat':
        return BACKGROUND_REPEAT.REPEAT_X;

      case 'repeat-y':
      case 'no-repeat repeat':
        return BACKGROUND_REPEAT.REPEAT_Y;

      case 'repeat':
      default:
        return BACKGROUND_REPEAT.REPEAT;
    }
  };

  var BACKGROUND_SIZE;

  (function (BACKGROUND_SIZE) {
    BACKGROUND_SIZE["AUTO"] = "auto";
    BACKGROUND_SIZE["CONTAIN"] = "contain";
    BACKGROUND_SIZE["COVER"] = "cover";
  })(BACKGROUND_SIZE || (BACKGROUND_SIZE = {}));

  var backgroundSize = {
    name: 'background-size',
    initialValue: '0',
    prefix: false,
    type: PropertyDescriptorParsingType.LIST,
    parse: function parse(tokens) {
      return parseFunctionArgs(tokens).map(function (values) {
        return values.filter(isBackgroundSizeInfoToken);
      });
    }
  };

  var isBackgroundSizeInfoToken = function isBackgroundSizeInfoToken(value) {
    return isIdentToken(value) || isLengthPercentage(value);
  };

  var borderColorForSide = function borderColorForSide(side) {
    return {
      name: "border-" + side + "-color",
      initialValue: 'transparent',
      prefix: false,
      type: PropertyDescriptorParsingType.TYPE_VALUE,
      format: 'color'
    };
  };

  var borderTopColor = borderColorForSide('top');
  var borderRightColor = borderColorForSide('right');
  var borderBottomColor = borderColorForSide('bottom');
  var borderLeftColor = borderColorForSide('left');

  var borderRadiusForSide = function borderRadiusForSide(side) {
    return {
      name: "border-radius-" + side,
      initialValue: '0 0',
      prefix: false,
      type: PropertyDescriptorParsingType.LIST,
      parse: function parse(tokens) {
        return parseLengthPercentageTuple(tokens.filter(isLengthPercentage));
      }
    };
  };

  var borderTopLeftRadius = borderRadiusForSide('top-left');
  var borderTopRightRadius = borderRadiusForSide('top-right');
  var borderBottomRightRadius = borderRadiusForSide('bottom-right');
  var borderBottomLeftRadius = borderRadiusForSide('bottom-left');
  var BORDER_STYLE;

  (function (BORDER_STYLE) {
    BORDER_STYLE[BORDER_STYLE["NONE"] = 0] = "NONE";
    BORDER_STYLE[BORDER_STYLE["SOLID"] = 1] = "SOLID";
  })(BORDER_STYLE || (BORDER_STYLE = {}));

  var borderStyleForSide = function borderStyleForSide(side) {
    return {
      name: "border-" + side + "-style",
      initialValue: 'solid',
      prefix: false,
      type: PropertyDescriptorParsingType.IDENT_VALUE,
      parse: function parse(style) {
        switch (style) {
          case 'none':
            return BORDER_STYLE.NONE;
        }

        return BORDER_STYLE.SOLID;
      }
    };
  };

  var borderTopStyle = borderStyleForSide('top');
  var borderRightStyle = borderStyleForSide('right');
  var borderBottomStyle = borderStyleForSide('bottom');
  var borderLeftStyle = borderStyleForSide('left');

  var borderWidthForSide = function borderWidthForSide(side) {
    return {
      name: "border-" + side + "-width",
      initialValue: '0',
      type: PropertyDescriptorParsingType.VALUE,
      prefix: false,
      parse: function parse(token) {
        if (isDimensionToken(token)) {
          return token.number;
        }

        return 0;
      }
    };
  };

  var borderTopWidth = borderWidthForSide('top');
  var borderRightWidth = borderWidthForSide('right');
  var borderBottomWidth = borderWidthForSide('bottom');
  var borderLeftWidth = borderWidthForSide('left');
  var color$1 = {
    name: "color",
    initialValue: 'transparent',
    prefix: false,
    type: PropertyDescriptorParsingType.TYPE_VALUE,
    format: 'color'
  };
  var display = {
    name: 'display',
    initialValue: 'inline-block',
    prefix: false,
    type: PropertyDescriptorParsingType.LIST,
    parse: function parse(tokens) {
      return tokens.filter(isIdentToken).reduce(function (bit, token) {
        return bit | parseDisplayValue(token.value);
      }, 0
      /* NONE */
      );
    }
  };

  var parseDisplayValue = function parseDisplayValue(display) {
    switch (display) {
      case 'block':
        return 2
        /* BLOCK */
        ;

      case 'inline':
        return 4
        /* INLINE */
        ;

      case 'run-in':
        return 8
        /* RUN_IN */
        ;

      case 'flow':
        return 16
        /* FLOW */
        ;

      case 'flow-root':
        return 32
        /* FLOW_ROOT */
        ;

      case 'table':
        return 64
        /* TABLE */
        ;

      case 'flex':
      case '-webkit-flex':
        return 128
        /* FLEX */
        ;

      case 'grid':
        return 256
        /* GRID */
        ;

      case 'ruby':
        return 512
        /* RUBY */
        ;

      case 'subgrid':
        return 1024
        /* SUBGRID */
        ;

      case 'list-item':
        return 2048
        /* LIST_ITEM */
        ;

      case 'table-row-group':
        return 4096
        /* TABLE_ROW_GROUP */
        ;

      case 'table-header-group':
        return 8192
        /* TABLE_HEADER_GROUP */
        ;

      case 'table-footer-group':
        return 16384
        /* TABLE_FOOTER_GROUP */
        ;

      case 'table-row':
        return 32768
        /* TABLE_ROW */
        ;

      case 'table-cell':
        return 65536
        /* TABLE_CELL */
        ;

      case 'table-column-group':
        return 131072
        /* TABLE_COLUMN_GROUP */
        ;

      case 'table-column':
        return 262144
        /* TABLE_COLUMN */
        ;

      case 'table-caption':
        return 524288
        /* TABLE_CAPTION */
        ;

      case 'ruby-base':
        return 1048576
        /* RUBY_BASE */
        ;

      case 'ruby-text':
        return 2097152
        /* RUBY_TEXT */
        ;

      case 'ruby-base-container':
        return 4194304
        /* RUBY_BASE_CONTAINER */
        ;

      case 'ruby-text-container':
        return 8388608
        /* RUBY_TEXT_CONTAINER */
        ;

      case 'contents':
        return 16777216
        /* CONTENTS */
        ;

      case 'inline-block':
        return 33554432
        /* INLINE_BLOCK */
        ;

      case 'inline-list-item':
        return 67108864
        /* INLINE_LIST_ITEM */
        ;

      case 'inline-table':
        return 134217728
        /* INLINE_TABLE */
        ;

      case 'inline-flex':
        return 268435456
        /* INLINE_FLEX */
        ;

      case 'inline-grid':
        return 536870912
        /* INLINE_GRID */
        ;
    }

    return 0
    /* NONE */
    ;
  };

  var FLOAT;

  (function (FLOAT) {
    FLOAT[FLOAT["NONE"] = 0] = "NONE";
    FLOAT[FLOAT["LEFT"] = 1] = "LEFT";
    FLOAT[FLOAT["RIGHT"] = 2] = "RIGHT";
    FLOAT[FLOAT["INLINE_START"] = 3] = "INLINE_START";
    FLOAT[FLOAT["INLINE_END"] = 4] = "INLINE_END";
  })(FLOAT || (FLOAT = {}));

  var float = {
    name: 'float',
    initialValue: 'none',
    prefix: false,
    type: PropertyDescriptorParsingType.IDENT_VALUE,
    parse: function parse(float) {
      switch (float) {
        case 'left':
          return FLOAT.LEFT;

        case 'right':
          return FLOAT.RIGHT;

        case 'inline-start':
          return FLOAT.INLINE_START;

        case 'inline-end':
          return FLOAT.INLINE_END;
      }

      return FLOAT.NONE;
    }
  };
  var letterSpacing = {
    name: 'letter-spacing',
    initialValue: '0',
    prefix: false,
    type: PropertyDescriptorParsingType.VALUE,
    parse: function parse(token) {
      if (token.type === TokenType.IDENT_TOKEN && token.value === 'normal') {
        return 0;
      }

      if (token.type === TokenType.NUMBER_TOKEN) {
        return token.number;
      }

      if (token.type === TokenType.DIMENSION_TOKEN) {
        return token.number;
      }

      return 0;
    }
  };
  var LINE_BREAK;

  (function (LINE_BREAK) {
    LINE_BREAK["NORMAL"] = "normal";
    LINE_BREAK["STRICT"] = "strict";
  })(LINE_BREAK || (LINE_BREAK = {}));

  var lineBreak = {
    name: 'line-break',
    initialValue: 'normal',
    prefix: false,
    type: PropertyDescriptorParsingType.IDENT_VALUE,
    parse: function parse(lineBreak) {
      switch (lineBreak) {
        case 'strict':
          return LINE_BREAK.STRICT;

        case 'normal':
        default:
          return LINE_BREAK.NORMAL;
      }
    }
  };
  var lineHeight = {
    name: 'line-height',
    initialValue: 'normal',
    prefix: false,
    type: PropertyDescriptorParsingType.TOKEN_VALUE
  };

  var computeLineHeight = function computeLineHeight(token, fontSize) {
    if (isIdentToken(token) && token.value === 'normal') {
      return 1.2 * fontSize;
    } else if (token.type === TokenType.NUMBER_TOKEN) {
      return fontSize * token.number;
    } else if (isLengthPercentage(token)) {
      return getAbsoluteValue(token, fontSize);
    }

    return fontSize;
  };

  var listStyleImage = {
    name: 'list-style-image',
    initialValue: 'none',
    type: PropertyDescriptorParsingType.VALUE,
    prefix: false,
    parse: function parse(token) {
      if (token.type === TokenType.IDENT_TOKEN && token.value === 'none') {
        return null;
      }

      return image.parse(token);
    }
  };
  var LIST_STYLE_POSITION;

  (function (LIST_STYLE_POSITION) {
    LIST_STYLE_POSITION[LIST_STYLE_POSITION["INSIDE"] = 0] = "INSIDE";
    LIST_STYLE_POSITION[LIST_STYLE_POSITION["OUTSIDE"] = 1] = "OUTSIDE";
  })(LIST_STYLE_POSITION || (LIST_STYLE_POSITION = {}));

  var listStylePosition = {
    name: 'list-style-position',
    initialValue: 'outside',
    prefix: false,
    type: PropertyDescriptorParsingType.IDENT_VALUE,
    parse: function parse(position) {
      switch (position) {
        case 'inside':
          return LIST_STYLE_POSITION.INSIDE;

        case 'outside':
        default:
          return LIST_STYLE_POSITION.OUTSIDE;
      }
    }
  };
  var LIST_STYLE_TYPE;

  (function (LIST_STYLE_TYPE) {
    LIST_STYLE_TYPE[LIST_STYLE_TYPE["NONE"] = -1] = "NONE";
    LIST_STYLE_TYPE[LIST_STYLE_TYPE["DISC"] = 0] = "DISC";
    LIST_STYLE_TYPE[LIST_STYLE_TYPE["CIRCLE"] = 1] = "CIRCLE";
    LIST_STYLE_TYPE[LIST_STYLE_TYPE["SQUARE"] = 2] = "SQUARE";
    LIST_STYLE_TYPE[LIST_STYLE_TYPE["DECIMAL"] = 3] = "DECIMAL";
    LIST_STYLE_TYPE[LIST_STYLE_TYPE["CJK_DECIMAL"] = 4] = "CJK_DECIMAL";
    LIST_STYLE_TYPE[LIST_STYLE_TYPE["DECIMAL_LEADING_ZERO"] = 5] = "DECIMAL_LEADING_ZERO";
    LIST_STYLE_TYPE[LIST_STYLE_TYPE["LOWER_ROMAN"] = 6] = "LOWER_ROMAN";
    LIST_STYLE_TYPE[LIST_STYLE_TYPE["UPPER_ROMAN"] = 7] = "UPPER_ROMAN";
    LIST_STYLE_TYPE[LIST_STYLE_TYPE["LOWER_GREEK"] = 8] = "LOWER_GREEK";
    LIST_STYLE_TYPE[LIST_STYLE_TYPE["LOWER_ALPHA"] = 9] = "LOWER_ALPHA";
    LIST_STYLE_TYPE[LIST_STYLE_TYPE["UPPER_ALPHA"] = 10] = "UPPER_ALPHA";
    LIST_STYLE_TYPE[LIST_STYLE_TYPE["ARABIC_INDIC"] = 11] = "ARABIC_INDIC";
    LIST_STYLE_TYPE[LIST_STYLE_TYPE["ARMENIAN"] = 12] = "ARMENIAN";
    LIST_STYLE_TYPE[LIST_STYLE_TYPE["BENGALI"] = 13] = "BENGALI";
    LIST_STYLE_TYPE[LIST_STYLE_TYPE["CAMBODIAN"] = 14] = "CAMBODIAN";
    LIST_STYLE_TYPE[LIST_STYLE_TYPE["CJK_EARTHLY_BRANCH"] = 15] = "CJK_EARTHLY_BRANCH";
    LIST_STYLE_TYPE[LIST_STYLE_TYPE["CJK_HEAVENLY_STEM"] = 16] = "CJK_HEAVENLY_STEM";
    LIST_STYLE_TYPE[LIST_STYLE_TYPE["CJK_IDEOGRAPHIC"] = 17] = "CJK_IDEOGRAPHIC";
    LIST_STYLE_TYPE[LIST_STYLE_TYPE["DEVANAGARI"] = 18] = "DEVANAGARI";
    LIST_STYLE_TYPE[LIST_STYLE_TYPE["ETHIOPIC_NUMERIC"] = 19] = "ETHIOPIC_NUMERIC";
    LIST_STYLE_TYPE[LIST_STYLE_TYPE["GEORGIAN"] = 20] = "GEORGIAN";
    LIST_STYLE_TYPE[LIST_STYLE_TYPE["GUJARATI"] = 21] = "GUJARATI";
    LIST_STYLE_TYPE[LIST_STYLE_TYPE["GURMUKHI"] = 22] = "GURMUKHI";
    LIST_STYLE_TYPE[LIST_STYLE_TYPE["HEBREW"] = 22] = "HEBREW";
    LIST_STYLE_TYPE[LIST_STYLE_TYPE["HIRAGANA"] = 23] = "HIRAGANA";
    LIST_STYLE_TYPE[LIST_STYLE_TYPE["HIRAGANA_IROHA"] = 24] = "HIRAGANA_IROHA";
    LIST_STYLE_TYPE[LIST_STYLE_TYPE["JAPANESE_FORMAL"] = 25] = "JAPANESE_FORMAL";
    LIST_STYLE_TYPE[LIST_STYLE_TYPE["JAPANESE_INFORMAL"] = 26] = "JAPANESE_INFORMAL";
    LIST_STYLE_TYPE[LIST_STYLE_TYPE["KANNADA"] = 27] = "KANNADA";
    LIST_STYLE_TYPE[LIST_STYLE_TYPE["KATAKANA"] = 28] = "KATAKANA";
    LIST_STYLE_TYPE[LIST_STYLE_TYPE["KATAKANA_IROHA"] = 29] = "KATAKANA_IROHA";
    LIST_STYLE_TYPE[LIST_STYLE_TYPE["KHMER"] = 30] = "KHMER";
    LIST_STYLE_TYPE[LIST_STYLE_TYPE["KOREAN_HANGUL_FORMAL"] = 31] = "KOREAN_HANGUL_FORMAL";
    LIST_STYLE_TYPE[LIST_STYLE_TYPE["KOREAN_HANJA_FORMAL"] = 32] = "KOREAN_HANJA_FORMAL";
    LIST_STYLE_TYPE[LIST_STYLE_TYPE["KOREAN_HANJA_INFORMAL"] = 33] = "KOREAN_HANJA_INFORMAL";
    LIST_STYLE_TYPE[LIST_STYLE_TYPE["LAO"] = 34] = "LAO";
    LIST_STYLE_TYPE[LIST_STYLE_TYPE["LOWER_ARMENIAN"] = 35] = "LOWER_ARMENIAN";
    LIST_STYLE_TYPE[LIST_STYLE_TYPE["MALAYALAM"] = 36] = "MALAYALAM";
    LIST_STYLE_TYPE[LIST_STYLE_TYPE["MONGOLIAN"] = 37] = "MONGOLIAN";
    LIST_STYLE_TYPE[LIST_STYLE_TYPE["MYANMAR"] = 38] = "MYANMAR";
    LIST_STYLE_TYPE[LIST_STYLE_TYPE["ORIYA"] = 39] = "ORIYA";
    LIST_STYLE_TYPE[LIST_STYLE_TYPE["PERSIAN"] = 40] = "PERSIAN";
    LIST_STYLE_TYPE[LIST_STYLE_TYPE["SIMP_CHINESE_FORMAL"] = 41] = "SIMP_CHINESE_FORMAL";
    LIST_STYLE_TYPE[LIST_STYLE_TYPE["SIMP_CHINESE_INFORMAL"] = 42] = "SIMP_CHINESE_INFORMAL";
    LIST_STYLE_TYPE[LIST_STYLE_TYPE["TAMIL"] = 43] = "TAMIL";
    LIST_STYLE_TYPE[LIST_STYLE_TYPE["TELUGU"] = 44] = "TELUGU";
    LIST_STYLE_TYPE[LIST_STYLE_TYPE["THAI"] = 45] = "THAI";
    LIST_STYLE_TYPE[LIST_STYLE_TYPE["TIBETAN"] = 46] = "TIBETAN";
    LIST_STYLE_TYPE[LIST_STYLE_TYPE["TRAD_CHINESE_FORMAL"] = 47] = "TRAD_CHINESE_FORMAL";
    LIST_STYLE_TYPE[LIST_STYLE_TYPE["TRAD_CHINESE_INFORMAL"] = 48] = "TRAD_CHINESE_INFORMAL";
    LIST_STYLE_TYPE[LIST_STYLE_TYPE["UPPER_ARMENIAN"] = 49] = "UPPER_ARMENIAN";
    LIST_STYLE_TYPE[LIST_STYLE_TYPE["DISCLOSURE_OPEN"] = 50] = "DISCLOSURE_OPEN";
    LIST_STYLE_TYPE[LIST_STYLE_TYPE["DISCLOSURE_CLOSED"] = 51] = "DISCLOSURE_CLOSED";
  })(LIST_STYLE_TYPE || (LIST_STYLE_TYPE = {}));

  var listStyleType = {
    name: 'list-style-type',
    initialValue: 'none',
    prefix: false,
    type: PropertyDescriptorParsingType.IDENT_VALUE,
    parse: function parse(type) {
      switch (type) {
        case 'disc':
          return LIST_STYLE_TYPE.DISC;

        case 'circle':
          return LIST_STYLE_TYPE.CIRCLE;

        case 'square':
          return LIST_STYLE_TYPE.SQUARE;

        case 'decimal':
          return LIST_STYLE_TYPE.DECIMAL;

        case 'cjk-decimal':
          return LIST_STYLE_TYPE.CJK_DECIMAL;

        case 'decimal-leading-zero':
          return LIST_STYLE_TYPE.DECIMAL_LEADING_ZERO;

        case 'lower-roman':
          return LIST_STYLE_TYPE.LOWER_ROMAN;

        case 'upper-roman':
          return LIST_STYLE_TYPE.UPPER_ROMAN;

        case 'lower-greek':
          return LIST_STYLE_TYPE.LOWER_GREEK;

        case 'lower-alpha':
          return LIST_STYLE_TYPE.LOWER_ALPHA;

        case 'upper-alpha':
          return LIST_STYLE_TYPE.UPPER_ALPHA;

        case 'arabic-indic':
          return LIST_STYLE_TYPE.ARABIC_INDIC;

        case 'armenian':
          return LIST_STYLE_TYPE.ARMENIAN;

        case 'bengali':
          return LIST_STYLE_TYPE.BENGALI;

        case 'cambodian':
          return LIST_STYLE_TYPE.CAMBODIAN;

        case 'cjk-earthly-branch':
          return LIST_STYLE_TYPE.CJK_EARTHLY_BRANCH;

        case 'cjk-heavenly-stem':
          return LIST_STYLE_TYPE.CJK_HEAVENLY_STEM;

        case 'cjk-ideographic':
          return LIST_STYLE_TYPE.CJK_IDEOGRAPHIC;

        case 'devanagari':
          return LIST_STYLE_TYPE.DEVANAGARI;

        case 'ethiopic-numeric':
          return LIST_STYLE_TYPE.ETHIOPIC_NUMERIC;

        case 'georgian':
          return LIST_STYLE_TYPE.GEORGIAN;

        case 'gujarati':
          return LIST_STYLE_TYPE.GUJARATI;

        case 'gurmukhi':
          return LIST_STYLE_TYPE.GURMUKHI;

        case 'hebrew':
          return LIST_STYLE_TYPE.HEBREW;

        case 'hiragana':
          return LIST_STYLE_TYPE.HIRAGANA;

        case 'hiragana-iroha':
          return LIST_STYLE_TYPE.HIRAGANA_IROHA;

        case 'japanese-formal':
          return LIST_STYLE_TYPE.JAPANESE_FORMAL;

        case 'japanese-informal':
          return LIST_STYLE_TYPE.JAPANESE_INFORMAL;

        case 'kannada':
          return LIST_STYLE_TYPE.KANNADA;

        case 'katakana':
          return LIST_STYLE_TYPE.KATAKANA;

        case 'katakana-iroha':
          return LIST_STYLE_TYPE.KATAKANA_IROHA;

        case 'khmer':
          return LIST_STYLE_TYPE.KHMER;

        case 'korean-hangul-formal':
          return LIST_STYLE_TYPE.KOREAN_HANGUL_FORMAL;

        case 'korean-hanja-formal':
          return LIST_STYLE_TYPE.KOREAN_HANJA_FORMAL;

        case 'korean-hanja-informal':
          return LIST_STYLE_TYPE.KOREAN_HANJA_INFORMAL;

        case 'lao':
          return LIST_STYLE_TYPE.LAO;

        case 'lower-armenian':
          return LIST_STYLE_TYPE.LOWER_ARMENIAN;

        case 'malayalam':
          return LIST_STYLE_TYPE.MALAYALAM;

        case 'mongolian':
          return LIST_STYLE_TYPE.MONGOLIAN;

        case 'myanmar':
          return LIST_STYLE_TYPE.MYANMAR;

        case 'oriya':
          return LIST_STYLE_TYPE.ORIYA;

        case 'persian':
          return LIST_STYLE_TYPE.PERSIAN;

        case 'simp-chinese-formal':
          return LIST_STYLE_TYPE.SIMP_CHINESE_FORMAL;

        case 'simp-chinese-informal':
          return LIST_STYLE_TYPE.SIMP_CHINESE_INFORMAL;

        case 'tamil':
          return LIST_STYLE_TYPE.TAMIL;

        case 'telugu':
          return LIST_STYLE_TYPE.TELUGU;

        case 'thai':
          return LIST_STYLE_TYPE.THAI;

        case 'tibetan':
          return LIST_STYLE_TYPE.TIBETAN;

        case 'trad-chinese-formal':
          return LIST_STYLE_TYPE.TRAD_CHINESE_FORMAL;

        case 'trad-chinese-informal':
          return LIST_STYLE_TYPE.TRAD_CHINESE_INFORMAL;

        case 'upper-armenian':
          return LIST_STYLE_TYPE.UPPER_ARMENIAN;

        case 'disclosure-open':
          return LIST_STYLE_TYPE.DISCLOSURE_OPEN;

        case 'disclosure-closed':
          return LIST_STYLE_TYPE.DISCLOSURE_CLOSED;

        case 'none':
        default:
          return LIST_STYLE_TYPE.NONE;
      }
    }
  };

  var marginForSide = function marginForSide(side) {
    return {
      name: "margin-" + side,
      initialValue: '0',
      prefix: false,
      type: PropertyDescriptorParsingType.TOKEN_VALUE
    };
  };

  var marginTop = marginForSide('top');
  var marginRight = marginForSide('right');
  var marginBottom = marginForSide('bottom');
  var marginLeft = marginForSide('left');
  var OVERFLOW;

  (function (OVERFLOW) {
    OVERFLOW[OVERFLOW["VISIBLE"] = 0] = "VISIBLE";
    OVERFLOW[OVERFLOW["HIDDEN"] = 1] = "HIDDEN";
    OVERFLOW[OVERFLOW["SCROLL"] = 2] = "SCROLL";
    OVERFLOW[OVERFLOW["AUTO"] = 3] = "AUTO";
  })(OVERFLOW || (OVERFLOW = {}));

  var overflow = {
    name: 'overflow',
    initialValue: 'visible',
    prefix: false,
    type: PropertyDescriptorParsingType.LIST,
    parse: function parse(tokens) {
      return tokens.filter(isIdentToken).map(function (overflow) {
        switch (overflow.value) {
          case 'hidden':
            return OVERFLOW.HIDDEN;

          case 'scroll':
            return OVERFLOW.SCROLL;

          case 'auto':
            return OVERFLOW.AUTO;

          case 'visible':
          default:
            return OVERFLOW.VISIBLE;
        }
      });
    }
  };
  var OVERFLOW_WRAP;

  (function (OVERFLOW_WRAP) {
    OVERFLOW_WRAP["NORMAL"] = "normal";
    OVERFLOW_WRAP["BREAK_WORD"] = "break-word";
  })(OVERFLOW_WRAP || (OVERFLOW_WRAP = {}));

  var overflowWrap = {
    name: 'overflow-wrap',
    initialValue: 'normal',
    prefix: false,
    type: PropertyDescriptorParsingType.IDENT_VALUE,
    parse: function parse(overflow) {
      switch (overflow) {
        case 'break-word':
          return OVERFLOW_WRAP.BREAK_WORD;

        case 'normal':
        default:
          return OVERFLOW_WRAP.NORMAL;
      }
    }
  };

  var paddingForSide = function paddingForSide(side) {
    return {
      name: "padding-" + side,
      initialValue: '0',
      prefix: false,
      type: PropertyDescriptorParsingType.TYPE_VALUE,
      format: 'length-percentage'
    };
  };

  var paddingTop = paddingForSide('top');
  var paddingRight = paddingForSide('right');
  var paddingBottom = paddingForSide('bottom');
  var paddingLeft = paddingForSide('left');
  var TEXT_ALIGN;

  (function (TEXT_ALIGN) {
    TEXT_ALIGN[TEXT_ALIGN["LEFT"] = 0] = "LEFT";
    TEXT_ALIGN[TEXT_ALIGN["CENTER"] = 1] = "CENTER";
    TEXT_ALIGN[TEXT_ALIGN["RIGHT"] = 2] = "RIGHT";
  })(TEXT_ALIGN || (TEXT_ALIGN = {}));

  var textAlign = {
    name: 'text-align',
    initialValue: 'left',
    prefix: false,
    type: PropertyDescriptorParsingType.IDENT_VALUE,
    parse: function parse(textAlign) {
      switch (textAlign) {
        case 'right':
          return TEXT_ALIGN.RIGHT;

        case 'center':
        case 'justify':
          return TEXT_ALIGN.CENTER;

        case 'left':
        default:
          return TEXT_ALIGN.LEFT;
      }
    }
  };
  var POSITION;

  (function (POSITION) {
    POSITION[POSITION["STATIC"] = 0] = "STATIC";
    POSITION[POSITION["RELATIVE"] = 1] = "RELATIVE";
    POSITION[POSITION["ABSOLUTE"] = 2] = "ABSOLUTE";
    POSITION[POSITION["FIXED"] = 3] = "FIXED";
    POSITION[POSITION["STICKY"] = 4] = "STICKY";
  })(POSITION || (POSITION = {}));

  var position = {
    name: 'position',
    initialValue: 'static',
    prefix: false,
    type: PropertyDescriptorParsingType.IDENT_VALUE,
    parse: function parse(position) {
      switch (position) {
        case 'relative':
          return POSITION.RELATIVE;

        case 'absolute':
          return POSITION.ABSOLUTE;

        case 'fixed':
          return POSITION.FIXED;

        case 'sticky':
          return POSITION.STICKY;
      }

      return POSITION.STATIC;
    }
  };
  var textShadow = {
    name: 'text-shadow',
    initialValue: 'none',
    type: PropertyDescriptorParsingType.LIST,
    prefix: false,
    parse: function parse(tokens) {
      if (tokens.length === 1 && isIdentWithValue(tokens[0], 'none')) {
        return [];
      }

      return parseFunctionArgs(tokens).map(function (values) {
        var shadow = {
          color: COLORS.TRANSPARENT,
          offsetX: ZERO_LENGTH,
          offsetY: ZERO_LENGTH,
          blur: ZERO_LENGTH
        };
        var c = 0;

        for (var i = 0; i < values.length; i++) {
          var token = values[i];

          if (isLength(token)) {
            if (c === 0) {
              shadow.offsetX = token;
            } else if (c === 1) {
              shadow.offsetY = token;
            } else {
              shadow.blur = token;
            }

            c++;
          } else {
            shadow.color = color.parse(token);
          }
        }

        return shadow;
      });
    }
  };
  var TEXT_TRANSFORM;

  (function (TEXT_TRANSFORM) {
    TEXT_TRANSFORM[TEXT_TRANSFORM["NONE"] = 0] = "NONE";
    TEXT_TRANSFORM[TEXT_TRANSFORM["LOWERCASE"] = 1] = "LOWERCASE";
    TEXT_TRANSFORM[TEXT_TRANSFORM["UPPERCASE"] = 2] = "UPPERCASE";
    TEXT_TRANSFORM[TEXT_TRANSFORM["CAPITALIZE"] = 3] = "CAPITALIZE";
  })(TEXT_TRANSFORM || (TEXT_TRANSFORM = {}));

  var textTransform = {
    name: 'text-transform',
    initialValue: 'none',
    prefix: false,
    type: PropertyDescriptorParsingType.IDENT_VALUE,
    parse: function parse(textTransform) {
      switch (textTransform) {
        case 'uppercase':
          return TEXT_TRANSFORM.UPPERCASE;

        case 'lowercase':
          return TEXT_TRANSFORM.LOWERCASE;

        case 'capitalize':
          return TEXT_TRANSFORM.CAPITALIZE;
      }

      return TEXT_TRANSFORM.NONE;
    }
  };
  var transform = {
    name: 'transform',
    initialValue: 'none',
    prefix: true,
    type: PropertyDescriptorParsingType.VALUE,
    parse: function parse(token) {
      if (token.type === TokenType.IDENT_TOKEN && token.value === 'none') {
        return null;
      }

      if (token.type === TokenType.FUNCTION) {
        var transformFunction = SUPPORTED_TRANSFORM_FUNCTIONS[token.name];

        if (typeof transformFunction === 'undefined') {
          throw new Error("Attempting to parse an unsupported transform function \"" + token.name + "\"");
        }

        return transformFunction(token.values);
      }

      return null;
    }
  };

  var matrix = function matrix(args) {
    var values = args.filter(function (arg) {
      return arg.type === TokenType.NUMBER_TOKEN;
    }).map(function (arg) {
      return arg.number;
    });
    return values.length === 6 ? values : null;
  }; // doesn't support 3D transforms at the moment


  var matrix3d = function matrix3d(args) {
    var values = args.filter(function (arg) {
      return arg.type === TokenType.NUMBER_TOKEN;
    }).map(function (arg) {
      return arg.number;
    });
    var a1 = values[0],
        b1 = values[1],
        _a = values[2],
        _b = values[3],
        a2 = values[4],
        b2 = values[5],
        _c = values[6],
        _d = values[7],
        _e = values[8],
        _f = values[9],
        _g = values[10],
        _h = values[11],
        a4 = values[12],
        b4 = values[13],
        _j = values[14],
        _k = values[15];
    return values.length === 16 ? [a1, b1, a2, b2, a4, b4] : null;
  };

  var SUPPORTED_TRANSFORM_FUNCTIONS = {
    matrix: matrix,
    matrix3d: matrix3d
  };
  var DEFAULT_VALUE = {
    type: TokenType.PERCENTAGE_TOKEN,
    number: 50,
    flags: FLAG_INTEGER
  };
  var DEFAULT = [DEFAULT_VALUE, DEFAULT_VALUE];
  var transformOrigin = {
    name: 'transform-origin',
    initialValue: '50% 50%',
    prefix: true,
    type: PropertyDescriptorParsingType.LIST,
    parse: function parse(tokens) {
      var origins = tokens.filter(isLengthPercentage);

      if (origins.length !== 2) {
        return DEFAULT;
      }

      return [origins[0], origins[1]];
    }
  };
  var VISIBILITY;

  (function (VISIBILITY) {
    VISIBILITY[VISIBILITY["VISIBLE"] = 0] = "VISIBLE";
    VISIBILITY[VISIBILITY["HIDDEN"] = 1] = "HIDDEN";
    VISIBILITY[VISIBILITY["COLLAPSE"] = 2] = "COLLAPSE";
  })(VISIBILITY || (VISIBILITY = {}));

  var visibility = {
    name: 'visible',
    initialValue: 'none',
    prefix: false,
    type: PropertyDescriptorParsingType.IDENT_VALUE,
    parse: function parse(visibility) {
      switch (visibility) {
        case 'hidden':
          return VISIBILITY.HIDDEN;

        case 'collapse':
          return VISIBILITY.COLLAPSE;

        case 'visible':
        default:
          return VISIBILITY.VISIBLE;
      }
    }
  };
  var WORD_BREAK;

  (function (WORD_BREAK) {
    WORD_BREAK["NORMAL"] = "normal";
    WORD_BREAK["BREAK_ALL"] = "break-all";
    WORD_BREAK["KEEP_ALL"] = "keep-all";
  })(WORD_BREAK || (WORD_BREAK = {}));

  var wordBreak = {
    name: 'word-break',
    initialValue: 'normal',
    prefix: false,
    type: PropertyDescriptorParsingType.IDENT_VALUE,
    parse: function parse(wordBreak) {
      switch (wordBreak) {
        case 'break-all':
          return WORD_BREAK.BREAK_ALL;

        case 'keep-all':
          return WORD_BREAK.KEEP_ALL;

        case 'normal':
        default:
          return WORD_BREAK.NORMAL;
      }
    }
  };
  var zIndex = {
    name: 'z-index',
    initialValue: 'auto',
    prefix: false,
    type: PropertyDescriptorParsingType.VALUE,
    parse: function parse(token) {
      if (token.type === TokenType.IDENT_TOKEN) {
        return {
          auto: true,
          order: 0
        };
      }

      if (isNumberToken(token)) {
        return {
          auto: false,
          order: token.number
        };
      }

      throw new Error("Invalid z-index number parsed");
    }
  };
  var opacity = {
    name: 'opacity',
    initialValue: '1',
    type: PropertyDescriptorParsingType.VALUE,
    prefix: false,
    parse: function parse(token) {
      if (isNumberToken(token)) {
        return token.number;
      }

      return 1;
    }
  };
  var textDecorationColor = {
    name: "text-decoration-color",
    initialValue: 'transparent',
    prefix: false,
    type: PropertyDescriptorParsingType.TYPE_VALUE,
    format: 'color'
  };
  var textDecorationLine = {
    name: 'text-decoration-line',
    initialValue: 'none',
    prefix: false,
    type: PropertyDescriptorParsingType.LIST,
    parse: function parse(tokens) {
      return tokens.filter(isIdentToken).map(function (token) {
        switch (token.value) {
          case 'underline':
            return 1
            /* UNDERLINE */
            ;

          case 'overline':
            return 2
            /* OVERLINE */
            ;

          case 'line-through':
            return 3
            /* LINE_THROUGH */
            ;

          case 'none':
            return 4
            /* BLINK */
            ;
        }

        return 0
        /* NONE */
        ;
      }).filter(function (line) {
        return line !== 0
        /* NONE */
        ;
      });
    }
  };
  var fontFamily = {
    name: "font-family",
    initialValue: '',
    prefix: false,
    type: PropertyDescriptorParsingType.LIST,
    parse: function parse(tokens) {
      return tokens.filter(isStringToken$1).map(function (token) {
        return token.value;
      });
    }
  };

  var isStringToken$1 = function isStringToken$1(token) {
    return token.type === TokenType.STRING_TOKEN || token.type === TokenType.IDENT_TOKEN;
  };

  var fontSize = {
    name: "font-size",
    initialValue: '0',
    prefix: false,
    type: PropertyDescriptorParsingType.TYPE_VALUE,
    format: 'length'
  };
  var fontWeight = {
    name: 'font-weight',
    initialValue: 'normal',
    type: PropertyDescriptorParsingType.VALUE,
    prefix: false,
    parse: function parse(token) {
      if (isNumberToken(token)) {
        return token.number;
      }

      if (isIdentToken(token)) {
        switch (token.value) {
          case 'bold':
            return 700;

          case 'normal':
          default:
            return 400;
        }
      }

      return 400;
    }
  };
  var fontVariant = {
    name: 'font-variant',
    initialValue: 'none',
    type: PropertyDescriptorParsingType.LIST,
    prefix: false,
    parse: function parse(tokens) {
      return tokens.filter(isIdentToken).map(function (token) {
        return token.value;
      });
    }
  };
  var FONT_STYLE;

  (function (FONT_STYLE) {
    FONT_STYLE["NORMAL"] = "normal";
    FONT_STYLE["ITALIC"] = "italic";
    FONT_STYLE["OBLIQUE"] = "oblique";
  })(FONT_STYLE || (FONT_STYLE = {}));

  var fontStyle = {
    name: 'font-style',
    initialValue: 'normal',
    prefix: false,
    type: PropertyDescriptorParsingType.IDENT_VALUE,
    parse: function parse(overflow) {
      switch (overflow) {
        case 'oblique':
          return FONT_STYLE.OBLIQUE;

        case 'italic':
          return FONT_STYLE.ITALIC;

        case 'normal':
        default:
          return FONT_STYLE.NORMAL;
      }
    }
  };

  var contains = function contains(bit, value) {
    return (bit & value) !== 0;
  };

  var content = {
    name: 'content',
    initialValue: 'none',
    type: PropertyDescriptorParsingType.LIST,
    prefix: false,
    parse: function parse(tokens) {
      if (tokens.length === 0) {
        return [];
      }

      var first = tokens[0];

      if (first.type === TokenType.IDENT_TOKEN && first.value === 'none') {
        return [];
      }

      return tokens;
    }
  };
  var counterIncrement = {
    name: 'counter-increment',
    initialValue: 'none',
    prefix: true,
    type: PropertyDescriptorParsingType.LIST,
    parse: function parse(tokens) {
      if (tokens.length === 0) {
        return null;
      }

      var first = tokens[0];

      if (first.type === TokenType.IDENT_TOKEN && first.value === 'none') {
        return null;
      }

      var increments = [];
      var filtered = tokens.filter(nonWhiteSpace);

      for (var i = 0; i < filtered.length; i++) {
        var counter = filtered[i];
        var next = filtered[i + 1];

        if (counter.type === TokenType.IDENT_TOKEN) {
          var increment = next && isNumberToken(next) ? next.number : 1;
          increments.push({
            counter: counter.value,
            increment: increment
          });
        }
      }

      return increments;
    }
  };
  var counterReset = {
    name: 'counter-reset',
    initialValue: 'none',
    prefix: true,
    type: PropertyDescriptorParsingType.LIST,
    parse: function parse(tokens) {
      if (tokens.length === 0) {
        return [];
      }

      var resets = [];
      var filtered = tokens.filter(nonWhiteSpace);

      for (var i = 0; i < filtered.length; i++) {
        var counter = filtered[i];
        var next = filtered[i + 1];

        if (isIdentToken(counter) && counter.value !== 'none') {
          var reset = next && isNumberToken(next) ? next.number : 0;
          resets.push({
            counter: counter.value,
            reset: reset
          });
        }
      }

      return resets;
    }
  };
  var quotes = {
    name: 'quotes',
    initialValue: 'none',
    prefix: true,
    type: PropertyDescriptorParsingType.LIST,
    parse: function parse(tokens) {
      if (tokens.length === 0) {
        return null;
      }

      var first = tokens[0];

      if (first.type === TokenType.IDENT_TOKEN && first.value === 'none') {
        return null;
      }

      var quotes = [];
      var filtered = tokens.filter(isStringToken);

      if (filtered.length % 2 !== 0) {
        return null;
      }

      for (var i = 0; i < filtered.length; i += 2) {
        var open_1 = filtered[i].value;
        var close_1 = filtered[i + 1].value;
        quotes.push({
          open: open_1,
          close: close_1
        });
      }

      return quotes;
    }
  };

  var getQuote = function getQuote(quotes, depth, open) {
    if (!quotes) {
      return '';
    }

    var quote = quotes[Math.min(depth, quotes.length - 1)];

    if (!quote) {
      return '';
    }

    return open ? quote.open : quote.close;
  };

  var boxShadow = {
    name: 'box-shadow',
    initialValue: 'none',
    type: PropertyDescriptorParsingType.LIST,
    prefix: false,
    parse: function parse(tokens) {
      if (tokens.length === 1 && isIdentWithValue(tokens[0], 'none')) {
        return [];
      }

      return parseFunctionArgs(tokens).map(function (values) {
        var shadow = {
          color: 0x000000ff,
          offsetX: ZERO_LENGTH,
          offsetY: ZERO_LENGTH,
          blur: ZERO_LENGTH,
          spread: ZERO_LENGTH,
          inset: false
        };
        var c = 0;

        for (var i = 0; i < values.length; i++) {
          var token = values[i];

          if (isIdentWithValue(token, 'inset')) {
            shadow.inset = true;
          } else if (isLength(token)) {
            if (c === 0) {
              shadow.offsetX = token;
            } else if (c === 1) {
              shadow.offsetY = token;
            } else if (c === 2) {
              shadow.blur = token;
            } else {
              shadow.spread = token;
            }

            c++;
          } else {
            shadow.color = color.parse(token);
          }
        }

        return shadow;
      });
    }
  };

  var CSSParsedDeclaration =
  /** @class */
  function () {
    function CSSParsedDeclaration(declaration) {
      this.backgroundClip = parse(backgroundClip, declaration.backgroundClip);
      this.backgroundColor = parse(backgroundColor, declaration.backgroundColor);
      this.backgroundImage = parse(backgroundImage, declaration.backgroundImage);
      this.backgroundOrigin = parse(backgroundOrigin, declaration.backgroundOrigin);
      this.backgroundPosition = parse(backgroundPosition, declaration.backgroundPosition);
      this.backgroundRepeat = parse(backgroundRepeat, declaration.backgroundRepeat);
      this.backgroundSize = parse(backgroundSize, declaration.backgroundSize);
      this.borderTopColor = parse(borderTopColor, declaration.borderTopColor);
      this.borderRightColor = parse(borderRightColor, declaration.borderRightColor);
      this.borderBottomColor = parse(borderBottomColor, declaration.borderBottomColor);
      this.borderLeftColor = parse(borderLeftColor, declaration.borderLeftColor);
      this.borderTopLeftRadius = parse(borderTopLeftRadius, declaration.borderTopLeftRadius);
      this.borderTopRightRadius = parse(borderTopRightRadius, declaration.borderTopRightRadius);
      this.borderBottomRightRadius = parse(borderBottomRightRadius, declaration.borderBottomRightRadius);
      this.borderBottomLeftRadius = parse(borderBottomLeftRadius, declaration.borderBottomLeftRadius);
      this.borderTopStyle = parse(borderTopStyle, declaration.borderTopStyle);
      this.borderRightStyle = parse(borderRightStyle, declaration.borderRightStyle);
      this.borderBottomStyle = parse(borderBottomStyle, declaration.borderBottomStyle);
      this.borderLeftStyle = parse(borderLeftStyle, declaration.borderLeftStyle);
      this.borderTopWidth = parse(borderTopWidth, declaration.borderTopWidth);
      this.borderRightWidth = parse(borderRightWidth, declaration.borderRightWidth);
      this.borderBottomWidth = parse(borderBottomWidth, declaration.borderBottomWidth);
      this.borderLeftWidth = parse(borderLeftWidth, declaration.borderLeftWidth);
      this.boxShadow = parse(boxShadow, declaration.boxShadow);
      this.color = parse(color$1, declaration.color);
      this.display = parse(display, declaration.display);
      this.float = parse(float, declaration.cssFloat);
      this.fontFamily = parse(fontFamily, declaration.fontFamily);
      this.fontSize = parse(fontSize, declaration.fontSize);
      this.fontStyle = parse(fontStyle, declaration.fontStyle);
      this.fontVariant = parse(fontVariant, declaration.fontVariant);
      this.fontWeight = parse(fontWeight, declaration.fontWeight);
      this.letterSpacing = parse(letterSpacing, declaration.letterSpacing);
      this.lineBreak = parse(lineBreak, declaration.lineBreak);
      this.lineHeight = parse(lineHeight, declaration.lineHeight);
      this.listStyleImage = parse(listStyleImage, declaration.listStyleImage);
      this.listStylePosition = parse(listStylePosition, declaration.listStylePosition);
      this.listStyleType = parse(listStyleType, declaration.listStyleType);
      this.marginTop = parse(marginTop, declaration.marginTop);
      this.marginRight = parse(marginRight, declaration.marginRight);
      this.marginBottom = parse(marginBottom, declaration.marginBottom);
      this.marginLeft = parse(marginLeft, declaration.marginLeft);
      this.opacity = parse(opacity, declaration.opacity);
      var overflowTuple = parse(overflow, declaration.overflow);
      this.overflowX = overflowTuple[0];
      this.overflowY = overflowTuple[overflowTuple.length > 1 ? 1 : 0];
      this.overflowWrap = parse(overflowWrap, declaration.overflowWrap);
      this.paddingTop = parse(paddingTop, declaration.paddingTop);
      this.paddingRight = parse(paddingRight, declaration.paddingRight);
      this.paddingBottom = parse(paddingBottom, declaration.paddingBottom);
      this.paddingLeft = parse(paddingLeft, declaration.paddingLeft);
      this.position = parse(position, declaration.position);
      this.textAlign = parse(textAlign, declaration.textAlign);
      this.textDecorationColor = parse(textDecorationColor, declaration.textDecorationColor || declaration.color);
      this.textDecorationLine = parse(textDecorationLine, declaration.textDecorationLine);
      this.textShadow = parse(textShadow, declaration.textShadow);
      this.textTransform = parse(textTransform, declaration.textTransform);
      this.transform = parse(transform, declaration.transform);
      this.transformOrigin = parse(transformOrigin, declaration.transformOrigin);
      this.visibility = parse(visibility, declaration.visibility);
      this.wordBreak = parse(wordBreak, declaration.wordBreak);
      this.zIndex = parse(zIndex, declaration.zIndex);
    }

    CSSParsedDeclaration.prototype.isVisible = function () {
      return this.display > 0 && this.opacity > 0 && this.visibility === VISIBILITY.VISIBLE;
    };

    CSSParsedDeclaration.prototype.isTransparent = function () {
      return isTransparent(this.backgroundColor);
    };

    CSSParsedDeclaration.prototype.isTransformed = function () {
      return this.transform !== null;
    };

    CSSParsedDeclaration.prototype.isPositioned = function () {
      return this.position !== POSITION.STATIC;
    };

    CSSParsedDeclaration.prototype.isPositionedWithZIndex = function () {
      return this.isPositioned() && !this.zIndex.auto;
    };

    CSSParsedDeclaration.prototype.isFloating = function () {
      return this.float !== FLOAT.NONE;
    };

    CSSParsedDeclaration.prototype.isInlineLevel = function () {
      return contains(this.display, 4
      /* INLINE */
      ) || contains(this.display, 33554432
      /* INLINE_BLOCK */
      ) || contains(this.display, 268435456
      /* INLINE_FLEX */
      ) || contains(this.display, 536870912
      /* INLINE_GRID */
      ) || contains(this.display, 67108864
      /* INLINE_LIST_ITEM */
      ) || contains(this.display, 134217728
      /* INLINE_TABLE */
      );
    };

    return CSSParsedDeclaration;
  }();

  var CSSParsedPseudoDeclaration =
  /** @class */
  function () {
    function CSSParsedPseudoDeclaration(declaration) {
      this.content = parse(content, declaration.content);
      this.quotes = parse(quotes, declaration.quotes);
    }

    return CSSParsedPseudoDeclaration;
  }();

  var CSSParsedCounterDeclaration =
  /** @class */
  function () {
    function CSSParsedCounterDeclaration(declaration) {
      this.counterIncrement = parse(counterIncrement, declaration.counterIncrement);
      this.counterReset = parse(counterReset, declaration.counterReset);
    }

    return CSSParsedCounterDeclaration;
  }(); // eslint-disable-next-line @typescript-eslint/no-explicit-any


  var parse = function parse(descriptor, style) {
    var tokenizer = new Tokenizer();
    var value = style !== null && typeof style !== 'undefined' ? style.toString() : descriptor.initialValue;
    tokenizer.write(value);
    var parser = new Parser(tokenizer.read());

    switch (descriptor.type) {
      case PropertyDescriptorParsingType.IDENT_VALUE:
        var token = parser.parseComponentValue();
        return descriptor.parse(isIdentToken(token) ? token.value : descriptor.initialValue);

      case PropertyDescriptorParsingType.VALUE:
        return descriptor.parse(parser.parseComponentValue());

      case PropertyDescriptorParsingType.LIST:
        return descriptor.parse(parser.parseComponentValues());

      case PropertyDescriptorParsingType.TOKEN_VALUE:
        return parser.parseComponentValue();

      case PropertyDescriptorParsingType.TYPE_VALUE:
        switch (descriptor.format) {
          case 'angle':
            return angle.parse(parser.parseComponentValue());

          case 'color':
            return color.parse(parser.parseComponentValue());

          case 'image':
            return image.parse(parser.parseComponentValue());

          case 'length':
            var length_1 = parser.parseComponentValue();
            return isLength(length_1) ? length_1 : ZERO_LENGTH;

          case 'length-percentage':
            var value_1 = parser.parseComponentValue();
            return isLengthPercentage(value_1) ? value_1 : ZERO_LENGTH;
        }

    }

    throw new Error("Attempting to parse unsupported css format type " + descriptor.format);
  };

  var ElementContainer =
  /** @class */
  function () {
    function ElementContainer(element) {
      this.styles = new CSSParsedDeclaration(window.getComputedStyle(element, null));
      this.textNodes = [];
      this.elements = [];

      if (this.styles.transform !== null && isHTMLElementNode(element)) {
        // getBoundingClientRect takes transforms into account
        element.style.transform = 'none';
      }

      this.bounds = parseBounds(element);
      this.flags = 0;
    }

    return ElementContainer;
  }();

  var TextBounds =
  /** @class */
  function () {
    function TextBounds(text, bounds) {
      this.text = text;
      this.bounds = bounds;
    }

    return TextBounds;
  }();

  var parseTextBounds = function parseTextBounds(value, styles, node) {
    var textList = breakText(value, styles);
    var textBounds = [];
    var offset = 0;
    textList.forEach(function (text) {
      if (styles.textDecorationLine.length || text.trim().length > 0) {
        if (FEATURES.SUPPORT_RANGE_BOUNDS) {
          textBounds.push(new TextBounds(text, getRangeBounds(node, offset, text.length)));
        } else {
          var replacementNode = node.splitText(text.length);
          textBounds.push(new TextBounds(text, getWrapperBounds(node)));
          node = replacementNode;
        }
      } else if (!FEATURES.SUPPORT_RANGE_BOUNDS) {
        node = node.splitText(text.length);
      }

      offset += text.length;
    });
    return textBounds;
  };

  var getWrapperBounds = function getWrapperBounds(node) {
    var ownerDocument = node.ownerDocument;

    if (ownerDocument) {
      var wrapper = ownerDocument.createElement('html2canvaswrapper');
      wrapper.appendChild(node.cloneNode(true));
      var parentNode = node.parentNode;

      if (parentNode) {
        parentNode.replaceChild(wrapper, node);
        var bounds = parseBounds(wrapper);

        if (wrapper.firstChild) {
          parentNode.replaceChild(wrapper.firstChild, wrapper);
        }

        return bounds;
      }
    }

    return new Bounds(0, 0, 0, 0);
  };

  var getRangeBounds = function getRangeBounds(node, offset, length) {
    var ownerDocument = node.ownerDocument;

    if (!ownerDocument) {
      throw new Error('Node has no owner document');
    }

    var range = ownerDocument.createRange();
    range.setStart(node, offset);
    range.setEnd(node, offset + length);
    return Bounds.fromClientRect(range.getBoundingClientRect());
  };

  var breakText = function breakText(value, styles) {
    return styles.letterSpacing !== 0 ? toCodePoints(value).map(function (i) {
      return fromCodePoint(i);
    }) : breakWords(value, styles);
  };

  var breakWords = function breakWords(str, styles) {
    var breaker = LineBreaker(str, {
      lineBreak: styles.lineBreak,
      wordBreak: styles.overflowWrap === OVERFLOW_WRAP.BREAK_WORD ? 'break-word' : styles.wordBreak
    });
    var words = [];
    var bk;

    while (!(bk = breaker.next()).done) {
      if (bk.value) {
        words.push(bk.value.slice());
      }
    }

    return words;
  };

  var TextContainer =
  /** @class */
  function () {
    function TextContainer(node, styles) {
      this.text = transform$1(node.data, styles.textTransform);
      this.textBounds = parseTextBounds(this.text, styles, node);
    }

    return TextContainer;
  }();

  var transform$1 = function transform$1(text, transform) {
    switch (transform) {
      case TEXT_TRANSFORM.LOWERCASE:
        return text.toLowerCase();

      case TEXT_TRANSFORM.CAPITALIZE:
        return text.replace(CAPITALIZE, capitalize);

      case TEXT_TRANSFORM.UPPERCASE:
        return text.toUpperCase();

      default:
        return text;
    }
  };

  var CAPITALIZE = /(^|\s|:|-|\(|\))([a-z])/g;

  var capitalize = function capitalize(m, p1, p2) {
    if (m.length > 0) {
      return p1 + p2.toUpperCase();
    }

    return m;
  };

  var ImageElementContainer =
  /** @class */
  function (_super) {
    __extends(ImageElementContainer, _super);

    function ImageElementContainer(img) {
      var _this = _super.call(this, img) || this;

      _this.src = img.currentSrc || img.src;
      _this.intrinsicWidth = img.naturalWidth;
      _this.intrinsicHeight = img.naturalHeight;
      CacheStorage.getInstance().addImage(_this.src);
      return _this;
    }

    return ImageElementContainer;
  }(ElementContainer);

  var CanvasElementContainer =
  /** @class */
  function (_super) {
    __extends(CanvasElementContainer, _super);

    function CanvasElementContainer(canvas) {
      var _this = _super.call(this, canvas) || this;

      _this.canvas = canvas;
      _this.intrinsicWidth = canvas.width;
      _this.intrinsicHeight = canvas.height;
      return _this;
    }

    return CanvasElementContainer;
  }(ElementContainer);

  var SVGElementContainer =
  /** @class */
  function (_super) {
    __extends(SVGElementContainer, _super);

    function SVGElementContainer(img) {
      var _this = _super.call(this, img) || this;

      var s = new XMLSerializer();
      _this.svg = "data:image/svg+xml," + encodeURIComponent(s.serializeToString(img));
      _this.intrinsicWidth = img.width.baseVal.value;
      _this.intrinsicHeight = img.height.baseVal.value;
      CacheStorage.getInstance().addImage(_this.svg);
      return _this;
    }

    return SVGElementContainer;
  }(ElementContainer);

  var LIElementContainer =
  /** @class */
  function (_super) {
    __extends(LIElementContainer, _super);

    function LIElementContainer(element) {
      var _this = _super.call(this, element) || this;

      _this.value = element.value;
      return _this;
    }

    return LIElementContainer;
  }(ElementContainer);

  var OLElementContainer =
  /** @class */
  function (_super) {
    __extends(OLElementContainer, _super);

    function OLElementContainer(element) {
      var _this = _super.call(this, element) || this;

      _this.start = element.start;
      _this.reversed = typeof element.reversed === 'boolean' && element.reversed === true;
      return _this;
    }

    return OLElementContainer;
  }(ElementContainer);

  var CHECKBOX_BORDER_RADIUS = [{
    type: TokenType.DIMENSION_TOKEN,
    flags: 0,
    unit: 'px',
    number: 3
  }];
  var RADIO_BORDER_RADIUS = [{
    type: TokenType.PERCENTAGE_TOKEN,
    flags: 0,
    number: 50
  }];

  var reformatInputBounds = function reformatInputBounds(bounds) {
    if (bounds.width > bounds.height) {
      return new Bounds(bounds.left + (bounds.width - bounds.height) / 2, bounds.top, bounds.height, bounds.height);
    } else if (bounds.width < bounds.height) {
      return new Bounds(bounds.left, bounds.top + (bounds.height - bounds.width) / 2, bounds.width, bounds.width);
    }

    return bounds;
  };

  var getInputValue = function getInputValue(node) {
    var value = node.type === PASSWORD ? new Array(node.value.length + 1).join("\u2022") : node.value;
    return value.length === 0 ? node.placeholder || '' : value;
  };

  var CHECKBOX = 'checkbox';
  var RADIO = 'radio';
  var PASSWORD = 'password';
  var INPUT_COLOR = 0x2a2a2aff;

  var InputElementContainer =
  /** @class */
  function (_super) {
    __extends(InputElementContainer, _super);

    function InputElementContainer(input) {
      var _this = _super.call(this, input) || this;

      _this.type = input.type.toLowerCase();
      _this.checked = input.checked;
      _this.value = getInputValue(input);

      if (_this.type === CHECKBOX || _this.type === RADIO) {
        _this.styles.backgroundColor = 0xdededeff;
        _this.styles.borderTopColor = _this.styles.borderRightColor = _this.styles.borderBottomColor = _this.styles.borderLeftColor = 0xa5a5a5ff;
        _this.styles.borderTopWidth = _this.styles.borderRightWidth = _this.styles.borderBottomWidth = _this.styles.borderLeftWidth = 1;
        _this.styles.borderTopStyle = _this.styles.borderRightStyle = _this.styles.borderBottomStyle = _this.styles.borderLeftStyle = BORDER_STYLE.SOLID;
        _this.styles.backgroundClip = [BACKGROUND_CLIP.BORDER_BOX];
        _this.styles.backgroundOrigin = [0
        /* BORDER_BOX */
        ];
        _this.bounds = reformatInputBounds(_this.bounds);
      }

      switch (_this.type) {
        case CHECKBOX:
          _this.styles.borderTopRightRadius = _this.styles.borderTopLeftRadius = _this.styles.borderBottomRightRadius = _this.styles.borderBottomLeftRadius = CHECKBOX_BORDER_RADIUS;
          break;

        case RADIO:
          _this.styles.borderTopRightRadius = _this.styles.borderTopLeftRadius = _this.styles.borderBottomRightRadius = _this.styles.borderBottomLeftRadius = RADIO_BORDER_RADIUS;
          break;
      }

      return _this;
    }

    return InputElementContainer;
  }(ElementContainer);

  var SelectElementContainer =
  /** @class */
  function (_super) {
    __extends(SelectElementContainer, _super);

    function SelectElementContainer(element) {
      var _this = _super.call(this, element) || this;

      var option = element.options[element.selectedIndex || 0];
      _this.value = option ? option.text || '' : '';
      return _this;
    }

    return SelectElementContainer;
  }(ElementContainer);

  var TextareaElementContainer =
  /** @class */
  function (_super) {
    __extends(TextareaElementContainer, _super);

    function TextareaElementContainer(element) {
      var _this = _super.call(this, element) || this;

      _this.value = element.value;
      return _this;
    }

    return TextareaElementContainer;
  }(ElementContainer);

  var parseColor = function parseColor(value) {
    return color.parse(Parser.create(value).parseComponentValue());
  };

  var IFrameElementContainer =
  /** @class */
  function (_super) {
    __extends(IFrameElementContainer, _super);

    function IFrameElementContainer(iframe) {
      var _this = _super.call(this, iframe) || this;

      _this.src = iframe.src;
      _this.width = parseInt(iframe.width, 10);
      _this.height = parseInt(iframe.height, 10);
      _this.backgroundColor = _this.styles.backgroundColor;

      try {
        if (iframe.contentWindow && iframe.contentWindow.document && iframe.contentWindow.document.documentElement) {
          _this.tree = parseTree(iframe.contentWindow.document.documentElement); // http://www.w3.org/TR/css3-background/#special-backgrounds

          var documentBackgroundColor = iframe.contentWindow.document.documentElement ? parseColor(getComputedStyle(iframe.contentWindow.document.documentElement).backgroundColor) : COLORS.TRANSPARENT;
          var bodyBackgroundColor = iframe.contentWindow.document.body ? parseColor(getComputedStyle(iframe.contentWindow.document.body).backgroundColor) : COLORS.TRANSPARENT;
          _this.backgroundColor = isTransparent(documentBackgroundColor) ? isTransparent(bodyBackgroundColor) ? _this.styles.backgroundColor : bodyBackgroundColor : documentBackgroundColor;
        }
      } catch (e) {}

      return _this;
    }

    return IFrameElementContainer;
  }(ElementContainer);

  var LIST_OWNERS = ['OL', 'UL', 'MENU'];

  var parseNodeTree = function parseNodeTree(node, parent, root) {
    for (var childNode = node.firstChild, nextNode = void 0; childNode; childNode = nextNode) {
      nextNode = childNode.nextSibling;

      if (isTextNode(childNode) && childNode.data.trim().length > 0) {
        parent.textNodes.push(new TextContainer(childNode, parent.styles));
      } else if (isElementNode(childNode)) {
        var container = createContainer(childNode);

        if (container.styles.isVisible()) {
          if (createsRealStackingContext(childNode, container, root)) {
            container.flags |= 4
            /* CREATES_REAL_STACKING_CONTEXT */
            ;
          } else if (createsStackingContext(container.styles)) {
            container.flags |= 2
            /* CREATES_STACKING_CONTEXT */
            ;
          }

          if (LIST_OWNERS.indexOf(childNode.tagName) !== -1) {
            container.flags |= 8
            /* IS_LIST_OWNER */
            ;
          }

          parent.elements.push(container);

          if (!isTextareaElement(childNode) && !isSVGElement(childNode) && !isSelectElement(childNode)) {
            parseNodeTree(childNode, container, root);
          }
        }
      }
    }
  };

  var createContainer = function createContainer(element) {
    if (isImageElement(element)) {
      return new ImageElementContainer(element);
    }

    if (isCanvasElement(element)) {
      return new CanvasElementContainer(element);
    }

    if (isSVGElement(element)) {
      return new SVGElementContainer(element);
    }

    if (isLIElement(element)) {
      return new LIElementContainer(element);
    }

    if (isOLElement(element)) {
      return new OLElementContainer(element);
    }

    if (isInputElement(element)) {
      return new InputElementContainer(element);
    }

    if (isSelectElement(element)) {
      return new SelectElementContainer(element);
    }

    if (isTextareaElement(element)) {
      return new TextareaElementContainer(element);
    }

    if (isIFrameElement(element)) {
      return new IFrameElementContainer(element);
    }

    return new ElementContainer(element);
  };

  var parseTree = function parseTree(element) {
    var container = createContainer(element);
    container.flags |= 4
    /* CREATES_REAL_STACKING_CONTEXT */
    ;
    parseNodeTree(element, container, container);
    return container;
  };

  var createsRealStackingContext = function createsRealStackingContext(node, container, root) {
    return container.styles.isPositionedWithZIndex() || container.styles.opacity < 1 || container.styles.isTransformed() || isBodyElement(node) && root.styles.isTransparent();
  };

  var createsStackingContext = function createsStackingContext(styles) {
    return styles.isPositioned() || styles.isFloating();
  };

  var isTextNode = function isTextNode(node) {
    return node.nodeType === Node.TEXT_NODE;
  };

  var isElementNode = function isElementNode(node) {
    return node.nodeType === Node.ELEMENT_NODE;
  };

  var isHTMLElementNode = function isHTMLElementNode(node) {
    return typeof node.style !== 'undefined';
  };

  var isLIElement = function isLIElement(node) {
    return node.tagName === 'LI';
  };

  var isOLElement = function isOLElement(node) {
    return node.tagName === 'OL';
  };

  var isInputElement = function isInputElement(node) {
    return node.tagName === 'INPUT';
  };

  var isHTMLElement = function isHTMLElement(node) {
    return node.tagName === 'HTML';
  };

  var isSVGElement = function isSVGElement(node) {
    return node.tagName === 'svg';
  };

  var isBodyElement = function isBodyElement(node) {
    return node.tagName === 'BODY';
  };

  var isCanvasElement = function isCanvasElement(node) {
    return node.tagName === 'CANVAS';
  };

  var isImageElement = function isImageElement(node) {
    return node.tagName === 'IMG';
  };

  var isIFrameElement = function isIFrameElement(node) {
    return node.tagName === 'IFRAME';
  };

  var isStyleElement = function isStyleElement(node) {
    return node.tagName === 'STYLE';
  };

  var isScriptElement = function isScriptElement(node) {
    return node.tagName === 'SCRIPT';
  };

  var isTextareaElement = function isTextareaElement(node) {
    return node.tagName === 'TEXTAREA';
  };

  var isSelectElement = function isSelectElement(node) {
    return node.tagName === 'SELECT';
  };

  var CounterState =
  /** @class */
  function () {
    function CounterState() {
      this.counters = {};
    }

    CounterState.prototype.getCounterValue = function (name) {
      var counter = this.counters[name];

      if (counter && counter.length) {
        return counter[counter.length - 1];
      }

      return 1;
    };

    CounterState.prototype.getCounterValues = function (name) {
      var counter = this.counters[name];
      return counter ? counter : [];
    };

    CounterState.prototype.pop = function (counters) {
      var _this = this;

      counters.forEach(function (counter) {
        return _this.counters[counter].pop();
      });
    };

    CounterState.prototype.parse = function (style) {
      var _this = this;

      var counterIncrement = style.counterIncrement;
      var counterReset = style.counterReset;

      if (counterIncrement !== null) {
        counterIncrement.forEach(function (entry) {
          var counter = _this.counters[entry.counter];

          if (counter) {
            counter[Math.max(0, counter.length - 1)] += entry.increment;
          }
        });
      }

      var counterNames = [];
      counterReset.forEach(function (entry) {
        var counter = _this.counters[entry.counter];
        counterNames.push(entry.counter);

        if (!counter) {
          counter = _this.counters[entry.counter] = [];
        }

        counter.push(entry.reset);
      });
      return counterNames;
    };

    return CounterState;
  }();

  var ROMAN_UPPER = {
    integers: [1000, 900, 500, 400, 100, 90, 50, 40, 10, 9, 5, 4, 1],
    values: ['M', 'CM', 'D', 'CD', 'C', 'XC', 'L', 'XL', 'X', 'IX', 'V', 'IV', 'I']
  };
  var ARMENIAN = {
    integers: [9000, 8000, 7000, 6000, 5000, 4000, 3000, 2000, 1000, 900, 800, 700, 600, 500, 400, 300, 200, 100, 90, 80, 70, 60, 50, 40, 30, 20, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1],
    values: ['Ք', 'Փ', 'Ւ', 'Ց', 'Ր', 'Տ', 'Վ', 'Ս', 'Ռ', 'Ջ', 'Պ', 'Չ', 'Ո', 'Շ', 'Ն', 'Յ', 'Մ', 'Ճ', 'Ղ', 'Ձ', 'Հ', 'Կ', 'Ծ', 'Խ', 'Լ', 'Ի', 'Ժ', 'Թ', 'Ը', 'Է', 'Զ', 'Ե', 'Դ', 'Գ', 'Բ', 'Ա']
  };
  var HEBREW = {
    integers: [10000, 9000, 8000, 7000, 6000, 5000, 4000, 3000, 2000, 1000, 400, 300, 200, 100, 90, 80, 70, 60, 50, 40, 30, 20, 19, 18, 17, 16, 15, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1],
    values: ['י׳', 'ט׳', 'ח׳', 'ז׳', 'ו׳', 'ה׳', 'ד׳', 'ג׳', 'ב׳', 'א׳', 'ת', 'ש', 'ר', 'ק', 'צ', 'פ', 'ע', 'ס', 'נ', 'מ', 'ל', 'כ', 'יט', 'יח', 'יז', 'טז', 'טו', 'י', 'ט', 'ח', 'ז', 'ו', 'ה', 'ד', 'ג', 'ב', 'א']
  };
  var GEORGIAN = {
    integers: [10000, 9000, 8000, 7000, 6000, 5000, 4000, 3000, 2000, 1000, 900, 800, 700, 600, 500, 400, 300, 200, 100, 90, 80, 70, 60, 50, 40, 30, 20, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1],
    values: ['ჵ', 'ჰ', 'ჯ', 'ჴ', 'ხ', 'ჭ', 'წ', 'ძ', 'ც', 'ჩ', 'შ', 'ყ', 'ღ', 'ქ', 'ფ', 'ჳ', 'ტ', 'ს', 'რ', 'ჟ', 'პ', 'ო', 'ჲ', 'ნ', 'მ', 'ლ', 'კ', 'ი', 'თ', 'ჱ', 'ზ', 'ვ', 'ე', 'დ', 'გ', 'ბ', 'ა']
  };

  var createAdditiveCounter = function createAdditiveCounter(value, min, max, symbols, fallback, suffix) {
    if (value < min || value > max) {
      return createCounterText(value, fallback, suffix.length > 0);
    }

    return symbols.integers.reduce(function (string, integer, index) {
      while (value >= integer) {
        value -= integer;
        string += symbols.values[index];
      }

      return string;
    }, '') + suffix;
  };

  var createCounterStyleWithSymbolResolver = function createCounterStyleWithSymbolResolver(value, codePointRangeLength, isNumeric, resolver) {
    var string = '';

    do {
      if (!isNumeric) {
        value--;
      }

      string = resolver(value) + string;
      value /= codePointRangeLength;
    } while (value * codePointRangeLength >= codePointRangeLength);

    return string;
  };

  var createCounterStyleFromRange = function createCounterStyleFromRange(value, codePointRangeStart, codePointRangeEnd, isNumeric, suffix) {
    var codePointRangeLength = codePointRangeEnd - codePointRangeStart + 1;
    return (value < 0 ? '-' : '') + (createCounterStyleWithSymbolResolver(Math.abs(value), codePointRangeLength, isNumeric, function (codePoint) {
      return fromCodePoint(Math.floor(codePoint % codePointRangeLength) + codePointRangeStart);
    }) + suffix);
  };

  var createCounterStyleFromSymbols = function createCounterStyleFromSymbols(value, symbols, suffix) {
    if (suffix === void 0) {
      suffix = '. ';
    }

    var codePointRangeLength = symbols.length;
    return createCounterStyleWithSymbolResolver(Math.abs(value), codePointRangeLength, false, function (codePoint) {
      return symbols[Math.floor(codePoint % codePointRangeLength)];
    }) + suffix;
  };

  var CJK_ZEROS = 1 << 0;
  var CJK_TEN_COEFFICIENTS = 1 << 1;
  var CJK_TEN_HIGH_COEFFICIENTS = 1 << 2;
  var CJK_HUNDRED_COEFFICIENTS = 1 << 3;

  var createCJKCounter = function createCJKCounter(value, numbers, multipliers, negativeSign, suffix, flags) {
    if (value < -9999 || value > 9999) {
      return createCounterText(value, LIST_STYLE_TYPE.CJK_DECIMAL, suffix.length > 0);
    }

    var tmp = Math.abs(value);
    var string = suffix;

    if (tmp === 0) {
      return numbers[0] + string;
    }

    for (var digit = 0; tmp > 0 && digit <= 4; digit++) {
      var coefficient = tmp % 10;

      if (coefficient === 0 && contains(flags, CJK_ZEROS) && string !== '') {
        string = numbers[coefficient] + string;
      } else if (coefficient > 1 || coefficient === 1 && digit === 0 || coefficient === 1 && digit === 1 && contains(flags, CJK_TEN_COEFFICIENTS) || coefficient === 1 && digit === 1 && contains(flags, CJK_TEN_HIGH_COEFFICIENTS) && value > 100 || coefficient === 1 && digit > 1 && contains(flags, CJK_HUNDRED_COEFFICIENTS)) {
        string = numbers[coefficient] + (digit > 0 ? multipliers[digit - 1] : '') + string;
      } else if (coefficient === 1 && digit > 0) {
        string = multipliers[digit - 1] + string;
      }

      tmp = Math.floor(tmp / 10);
    }

    return (value < 0 ? negativeSign : '') + string;
  };

  var CHINESE_INFORMAL_MULTIPLIERS = '十百千萬';
  var CHINESE_FORMAL_MULTIPLIERS = '拾佰仟萬';
  var JAPANESE_NEGATIVE = 'マイナス';
  var KOREAN_NEGATIVE = '마이너스';

  var createCounterText = function createCounterText(value, type, appendSuffix) {
    var defaultSuffix = appendSuffix ? '. ' : '';
    var cjkSuffix = appendSuffix ? '、' : '';
    var koreanSuffix = appendSuffix ? ', ' : '';
    var spaceSuffix = appendSuffix ? ' ' : '';

    switch (type) {
      case LIST_STYLE_TYPE.DISC:
        return '•' + spaceSuffix;

      case LIST_STYLE_TYPE.CIRCLE:
        return '◦' + spaceSuffix;

      case LIST_STYLE_TYPE.SQUARE:
        return '◾' + spaceSuffix;

      case LIST_STYLE_TYPE.DECIMAL_LEADING_ZERO:
        var string = createCounterStyleFromRange(value, 48, 57, true, defaultSuffix);
        return string.length < 4 ? "0" + string : string;

      case LIST_STYLE_TYPE.CJK_DECIMAL:
        return createCounterStyleFromSymbols(value, '〇一二三四五六七八九', cjkSuffix);

      case LIST_STYLE_TYPE.LOWER_ROMAN:
        return createAdditiveCounter(value, 1, 3999, ROMAN_UPPER, LIST_STYLE_TYPE.DECIMAL, defaultSuffix).toLowerCase();

      case LIST_STYLE_TYPE.UPPER_ROMAN:
        return createAdditiveCounter(value, 1, 3999, ROMAN_UPPER, LIST_STYLE_TYPE.DECIMAL, defaultSuffix);

      case LIST_STYLE_TYPE.LOWER_GREEK:
        return createCounterStyleFromRange(value, 945, 969, false, defaultSuffix);

      case LIST_STYLE_TYPE.LOWER_ALPHA:
        return createCounterStyleFromRange(value, 97, 122, false, defaultSuffix);

      case LIST_STYLE_TYPE.UPPER_ALPHA:
        return createCounterStyleFromRange(value, 65, 90, false, defaultSuffix);

      case LIST_STYLE_TYPE.ARABIC_INDIC:
        return createCounterStyleFromRange(value, 1632, 1641, true, defaultSuffix);

      case LIST_STYLE_TYPE.ARMENIAN:
      case LIST_STYLE_TYPE.UPPER_ARMENIAN:
        return createAdditiveCounter(value, 1, 9999, ARMENIAN, LIST_STYLE_TYPE.DECIMAL, defaultSuffix);

      case LIST_STYLE_TYPE.LOWER_ARMENIAN:
        return createAdditiveCounter(value, 1, 9999, ARMENIAN, LIST_STYLE_TYPE.DECIMAL, defaultSuffix).toLowerCase();

      case LIST_STYLE_TYPE.BENGALI:
        return createCounterStyleFromRange(value, 2534, 2543, true, defaultSuffix);

      case LIST_STYLE_TYPE.CAMBODIAN:
      case LIST_STYLE_TYPE.KHMER:
        return createCounterStyleFromRange(value, 6112, 6121, true, defaultSuffix);

      case LIST_STYLE_TYPE.CJK_EARTHLY_BRANCH:
        return createCounterStyleFromSymbols(value, '子丑寅卯辰巳午未申酉戌亥', cjkSuffix);

      case LIST_STYLE_TYPE.CJK_HEAVENLY_STEM:
        return createCounterStyleFromSymbols(value, '甲乙丙丁戊己庚辛壬癸', cjkSuffix);

      case LIST_STYLE_TYPE.CJK_IDEOGRAPHIC:
      case LIST_STYLE_TYPE.TRAD_CHINESE_INFORMAL:
        return createCJKCounter(value, '零一二三四五六七八九', CHINESE_INFORMAL_MULTIPLIERS, '負', cjkSuffix, CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS | CJK_HUNDRED_COEFFICIENTS);

      case LIST_STYLE_TYPE.TRAD_CHINESE_FORMAL:
        return createCJKCounter(value, '零壹貳參肆伍陸柒捌玖', CHINESE_FORMAL_MULTIPLIERS, '負', cjkSuffix, CJK_ZEROS | CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS | CJK_HUNDRED_COEFFICIENTS);

      case LIST_STYLE_TYPE.SIMP_CHINESE_INFORMAL:
        return createCJKCounter(value, '零一二三四五六七八九', CHINESE_INFORMAL_MULTIPLIERS, '负', cjkSuffix, CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS | CJK_HUNDRED_COEFFICIENTS);

      case LIST_STYLE_TYPE.SIMP_CHINESE_FORMAL:
        return createCJKCounter(value, '零壹贰叁肆伍陆柒捌玖', CHINESE_FORMAL_MULTIPLIERS, '负', cjkSuffix, CJK_ZEROS | CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS | CJK_HUNDRED_COEFFICIENTS);

      case LIST_STYLE_TYPE.JAPANESE_INFORMAL:
        return createCJKCounter(value, '〇一二三四五六七八九', '十百千万', JAPANESE_NEGATIVE, cjkSuffix, 0);

      case LIST_STYLE_TYPE.JAPANESE_FORMAL:
        return createCJKCounter(value, '零壱弐参四伍六七八九', '拾百千万', JAPANESE_NEGATIVE, cjkSuffix, CJK_ZEROS | CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS);

      case LIST_STYLE_TYPE.KOREAN_HANGUL_FORMAL:
        return createCJKCounter(value, '영일이삼사오육칠팔구', '십백천만', KOREAN_NEGATIVE, koreanSuffix, CJK_ZEROS | CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS);

      case LIST_STYLE_TYPE.KOREAN_HANJA_INFORMAL:
        return createCJKCounter(value, '零一二三四五六七八九', '十百千萬', KOREAN_NEGATIVE, koreanSuffix, 0);

      case LIST_STYLE_TYPE.KOREAN_HANJA_FORMAL:
        return createCJKCounter(value, '零壹貳參四五六七八九', '拾百千', KOREAN_NEGATIVE, koreanSuffix, CJK_ZEROS | CJK_TEN_COEFFICIENTS | CJK_TEN_HIGH_COEFFICIENTS);

      case LIST_STYLE_TYPE.DEVANAGARI:
        return createCounterStyleFromRange(value, 0x966, 0x96f, true, defaultSuffix);

      case LIST_STYLE_TYPE.GEORGIAN:
        return createAdditiveCounter(value, 1, 19999, GEORGIAN, LIST_STYLE_TYPE.DECIMAL, defaultSuffix);

      case LIST_STYLE_TYPE.GUJARATI:
        return createCounterStyleFromRange(value, 0xae6, 0xaef, true, defaultSuffix);

      case LIST_STYLE_TYPE.GURMUKHI:
        return createCounterStyleFromRange(value, 0xa66, 0xa6f, true, defaultSuffix);

      case LIST_STYLE_TYPE.HEBREW:
        return createAdditiveCounter(value, 1, 10999, HEBREW, LIST_STYLE_TYPE.DECIMAL, defaultSuffix);

      case LIST_STYLE_TYPE.HIRAGANA:
        return createCounterStyleFromSymbols(value, 'あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん');

      case LIST_STYLE_TYPE.HIRAGANA_IROHA:
        return createCounterStyleFromSymbols(value, 'いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす');

      case LIST_STYLE_TYPE.KANNADA:
        return createCounterStyleFromRange(value, 0xce6, 0xcef, true, defaultSuffix);

      case LIST_STYLE_TYPE.KATAKANA:
        return createCounterStyleFromSymbols(value, 'アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン', cjkSuffix);

      case LIST_STYLE_TYPE.KATAKANA_IROHA:
        return createCounterStyleFromSymbols(value, 'イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス', cjkSuffix);

      case LIST_STYLE_TYPE.LAO:
        return createCounterStyleFromRange(value, 0xed0, 0xed9, true, defaultSuffix);

      case LIST_STYLE_TYPE.MONGOLIAN:
        return createCounterStyleFromRange(value, 0x1810, 0x1819, true, defaultSuffix);

      case LIST_STYLE_TYPE.MYANMAR:
        return createCounterStyleFromRange(value, 0x1040, 0x1049, true, defaultSuffix);

      case LIST_STYLE_TYPE.ORIYA:
        return createCounterStyleFromRange(value, 0xb66, 0xb6f, true, defaultSuffix);

      case LIST_STYLE_TYPE.PERSIAN:
        return createCounterStyleFromRange(value, 0x6f0, 0x6f9, true, defaultSuffix);

      case LIST_STYLE_TYPE.TAMIL:
        return createCounterStyleFromRange(value, 0xbe6, 0xbef, true, defaultSuffix);

      case LIST_STYLE_TYPE.TELUGU:
        return createCounterStyleFromRange(value, 0xc66, 0xc6f, true, defaultSuffix);

      case LIST_STYLE_TYPE.THAI:
        return createCounterStyleFromRange(value, 0xe50, 0xe59, true, defaultSuffix);

      case LIST_STYLE_TYPE.TIBETAN:
        return createCounterStyleFromRange(value, 0xf20, 0xf29, true, defaultSuffix);

      case LIST_STYLE_TYPE.DECIMAL:
      default:
        return createCounterStyleFromRange(value, 48, 57, true, defaultSuffix);
    }
  };

  var IGNORE_ATTRIBUTE = 'data-html2canvas-ignore';

  var DocumentCloner =
  /** @class */
  function () {
    function DocumentCloner(element, options) {
      this.options = options;
      this.scrolledElements = [];
      this.referenceElement = element;
      this.counters = new CounterState();
      this.quoteDepth = 0;

      if (!element.ownerDocument) {
        throw new Error('Cloned element does not have an owner document');
      }

      this.documentElement = this.cloneNode(element.ownerDocument.documentElement);
    }

    DocumentCloner.prototype.toIFrame = function (ownerDocument, windowSize) {
      var _this = this;

      var iframe = createIFrameContainer(ownerDocument, windowSize);

      if (!iframe.contentWindow) {
        return Promise.reject("Unable to find iframe window");
      }

      var scrollX = ownerDocument.defaultView.pageXOffset;
      var scrollY = ownerDocument.defaultView.pageYOffset;
      var cloneWindow = iframe.contentWindow;
      var documentClone = cloneWindow.document;
      /* Chrome doesn't detect relative background-images assigned in inline <style> sheets when fetched through getComputedStyle
       if window url is about:blank, we can assign the url to current by writing onto the document
       */

      var iframeLoad = iframeLoader(iframe).then(function () {
        _this.scrolledElements.forEach(restoreNodeScroll);

        if (cloneWindow) {
          cloneWindow.scrollTo(windowSize.left, windowSize.top);

          if (/(iPad|iPhone|iPod)/g.test(navigator.userAgent) && (cloneWindow.scrollY !== windowSize.top || cloneWindow.scrollX !== windowSize.left)) {
            documentClone.documentElement.style.top = -windowSize.top + 'px';
            documentClone.documentElement.style.left = -windowSize.left + 'px';
            documentClone.documentElement.style.position = 'absolute';
          }
        }

        var onclone = _this.options.onclone;

        if (typeof _this.clonedReferenceElement === 'undefined') {
          return Promise.reject("Error finding the " + _this.referenceElement.nodeName + " in the cloned document");
        }

        if (typeof onclone === 'function') {
          return Promise.resolve().then(function () {
            return onclone(documentClone);
          }).then(function () {
            return iframe;
          });
        }

        return iframe;
      });
      documentClone.open();
      documentClone.write(serializeDoctype(document.doctype) + "<html></html>"); // Chrome scrolls the parent document for some reason after the write to the cloned window???

      restoreOwnerScroll(this.referenceElement.ownerDocument, scrollX, scrollY);
      documentClone.replaceChild(documentClone.adoptNode(this.documentElement), documentClone.documentElement);
      documentClone.close();
      return iframeLoad;
    };

    DocumentCloner.prototype.createElementClone = function (node) {
      if (isCanvasElement(node)) {
        return this.createCanvasClone(node);
      }
      /*
      if (isIFrameElement(node)) {
          return this.createIFrameClone(node);
      }
      */


      if (isStyleElement(node)) {
        return this.createStyleClone(node);
      }

      return node.cloneNode(false);
    };

    DocumentCloner.prototype.createStyleClone = function (node) {
      try {
        var sheet = node.sheet;

        if (sheet && sheet.cssRules) {
          var css = [].slice.call(sheet.cssRules, 0).reduce(function (css, rule) {
            if (rule && typeof rule.cssText === 'string') {
              return css + rule.cssText;
            }

            return css;
          }, '');
          var style = node.cloneNode(false);
          style.textContent = css;
          return style;
        }
      } catch (e) {
        // accessing node.sheet.cssRules throws a DOMException
        Logger.getInstance(this.options.id).error('Unable to access cssRules property', e);

        if (e.name !== 'SecurityError') {
          throw e;
        }
      }

      return node.cloneNode(false);
    };

    DocumentCloner.prototype.createCanvasClone = function (canvas) {
      if (this.options.inlineImages && canvas.ownerDocument) {
        var img = canvas.ownerDocument.createElement('img');

        try {
          img.src = canvas.toDataURL();
          return img;
        } catch (e) {
          Logger.getInstance(this.options.id).info("Unable to clone canvas contents, canvas is tainted");
        }
      }

      var clonedCanvas = canvas.cloneNode(false);

      try {
        clonedCanvas.width = canvas.width;
        clonedCanvas.height = canvas.height;
        var ctx = canvas.getContext('2d');
        var clonedCtx = clonedCanvas.getContext('2d');

        if (clonedCtx) {
          if (ctx) {
            clonedCtx.putImageData(ctx.getImageData(0, 0, canvas.width, canvas.height), 0, 0);
          } else {
            clonedCtx.drawImage(canvas, 0, 0);
          }
        }

        return clonedCanvas;
      } catch (e) {}

      return clonedCanvas;
    };
    /*
    createIFrameClone(iframe: HTMLIFrameElement) {
        const tempIframe = <HTMLIFrameElement>iframe.cloneNode(false);
        const iframeKey = generateIframeKey();
        tempIframe.setAttribute('data-html2canvas-internal-iframe-key', iframeKey);
         const {width, height} = parseBounds(iframe);
         this.resourceLoader.cache[iframeKey] = getIframeDocumentElement(iframe, this.options)
            .then(documentElement => {
                return this.renderer(
                    documentElement,
                    {
                        allowTaint: this.options.allowTaint,
                        backgroundColor: '#ffffff',
                        canvas: null,
                        imageTimeout: this.options.imageTimeout,
                        logging: this.options.logging,
                        proxy: this.options.proxy,
                        removeContainer: this.options.removeContainer,
                        scale: this.options.scale,
                        foreignObjectRendering: this.options.foreignObjectRendering,
                        useCORS: this.options.useCORS,
                        target: new CanvasRenderer(),
                        width,
                        height,
                        x: 0,
                        y: 0,
                        windowWidth: documentElement.ownerDocument.defaultView.innerWidth,
                        windowHeight: documentElement.ownerDocument.defaultView.innerHeight,
                        scrollX: documentElement.ownerDocument.defaultView.pageXOffset,
                        scrollY: documentElement.ownerDocument.defaultView.pageYOffset
                    },
                );
            })
            .then(
                (canvas: HTMLCanvasElement) =>
                    new Promise((resolve, reject) => {
                        const iframeCanvas = document.createElement('img');
                        iframeCanvas.onload = () => resolve(canvas);
                        iframeCanvas.onerror = (event) => {
                            // Empty iframes may result in empty "data:," URLs, which are invalid from the <img>'s point of view
                            // and instead of `onload` cause `onerror` and unhandled rejection warnings
                            // https://github.com/niklasvh/html2canvas/issues/1502
                            iframeCanvas.src == 'data:,' ? resolve(canvas) : reject(event);
                        };
                        iframeCanvas.src = canvas.toDataURL();
                        if (tempIframe.parentNode && iframe.ownerDocument && iframe.ownerDocument.defaultView) {
                            tempIframe.parentNode.replaceChild(
                                copyCSSStyles(
                                    iframe.ownerDocument.defaultView.getComputedStyle(iframe),
                                    iframeCanvas
                                ),
                                tempIframe
                            );
                        }
                    })
            );
        return tempIframe;
    }
    */


    DocumentCloner.prototype.cloneNode = function (node) {
      if (isTextNode(node)) {
        return document.createTextNode(node.data);
      }

      if (!node.ownerDocument) {
        return node.cloneNode(false);
      }

      var window = node.ownerDocument.defaultView;

      if (isHTMLElementNode(node) && window) {
        var clone = this.createElementClone(node);
        var style = window.getComputedStyle(node);
        var styleBefore = window.getComputedStyle(node, ':before');
        var styleAfter = window.getComputedStyle(node, ':after');

        if (this.referenceElement === node) {
          this.clonedReferenceElement = clone;
        }

        if (isBodyElement(clone)) {
          createPseudoHideStyles(clone);
        }

        var counters = this.counters.parse(new CSSParsedCounterDeclaration(style));
        var before_1 = this.resolvePseudoContent(node, clone, styleBefore, PseudoElementType.BEFORE);

        for (var child = node.firstChild; child; child = child.nextSibling) {
          if (!isElementNode(child) || !isScriptElement(child) && !child.hasAttribute(IGNORE_ATTRIBUTE) && (typeof this.options.ignoreElements !== 'function' || !this.options.ignoreElements(child))) {
            if (!this.options.copyStyles || !isElementNode(child) || !isStyleElement(child)) {
              clone.appendChild(this.cloneNode(child));
            }
          }
        }

        if (before_1) {
          clone.insertBefore(before_1, clone.firstChild);
        }

        var after_1 = this.resolvePseudoContent(node, clone, styleAfter, PseudoElementType.AFTER);

        if (after_1) {
          clone.appendChild(after_1);
        }

        this.counters.pop(counters);

        if (style && this.options.copyStyles && !isIFrameElement(node)) {
          copyCSSStyles(style, clone);
        } //this.inlineAllImages(clone);


        if (node.scrollTop !== 0 || node.scrollLeft !== 0) {
          this.scrolledElements.push([clone, node.scrollLeft, node.scrollTop]);
        }

        if ((isTextareaElement(node) || isSelectElement(node)) && (isTextareaElement(clone) || isSelectElement(clone))) {
          clone.value = node.value;
        }

        return clone;
      }

      return node.cloneNode(false);
    };

    DocumentCloner.prototype.resolvePseudoContent = function (node, clone, style, pseudoElt) {
      var _this = this;

      if (!style) {
        return;
      }

      var value = style.content;
      var document = clone.ownerDocument;

      if (!document || !value || value === 'none' || value === '-moz-alt-content' || style.display === 'none') {
        return;
      }

      this.counters.parse(new CSSParsedCounterDeclaration(style));
      var declaration = new CSSParsedPseudoDeclaration(style);
      var anonymousReplacedElement = document.createElement('html2canvaspseudoelement');
      copyCSSStyles(style, anonymousReplacedElement);
      declaration.content.forEach(function (token) {
        if (token.type === TokenType.STRING_TOKEN) {
          anonymousReplacedElement.appendChild(document.createTextNode(token.value));
        } else if (token.type === TokenType.URL_TOKEN) {
          var img = document.createElement('img');
          img.src = token.value;
          img.style.opacity = '1';
          anonymousReplacedElement.appendChild(img);
        } else if (token.type === TokenType.FUNCTION) {
          if (token.name === 'attr') {
            var attr = token.values.filter(isIdentToken);

            if (attr.length) {
              anonymousReplacedElement.appendChild(document.createTextNode(node.getAttribute(attr[0].value) || ''));
            }
          } else if (token.name === 'counter') {
            var _a = token.values.filter(nonFunctionArgSeperator),
                counter = _a[0],
                counterStyle = _a[1];

            if (counter && isIdentToken(counter)) {
              var counterState = _this.counters.getCounterValue(counter.value);

              var counterType = counterStyle && isIdentToken(counterStyle) ? listStyleType.parse(counterStyle.value) : LIST_STYLE_TYPE.DECIMAL;
              anonymousReplacedElement.appendChild(document.createTextNode(createCounterText(counterState, counterType, false)));
            }
          } else if (token.name === 'counters') {
            var _b = token.values.filter(nonFunctionArgSeperator),
                counter = _b[0],
                delim = _b[1],
                counterStyle = _b[2];

            if (counter && isIdentToken(counter)) {
              var counterStates = _this.counters.getCounterValues(counter.value);

              var counterType_1 = counterStyle && isIdentToken(counterStyle) ? listStyleType.parse(counterStyle.value) : LIST_STYLE_TYPE.DECIMAL;
              var separator = delim && delim.type === TokenType.STRING_TOKEN ? delim.value : '';
              var text = counterStates.map(function (value) {
                return createCounterText(value, counterType_1, false);
              }).join(separator);
              anonymousReplacedElement.appendChild(document.createTextNode(text));
            }
          }
        } else if (token.type === TokenType.IDENT_TOKEN) {
          switch (token.value) {
            case 'open-quote':
              anonymousReplacedElement.appendChild(document.createTextNode(getQuote(declaration.quotes, _this.quoteDepth++, true)));
              break;

            case 'close-quote':
              anonymousReplacedElement.appendChild(document.createTextNode(getQuote(declaration.quotes, --_this.quoteDepth, false)));
              break;

            default: //    console.log('ident', token, declaration);

          }
        }
      });
      anonymousReplacedElement.className = PSEUDO_HIDE_ELEMENT_CLASS_BEFORE + " " + PSEUDO_HIDE_ELEMENT_CLASS_AFTER;
      clone.className += pseudoElt === PseudoElementType.BEFORE ? " " + PSEUDO_HIDE_ELEMENT_CLASS_BEFORE : " " + PSEUDO_HIDE_ELEMENT_CLASS_AFTER;
      return anonymousReplacedElement;
    };

    return DocumentCloner;
  }();

  var PseudoElementType;

  (function (PseudoElementType) {
    PseudoElementType[PseudoElementType["BEFORE"] = 0] = "BEFORE";
    PseudoElementType[PseudoElementType["AFTER"] = 1] = "AFTER";
  })(PseudoElementType || (PseudoElementType = {}));

  var createIFrameContainer = function createIFrameContainer(ownerDocument, bounds) {
    var cloneIframeContainer = ownerDocument.createElement('iframe');
    cloneIframeContainer.className = 'html2canvas-container';
    cloneIframeContainer.style.visibility = 'hidden';
    cloneIframeContainer.style.position = 'fixed';
    cloneIframeContainer.style.left = '-10000px';
    cloneIframeContainer.style.top = '0px';
    cloneIframeContainer.style.border = '0';
    cloneIframeContainer.width = bounds.width.toString();
    cloneIframeContainer.height = bounds.height.toString();
    cloneIframeContainer.scrolling = 'no'; // ios won't scroll without it

    cloneIframeContainer.setAttribute(IGNORE_ATTRIBUTE, 'true');
    ownerDocument.body.appendChild(cloneIframeContainer);
    return cloneIframeContainer;
  };

  var iframeLoader = function iframeLoader(iframe) {
    return new Promise(function (resolve, reject) {
      var cloneWindow = iframe.contentWindow;

      if (!cloneWindow) {
        return reject("No window assigned for iframe");
      }

      var documentClone = cloneWindow.document;

      cloneWindow.onload = iframe.onload = documentClone.onreadystatechange = function () {
        cloneWindow.onload = iframe.onload = documentClone.onreadystatechange = null;
        var interval = setInterval(function () {
          if (documentClone.body.childNodes.length > 0 && documentClone.readyState === 'complete') {
            clearInterval(interval);
            resolve(iframe);
          }
        }, 50);
      };
    });
  };

  var copyCSSStyles = function copyCSSStyles(style, target) {
    // Edge does not provide value for cssText
    for (var i = style.length - 1; i >= 0; i--) {
      var property = style.item(i); // Safari shows pseudoelements if content is set

      if (property !== 'content') {
        target.style.setProperty(property, style.getPropertyValue(property));
      }
    }

    return target;
  };

  var serializeDoctype = function serializeDoctype(doctype) {
    var str = '';

    if (doctype) {
      str += '<!DOCTYPE ';

      if (doctype.name) {
        str += doctype.name;
      }

      if (doctype.internalSubset) {
        str += doctype.internalSubset;
      }

      if (doctype.publicId) {
        str += "\"" + doctype.publicId + "\"";
      }

      if (doctype.systemId) {
        str += "\"" + doctype.systemId + "\"";
      }

      str += '>';
    }

    return str;
  };

  var restoreOwnerScroll = function restoreOwnerScroll(ownerDocument, x, y) {
    if (ownerDocument && ownerDocument.defaultView && (x !== ownerDocument.defaultView.pageXOffset || y !== ownerDocument.defaultView.pageYOffset)) {
      ownerDocument.defaultView.scrollTo(x, y);
    }
  };

  var restoreNodeScroll = function restoreNodeScroll(_a) {
    var element = _a[0],
        x = _a[1],
        y = _a[2];
    element.scrollLeft = x;
    element.scrollTop = y;
  };

  var PSEUDO_BEFORE = ':before';
  var PSEUDO_AFTER = ':after';
  var PSEUDO_HIDE_ELEMENT_CLASS_BEFORE = '___html2canvas___pseudoelement_before';
  var PSEUDO_HIDE_ELEMENT_CLASS_AFTER = '___html2canvas___pseudoelement_after';
  var PSEUDO_HIDE_ELEMENT_STYLE = "{\n    content: \"\" !important;\n    display: none !important;\n}";

  var createPseudoHideStyles = function createPseudoHideStyles(body) {
    createStyles(body, "." + PSEUDO_HIDE_ELEMENT_CLASS_BEFORE + PSEUDO_BEFORE + PSEUDO_HIDE_ELEMENT_STYLE + "\n         ." + PSEUDO_HIDE_ELEMENT_CLASS_AFTER + PSEUDO_AFTER + PSEUDO_HIDE_ELEMENT_STYLE);
  };

  var createStyles = function createStyles(body, styles) {
    var document = body.ownerDocument;

    if (document) {
      var style = document.createElement('style');
      style.textContent = styles;
      body.appendChild(style);
    }
  };

  var PathType;

  (function (PathType) {
    PathType[PathType["VECTOR"] = 0] = "VECTOR";
    PathType[PathType["BEZIER_CURVE"] = 1] = "BEZIER_CURVE";
  })(PathType || (PathType = {}));

  var equalPath = function equalPath(a, b) {
    if (a.length === b.length) {
      return a.some(function (v, i) {
        return v === b[i];
      });
    }

    return false;
  };

  var transformPath = function transformPath(path, deltaX, deltaY, deltaW, deltaH) {
    return path.map(function (point, index) {
      switch (index) {
        case 0:
          return point.add(deltaX, deltaY);

        case 1:
          return point.add(deltaX + deltaW, deltaY);

        case 2:
          return point.add(deltaX + deltaW, deltaY + deltaH);

        case 3:
          return point.add(deltaX, deltaY + deltaH);
      }

      return point;
    });
  };

  var Vector =
  /** @class */
  function () {
    function Vector(x, y) {
      this.type = PathType.VECTOR;
      this.x = x;
      this.y = y;
    }

    Vector.prototype.add = function (deltaX, deltaY) {
      return new Vector(this.x + deltaX, this.y + deltaY);
    };

    return Vector;
  }();

  var lerp = function lerp(a, b, t) {
    return new Vector(a.x + (b.x - a.x) * t, a.y + (b.y - a.y) * t);
  };

  var BezierCurve =
  /** @class */
  function () {
    function BezierCurve(start, startControl, endControl, end) {
      this.type = PathType.BEZIER_CURVE;
      this.start = start;
      this.startControl = startControl;
      this.endControl = endControl;
      this.end = end;
    }

    BezierCurve.prototype.subdivide = function (t, firstHalf) {
      var ab = lerp(this.start, this.startControl, t);
      var bc = lerp(this.startControl, this.endControl, t);
      var cd = lerp(this.endControl, this.end, t);
      var abbc = lerp(ab, bc, t);
      var bccd = lerp(bc, cd, t);
      var dest = lerp(abbc, bccd, t);
      return firstHalf ? new BezierCurve(this.start, ab, abbc, dest) : new BezierCurve(dest, bccd, cd, this.end);
    };

    BezierCurve.prototype.add = function (deltaX, deltaY) {
      return new BezierCurve(this.start.add(deltaX, deltaY), this.startControl.add(deltaX, deltaY), this.endControl.add(deltaX, deltaY), this.end.add(deltaX, deltaY));
    };

    BezierCurve.prototype.reverse = function () {
      return new BezierCurve(this.end, this.endControl, this.startControl, this.start);
    };

    return BezierCurve;
  }();

  var isBezierCurve = function isBezierCurve(path) {
    return path.type === PathType.BEZIER_CURVE;
  };

  var BoundCurves =
  /** @class */
  function () {
    function BoundCurves(element) {
      var styles = element.styles;
      var bounds = element.bounds;

      var _a = getAbsoluteValueForTuple(styles.borderTopLeftRadius, bounds.width, bounds.height),
          tlh = _a[0],
          tlv = _a[1];

      var _b = getAbsoluteValueForTuple(styles.borderTopRightRadius, bounds.width, bounds.height),
          trh = _b[0],
          trv = _b[1];

      var _c = getAbsoluteValueForTuple(styles.borderBottomRightRadius, bounds.width, bounds.height),
          brh = _c[0],
          brv = _c[1];

      var _d = getAbsoluteValueForTuple(styles.borderBottomLeftRadius, bounds.width, bounds.height),
          blh = _d[0],
          blv = _d[1];

      var factors = [];
      factors.push((tlh + trh) / bounds.width);
      factors.push((blh + brh) / bounds.width);
      factors.push((tlv + blv) / bounds.height);
      factors.push((trv + brv) / bounds.height);
      var maxFactor = Math.max.apply(Math, factors);

      if (maxFactor > 1) {
        tlh /= maxFactor;
        tlv /= maxFactor;
        trh /= maxFactor;
        trv /= maxFactor;
        brh /= maxFactor;
        brv /= maxFactor;
        blh /= maxFactor;
        blv /= maxFactor;
      }

      var topWidth = bounds.width - trh;
      var rightHeight = bounds.height - brv;
      var bottomWidth = bounds.width - brh;
      var leftHeight = bounds.height - blv;
      var borderTopWidth = styles.borderTopWidth;
      var borderRightWidth = styles.borderRightWidth;
      var borderBottomWidth = styles.borderBottomWidth;
      var borderLeftWidth = styles.borderLeftWidth;
      var paddingTop = getAbsoluteValue(styles.paddingTop, element.bounds.width);
      var paddingRight = getAbsoluteValue(styles.paddingRight, element.bounds.width);
      var paddingBottom = getAbsoluteValue(styles.paddingBottom, element.bounds.width);
      var paddingLeft = getAbsoluteValue(styles.paddingLeft, element.bounds.width);
      this.topLeftBorderBox = tlh > 0 || tlv > 0 ? getCurvePoints(bounds.left, bounds.top, tlh, tlv, CORNER.TOP_LEFT) : new Vector(bounds.left, bounds.top);
      this.topRightBorderBox = trh > 0 || trv > 0 ? getCurvePoints(bounds.left + topWidth, bounds.top, trh, trv, CORNER.TOP_RIGHT) : new Vector(bounds.left + bounds.width, bounds.top);
      this.bottomRightBorderBox = brh > 0 || brv > 0 ? getCurvePoints(bounds.left + bottomWidth, bounds.top + rightHeight, brh, brv, CORNER.BOTTOM_RIGHT) : new Vector(bounds.left + bounds.width, bounds.top + bounds.height);
      this.bottomLeftBorderBox = blh > 0 || blv > 0 ? getCurvePoints(bounds.left, bounds.top + leftHeight, blh, blv, CORNER.BOTTOM_LEFT) : new Vector(bounds.left, bounds.top + bounds.height);
      this.topLeftPaddingBox = tlh > 0 || tlv > 0 ? getCurvePoints(bounds.left + borderLeftWidth, bounds.top + borderTopWidth, Math.max(0, tlh - borderLeftWidth), Math.max(0, tlv - borderTopWidth), CORNER.TOP_LEFT) : new Vector(bounds.left + borderLeftWidth, bounds.top + borderTopWidth);
      this.topRightPaddingBox = trh > 0 || trv > 0 ? getCurvePoints(bounds.left + Math.min(topWidth, bounds.width + borderLeftWidth), bounds.top + borderTopWidth, topWidth > bounds.width + borderLeftWidth ? 0 : trh - borderLeftWidth, trv - borderTopWidth, CORNER.TOP_RIGHT) : new Vector(bounds.left + bounds.width - borderRightWidth, bounds.top + borderTopWidth);
      this.bottomRightPaddingBox = brh > 0 || brv > 0 ? getCurvePoints(bounds.left + Math.min(bottomWidth, bounds.width - borderLeftWidth), bounds.top + Math.min(rightHeight, bounds.height + borderTopWidth), Math.max(0, brh - borderRightWidth), brv - borderBottomWidth, CORNER.BOTTOM_RIGHT) : new Vector(bounds.left + bounds.width - borderRightWidth, bounds.top + bounds.height - borderBottomWidth);
      this.bottomLeftPaddingBox = blh > 0 || blv > 0 ? getCurvePoints(bounds.left + borderLeftWidth, bounds.top + leftHeight, Math.max(0, blh - borderLeftWidth), blv - borderBottomWidth, CORNER.BOTTOM_LEFT) : new Vector(bounds.left + borderLeftWidth, bounds.top + bounds.height - borderBottomWidth);
      this.topLeftContentBox = tlh > 0 || tlv > 0 ? getCurvePoints(bounds.left + borderLeftWidth + paddingLeft, bounds.top + borderTopWidth + paddingTop, Math.max(0, tlh - (borderLeftWidth + paddingLeft)), Math.max(0, tlv - (borderTopWidth + paddingTop)), CORNER.TOP_LEFT) : new Vector(bounds.left + borderLeftWidth + paddingLeft, bounds.top + borderTopWidth + paddingTop);
      this.topRightContentBox = trh > 0 || trv > 0 ? getCurvePoints(bounds.left + Math.min(topWidth, bounds.width + borderLeftWidth + paddingLeft), bounds.top + borderTopWidth + paddingTop, topWidth > bounds.width + borderLeftWidth + paddingLeft ? 0 : trh - borderLeftWidth + paddingLeft, trv - (borderTopWidth + paddingTop), CORNER.TOP_RIGHT) : new Vector(bounds.left + bounds.width - (borderRightWidth + paddingRight), bounds.top + borderTopWidth + paddingTop);
      this.bottomRightContentBox = brh > 0 || brv > 0 ? getCurvePoints(bounds.left + Math.min(bottomWidth, bounds.width - (borderLeftWidth + paddingLeft)), bounds.top + Math.min(rightHeight, bounds.height + borderTopWidth + paddingTop), Math.max(0, brh - (borderRightWidth + paddingRight)), brv - (borderBottomWidth + paddingBottom), CORNER.BOTTOM_RIGHT) : new Vector(bounds.left + bounds.width - (borderRightWidth + paddingRight), bounds.top + bounds.height - (borderBottomWidth + paddingBottom));
      this.bottomLeftContentBox = blh > 0 || blv > 0 ? getCurvePoints(bounds.left + borderLeftWidth + paddingLeft, bounds.top + leftHeight, Math.max(0, blh - (borderLeftWidth + paddingLeft)), blv - (borderBottomWidth + paddingBottom), CORNER.BOTTOM_LEFT) : new Vector(bounds.left + borderLeftWidth + paddingLeft, bounds.top + bounds.height - (borderBottomWidth + paddingBottom));
    }

    return BoundCurves;
  }();

  var CORNER;

  (function (CORNER) {
    CORNER[CORNER["TOP_LEFT"] = 0] = "TOP_LEFT";
    CORNER[CORNER["TOP_RIGHT"] = 1] = "TOP_RIGHT";
    CORNER[CORNER["BOTTOM_RIGHT"] = 2] = "BOTTOM_RIGHT";
    CORNER[CORNER["BOTTOM_LEFT"] = 3] = "BOTTOM_LEFT";
  })(CORNER || (CORNER = {}));

  var getCurvePoints = function getCurvePoints(x, y, r1, r2, position) {
    var kappa = 4 * ((Math.sqrt(2) - 1) / 3);
    var ox = r1 * kappa; // control point offset horizontal

    var oy = r2 * kappa; // control point offset vertical

    var xm = x + r1; // x-middle

    var ym = y + r2; // y-middle

    switch (position) {
      case CORNER.TOP_LEFT:
        return new BezierCurve(new Vector(x, ym), new Vector(x, ym - oy), new Vector(xm - ox, y), new Vector(xm, y));

      case CORNER.TOP_RIGHT:
        return new BezierCurve(new Vector(x, y), new Vector(x + ox, y), new Vector(xm, ym - oy), new Vector(xm, ym));

      case CORNER.BOTTOM_RIGHT:
        return new BezierCurve(new Vector(xm, y), new Vector(xm, y + oy), new Vector(x + ox, ym), new Vector(x, ym));

      case CORNER.BOTTOM_LEFT:
      default:
        return new BezierCurve(new Vector(xm, ym), new Vector(xm - ox, ym), new Vector(x, y + oy), new Vector(x, y));
    }
  };

  var calculateBorderBoxPath = function calculateBorderBoxPath(curves) {
    return [curves.topLeftBorderBox, curves.topRightBorderBox, curves.bottomRightBorderBox, curves.bottomLeftBorderBox];
  };

  var calculateContentBoxPath = function calculateContentBoxPath(curves) {
    return [curves.topLeftContentBox, curves.topRightContentBox, curves.bottomRightContentBox, curves.bottomLeftContentBox];
  };

  var calculatePaddingBoxPath = function calculatePaddingBoxPath(curves) {
    return [curves.topLeftPaddingBox, curves.topRightPaddingBox, curves.bottomRightPaddingBox, curves.bottomLeftPaddingBox];
  };

  var TransformEffect =
  /** @class */
  function () {
    function TransformEffect(offsetX, offsetY, matrix) {
      this.type = 0
      /* TRANSFORM */
      ;
      this.offsetX = offsetX;
      this.offsetY = offsetY;
      this.matrix = matrix;
      this.target = 2
      /* BACKGROUND_BORDERS */
      | 4
      /* CONTENT */
      ;
    }

    return TransformEffect;
  }();

  var ClipEffect =
  /** @class */
  function () {
    function ClipEffect(path, target) {
      this.type = 1
      /* CLIP */
      ;
      this.target = target;
      this.path = path;
    }

    return ClipEffect;
  }();

  var isTransformEffect = function isTransformEffect(effect) {
    return effect.type === 0
    /* TRANSFORM */
    ;
  };

  var isClipEffect = function isClipEffect(effect) {
    return effect.type === 1
    /* CLIP */
    ;
  };

  var StackingContext =
  /** @class */
  function () {
    function StackingContext(container) {
      this.element = container;
      this.inlineLevel = [];
      this.nonInlineLevel = [];
      this.negativeZIndex = [];
      this.zeroOrAutoZIndexOrTransformedOrOpacity = [];
      this.positiveZIndex = [];
      this.nonPositionedFloats = [];
      this.nonPositionedInlineLevel = [];
    }

    return StackingContext;
  }();

  var ElementPaint =
  /** @class */
  function () {
    function ElementPaint(element, parentStack) {
      this.container = element;
      this.effects = parentStack.slice(0);
      this.curves = new BoundCurves(element);

      if (element.styles.transform !== null) {
        var offsetX = element.bounds.left + element.styles.transformOrigin[0].number;
        var offsetY = element.bounds.top + element.styles.transformOrigin[1].number;
        var matrix = element.styles.transform;
        this.effects.push(new TransformEffect(offsetX, offsetY, matrix));
      }

      if (element.styles.overflowX !== OVERFLOW.VISIBLE) {
        var borderBox = calculateBorderBoxPath(this.curves);
        var paddingBox = calculatePaddingBoxPath(this.curves);

        if (equalPath(borderBox, paddingBox)) {
          this.effects.push(new ClipEffect(borderBox, 2
          /* BACKGROUND_BORDERS */
          | 4
          /* CONTENT */
          ));
        } else {
          this.effects.push(new ClipEffect(borderBox, 2
          /* BACKGROUND_BORDERS */
          ));
          this.effects.push(new ClipEffect(paddingBox, 4
          /* CONTENT */
          ));
        }
      }
    }

    ElementPaint.prototype.getParentEffects = function () {
      var effects = this.effects.slice(0);

      if (this.container.styles.overflowX !== OVERFLOW.VISIBLE) {
        var borderBox = calculateBorderBoxPath(this.curves);
        var paddingBox = calculatePaddingBoxPath(this.curves);

        if (!equalPath(borderBox, paddingBox)) {
          effects.push(new ClipEffect(paddingBox, 2
          /* BACKGROUND_BORDERS */
          | 4
          /* CONTENT */
          ));
        }
      }

      return effects;
    };

    return ElementPaint;
  }();

  var parseStackTree = function parseStackTree(parent, stackingContext, realStackingContext, listItems) {
    parent.container.elements.forEach(function (child) {
      var treatAsRealStackingContext = contains(child.flags, 4
      /* CREATES_REAL_STACKING_CONTEXT */
      );
      var createsStackingContext = contains(child.flags, 2
      /* CREATES_STACKING_CONTEXT */
      );
      var paintContainer = new ElementPaint(child, parent.getParentEffects());

      if (contains(child.styles.display, 2048
      /* LIST_ITEM */
      )) {
        listItems.push(paintContainer);
      }

      var listOwnerItems = contains(child.flags, 8
      /* IS_LIST_OWNER */
      ) ? [] : listItems;

      if (treatAsRealStackingContext || createsStackingContext) {
        var parentStack = treatAsRealStackingContext || child.styles.isPositioned() ? realStackingContext : stackingContext;
        var stack = new StackingContext(paintContainer);

        if (child.styles.isPositioned() || child.styles.opacity < 1 || child.styles.isTransformed()) {
          var order_1 = child.styles.zIndex.order;

          if (order_1 < 0) {
            var index_1 = 0;
            parentStack.negativeZIndex.some(function (current, i) {
              if (order_1 > current.element.container.styles.zIndex.order) {
                index_1 = i;
                return true;
              }

              return false;
            });
            parentStack.negativeZIndex.splice(index_1, 0, stack);
          } else if (order_1 > 0) {
            var index_2 = 0;
            parentStack.positiveZIndex.some(function (current, i) {
              if (order_1 > current.element.container.styles.zIndex.order) {
                index_2 = i + 1;
                return true;
              }

              return false;
            });
            parentStack.positiveZIndex.splice(index_2, 0, stack);
          } else {
            parentStack.zeroOrAutoZIndexOrTransformedOrOpacity.push(stack);
          }
        } else {
          if (child.styles.isFloating()) {
            parentStack.nonPositionedFloats.push(stack);
          } else {
            parentStack.nonPositionedInlineLevel.push(stack);
          }
        }

        parseStackTree(paintContainer, stack, treatAsRealStackingContext ? stack : realStackingContext, listOwnerItems);
      } else {
        if (child.styles.isInlineLevel()) {
          stackingContext.inlineLevel.push(paintContainer);
        } else {
          stackingContext.nonInlineLevel.push(paintContainer);
        }

        parseStackTree(paintContainer, stackingContext, realStackingContext, listOwnerItems);
      }

      if (contains(child.flags, 8
      /* IS_LIST_OWNER */
      )) {
        processListItems(child, listOwnerItems);
      }
    });
  };

  var processListItems = function processListItems(owner, elements) {
    var numbering = owner instanceof OLElementContainer ? owner.start : 1;
    var reversed = owner instanceof OLElementContainer ? owner.reversed : false;

    for (var i = 0; i < elements.length; i++) {
      var item = elements[i];

      if (item.container instanceof LIElementContainer && typeof item.container.value === 'number' && item.container.value !== 0) {
        numbering = item.container.value;
      }

      item.listValue = createCounterText(numbering, item.container.styles.listStyleType, true);
      numbering += reversed ? -1 : 1;
    }
  };

  var parseStackingContexts = function parseStackingContexts(container) {
    var paintContainer = new ElementPaint(container, []);
    var root = new StackingContext(paintContainer);
    var listItems = [];
    parseStackTree(paintContainer, root, root, listItems);
    processListItems(paintContainer.container, listItems);
    return root;
  };

  var parsePathForBorder = function parsePathForBorder(curves, borderSide) {
    switch (borderSide) {
      case 0:
        return createPathFromCurves(curves.topLeftBorderBox, curves.topLeftPaddingBox, curves.topRightBorderBox, curves.topRightPaddingBox);

      case 1:
        return createPathFromCurves(curves.topRightBorderBox, curves.topRightPaddingBox, curves.bottomRightBorderBox, curves.bottomRightPaddingBox);

      case 2:
        return createPathFromCurves(curves.bottomRightBorderBox, curves.bottomRightPaddingBox, curves.bottomLeftBorderBox, curves.bottomLeftPaddingBox);

      case 3:
      default:
        return createPathFromCurves(curves.bottomLeftBorderBox, curves.bottomLeftPaddingBox, curves.topLeftBorderBox, curves.topLeftPaddingBox);
    }
  };

  var createPathFromCurves = function createPathFromCurves(outer1, inner1, outer2, inner2) {
    var path = [];

    if (isBezierCurve(outer1)) {
      path.push(outer1.subdivide(0.5, false));
    } else {
      path.push(outer1);
    }

    if (isBezierCurve(outer2)) {
      path.push(outer2.subdivide(0.5, true));
    } else {
      path.push(outer2);
    }

    if (isBezierCurve(inner2)) {
      path.push(inner2.subdivide(0.5, true).reverse());
    } else {
      path.push(inner2);
    }

    if (isBezierCurve(inner1)) {
      path.push(inner1.subdivide(0.5, false).reverse());
    } else {
      path.push(inner1);
    }

    return path;
  };

  var paddingBox = function paddingBox(element) {
    var bounds = element.bounds;
    var styles = element.styles;
    return bounds.add(styles.borderLeftWidth, styles.borderTopWidth, -(styles.borderRightWidth + styles.borderLeftWidth), -(styles.borderTopWidth + styles.borderBottomWidth));
  };

  var contentBox = function contentBox(element) {
    var styles = element.styles;
    var bounds = element.bounds;
    var paddingLeft = getAbsoluteValue(styles.paddingLeft, bounds.width);
    var paddingRight = getAbsoluteValue(styles.paddingRight, bounds.width);
    var paddingTop = getAbsoluteValue(styles.paddingTop, bounds.width);
    var paddingBottom = getAbsoluteValue(styles.paddingBottom, bounds.width);
    return bounds.add(paddingLeft + styles.borderLeftWidth, paddingTop + styles.borderTopWidth, -(styles.borderRightWidth + styles.borderLeftWidth + paddingLeft + paddingRight), -(styles.borderTopWidth + styles.borderBottomWidth + paddingTop + paddingBottom));
  };

  var calculateBackgroundPositioningArea = function calculateBackgroundPositioningArea(backgroundOrigin, element) {
    if (backgroundOrigin === 0
    /* BORDER_BOX */
    ) {
      return element.bounds;
    }

    if (backgroundOrigin === 2
    /* CONTENT_BOX */
    ) {
      return contentBox(element);
    }

    return paddingBox(element);
  };

  var calculateBackgroundPaintingArea = function calculateBackgroundPaintingArea(backgroundClip, element) {
    if (backgroundClip === BACKGROUND_CLIP.BORDER_BOX) {
      return element.bounds;
    }

    if (backgroundClip === BACKGROUND_CLIP.CONTENT_BOX) {
      return contentBox(element);
    }

    return paddingBox(element);
  };

  var calculateBackgroundRendering = function calculateBackgroundRendering(container, index, intrinsicSize) {
    var backgroundPositioningArea = calculateBackgroundPositioningArea(getBackgroundValueForIndex(container.styles.backgroundOrigin, index), container);
    var backgroundPaintingArea = calculateBackgroundPaintingArea(getBackgroundValueForIndex(container.styles.backgroundClip, index), container);
    var backgroundImageSize = calculateBackgroundSize(getBackgroundValueForIndex(container.styles.backgroundSize, index), intrinsicSize, backgroundPositioningArea);
    var sizeWidth = backgroundImageSize[0],
        sizeHeight = backgroundImageSize[1];
    var position = getAbsoluteValueForTuple(getBackgroundValueForIndex(container.styles.backgroundPosition, index), backgroundPositioningArea.width - sizeWidth, backgroundPositioningArea.height - sizeHeight);
    var path = calculateBackgroundRepeatPath(getBackgroundValueForIndex(container.styles.backgroundRepeat, index), position, backgroundImageSize, backgroundPositioningArea, backgroundPaintingArea);
    var offsetX = Math.round(backgroundPositioningArea.left + position[0]);
    var offsetY = Math.round(backgroundPositioningArea.top + position[1]);
    return [path, offsetX, offsetY, sizeWidth, sizeHeight];
  };

  var isAuto = function isAuto(token) {
    return isIdentToken(token) && token.value === BACKGROUND_SIZE.AUTO;
  };

  var hasIntrinsicValue = function hasIntrinsicValue(value) {
    return typeof value === 'number';
  };

  var calculateBackgroundSize = function calculateBackgroundSize(size, _a, bounds) {
    var intrinsicWidth = _a[0],
        intrinsicHeight = _a[1],
        intrinsicProportion = _a[2];
    var first = size[0],
        second = size[1];

    if (isLengthPercentage(first) && second && isLengthPercentage(second)) {
      return [getAbsoluteValue(first, bounds.width), getAbsoluteValue(second, bounds.height)];
    }

    var hasIntrinsicProportion = hasIntrinsicValue(intrinsicProportion);

    if (isIdentToken(first) && (first.value === BACKGROUND_SIZE.CONTAIN || first.value === BACKGROUND_SIZE.COVER)) {
      if (hasIntrinsicValue(intrinsicProportion)) {
        var targetRatio = bounds.width / bounds.height;
        return targetRatio < intrinsicProportion !== (first.value === BACKGROUND_SIZE.COVER) ? [bounds.width, bounds.width / intrinsicProportion] : [bounds.height * intrinsicProportion, bounds.height];
      }

      return [bounds.width, bounds.height];
    }

    var hasIntrinsicWidth = hasIntrinsicValue(intrinsicWidth);
    var hasIntrinsicHeight = hasIntrinsicValue(intrinsicHeight);
    var hasIntrinsicDimensions = hasIntrinsicWidth || hasIntrinsicHeight; // If the background-size is auto or auto auto:

    if (isAuto(first) && (!second || isAuto(second))) {
      // If the image has both horizontal and vertical intrinsic dimensions, it's rendered at that size.
      if (hasIntrinsicWidth && hasIntrinsicHeight) {
        return [intrinsicWidth, intrinsicHeight];
      } // If the image has no intrinsic dimensions and has no intrinsic proportions,
      // it's rendered at the size of the background positioning area.


      if (!hasIntrinsicProportion && !hasIntrinsicDimensions) {
        return [bounds.width, bounds.height];
      } // TODO If the image has no intrinsic dimensions but has intrinsic proportions, it's rendered as if contain had been specified instead.
      // If the image has only one intrinsic dimension and has intrinsic proportions, it's rendered at the size corresponding to that one dimension.
      // The other dimension is computed using the specified dimension and the intrinsic proportions.


      if (hasIntrinsicDimensions && hasIntrinsicProportion) {
        var width_1 = hasIntrinsicWidth ? intrinsicWidth : intrinsicHeight * intrinsicProportion;
        var height_1 = hasIntrinsicHeight ? intrinsicHeight : intrinsicWidth / intrinsicProportion;
        return [width_1, height_1];
      } // If the image has only one intrinsic dimension but has no intrinsic proportions,
      // it's rendered using the specified dimension and the other dimension of the background positioning area.


      var width_2 = hasIntrinsicWidth ? intrinsicWidth : bounds.width;
      var height_2 = hasIntrinsicHeight ? intrinsicHeight : bounds.height;
      return [width_2, height_2];
    } // If the image has intrinsic proportions, it's stretched to the specified dimension.
    // The unspecified dimension is computed using the specified dimension and the intrinsic proportions.


    if (hasIntrinsicProportion) {
      var width_3 = 0;
      var height_3 = 0;

      if (isLengthPercentage(first)) {
        width_3 = getAbsoluteValue(first, bounds.width);
      } else if (isLengthPercentage(second)) {
        height_3 = getAbsoluteValue(second, bounds.height);
      }

      if (isAuto(first)) {
        width_3 = height_3 * intrinsicProportion;
      } else if (!second || isAuto(second)) {
        height_3 = width_3 / intrinsicProportion;
      }

      return [width_3, height_3];
    } // If the image has no intrinsic proportions, it's stretched to the specified dimension.
    // The unspecified dimension is computed using the image's corresponding intrinsic dimension,
    // if there is one. If there is no such intrinsic dimension,
    // it becomes the corresponding dimension of the background positioning area.


    var width = null;
    var height = null;

    if (isLengthPercentage(first)) {
      width = getAbsoluteValue(first, bounds.width);
    } else if (second && isLengthPercentage(second)) {
      height = getAbsoluteValue(second, bounds.height);
    }

    if (width !== null && (!second || isAuto(second))) {
      height = hasIntrinsicWidth && hasIntrinsicHeight ? width / intrinsicWidth * intrinsicHeight : bounds.height;
    }

    if (height !== null && isAuto(first)) {
      width = hasIntrinsicWidth && hasIntrinsicHeight ? height / intrinsicHeight * intrinsicWidth : bounds.width;
    }

    if (width !== null && height !== null) {
      return [width, height];
    }

    throw new Error("Unable to calculate background-size for element");
  };

  var getBackgroundValueForIndex = function getBackgroundValueForIndex(values, index) {
    var value = values[index];

    if (typeof value === 'undefined') {
      return values[0];
    }

    return value;
  };

  var calculateBackgroundRepeatPath = function calculateBackgroundRepeatPath(repeat, _a, _b, backgroundPositioningArea, backgroundPaintingArea) {
    var x = _a[0],
        y = _a[1];
    var width = _b[0],
        height = _b[1];

    switch (repeat) {
      case BACKGROUND_REPEAT.REPEAT_X:
        return [new Vector(Math.round(backgroundPositioningArea.left), Math.round(backgroundPositioningArea.top + y)), new Vector(Math.round(backgroundPositioningArea.left + backgroundPositioningArea.width), Math.round(backgroundPositioningArea.top + y)), new Vector(Math.round(backgroundPositioningArea.left + backgroundPositioningArea.width), Math.round(height + backgroundPositioningArea.top + y)), new Vector(Math.round(backgroundPositioningArea.left), Math.round(height + backgroundPositioningArea.top + y))];

      case BACKGROUND_REPEAT.REPEAT_Y:
        return [new Vector(Math.round(backgroundPositioningArea.left + x), Math.round(backgroundPositioningArea.top)), new Vector(Math.round(backgroundPositioningArea.left + x + width), Math.round(backgroundPositioningArea.top)), new Vector(Math.round(backgroundPositioningArea.left + x + width), Math.round(backgroundPositioningArea.height + backgroundPositioningArea.top)), new Vector(Math.round(backgroundPositioningArea.left + x), Math.round(backgroundPositioningArea.height + backgroundPositioningArea.top))];

      case BACKGROUND_REPEAT.NO_REPEAT:
        return [new Vector(Math.round(backgroundPositioningArea.left + x), Math.round(backgroundPositioningArea.top + y)), new Vector(Math.round(backgroundPositioningArea.left + x + width), Math.round(backgroundPositioningArea.top + y)), new Vector(Math.round(backgroundPositioningArea.left + x + width), Math.round(backgroundPositioningArea.top + y + height)), new Vector(Math.round(backgroundPositioningArea.left + x), Math.round(backgroundPositioningArea.top + y + height))];

      default:
        return [new Vector(Math.round(backgroundPaintingArea.left), Math.round(backgroundPaintingArea.top)), new Vector(Math.round(backgroundPaintingArea.left + backgroundPaintingArea.width), Math.round(backgroundPaintingArea.top)), new Vector(Math.round(backgroundPaintingArea.left + backgroundPaintingArea.width), Math.round(backgroundPaintingArea.height + backgroundPaintingArea.top)), new Vector(Math.round(backgroundPaintingArea.left), Math.round(backgroundPaintingArea.height + backgroundPaintingArea.top))];
    }
  };

  var SMALL_IMAGE = 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7';
  var SAMPLE_TEXT = 'Hidden Text';

  var FontMetrics =
  /** @class */
  function () {
    function FontMetrics(document) {
      this._data = {};
      this._document = document;
    }

    FontMetrics.prototype.parseMetrics = function (fontFamily, fontSize) {
      var container = this._document.createElement('div');

      var img = this._document.createElement('img');

      var span = this._document.createElement('span');

      var body = this._document.body;
      container.style.visibility = 'hidden';
      container.style.fontFamily = fontFamily;
      container.style.fontSize = fontSize;
      container.style.margin = '0';
      container.style.padding = '0';
      body.appendChild(container);
      img.src = SMALL_IMAGE;
      img.width = 1;
      img.height = 1;
      img.style.margin = '0';
      img.style.padding = '0';
      img.style.verticalAlign = 'baseline';
      span.style.fontFamily = fontFamily;
      span.style.fontSize = fontSize;
      span.style.margin = '0';
      span.style.padding = '0';
      span.appendChild(this._document.createTextNode(SAMPLE_TEXT));
      container.appendChild(span);
      container.appendChild(img);
      var baseline = img.offsetTop - span.offsetTop + 2;
      container.removeChild(span);
      container.appendChild(this._document.createTextNode(SAMPLE_TEXT));
      container.style.lineHeight = 'normal';
      img.style.verticalAlign = 'super';
      var middle = img.offsetTop - container.offsetTop + 2;
      body.removeChild(container);
      return {
        baseline: baseline,
        middle: middle
      };
    };

    FontMetrics.prototype.getMetrics = function (fontFamily, fontSize) {
      var key = fontFamily + " " + fontSize;

      if (typeof this._data[key] === 'undefined') {
        this._data[key] = this.parseMetrics(fontFamily, fontSize);
      }

      return this._data[key];
    };

    return FontMetrics;
  }();

  var MASK_OFFSET = 10000;

  var CanvasRenderer =
  /** @class */
  function () {
    function CanvasRenderer(options) {
      this._activeEffects = [];
      this.canvas = options.canvas ? options.canvas : document.createElement('canvas');
      this.ctx = this.canvas.getContext('2d');
      this.options = options;
      this.canvas.width = Math.floor(options.width * options.scale);
      this.canvas.height = Math.floor(options.height * options.scale);
      this.canvas.style.width = options.width + "px";
      this.canvas.style.height = options.height + "px";
      this.fontMetrics = new FontMetrics(document);
      this.ctx.scale(this.options.scale, this.options.scale);
      this.ctx.translate(-options.x + options.scrollX, -options.y + options.scrollY);
      this.ctx.textBaseline = 'bottom';
      this._activeEffects = [];
      Logger.getInstance(options.id).debug("Canvas renderer initialized (" + options.width + "x" + options.height + " at " + options.x + "," + options.y + ") with scale " + options.scale);
    }

    CanvasRenderer.prototype.applyEffects = function (effects, target) {
      var _this = this;

      while (this._activeEffects.length) {
        this.popEffect();
      }

      effects.filter(function (effect) {
        return contains(effect.target, target);
      }).forEach(function (effect) {
        return _this.applyEffect(effect);
      });
    };

    CanvasRenderer.prototype.applyEffect = function (effect) {
      this.ctx.save();

      if (isTransformEffect(effect)) {
        this.ctx.translate(effect.offsetX, effect.offsetY);
        this.ctx.transform(effect.matrix[0], effect.matrix[1], effect.matrix[2], effect.matrix[3], effect.matrix[4], effect.matrix[5]);
        this.ctx.translate(-effect.offsetX, -effect.offsetY);
      }

      if (isClipEffect(effect)) {
        this.path(effect.path);
        this.ctx.clip();
      }

      this._activeEffects.push(effect);
    };

    CanvasRenderer.prototype.popEffect = function () {
      this._activeEffects.pop();

      this.ctx.restore();
    };

    CanvasRenderer.prototype.renderStack = function (stack) {
      return __awaiter(this, void 0, void 0, function () {
        var styles;
        return __generator(this, function (_a) {
          switch (_a.label) {
            case 0:
              styles = stack.element.container.styles;
              if (!styles.isVisible()) return [3
              /*break*/
              , 2];
              this.ctx.globalAlpha = styles.opacity;
              return [4
              /*yield*/
              , this.renderStackContent(stack)];

            case 1:
              _a.sent();

              _a.label = 2;

            case 2:
              return [2
              /*return*/
              ];
          }
        });
      });
    };

    CanvasRenderer.prototype.renderNode = function (paint) {
      return __awaiter(this, void 0, void 0, function () {
        return __generator(this, function (_a) {
          switch (_a.label) {
            case 0:
              if (!paint.container.styles.isVisible()) return [3
              /*break*/
              , 3];
              return [4
              /*yield*/
              , this.renderNodeBackgroundAndBorders(paint)];

            case 1:
              _a.sent();

              return [4
              /*yield*/
              , this.renderNodeContent(paint)];

            case 2:
              _a.sent();

              _a.label = 3;

            case 3:
              return [2
              /*return*/
              ];
          }
        });
      });
    };

    CanvasRenderer.prototype.renderTextWithLetterSpacing = function (text, letterSpacing) {
      var _this = this;

      if (letterSpacing === 0) {
        this.ctx.fillText(text.text, text.bounds.left, text.bounds.top + text.bounds.height);
      } else {
        var letters = toCodePoints(text.text).map(function (i) {
          return fromCodePoint(i);
        });
        letters.reduce(function (left, letter) {
          _this.ctx.fillText(letter, left, text.bounds.top + text.bounds.height);

          return left + _this.ctx.measureText(letter).width;
        }, text.bounds.left);
      }
    };

    CanvasRenderer.prototype.createFontStyle = function (styles) {
      var fontVariant = styles.fontVariant.filter(function (variant) {
        return variant === 'normal' || variant === 'small-caps';
      }).join('');
      var fontFamily = styles.fontFamily.join(', ');
      var fontSize = isDimensionToken(styles.fontSize) ? "" + styles.fontSize.number + styles.fontSize.unit : styles.fontSize.number + "px";
      return [[styles.fontStyle, fontVariant, styles.fontWeight, fontSize, fontFamily].join(' '), fontFamily, fontSize];
    };

    CanvasRenderer.prototype.renderTextNode = function (text, styles) {
      return __awaiter(this, void 0, void 0, function () {
        var _a, font, fontFamily, fontSize;

        var _this = this;

        return __generator(this, function (_b) {
          _a = this.createFontStyle(styles), font = _a[0], fontFamily = _a[1], fontSize = _a[2];
          this.ctx.font = font;
          text.textBounds.forEach(function (text) {
            _this.ctx.fillStyle = asString(styles.color);

            _this.renderTextWithLetterSpacing(text, styles.letterSpacing);

            var textShadows = styles.textShadow;

            if (textShadows.length && text.text.trim().length) {
              textShadows.slice(0).reverse().forEach(function (textShadow) {
                _this.ctx.shadowColor = asString(textShadow.color);
                _this.ctx.shadowOffsetX = textShadow.offsetX.number * _this.options.scale;
                _this.ctx.shadowOffsetY = textShadow.offsetY.number * _this.options.scale;
                _this.ctx.shadowBlur = textShadow.blur.number;

                _this.ctx.fillText(text.text, text.bounds.left, text.bounds.top + text.bounds.height);
              });
              _this.ctx.shadowColor = '';
              _this.ctx.shadowOffsetX = 0;
              _this.ctx.shadowOffsetY = 0;
              _this.ctx.shadowBlur = 0;
            }

            if (styles.textDecorationLine.length) {
              _this.ctx.fillStyle = asString(styles.textDecorationColor || styles.color);
              styles.textDecorationLine.forEach(function (textDecorationLine) {
                switch (textDecorationLine) {
                  case 1
                  /* UNDERLINE */
                  :
                    // Draws a line at the baseline of the font
                    // TODO As some browsers display the line as more than 1px if the font-size is big,
                    // need to take that into account both in position and size
                    var baseline = _this.fontMetrics.getMetrics(fontFamily, fontSize).baseline;

                    _this.ctx.fillRect(text.bounds.left, Math.round(text.bounds.top + baseline), text.bounds.width, 1);

                    break;

                  case 2
                  /* OVERLINE */
                  :
                    _this.ctx.fillRect(text.bounds.left, Math.round(text.bounds.top), text.bounds.width, 1);

                    break;

                  case 3
                  /* LINE_THROUGH */
                  :
                    // TODO try and find exact position for line-through
                    var middle = _this.fontMetrics.getMetrics(fontFamily, fontSize).middle;

                    _this.ctx.fillRect(text.bounds.left, Math.ceil(text.bounds.top + middle), text.bounds.width, 1);

                    break;
                }
              });
            }
          });
          return [2
          /*return*/
          ];
        });
      });
    };

    CanvasRenderer.prototype.renderReplacedElement = function (container, curves, image) {
      if (image && container.intrinsicWidth > 0 && container.intrinsicHeight > 0) {
        var box = contentBox(container);
        var path = calculatePaddingBoxPath(curves);
        this.path(path);
        this.ctx.save();
        this.ctx.clip();
        this.ctx.drawImage(image, 0, 0, container.intrinsicWidth, container.intrinsicHeight, box.left, box.top, box.width, box.height);
        this.ctx.restore();
      }
    };

    CanvasRenderer.prototype.renderNodeContent = function (paint) {
      return __awaiter(this, void 0, void 0, function () {
        var container, curves, styles, _i, _a, child, image, e_1, image, e_2, iframeRenderer, canvas, size, bounds, x, textBounds, img, image, url, e_3, bounds;

        return __generator(this, function (_b) {
          switch (_b.label) {
            case 0:
              this.applyEffects(paint.effects, 4
              /* CONTENT */
              );
              container = paint.container;
              curves = paint.curves;
              styles = container.styles;
              _i = 0, _a = container.textNodes;
              _b.label = 1;

            case 1:
              if (!(_i < _a.length)) return [3
              /*break*/
              , 4];
              child = _a[_i];
              return [4
              /*yield*/
              , this.renderTextNode(child, styles)];

            case 2:
              _b.sent();

              _b.label = 3;

            case 3:
              _i++;
              return [3
              /*break*/
              , 1];

            case 4:
              if (!(container instanceof ImageElementContainer)) return [3
              /*break*/
              , 8];
              _b.label = 5;

            case 5:
              _b.trys.push([5, 7,, 8]);

              return [4
              /*yield*/
              , this.options.cache.match(container.src)];

            case 6:
              image = _b.sent();
              this.renderReplacedElement(container, curves, image);
              return [3
              /*break*/
              , 8];

            case 7:
              e_1 = _b.sent();
              Logger.getInstance(this.options.id).error("Error loading image " + container.src);
              return [3
              /*break*/
              , 8];

            case 8:
              if (container instanceof CanvasElementContainer) {
                this.renderReplacedElement(container, curves, container.canvas);
              }

              if (!(container instanceof SVGElementContainer)) return [3
              /*break*/
              , 12];
              _b.label = 9;

            case 9:
              _b.trys.push([9, 11,, 12]);

              return [4
              /*yield*/
              , this.options.cache.match(container.svg)];

            case 10:
              image = _b.sent();
              this.renderReplacedElement(container, curves, image);
              return [3
              /*break*/
              , 12];

            case 11:
              e_2 = _b.sent();
              Logger.getInstance(this.options.id).error("Error loading svg " + container.svg.substring(0, 255));
              return [3
              /*break*/
              , 12];

            case 12:
              if (!(container instanceof IFrameElementContainer && container.tree)) return [3
              /*break*/
              , 14];
              iframeRenderer = new CanvasRenderer({
                id: this.options.id,
                scale: this.options.scale,
                backgroundColor: container.backgroundColor,
                x: 0,
                y: 0,
                scrollX: 0,
                scrollY: 0,
                width: container.width,
                height: container.height,
                cache: this.options.cache,
                windowWidth: container.width,
                windowHeight: container.height
              });
              return [4
              /*yield*/
              , iframeRenderer.render(container.tree)];

            case 13:
              canvas = _b.sent();
              this.ctx.drawImage(canvas, 0, 0, container.width, container.width, container.bounds.left, container.bounds.top, container.bounds.width, container.bounds.height);
              _b.label = 14;

            case 14:
              if (container instanceof InputElementContainer) {
                size = Math.min(container.bounds.width, container.bounds.height);

                if (container.type === CHECKBOX) {
                  if (container.checked) {
                    this.ctx.save();
                    this.path([new Vector(container.bounds.left + size * 0.39363, container.bounds.top + size * 0.79), new Vector(container.bounds.left + size * 0.16, container.bounds.top + size * 0.5549), new Vector(container.bounds.left + size * 0.27347, container.bounds.top + size * 0.44071), new Vector(container.bounds.left + size * 0.39694, container.bounds.top + size * 0.5649), new Vector(container.bounds.left + size * 0.72983, container.bounds.top + size * 0.23), new Vector(container.bounds.left + size * 0.84, container.bounds.top + size * 0.34085), new Vector(container.bounds.left + size * 0.39363, container.bounds.top + size * 0.79)]);
                    this.ctx.fillStyle = asString(INPUT_COLOR);
                    this.ctx.fill();
                    this.ctx.restore();
                  }
                } else if (container.type === RADIO) {
                  if (container.checked) {
                    this.ctx.save();
                    this.ctx.beginPath();
                    this.ctx.arc(container.bounds.left + size / 2, container.bounds.top + size / 2, size / 4, 0, Math.PI * 2, true);
                    this.ctx.fillStyle = asString(INPUT_COLOR);
                    this.ctx.fill();
                    this.ctx.restore();
                  }
                }
              }

              if (isTextInputElement(container) && container.value.length) {
                this.ctx.font = this.createFontStyle(styles)[0];
                this.ctx.fillStyle = asString(styles.color);
                this.ctx.textBaseline = 'middle';
                this.ctx.textAlign = canvasTextAlign(container.styles.textAlign);
                bounds = contentBox(container);
                x = 0;

                switch (container.styles.textAlign) {
                  case TEXT_ALIGN.CENTER:
                    x += bounds.width / 2;
                    break;

                  case TEXT_ALIGN.RIGHT:
                    x += bounds.width;
                    break;
                }

                textBounds = bounds.add(x, 0, 0, -bounds.height / 2 + 1);
                this.ctx.save();
                this.path([new Vector(bounds.left, bounds.top), new Vector(bounds.left + bounds.width, bounds.top), new Vector(bounds.left + bounds.width, bounds.top + bounds.height), new Vector(bounds.left, bounds.top + bounds.height)]);
                this.ctx.clip();
                this.renderTextWithLetterSpacing(new TextBounds(container.value, textBounds), styles.letterSpacing);
                this.ctx.restore();
                this.ctx.textBaseline = 'bottom';
                this.ctx.textAlign = 'left';
              }

              if (!contains(container.styles.display, 2048
              /* LIST_ITEM */
              )) return [3
              /*break*/
              , 20];
              if (!(container.styles.listStyleImage !== null)) return [3
              /*break*/
              , 19];
              img = container.styles.listStyleImage;
              if (!(img.type === CSSImageType.URL)) return [3
              /*break*/
              , 18];
              image = void 0;
              url = img.url;
              _b.label = 15;

            case 15:
              _b.trys.push([15, 17,, 18]);

              return [4
              /*yield*/
              , this.options.cache.match(url)];

            case 16:
              image = _b.sent();
              this.ctx.drawImage(image, container.bounds.left - (image.width + 10), container.bounds.top);
              return [3
              /*break*/
              , 18];

            case 17:
              e_3 = _b.sent();
              Logger.getInstance(this.options.id).error("Error loading list-style-image " + url);
              return [3
              /*break*/
              , 18];

            case 18:
              return [3
              /*break*/
              , 20];

            case 19:
              if (paint.listValue && container.styles.listStyleType !== LIST_STYLE_TYPE.NONE) {
                this.ctx.font = this.createFontStyle(styles)[0];
                this.ctx.fillStyle = asString(styles.color);
                this.ctx.textBaseline = 'middle';
                this.ctx.textAlign = 'right';
                bounds = new Bounds(container.bounds.left, container.bounds.top + getAbsoluteValue(container.styles.paddingTop, container.bounds.width), container.bounds.width, computeLineHeight(styles.lineHeight, styles.fontSize.number) / 2 + 1);
                this.renderTextWithLetterSpacing(new TextBounds(paint.listValue, bounds), styles.letterSpacing);
                this.ctx.textBaseline = 'bottom';
                this.ctx.textAlign = 'left';
              }

              _b.label = 20;

            case 20:
              return [2
              /*return*/
              ];
          }
        });
      });
    };

    CanvasRenderer.prototype.renderStackContent = function (stack) {
      return __awaiter(this, void 0, void 0, function () {
        var _i, _a, child, _b, _c, child, _d, _e, child, _f, _g, child, _h, _j, child, _k, _l, child, _m, _o, child;

        return __generator(this, function (_p) {
          switch (_p.label) {
            case 0:
              // https://www.w3.org/TR/css-position-3/#painting-order
              // 1. the background and borders of the element forming the stacking context.
              return [4
              /*yield*/
              , this.renderNodeBackgroundAndBorders(stack.element)];

            case 1:
              // https://www.w3.org/TR/css-position-3/#painting-order
              // 1. the background and borders of the element forming the stacking context.
              _p.sent();

              _i = 0, _a = stack.negativeZIndex;
              _p.label = 2;

            case 2:
              if (!(_i < _a.length)) return [3
              /*break*/
              , 5];
              child = _a[_i];
              return [4
              /*yield*/
              , this.renderStack(child)];

            case 3:
              _p.sent();

              _p.label = 4;

            case 4:
              _i++;
              return [3
              /*break*/
              , 2];

            case 5:
              // 3. For all its in-flow, non-positioned, block-level descendants in tree order:
              return [4
              /*yield*/
              , this.renderNodeContent(stack.element)];

            case 6:
              // 3. For all its in-flow, non-positioned, block-level descendants in tree order:
              _p.sent();

              _b = 0, _c = stack.nonInlineLevel;
              _p.label = 7;

            case 7:
              if (!(_b < _c.length)) return [3
              /*break*/
              , 10];
              child = _c[_b];
              return [4
              /*yield*/
              , this.renderNode(child)];

            case 8:
              _p.sent();

              _p.label = 9;

            case 9:
              _b++;
              return [3
              /*break*/
              , 7];

            case 10:
              _d = 0, _e = stack.nonPositionedFloats;
              _p.label = 11;

            case 11:
              if (!(_d < _e.length)) return [3
              /*break*/
              , 14];
              child = _e[_d];
              return [4
              /*yield*/
              , this.renderStack(child)];

            case 12:
              _p.sent();

              _p.label = 13;

            case 13:
              _d++;
              return [3
              /*break*/
              , 11];

            case 14:
              _f = 0, _g = stack.nonPositionedInlineLevel;
              _p.label = 15;

            case 15:
              if (!(_f < _g.length)) return [3
              /*break*/
              , 18];
              child = _g[_f];
              return [4
              /*yield*/
              , this.renderStack(child)];

            case 16:
              _p.sent();

              _p.label = 17;

            case 17:
              _f++;
              return [3
              /*break*/
              , 15];

            case 18:
              _h = 0, _j = stack.inlineLevel;
              _p.label = 19;

            case 19:
              if (!(_h < _j.length)) return [3
              /*break*/
              , 22];
              child = _j[_h];
              return [4
              /*yield*/
              , this.renderNode(child)];

            case 20:
              _p.sent();

              _p.label = 21;

            case 21:
              _h++;
              return [3
              /*break*/
              , 19];

            case 22:
              _k = 0, _l = stack.zeroOrAutoZIndexOrTransformedOrOpacity;
              _p.label = 23;

            case 23:
              if (!(_k < _l.length)) return [3
              /*break*/
              , 26];
              child = _l[_k];
              return [4
              /*yield*/
              , this.renderStack(child)];

            case 24:
              _p.sent();

              _p.label = 25;

            case 25:
              _k++;
              return [3
              /*break*/
              , 23];

            case 26:
              _m = 0, _o = stack.positiveZIndex;
              _p.label = 27;

            case 27:
              if (!(_m < _o.length)) return [3
              /*break*/
              , 30];
              child = _o[_m];
              return [4
              /*yield*/
              , this.renderStack(child)];

            case 28:
              _p.sent();

              _p.label = 29;

            case 29:
              _m++;
              return [3
              /*break*/
              , 27];

            case 30:
              return [2
              /*return*/
              ];
          }
        });
      });
    };

    CanvasRenderer.prototype.mask = function (paths) {
      this.ctx.beginPath();
      this.ctx.moveTo(0, 0);
      this.ctx.lineTo(this.canvas.width, 0);
      this.ctx.lineTo(this.canvas.width, this.canvas.height);
      this.ctx.lineTo(0, this.canvas.height);
      this.ctx.lineTo(0, 0);
      this.formatPath(paths.slice(0).reverse());
      this.ctx.closePath();
    };

    CanvasRenderer.prototype.path = function (paths) {
      this.ctx.beginPath();
      this.formatPath(paths);
      this.ctx.closePath();
    };

    CanvasRenderer.prototype.formatPath = function (paths) {
      var _this = this;

      paths.forEach(function (point, index) {
        var start = isBezierCurve(point) ? point.start : point;

        if (index === 0) {
          _this.ctx.moveTo(start.x, start.y);
        } else {
          _this.ctx.lineTo(start.x, start.y);
        }

        if (isBezierCurve(point)) {
          _this.ctx.bezierCurveTo(point.startControl.x, point.startControl.y, point.endControl.x, point.endControl.y, point.end.x, point.end.y);
        }
      });
    };

    CanvasRenderer.prototype.renderRepeat = function (path, pattern, offsetX, offsetY) {
      this.path(path);
      this.ctx.fillStyle = pattern;
      this.ctx.translate(offsetX, offsetY);
      this.ctx.fill();
      this.ctx.translate(-offsetX, -offsetY);
    };

    CanvasRenderer.prototype.resizeImage = function (image, width, height) {
      if (image.width === width && image.height === height) {
        return image;
      }

      var canvas = this.canvas.ownerDocument.createElement('canvas');
      canvas.width = width;
      canvas.height = height;
      var ctx = canvas.getContext('2d');
      ctx.drawImage(image, 0, 0, image.width, image.height, 0, 0, width, height);
      return canvas;
    };

    CanvasRenderer.prototype.renderBackgroundImage = function (container) {
      return __awaiter(this, void 0, void 0, function () {
        var index, _loop_1, this_1, _i, _a, backgroundImage;

        return __generator(this, function (_b) {
          switch (_b.label) {
            case 0:
              index = container.styles.backgroundImage.length - 1;

              _loop_1 = function _loop_1(backgroundImage) {
                var image, url, e_4, _a, path, x, y, width, height, pattern, _b, path, x, y, width, height, _c, lineLength, x0, x1, y0, y1, canvas, ctx, gradient_1, pattern, _d, path, left, top_1, width, height, position, x, y, _e, rx, ry, radialGradient_1, midX, midY, f, invF;

                return __generator(this, function (_f) {
                  switch (_f.label) {
                    case 0:
                      if (!(backgroundImage.type === CSSImageType.URL)) return [3
                      /*break*/
                      , 5];
                      image = void 0;
                      url = backgroundImage.url;
                      _f.label = 1;

                    case 1:
                      _f.trys.push([1, 3,, 4]);

                      return [4
                      /*yield*/
                      , this_1.options.cache.match(url)];

                    case 2:
                      image = _f.sent();
                      return [3
                      /*break*/
                      , 4];

                    case 3:
                      e_4 = _f.sent();
                      Logger.getInstance(this_1.options.id).error("Error loading background-image " + url);
                      return [3
                      /*break*/
                      , 4];

                    case 4:
                      if (image) {
                        _a = calculateBackgroundRendering(container, index, [image.width, image.height, image.width / image.height]), path = _a[0], x = _a[1], y = _a[2], width = _a[3], height = _a[4];
                        pattern = this_1.ctx.createPattern(this_1.resizeImage(image, width, height), 'repeat');
                        this_1.renderRepeat(path, pattern, x, y);
                      }

                      return [3
                      /*break*/
                      , 6];

                    case 5:
                      if (isLinearGradient(backgroundImage)) {
                        _b = calculateBackgroundRendering(container, index, [null, null, null]), path = _b[0], x = _b[1], y = _b[2], width = _b[3], height = _b[4];
                        _c = calculateGradientDirection(backgroundImage.angle, width, height), lineLength = _c[0], x0 = _c[1], x1 = _c[2], y0 = _c[3], y1 = _c[4];
                        canvas = document.createElement('canvas');
                        canvas.width = width;
                        canvas.height = height;
                        ctx = canvas.getContext('2d');
                        gradient_1 = ctx.createLinearGradient(x0, y0, x1, y1);
                        processColorStops(backgroundImage.stops, lineLength).forEach(function (colorStop) {
                          return gradient_1.addColorStop(colorStop.stop, asString(colorStop.color));
                        });
                        ctx.fillStyle = gradient_1;
                        ctx.fillRect(0, 0, width, height);
                        pattern = this_1.ctx.createPattern(canvas, 'repeat');
                        this_1.renderRepeat(path, pattern, x, y);
                      } else if (isRadialGradient(backgroundImage)) {
                        _d = calculateBackgroundRendering(container, index, [null, null, null]), path = _d[0], left = _d[1], top_1 = _d[2], width = _d[3], height = _d[4];
                        position = backgroundImage.position.length === 0 ? [FIFTY_PERCENT] : backgroundImage.position;
                        x = getAbsoluteValue(position[0], width);
                        y = getAbsoluteValue(position[position.length - 1], height);
                        _e = calculateRadius(backgroundImage, x, y, width, height), rx = _e[0], ry = _e[1];

                        if (rx > 0 && rx > 0) {
                          radialGradient_1 = this_1.ctx.createRadialGradient(left + x, top_1 + y, 0, left + x, top_1 + y, rx);
                          processColorStops(backgroundImage.stops, rx * 2).forEach(function (colorStop) {
                            return radialGradient_1.addColorStop(colorStop.stop, asString(colorStop.color));
                          });
                          this_1.path(path);
                          this_1.ctx.fillStyle = radialGradient_1;

                          if (rx !== ry) {
                            midX = container.bounds.left + 0.5 * container.bounds.width;
                            midY = container.bounds.top + 0.5 * container.bounds.height;
                            f = ry / rx;
                            invF = 1 / f;
                            this_1.ctx.save();
                            this_1.ctx.translate(midX, midY);
                            this_1.ctx.transform(1, 0, 0, f, 0, 0);
                            this_1.ctx.translate(-midX, -midY);
                            this_1.ctx.fillRect(left, invF * (top_1 - midY) + midY, width, height * invF);
                            this_1.ctx.restore();
                          } else {
                            this_1.ctx.fill();
                          }
                        }
                      }

                      _f.label = 6;

                    case 6:
                      index--;
                      return [2
                      /*return*/
                      ];
                  }
                });
              };

              this_1 = this;
              _i = 0, _a = container.styles.backgroundImage.slice(0).reverse();
              _b.label = 1;

            case 1:
              if (!(_i < _a.length)) return [3
              /*break*/
              , 4];
              backgroundImage = _a[_i];
              return [5
              /*yield**/
              , _loop_1(backgroundImage)];

            case 2:
              _b.sent();

              _b.label = 3;

            case 3:
              _i++;
              return [3
              /*break*/
              , 1];

            case 4:
              return [2
              /*return*/
              ];
          }
        });
      });
    };

    CanvasRenderer.prototype.renderBorder = function (color, side, curvePoints) {
      return __awaiter(this, void 0, void 0, function () {
        return __generator(this, function (_a) {
          this.path(parsePathForBorder(curvePoints, side));
          this.ctx.fillStyle = asString(color);
          this.ctx.fill();
          return [2
          /*return*/
          ];
        });
      });
    };

    CanvasRenderer.prototype.renderNodeBackgroundAndBorders = function (paint) {
      return __awaiter(this, void 0, void 0, function () {
        var styles, hasBackground, borders, backgroundPaintingArea, side, _i, borders_1, border;

        var _this = this;

        return __generator(this, function (_a) {
          switch (_a.label) {
            case 0:
              this.applyEffects(paint.effects, 2
              /* BACKGROUND_BORDERS */
              );
              styles = paint.container.styles;
              hasBackground = !isTransparent(styles.backgroundColor) || styles.backgroundImage.length;
              borders = [{
                style: styles.borderTopStyle,
                color: styles.borderTopColor
              }, {
                style: styles.borderRightStyle,
                color: styles.borderRightColor
              }, {
                style: styles.borderBottomStyle,
                color: styles.borderBottomColor
              }, {
                style: styles.borderLeftStyle,
                color: styles.borderLeftColor
              }];
              backgroundPaintingArea = calculateBackgroundCurvedPaintingArea(getBackgroundValueForIndex(styles.backgroundClip, 0), paint.curves);
              if (!(hasBackground || styles.boxShadow.length)) return [3
              /*break*/
              , 2];
              this.ctx.save();
              this.path(backgroundPaintingArea);
              this.ctx.clip();

              if (!isTransparent(styles.backgroundColor)) {
                this.ctx.fillStyle = asString(styles.backgroundColor);
                this.ctx.fill();
              }

              return [4
              /*yield*/
              , this.renderBackgroundImage(paint.container)];

            case 1:
              _a.sent();

              this.ctx.restore();
              styles.boxShadow.slice(0).reverse().forEach(function (shadow) {
                _this.ctx.save();

                var borderBoxArea = calculateBorderBoxPath(paint.curves);
                var maskOffset = shadow.inset ? 0 : MASK_OFFSET;
                var shadowPaintingArea = transformPath(borderBoxArea, -maskOffset + (shadow.inset ? 1 : -1) * shadow.spread.number, (shadow.inset ? 1 : -1) * shadow.spread.number, shadow.spread.number * (shadow.inset ? -2 : 2), shadow.spread.number * (shadow.inset ? -2 : 2));

                if (shadow.inset) {
                  _this.path(borderBoxArea);

                  _this.ctx.clip();

                  _this.mask(shadowPaintingArea);
                } else {
                  _this.mask(borderBoxArea);

                  _this.ctx.clip();

                  _this.path(shadowPaintingArea);
                }

                _this.ctx.shadowOffsetX = shadow.offsetX.number + maskOffset;
                _this.ctx.shadowOffsetY = shadow.offsetY.number;
                _this.ctx.shadowColor = asString(shadow.color);
                _this.ctx.shadowBlur = shadow.blur.number;
                _this.ctx.fillStyle = shadow.inset ? asString(shadow.color) : 'rgba(0,0,0,1)';

                _this.ctx.fill();

                _this.ctx.restore();
              });
              _a.label = 2;

            case 2:
              side = 0;
              _i = 0, borders_1 = borders;
              _a.label = 3;

            case 3:
              if (!(_i < borders_1.length)) return [3
              /*break*/
              , 6];
              border = borders_1[_i];
              if (!(border.style !== BORDER_STYLE.NONE && !isTransparent(border.color))) return [3
              /*break*/
              , 5];
              return [4
              /*yield*/
              , this.renderBorder(border.color, side++, paint.curves)];

            case 4:
              _a.sent();

              _a.label = 5;

            case 5:
              _i++;
              return [3
              /*break*/
              , 3];

            case 6:
              return [2
              /*return*/
              ];
          }
        });
      });
    };

    CanvasRenderer.prototype.render = function (element) {
      return __awaiter(this, void 0, void 0, function () {
        var stack;
        return __generator(this, function (_a) {
          switch (_a.label) {
            case 0:
              if (this.options.backgroundColor) {
                this.ctx.fillStyle = asString(this.options.backgroundColor);
                this.ctx.fillRect(this.options.x - this.options.scrollX, this.options.y - this.options.scrollY, this.options.width, this.options.height);
              }

              stack = parseStackingContexts(element);
              return [4
              /*yield*/
              , this.renderStack(stack)];

            case 1:
              _a.sent();

              this.applyEffects([], 2
              /* BACKGROUND_BORDERS */
              );
              return [2
              /*return*/
              , this.canvas];
          }
        });
      });
    };

    return CanvasRenderer;
  }();

  var isTextInputElement = function isTextInputElement(container) {
    if (container instanceof TextareaElementContainer) {
      return true;
    } else if (container instanceof SelectElementContainer) {
      return true;
    } else if (container instanceof InputElementContainer && container.type !== RADIO && container.type !== CHECKBOX) {
      return true;
    }

    return false;
  };

  var calculateBackgroundCurvedPaintingArea = function calculateBackgroundCurvedPaintingArea(clip, curves) {
    switch (clip) {
      case BACKGROUND_CLIP.BORDER_BOX:
        return calculateBorderBoxPath(curves);

      case BACKGROUND_CLIP.CONTENT_BOX:
        return calculateContentBoxPath(curves);

      case BACKGROUND_CLIP.PADDING_BOX:
      default:
        return calculatePaddingBoxPath(curves);
    }
  };

  var canvasTextAlign = function canvasTextAlign(textAlign) {
    switch (textAlign) {
      case TEXT_ALIGN.CENTER:
        return 'center';

      case TEXT_ALIGN.RIGHT:
        return 'right';

      case TEXT_ALIGN.LEFT:
      default:
        return 'left';
    }
  };

  var ForeignObjectRenderer =
  /** @class */
  function () {
    function ForeignObjectRenderer(options) {
      this.canvas = options.canvas ? options.canvas : document.createElement('canvas');
      this.ctx = this.canvas.getContext('2d');
      this.options = options;
      this.canvas.width = Math.floor(options.width * options.scale);
      this.canvas.height = Math.floor(options.height * options.scale);
      this.canvas.style.width = options.width + "px";
      this.canvas.style.height = options.height + "px";
      this.ctx.scale(this.options.scale, this.options.scale);
      this.ctx.translate(-options.x + options.scrollX, -options.y + options.scrollY);
      Logger.getInstance(options.id).debug("EXPERIMENTAL ForeignObject renderer initialized (" + options.width + "x" + options.height + " at " + options.x + "," + options.y + ") with scale " + options.scale);
    }

    ForeignObjectRenderer.prototype.render = function (element) {
      return __awaiter(this, void 0, void 0, function () {
        var svg, img;
        return __generator(this, function (_a) {
          switch (_a.label) {
            case 0:
              svg = createForeignObjectSVG(Math.max(this.options.windowWidth, this.options.width) * this.options.scale, Math.max(this.options.windowHeight, this.options.height) * this.options.scale, this.options.scrollX * this.options.scale, this.options.scrollY * this.options.scale, element);
              return [4
              /*yield*/
              , loadSerializedSVG$1(svg)];

            case 1:
              img = _a.sent();

              if (this.options.backgroundColor) {
                this.ctx.fillStyle = asString(this.options.backgroundColor);
                this.ctx.fillRect(0, 0, this.options.width * this.options.scale, this.options.height * this.options.scale);
              }

              this.ctx.drawImage(img, -this.options.x * this.options.scale, -this.options.y * this.options.scale);
              return [2
              /*return*/
              , this.canvas];
          }
        });
      });
    };

    return ForeignObjectRenderer;
  }();

  var loadSerializedSVG$1 = function loadSerializedSVG$1(svg) {
    return new Promise(function (resolve, reject) {
      var img = new Image();

      img.onload = function () {
        resolve(img);
      };

      img.onerror = reject;
      img.src = "data:image/svg+xml;charset=utf-8," + encodeURIComponent(new XMLSerializer().serializeToString(svg));
    });
  };

  var _this = undefined;

  var parseColor$1 = function parseColor$1(value) {
    return color.parse(Parser.create(value).parseComponentValue());
  };

  var html2canvas = function html2canvas(element, options) {
    if (options === void 0) {
      options = {};
    }

    return renderElement(element, options);
  };

  CacheStorage.setContext(window);

  var renderElement = function renderElement(element, opts) {
    return __awaiter(_this, void 0, void 0, function () {
      var ownerDocument, defaultView, instanceName, _a, width, height, left, top, defaultResourceOptions, resourceOptions, defaultOptions, options, windowBounds, documentCloner, clonedElement, container, documentBackgroundColor, bodyBackgroundColor, bgColor, defaultBackgroundColor, backgroundColor, renderOptions, canvas, renderer, root, renderer;

      return __generator(this, function (_b) {
        switch (_b.label) {
          case 0:
            ownerDocument = element.ownerDocument;

            if (!ownerDocument) {
              throw new Error("Element is not attached to a Document");
            }

            defaultView = ownerDocument.defaultView;

            if (!defaultView) {
              throw new Error("Document is not attached to a Window");
            }

            instanceName = (Math.round(Math.random() * 1000) + Date.now()).toString(16);
            _a = isBodyElement(element) || isHTMLElement(element) ? parseDocumentSize(ownerDocument) : parseBounds(element), width = _a.width, height = _a.height, left = _a.left, top = _a.top;
            defaultResourceOptions = {
              allowTaint: false,
              imageTimeout: 15000,
              proxy: undefined,
              useCORS: false
            };
            resourceOptions = _assign({}, defaultResourceOptions, opts);
            defaultOptions = {
              backgroundColor: '#ffffff',
              cache: opts.cache ? opts.cache : CacheStorage.create(instanceName, resourceOptions),
              logging: true,
              removeContainer: true,
              foreignObjectRendering: false,
              scale: defaultView.devicePixelRatio || 1,
              windowWidth: defaultView.innerWidth,
              windowHeight: defaultView.innerHeight,
              scrollX: defaultView.pageXOffset,
              scrollY: defaultView.pageYOffset,
              x: left,
              y: top,
              width: Math.ceil(width),
              height: Math.ceil(height),
              id: instanceName
            };
            options = _assign({}, defaultOptions, resourceOptions, opts);
            windowBounds = new Bounds(options.scrollX, options.scrollY, options.windowWidth, options.windowHeight);
            Logger.create(instanceName);
            Logger.getInstance(instanceName).debug("Starting document clone");
            documentCloner = new DocumentCloner(element, {
              id: instanceName,
              onclone: options.onclone,
              ignoreElements: options.ignoreElements,
              inlineImages: options.foreignObjectRendering,
              copyStyles: options.foreignObjectRendering
            });
            clonedElement = documentCloner.clonedReferenceElement;

            if (!clonedElement) {
              return [2
              /*return*/
              , Promise.reject("Unable to find element in cloned iframe")];
            }

            return [4
            /*yield*/
            , documentCloner.toIFrame(ownerDocument, windowBounds)];

          case 1:
            container = _b.sent();
            documentBackgroundColor = ownerDocument.documentElement ? parseColor$1(getComputedStyle(ownerDocument.documentElement).backgroundColor) : COLORS.TRANSPARENT;
            bodyBackgroundColor = ownerDocument.body ? parseColor$1(getComputedStyle(ownerDocument.body).backgroundColor) : COLORS.TRANSPARENT;
            bgColor = opts.backgroundColor;
            defaultBackgroundColor = typeof bgColor === 'string' ? parseColor$1(bgColor) : 0xffffffff;
            backgroundColor = element === ownerDocument.documentElement ? isTransparent(documentBackgroundColor) ? isTransparent(bodyBackgroundColor) ? defaultBackgroundColor : bodyBackgroundColor : documentBackgroundColor : defaultBackgroundColor;
            renderOptions = {
              id: instanceName,
              cache: options.cache,
              backgroundColor: backgroundColor,
              scale: options.scale,
              x: options.x,
              y: options.y,
              scrollX: options.scrollX,
              scrollY: options.scrollY,
              width: options.width,
              height: options.height,
              windowWidth: options.windowWidth,
              windowHeight: options.windowHeight
            };
            if (!options.foreignObjectRendering) return [3
            /*break*/
            , 3];
            Logger.getInstance(instanceName).debug("Document cloned, using foreign object rendering");
            renderer = new ForeignObjectRenderer(renderOptions);
            return [4
            /*yield*/
            , renderer.render(clonedElement)];

          case 2:
            canvas = _b.sent();
            return [3
            /*break*/
            , 5];

          case 3:
            Logger.getInstance(instanceName).debug("Document cloned, using computed rendering");
            CacheStorage.attachInstance(options.cache);
            Logger.getInstance(instanceName).debug("Starting DOM parsing");
            root = parseTree(clonedElement);
            CacheStorage.detachInstance();

            if (backgroundColor === root.styles.backgroundColor) {
              root.styles.backgroundColor = COLORS.TRANSPARENT;
            }

            Logger.getInstance(instanceName).debug("Starting renderer");
            renderer = new CanvasRenderer(renderOptions);
            return [4
            /*yield*/
            , renderer.render(root)];

          case 4:
            canvas = _b.sent();
            _b.label = 5;

          case 5:
            if (options.removeContainer === true) {
              if (!cleanContainer(container)) {
                Logger.getInstance(instanceName).error("Cannot detach cloned iframe as it is not in the DOM anymore");
              }
            }

            Logger.getInstance(instanceName).debug("Finished rendering");
            Logger.destroy(instanceName);
            CacheStorage.destroy(instanceName);
            return [2
            /*return*/
            , canvas];
        }
      });
    });
  };

  var cleanContainer = function cleanContainer(container) {
    if (container.parentNode) {
      container.parentNode.removeChild(container);
      return true;
    }

    return false;
  };

  return html2canvas;
});

/***/ }),

/***/ "wZW7":
/*!***************************************************************************************************!*\
  !*** ./src/app/modules/dashboard/components/content-leaderboard/content-leaderboard.component.ts ***!
  \***************************************************************************************************/
/*! exports provided: ContentLeaderboardComponent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ContentLeaderboardComponent", function() { return ContentLeaderboardComponent; });
/* harmony import */ var lodash_es__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lodash-es */ "T89o");
/* harmony import */ var _sunbird_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @sunbird/core */ "q/PB");
/* harmony import */ var _sunbird_shared__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @sunbird/shared */ "btWG");
/* harmony import */ var _services_report_report_service__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../services/report/report.service */ "t7hn");
/* harmony import */ var chart_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! chart.js */ "MO+k");
/* harmony import */ var chart_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(chart_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _services_addusser_addusser_service__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../services/addusser/addusser.service */ "9r3v");






var ContentLeaderboardComponent = (function () {
    function ContentLeaderboardComponent(_httpService, reportService, searchService, toasterService, resourceService) {
        this._httpService = _httpService;
        this.reportService = reportService;
        this.searchService = searchService;
        this.toasterService = toasterService;
        this.resourceService = resourceService;
        this.organizationTab = true;
        this.userTab = true;
        this.filters = [];
        this.titleCity = '';
        this.cityList1 = [];
        this.cityList = [];
        this.userList = [];
        this.Graph_Data_List = [];
        this.noResult = true;
        this.strList = "";
        this.colsUser = [];
        this.colsUser2 = [];
        this.subOrgs = [];
        this.tableData = [];
        this.popupTitle = "Content wise Graphical Reports";
        this.selectedItems = [];
        this.addUserPopup = false;
        this.i = 0;
        this.hideme = [];
        this.Table_Data_List = [];
        this.L1_Root_list = [];
        this.L2_Root_list = [];
        this.strTxt = '';
        this.tooltip = '';
        this.rootOrgId = [];
    }
    ContentLeaderboardComponent.prototype.ngOnInit = function () {
        this.getOrgList();
        this.getContentData();
        this.colsUser = [
            { field: 'Rank', header: 'Rank', width: '50px' },
            { field: 'User_Name', header: 'Creator Name', width: '184px' },
            { field: 'Email', header: 'Email', width: '245px' },
            { field: 'Phone', header: 'Phone', },
            { field: 'organisation', header: 'Copyright', },
            { field: 'Root_Organisation', header: 'Root Organisation', },
            { field: 'Sub_Organisation', header: 'Sub Organisation', },
            { field: 'Total_Content', header: 'Total Content', },
        ];
    };
    ContentLeaderboardComponent.prototype.getOrgList = function () {
        var _this = this;
        this.cityList = [];
        var data = { "request": { "filters": { "isTenant": true, "status": 1 } } };
        this.reportService.getOrganizationName(data).subscribe(function (response) {
            if (lodash_es__WEBPACK_IMPORTED_MODULE_0__["get"](response, 'responseCode') === 'OK') {
                if (response.result.response.count > 0) {
                    _this.cityList = lodash_es__WEBPACK_IMPORTED_MODULE_0__["reject"](response.result.response.content, function (obj) { return lodash_es__WEBPACK_IMPORTED_MODULE_0__["isEmpty"](obj.orgName); });
                    _this.cityList.push({ "orgName": "---Select All---", "id": 0, "rootOrgId": "0" });
                    _this.sortArray(_this.cityList);
                }
            }
            else {
                _this.toasterService.error(_this.resourceService.messages.emsg.m0007);
            }
        }, function (err) {
            _this.toasterService.error(_this.resourceService.messages.emsg.m0007);
        });
    };
    ContentLeaderboardComponent.prototype.sortArray = function (arr) {
        arr.sort(function (a, b) {
            if (a.orgName < b.orgName)
                return -1;
            if (a.orgName > b.orgName)
                return 1;
            return 0;
        });
    };
    ContentLeaderboardComponent.prototype.getContentData = function () {
        var _this = this;
        this.subOrgs = [];
        this.selectedSubOrg = { "orgName": null, "id": 0, "rootOrgId": "0" };
        this.filters = [];
        this.titleCity = "NULP platform";
        if (!lodash_es__WEBPACK_IMPORTED_MODULE_0__["isEmpty"](this.selectedCity)) {
            this.filters = [lodash_es__WEBPACK_IMPORTED_MODULE_0__["get"](this.selectedCity, 'channel')];
            this.rootOrgId = [lodash_es__WEBPACK_IMPORTED_MODULE_0__["get"](this.selectedCity, 'id')];
            this.titleCity = lodash_es__WEBPACK_IMPORTED_MODULE_0__["get"](this.selectedCity, 'orgName');
            this.L1_Chart(null, null, null, null, "");
            this.Table_Data_List = [];
            this.Graph_Data_List = [];
            if (lodash_es__WEBPACK_IMPORTED_MODULE_0__["get"](this.selectedCity, 'id') == 0) {
                this.filters = [];
                this.rootOrgId = [];
                this.titleCity = "NULP platform";
            }
        }
        var data = {
            "request": {
                "query": "",
                "filters": { "status": ["Live"], "framework": ["nulp"], "channel": this.rootOrgId, "contentType": ["Course", 'Resource', 'Collection'] },
                "limit": "1000",
                "sort_by": { "lastUpdatedOn": "desc" },
                "fields": ["identifier", "creator", "organisation", "copyright",
                    "name", "contentType", "createdFor", "channel",
                    "board", "medium", "gradeLevel", "subject",
                    "lastUpdatedOn", "status", "createdBy",
                    "framework", "createdOn", "lastPublishedOn"]
            }
        };
        if (this.filters.length > 0) {
            var reqPayload = { "request": { "filters": { "channel": this.filters, "isTenant": false },
                    limit: 100, offset: 0 } };
            this.reportService.getOrganizationName(reqPayload).subscribe(function (response) {
                _this.subOrgs = response.result.response.content;
                _this.sortArray(_this.subOrgs);
                _this.subOrgs.unshift({ "orgName": "---Select All---", "id": 0, "rootOrgId": "0" });
            });
        }
        this.reportService.getContentCreationStaticsReport(data).subscribe(function (response) {
            if (lodash_es__WEBPACK_IMPORTED_MODULE_0__["get"](response, 'responseCode') === 'OK') {
                if (response.result.count > 0) {
                    var tableData = [];
                    var tempObj = lodash_es__WEBPACK_IMPORTED_MODULE_0__["cloneDeep"](response.result.content);
                    tableData = tempObj;
                    var self = _this;
                    var ChnlIds = [];
                    var UserIds = [];
                    ChnlIds = lodash_es__WEBPACK_IMPORTED_MODULE_0__["uniq"](lodash_es__WEBPACK_IMPORTED_MODULE_0__["map"](tempObj, 'channel'));
                    UserIds = lodash_es__WEBPACK_IMPORTED_MODULE_0__["uniq"](lodash_es__WEBPACK_IMPORTED_MODULE_0__["map"](tempObj, 'createdBy'));
                    var reqParam = { filters: { id: UserIds } };
                    _this.searchService.getUserList(reqParam).subscribe(function (response) {
                        _this.userList = [];
                        var userObj = lodash_es__WEBPACK_IMPORTED_MODULE_0__["cloneDeep"](response.result.response.content);
                        _this.userList = userObj;
                        var reqPayload = { "request": { "filters": { "id": ChnlIds, "isTenant": true } } };
                        _this.reportService.getOrganizationName(reqPayload).subscribe(function (response) {
                            _this.cityList1 = [];
                            var cityObj = lodash_es__WEBPACK_IMPORTED_MODULE_0__["cloneDeep"](response.result.response.content);
                            _this.cityList1 = cityObj;
                            _this.cityList1 = lodash_es__WEBPACK_IMPORTED_MODULE_0__["reject"](response.result.response.content, function (obj) { return lodash_es__WEBPACK_IMPORTED_MODULE_0__["isEmpty"](obj.orgName); });
                            _this.InitializeGraph(tableData);
                        });
                    });
                }
                else {
                    _this.noResultMessage = { 'messageText': 'messages.stmsg.m0131' };
                    _this.noResult = true;
                }
            }
            else {
                _this.toasterService.error(_this.resourceService.messages.emsg.m0007);
            }
        }, function (err) {
            _this.toasterService.error(_this.resourceService.messages.emsg.m0007);
        });
    };
    ContentLeaderboardComponent.prototype.InitializeGraph = function (C_List) {
        var _this = this;
        this.userList.forEach(function (element) {
            _this.cityList.forEach(function (element1) {
                if (element.organisations.length > 1) {
                    if ((element1.identifier == element.organisations[1].organisationId) &&
                        (element.rootOrgId != element.organisations[1].organisationId)) {
                        element.orgNameUser_new = element1.orgName;
                        element.orgTypeUser_new = 'Sub Organization';
                    }
                    else if (element.rootOrgId == element.organisations[1].organisationId) {
                        element.orgNameUser_new = element.organisations[0].orgName;
                        element.orgTypeUser_new = 'Sub Organization';
                    }
                    else {
                        element.orgNameUser_new = element.organisations[1].orgName;
                        element.orgTypeUser_new = 'Sub Organization';
                    }
                }
                else if (element.organisations.length == 1) {
                    element.orgNameUser_new = element.organisations[0].orgName;
                    element.orgTypeUser_new = 'Root  Organization';
                }
            });
        });
        this.Graph_Data_List = [];
        C_List.forEach(function (x) {
            var CityTraced = _this.cityList1.find(function (el) { return el.id === x.channel; });
            var UserTraced = _this.userList.find(function (el) { return el.id === x.createdBy; });
            _this.Graph_Data_List.push({
                "identifier": x.identifier,
                "copyright": x.copyright,
                "createdFor": x.createdFor,
                "creator": x.creator,
                "subject": x.subject,
                "channel": x.channel,
                "organisation": x.organisation,
                "RootOrgName_new_user": CityTraced["orgName"],
                "rootOrgName_new_city": UserTraced["rootOrgName"],
                "orgNameUser_new": UserTraced["orgNameUser_new"],
                "orgTypeUser_new": UserTraced["orgTypeUser_new"],
                "lastNameUser_new": UserTraced["lastName"],
                "email": UserTraced["email"],
                "maskedPhone": UserTraced["maskedPhone"],
                "createdBy": x.createdBy,
                "medium": x.medium,
                "name": x.name,
                "createdOn": x.createdOn,
                "objectType": x.objectType,
                "gradeLevel": x.gradeLevel,
                "framework": x.framework,
                "contentType": x.contentType,
                "Category": x.board,
                "lastPublishedOn": x.lastPublishedOn,
                "lastUpdatedOn": x.lastUpdatedOn,
                "status": x.status
            });
        });
        this.strList = JSON.stringify(this.Graph_Data_List);
        this.CreateLeaderBoardChart(this.Graph_Data_List);
    };
    ContentLeaderboardComponent.prototype.CreateLeaderBoardChart = function (ResultCT) {
        var _this = this;
        var L1_Name = [];
        var L1_Value = [];
        var L1_Filter = [];
        var L1_Colour = [];
        this.L1_Root_list = this.groupBy1(ResultCT, "creator");
        var leader = [];
        Object.keys(this.L1_Root_list).forEach(function (x) {
            var xx = _this.L1_Root_list[x];
            leader.push({
                "User_Name": x,
                "Email": xx[0].email,
                "Phone": xx[0].maskedPhone,
                "organisation": xx[0].organisation,
                "Root_Organisation": xx[0].rootOrgName_new_city,
                "Sub_Organisation": xx[0].orgNameUser_new,
                "Content_Data": _this.L1_Root_list[x],
                "Total_Content": _this.L1_Root_list[x].length,
            });
        });
        if (this.selectedSubOrg.rootOrgId != 0) {
            leader = leader.filter((function (obj) { return obj.Sub_Organisation === _this.selectedSubOrg.orgName; }));
        }
        var top10 = leader.sort(function (a, b) { return a.Total_Content < b.Total_Content ? 1 : -1; }).slice(0, 10);
        var Rank = 0;
        top10.forEach(function (y) {
            Rank++;
            L1_Name.push(y.User_Name);
            L1_Value.push(y.Total_Content);
            L1_Filter.push(y.User_Name);
            L1_Colour.push(_this.getRandomColorHex());
            y.Rank = Rank;
        });
        this.popupTitle = "List of Top 10 Content Creators in '" + this.titleCity + "'.";
        this.L1_Chart(L1_Name, L1_Value, L1_Filter, L1_Colour, "");
        this.Table_Data_List = top10;
    };
    ContentLeaderboardComponent.prototype.L1_Chart = function (L1_Name, L1_Value, L1_Filter, L1_Colour, L1_Title) {
        if (this.L1_Piechart) {
            this.L1_Piechart.destroy();
        }
        this.L1_Piechart = new chart_js__WEBPACK_IMPORTED_MODULE_4__["Chart"]('L1_Canvas', {
            type: 'bar',
            data: {
                labels: L1_Name,
                datasets: [{
                        data: L1_Value,
                        borderColor: L1_Filter,
                        borderSkipped: L1_Filter,
                        backgroundColor: L1_Colour,
                        borderWidth: 1,
                        fill: true
                    }
                ]
            },
            options: {
                tooltips: { mode: 'index' },
                title: { display: true, text: L1_Title, fontSize: 18, fontColor: "#111", },
                legend: { display: false, labels: { fontColor: "green", } },
                scales: {
                    xAxes: [{ scaleLabel: { display: true, labelString: 'Content Contributors' } }],
                    yAxes: [{ scaleLabel: { display: true, labelString: 'Content Count' } }],
                },
            }
        });
    };
    ContentLeaderboardComponent.prototype.getRandomColorHex = function () {
        var color = ["red", "green", "blue", "purple", "magenta", "aqua", "salmon", "darkgray", "pink", "coral"];
        this.i++;
        return "blue";
    };
    ContentLeaderboardComponent.prototype.groupBy1 = function (list, key) {
        return list.reduce(function (rv, x) {
            (rv[x[key]] = rv[x[key]] || []).push(x);
            return rv;
        }, {});
    };
    ;
    ContentLeaderboardComponent.prototype.onChangeSubOrg = function () {
        this.CreateLeaderBoardChart(this.Graph_Data_List);
    };
    return ContentLeaderboardComponent;
}());



/***/ })

}]);
//# sourceMappingURL=default~modules-dashboard-dashboard-module-ngfactory~modules-learn-course-consumption-module-ngfactory.js.map